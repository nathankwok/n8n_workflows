{
  "updatedAt": "2026-01-28T22:39:59.231Z",
  "createdAt": "2025-12-20T02:14:15.837Z",
  "id": "4cCsYYYaNoTNWB3U",
  "name": "Board_Deck_Takeaways",
  "active": true,
  "isArchived": false,
  "nodes": [
    {
      "parameters": {},
      "id": "trigger1",
      "name": "When clicking 'Execute workflow'",
      "type": "n8n-nodes-base.manualTrigger",
      "typeVersion": 1,
      "position": [
        48,
        1136
      ]
    },
    {
      "parameters": {
        "mode": "raw",
        "jsonOutput": "{\n  \"b7fc410d-6cd1-4f25-bfb2-8f46d4753443\": [\n    {\n      \"document_query_name\": \"Service Plan Breakdown New Business\",\n      \"query\": {\n        \"limit\": 1000,\n        \"sorts\": [],\n        \"table\": \"sales__opportunity\",\n        \"fields\": [\n          \"sales__accounts.account_name\",\n          \"sales__opportunity.opportunity_name\",\n          \"sales__accounts.owner_name\",\n          \"sales__opportunity.forecast\",\n          \"sales__opportunity.stage_name\",\n          \"sales__opportunity.record_type\",\n          \"sales__opportunity.new_arr_derived\",\n          \"sales__opportunity.close_date\"\n        ],\n        \"pivots\": [],\n        \"dbtMode\": false,\n        \"filters\": {\n          \"sales__opportunity.close_date\": {\n            \"type\": \"composite\",\n            \"filters\": [\n              {\n                \"kind\": \"TIME_FOR_UNIT_DURATION\",\n                \"type\": \"date\",\n                \"left_side\": \"FY2026 Q2\"\n              },\n              {\n                \"kind\": \"TIME_FOR_INTERVAL_DURATION\",\n                \"type\": \"date\",\n                \"left_side\": \"6 complete fiscal quarters ago\",\n                \"right_side\": \"6 quarters\",\n                \"is_negative\": false,\n                \"ignore_if_unjoinable\": true\n              }\n            ],\n            \"conjunction\": \"AND\",\n            \"is_negative\": false\n          },\n          \"sales__opportunity.stage_name\": {\n            \"kind\": \"EQUALS\",\n            \"type\": \"string\",\n            \"values\": [\n              \"7. Closed Won\"\n            ],\n            \"is_negative\": false,\n            \"ignore_if_unjoinable\": true\n          },\n          \"sales__opportunity.new_arr_derived\": {\n            \"kind\": \"GREATER_THAN\",\n            \"type\": \"number\",\n            \"values\": [\n              \"50000\"\n            ],\n            \"is_negative\": false,\n            \"is_inclusive\": true,\n            \"ignore_if_unjoinable\": true\n          },\n          \"sales__opportunity.record_type_rolled_up_\": {\n            \"kind\": \"EQUALS\",\n            \"type\": \"string\",\n            \"values\": [\n              \"New\"\n            ],\n            \"is_negative\": false\n          },\n          \"sales__opportunity.service_deployment_type\": {\n            \"kind\": \"EQUALS\",\n            \"type\": \"string\",\n            \"values\": [\n              \"Cribl PS\"\n            ]\n          }\n        },\n        \"modelId\": \"72057df2-f152-424b-b9a9-6140a8a3d98d\",\n        \"version\": 8,\n        \"controls\": [],\n        \"rewriteSql\": true,\n        \"row_totals\": {},\n        \"fill_fields\": [],\n        \"calculations\": [],\n        \"column_limit\": 50,\n        \"join_via_map\": {},\n        \"column_totals\": {},\n        \"userEditedSQL\": \"\",\n        \"dimensionIndex\": 0,\n        \"default_group_by\": true,\n        \"custom_summary_types\": {},\n        \"join_paths_from_topic_name\": \"opportunity\"\n      },\n      \"sql\": \"SELECT \\\"sales__accounts\\\".\\\"ACCOUNT_NAME\\\" AS \\\"sales__accounts.account_name\\\",\\n    \\\"sales__opportunity\\\".\\\"OPPORTUNITY_NAME\\\" AS \\\"sales__opportunity.opportunity_name\\\",\\n    \\\"sales__accounts\\\".\\\"OWNER_NAME\\\" AS \\\"sales__accounts.owner_name\\\",\\n    \\\"sales__opportunity\\\".\\\"FORECAST\\\" AS \\\"sales__opportunity.forecast\\\",\\n    \\\"sales__opportunity\\\".\\\"STAGE_NAME\\\" AS \\\"sales__opportunity.stage_name\\\",\\n    \\\"sales__opportunity\\\".\\\"RECORD_TYPE\\\" AS \\\"sales__opportunity.record_type\\\",\\n    \\\"sales__opportunity\\\".\\\"NEW_ARR_DERIVED\\\" AS \\\"sales__opportunity.new_arr_derived\\\",\\n    \\\"sales__opportunity\\\".\\\"CLOSE_DATE\\\" AS \\\"sales__opportunity.close_date__raw\\\",\\n    \\\"sales__accounts\\\".\\\"ACCOUNT_ID\\\" AS \\\"sales__accounts.account_id\\\",\\n    \\\"sales__opportunity\\\".\\\"OPPORTUNITY_ID\\\" AS \\\"sales__opportunity.opportunity_id\\\",\\n    TO_CHAR(\\\"sales__opportunity\\\".\\\"CLOSE_DATE\\\", 'YYYY-MM-DD') AS \\\"sales__opportunity.close_date\\\"\\nFROM \\\"SALES\\\".\\\"OPPORTUNITY\\\" AS \\\"sales__opportunity\\\"\\n    LEFT JOIN \\\"SALES\\\".\\\"ACCOUNTS\\\" AS \\\"sales__accounts\\\" ON \\\"sales__opportunity\\\".\\\"ACCOUNT_ID\\\" = \\\"sales__accounts\\\".\\\"ACCOUNT_ID\\\"\\nWHERE \\\"sales__opportunity\\\".\\\"CLOSE_DATE\\\" >= CAST(TIMESTAMP '2025-05-01 00:00:00' AS DATE) AND \\\"sales__opportunity\\\".\\\"CLOSE_DATE\\\" < CAST((DATE_TRUNC('QUARTER', ((TIMESTAMP '2025-05-01 00:00:00' + INTERVAL '3 month') + INTERVAL '2 month')) + INTERVAL '-2 month') AS DATE) AND (\\\"sales__opportunity\\\".\\\"CLOSE_DATE\\\" >= CAST((DATE_TRUNC('QUARTER', ((CAST(CURRENT_TIMESTAMP AS TIMESTAMP(0)) + INTERVAL '-18 month') + INTERVAL '2 month')) + INTERVAL '-2 month') AS DATE) AND \\\"sales__opportunity\\\".\\\"CLOSE_DATE\\\" < CAST((DATE_TRUNC('QUARTER', (((DATE_TRUNC('QUARTER', ((CAST(CURRENT_TIMESTAMP AS TIMESTAMP(0)) + INTERVAL '-18 month') + INTERVAL '2 month')) + INTERVAL '-2 month') + INTERVAL '18 month') + INTERVAL '2 month')) + INTERVAL '-2 month') AS DATE)) AND (\\\"sales__opportunity\\\".\\\"STAGE_NAME\\\" = '7. Closed Won' AND \\\"sales__opportunity\\\".\\\"NEW_ARR_DERIVED\\\" >= 50000 AND (CASE\\n        WHEN \\\"sales__opportunity\\\".\\\"RECORD_TYPE\\\" = 'New' THEN 'New'\\n        WHEN \\\"sales__opportunity\\\".\\\"RECORD_TYPE\\\" IN ('Upsell', 'Expansion', 'Renewal+Upsell') THEN 'Upsell'\\n        ELSE \\\"sales__opportunity\\\".\\\"RECORD_TYPE\\\"\\n    END = 'New' AND CASE\\n        WHEN \\\"sales__opportunity\\\".\\\"WHO_IS_DEPLOYING_CUSTOMER\\\" IN ('Cribl PS on deal', 'Cribl PS on separate deal') THEN 'Cribl PS'\\n        WHEN \\\"sales__opportunity\\\".\\\"WHO_IS_DEPLOYING_CUSTOMER\\\" IN ('Service Partner', 'Service Partner + Cribl PS') THEN 'Service Partner'\\n        ELSE 'Self Deployment'\\n    END = 'Cribl PS'))\\nGROUP BY 9, 1, 3, 8, 4, 7, 10, 2, 6, 5\\nLIMIT 1000\",\n      \"drill_name\": \"count_opps\"\n    }\n  ],\n  \"0bdb4f3c-7811-4b6d-b8de-ed515fc500b4\": [\n    {\n      \"document_query_name\": \"Service Plan Breakdown Incremental Business\",\n      \"drill_name\": \"count_opps\",\n      \"query\": {\n        \"limit\": 1000,\n        \"sorts\": [],\n        \"table\": \"sales__opportunity\",\n        \"fields\": [\n          \"sales__accounts.account_name\",\n          \"sales__opportunity.opportunity_name\",\n          \"sales__accounts.owner_name\",\n          \"sales__opportunity.forecast\",\n          \"sales__opportunity.stage_name\",\n          \"sales__opportunity.record_type\",\n          \"sales__opportunity.new_arr_derived\",\n          \"sales__opportunity.close_date\"\n        ],\n        \"pivots\": [],\n        \"dbtMode\": false,\n        \"filters\": {\n          \"sales__opportunity.close_date\": {\n            \"type\": \"composite\",\n            \"filters\": [\n              {\n                \"kind\": \"TIME_FOR_UNIT_DURATION\",\n                \"type\": \"date\",\n                \"left_side\": \"FY2025 Q4\"\n              },\n              {\n                \"kind\": \"TIME_FOR_INTERVAL_DURATION\",\n                \"type\": \"date\",\n                \"left_side\": \"6 complete fiscal quarters ago\",\n                \"right_side\": \"6 quarters\",\n                \"is_negative\": false,\n                \"ignore_if_unjoinable\": true\n              }\n            ],\n            \"conjunction\": \"AND\",\n            \"is_negative\": false\n          },\n          \"sales__opportunity.stage_name\": {\n            \"kind\": \"EQUALS\",\n            \"type\": \"string\",\n            \"values\": [\n              \"7. Closed Won\"\n            ],\n            \"is_negative\": false,\n            \"ignore_if_unjoinable\": true\n          },\n          \"sales__opportunity.new_arr_derived\": {\n            \"kind\": \"GREATER_THAN\",\n            \"type\": \"number\",\n            \"values\": [\n              \"50000\"\n            ],\n            \"is_negative\": false,\n            \"is_inclusive\": true,\n            \"ignore_if_unjoinable\": true\n          },\n          \"sales__opportunity.record_type_rolled_up_\": {\n            \"kind\": \"EQUALS\",\n            \"type\": \"string\",\n            \"values\": [\n              \"New\"\n            ],\n            \"is_negative\": true\n          },\n          \"sales__opportunity.service_deployment_type\": {\n            \"kind\": \"EQUALS\",\n            \"type\": \"string\",\n            \"values\": [\n              \"Service Partner\"\n            ]\n          }\n        },\n        \"modelId\": \"ab2e49da-abca-4b79-8b31-3e680e503495\",\n        \"version\": 8,\n        \"controls\": [],\n        \"rewriteSql\": true,\n        \"row_totals\": {},\n        \"fill_fields\": [],\n        \"calculations\": [],\n        \"column_limit\": 50,\n        \"join_via_map\": {},\n        \"column_totals\": {},\n        \"userEditedSQL\": \"\",\n        \"dimensionIndex\": 0,\n        \"default_group_by\": true,\n        \"custom_summary_types\": {},\n        \"join_paths_from_topic_name\": \"opportunity\"\n      },\n      \"sql\": \"SELECT \\\"sales__accounts\\\".\\\"ACCOUNT_NAME\\\" AS \\\"sales__accounts.account_name\\\",\\n    \\\"sales__opportunity\\\".\\\"OPPORTUNITY_NAME\\\" AS \\\"sales__opportunity.opportunity_name\\\",\\n    \\\"sales__accounts\\\".\\\"OWNER_NAME\\\" AS \\\"sales__accounts.owner_name\\\",\\n    \\\"sales__opportunity\\\".\\\"FORECAST\\\" AS \\\"sales__opportunity.forecast\\\",\\n    \\\"sales__opportunity\\\".\\\"STAGE_NAME\\\" AS \\\"sales__opportunity.stage_name\\\",\\n    \\\"sales__opportunity\\\".\\\"RECORD_TYPE\\\" AS \\\"sales__opportunity.record_type\\\",\\n    \\\"sales__opportunity\\\".\\\"NEW_ARR_DERIVED\\\" AS \\\"sales__opportunity.new_arr_derived\\\",\\n    \\\"sales__opportunity\\\".\\\"CLOSE_DATE\\\" AS \\\"sales__opportunity.close_date__raw\\\",\\n    \\\"sales__accounts\\\".\\\"ACCOUNT_ID\\\" AS \\\"sales__accounts.account_id\\\",\\n    \\\"sales__opportunity\\\".\\\"OPPORTUNITY_ID\\\" AS \\\"sales__opportunity.opportunity_id\\\",\\n    TO_CHAR(\\\"sales__opportunity\\\".\\\"CLOSE_DATE\\\", 'YYYY-MM-DD') AS \\\"sales__opportunity.close_date\\\"\\nFROM \\\"SALES\\\".\\\"OPPORTUNITY\\\" AS \\\"sales__opportunity\\\"\\n    LEFT JOIN \\\"SALES\\\".\\\"ACCOUNTS\\\" AS \\\"sales__accounts\\\" ON \\\"sales__opportunity\\\".\\\"ACCOUNT_ID\\\" = \\\"sales__accounts\\\".\\\"ACCOUNT_ID\\\"\\nWHERE \\\"sales__opportunity\\\".\\\"CLOSE_DATE\\\" >= CAST(TIMESTAMP '2024-11-01 00:00:00' AS DATE) AND \\\"sales__opportunity\\\".\\\"CLOSE_DATE\\\" < CAST((DATE_TRUNC('QUARTER', ((TIMESTAMP '2024-11-01 00:00:00' + INTERVAL '3 month') + INTERVAL '2 month')) + INTERVAL '-2 month') AS DATE) AND (\\\"sales__opportunity\\\".\\\"CLOSE_DATE\\\" >= CAST((DATE_TRUNC('QUARTER', ((CAST(CURRENT_TIMESTAMP AS TIMESTAMP(0)) + INTERVAL '-18 month') + INTERVAL '2 month')) + INTERVAL '-2 month') AS DATE) AND \\\"sales__opportunity\\\".\\\"CLOSE_DATE\\\" < CAST((DATE_TRUNC('QUARTER', (((DATE_TRUNC('QUARTER', ((CAST(CURRENT_TIMESTAMP AS TIMESTAMP(0)) + INTERVAL '-18 month') + INTERVAL '2 month')) + INTERVAL '-2 month') + INTERVAL '18 month') + INTERVAL '2 month')) + INTERVAL '-2 month') AS DATE)) AND (\\\"sales__opportunity\\\".\\\"STAGE_NAME\\\" = '7. Closed Won' AND \\\"sales__opportunity\\\".\\\"NEW_ARR_DERIVED\\\" >= 50000 AND ((NOT CASE\\n        WHEN \\\"sales__opportunity\\\".\\\"RECORD_TYPE\\\" = 'New' THEN 'New'\\n        WHEN \\\"sales__opportunity\\\".\\\"RECORD_TYPE\\\" IN ('Upsell', 'Expansion', 'Renewal+Upsell') THEN 'Upsell'\\n        ELSE \\\"sales__opportunity\\\".\\\"RECORD_TYPE\\\"\\n    END = 'New' OR CASE\\n        WHEN \\\"sales__opportunity\\\".\\\"RECORD_TYPE\\\" = 'New' THEN 'New'\\n        WHEN \\\"sales__opportunity\\\".\\\"RECORD_TYPE\\\" IN ('Upsell', 'Expansion', 'Renewal+Upsell') THEN 'Upsell'\\n        ELSE \\\"sales__opportunity\\\".\\\"RECORD_TYPE\\\"\\n    END IS NULL) AND CASE\\n        WHEN \\\"sales__opportunity\\\".\\\"WHO_IS_DEPLOYING_CUSTOMER\\\" IN ('Cribl PS on deal', 'Cribl PS on separate deal') THEN 'Cribl PS'\\n        WHEN \\\"sales__opportunity\\\".\\\"WHO_IS_DEPLOYING_CUSTOMER\\\" IN ('Service Partner', 'Service Partner + Cribl PS') THEN 'Service Partner'\\n        ELSE 'Self Deployment'\\n    END = 'Service Partner'))\\nGROUP BY 9, 1, 3, 8, 4, 7, 10, 2, 6, 5\\nLIMIT 1000\"\n    }\n  ],\n  \"551e19e0-6d32-4a5e-9a93-ac81cb486d88\": [\n    {\n      \"drill_name\": \"lake_customers\",\n      \"query\": {\n        \"limit\": 1000,\n        \"sorts\": [],\n        \"table\": \"product__adoption\",\n        \"fields\": [\n          \"product__adoption.customer_name\",\n          \"product__adoption.products_adopted\",\n          \"product__adoption.total_cloud_stream_in_gb_30d\",\n          \"product__adoption.total_cloud_edge_in_gb_30d\",\n          \"product__adoption.total_cloud_edge_nodes_30d\",\n          \"product__adoption.total_cloud_completed_searches_30d\",\n          \"product__adoption.total_software_stream_in_gb_30d\",\n          \"product__adoption.total_software_edge_nodes_30d\",\n          \"product__adoption.total_software_edge_in_gb_30d\",\n          \"product__adoption.lake_gbs_customer_data_max\",\n          \"product__adoption.total_connected_billable_stream_in_gb_30d\",\n          \"product__adoption.total_connected_billable_edge_in_gb_30d\"\n        ],\n        \"pivots\": [],\n        \"dbtMode\": false,\n        \"filters\": {\n          \"product__adoption.date\": {\n            \"type\": \"composite\",\n            \"filters\": [\n              {\n                \"kind\": \"TIME_FOR_UNIT_DURATION\",\n                \"type\": \"date\",\n                \"left_side\": \"FY2026 Q3\"\n              },\n              {\n                \"kind\": \"TIME_FOR_INTERVAL_DURATION\",\n                \"type\": \"date\",\n                \"left_side\": \"6 complete fiscal quarters ago\",\n                \"right_side\": \"6 quarters\",\n                \"is_negative\": false\n              }\n            ],\n            \"conjunction\": \"AND\",\n            \"is_negative\": false\n          },\n          \"product__adoption.adopt_lake\": {\n            \"type\": \"boolean\",\n            \"is_negative\": false,\n            \"treat_nulls_as_false\": false\n          },\n          \"product__adoption.is_last_day_of_fq\": {\n            \"type\": \"boolean\",\n            \"is_negative\": false,\n            \"treat_nulls_as_false\": false\n          }\n        },\n        \"modelId\": \"a71397ca-7baa-4641-8ae9-898781b9814c\",\n        \"version\": 8,\n        \"controls\": [],\n        \"rewriteSql\": true,\n        \"row_totals\": {},\n        \"fill_fields\": [],\n        \"calculations\": [],\n        \"column_limit\": 50,\n        \"join_via_map\": {},\n        \"column_totals\": {},\n        \"userEditedSQL\": \"\",\n        \"dimensionIndex\": 0,\n        \"default_group_by\": true,\n        \"custom_summary_types\": {},\n        \"join_paths_from_topic_name\": \"adoption\"\n      },\n      \"sql\": \"SELECT \\\"product__adoption\\\".\\\"CUSTOMER_NAME\\\" AS \\\"product__adoption.customer_name\\\",\\n    CASE\\n        WHEN CASE\\n            WHEN \\\"product__adoption\\\".\\\"ADOPT_ONPREM_STREAM\\\" = 1 THEN TRUE\\n            ELSE FALSE\\n        END = 1 THEN 'Software Stream, '\\n        ELSE ''\\n    END || CASE\\n        WHEN CASE\\n            WHEN \\\"product__adoption\\\".\\\"ADOPT_ONPREM_EDGE\\\" = 1 THEN TRUE\\n            ELSE FALSE\\n        END = 1 THEN 'Software Edge, '\\n        ELSE ''\\n    END || CASE\\n        WHEN CASE\\n            WHEN \\\"product__adoption\\\".\\\"ADOPT_CLOUD_STREAM\\\" = 1 THEN TRUE\\n            ELSE FALSE\\n        END = 1 THEN 'Cloud Stream, '\\n        ELSE ''\\n    END || CASE\\n        WHEN CASE\\n            WHEN \\\"product__adoption\\\".\\\"ADOPT_CLOUD_EDGE\\\" = 1 THEN TRUE\\n            ELSE FALSE\\n        END = 1 THEN 'Cloud Edge, '\\n        ELSE ''\\n    END || CASE\\n        WHEN CASE\\n            WHEN \\\"product__adoption\\\".\\\"ADOPT_SEARCH\\\" = 1 THEN TRUE\\n            ELSE FALSE\\n        END = 1 THEN 'Cloud Search, '\\n        ELSE ''\\n    END || CASE\\n        WHEN CASE\\n            WHEN \\\"product__adoption\\\".\\\"ADOPT_LAKE\\\" = 1 THEN TRUE\\n            ELSE FALSE\\n        END = 1 THEN 'Cloud Lake'\\n        ELSE ''\\n    END AS \\\"product__adoption.products_adopted\\\",\\n    COALESCE(SUM(\\\"product__adoption\\\".\\\"CLOUD_STREAM_IN_BYTES_30D\\\" / 1024 / 1024 / 1024), 0) AS \\\"product__adoption.total_cloud_stream_in_gb_30d\\\",\\n    COALESCE(SUM(\\\"product__adoption\\\".\\\"CLOUD_EDGE_IN_BYTES_30D\\\" / 1024 / 1024 / 1024), 0) AS \\\"product__adoption.total_cloud_edge_in_gb_30d\\\",\\n    COALESCE(SUM(\\\"product__adoption\\\".\\\"CLOUD_EDGE_NODES_30D\\\"), 0) AS \\\"product__adoption.total_cloud_edge_nodes_30d\\\",\\n    COALESCE(SUM(\\\"product__adoption\\\".\\\"CLOUD_COMPLETED_SEARCHES_30D\\\"), 0) AS \\\"product__adoption.total_cloud_completed_searches_30d\\\",\\n    COALESCE(SUM(\\\"product__adoption\\\".\\\"ONPREM_STREAM_IN_BYTES_30D\\\" / 1024 / 1024 / 1024), 0) AS \\\"product__adoption.total_software_stream_in_gb_30d\\\",\\n    COALESCE(SUM(\\\"product__adoption\\\".\\\"ONPREM_EDGE_NODES_30D\\\"), 0) AS \\\"product__adoption.total_software_edge_nodes_30d\\\",\\n    COALESCE(SUM(\\\"product__adoption\\\".\\\"ONPREM_EDGE_IN_BYTES_30D\\\" / 1024 / 1024 / 1024), 0) AS \\\"product__adoption.total_software_edge_in_gb_30d\\\",\\n    COALESCE(SUM(\\\"product__adoption\\\".\\\"LAKE_GBS_CUSTOMER_DATA\\\"), 0) AS \\\"product__adoption.lake_gbs_customer_data_max\\\",\\n    COALESCE(SUM(\\\"product__adoption\\\".\\\"CONNECTED_BILLABLE_STREAM_IN_BYTES_30D\\\" / 1024 / 1024 / 1024), 0) AS \\\"product__adoption.total_connected_billable_stream_in_gb_30d\\\",\\n    COALESCE(SUM(\\\"product__adoption\\\".\\\"CONNECTED_BILLABLE_EDGE_IN_BYTES_30D\\\" / 1024 / 1024 / 1024), 0) AS \\\"product__adoption.total_connected_billable_edge_in_gb_30d\\\"\\nFROM \\\"PRODUCT\\\".\\\"ADOPTION\\\" AS \\\"product__adoption\\\"\\n    LEFT JOIN \\\"UTIL\\\".\\\"DATES\\\" AS \\\"util__dates\\\" ON \\\"product__adoption\\\".\\\"DATE\\\" = \\\"util__dates\\\".\\\"DATE_ACTUAL\\\"\\nWHERE \\\"product__adoption\\\".\\\"DATE\\\" >= CAST(TIMESTAMP '2025-08-01 00:00:00' AS DATE) AND (\\\"product__adoption\\\".\\\"DATE\\\" < CAST((DATE_TRUNC('QUARTER', ((TIMESTAMP '2025-08-01 00:00:00' + INTERVAL '3 month') + INTERVAL '2 month')) + INTERVAL '-2 month') AS DATE) AND \\\"product__adoption\\\".\\\"DATE\\\" >= CAST((DATE_TRUNC('QUARTER', ((CAST(CURRENT_TIMESTAMP AS TIMESTAMP(0)) + INTERVAL '-18 month') + INTERVAL '2 month')) + INTERVAL '-2 month') AS DATE)) AND (\\\"product__adoption\\\".\\\"DATE\\\" < CAST((DATE_TRUNC('QUARTER', (((DATE_TRUNC('QUARTER', ((CAST(CURRENT_TIMESTAMP AS TIMESTAMP(0)) + INTERVAL '-18 month') + INTERVAL '2 month')) + INTERVAL '-2 month') + INTERVAL '18 month') + INTERVAL '2 month')) + INTERVAL '-2 month') AS DATE) AND (CASE\\n        WHEN \\\"product__adoption\\\".\\\"ADOPT_LAKE\\\" = 1 THEN TRUE\\n        ELSE FALSE\\n    END AND CASE\\n        WHEN \\\"product__adoption\\\".\\\"DATE\\\" = \\\"util__dates\\\".\\\"LAST_DAY_OF_FISCAL_QUARTER\\\" THEN TRUE\\n        WHEN DATEDIFF(DAY, \\\"product__adoption\\\".\\\"DATE\\\", CURRENT_DATE) = 1 THEN TRUE\\n        ELSE FALSE\\n    END))\\nGROUP BY 1, 2\\nLIMIT 1000\"\n    },\n    {\n      \"drill_name\": \"max_lake_gbs_customer_data\",\n      \"query\": {\n        \"limit\": 1000,\n        \"sorts\": [\n          {\n            \"column_name\": \"product__adoption.lake_gbs_customer_data_max\",\n            \"sort_descending\": true\n          }\n        ],\n        \"table\": \"product__adoption\",\n        \"fields\": [\n          \"product__adoption.customer_name\",\n          \"product__adoption.products_adopted\",\n          \"product__adoption.total_cloud_stream_in_gb_30d\",\n          \"product__adoption.total_cloud_edge_in_gb_30d\",\n          \"product__adoption.total_cloud_edge_nodes_30d\",\n          \"product__adoption.total_cloud_completed_searches_30d\",\n          \"product__adoption.total_software_stream_in_gb_30d\",\n          \"product__adoption.total_software_edge_nodes_30d\",\n          \"product__adoption.total_software_edge_in_gb_30d\",\n          \"product__adoption.lake_gbs_customer_data_max\",\n          \"product__adoption.total_connected_billable_stream_in_gb_30d\",\n          \"product__adoption.total_connected_billable_edge_in_gb_30d\"\n        ],\n        \"pivots\": [],\n        \"dbtMode\": false,\n        \"filters\": {\n          \"product__adoption.date\": {\n            \"type\": \"composite\",\n            \"filters\": [\n              {\n                \"kind\": \"TIME_FOR_UNIT_DURATION\",\n                \"type\": \"date\",\n                \"left_side\": \"FY2026 Q3\"\n              },\n              {\n                \"kind\": \"TIME_FOR_INTERVAL_DURATION\",\n                \"type\": \"date\",\n                \"left_side\": \"6 complete fiscal quarters ago\",\n                \"right_side\": \"6 quarters\",\n                \"is_negative\": false\n              }\n            ],\n            \"conjunction\": \"AND\",\n            \"is_negative\": false\n          },\n          \"product__adoption.is_last_day_of_fq\": {\n            \"type\": \"boolean\",\n            \"is_negative\": false,\n            \"treat_nulls_as_false\": false\n          }\n        },\n        \"modelId\": \"558ca1ef-61d7-48dd-8221-44b1d22ec9dd\",\n        \"version\": 8,\n        \"controls\": [],\n        \"manualSort\": true,\n        \"rewriteSql\": true,\n        \"row_totals\": {},\n        \"fill_fields\": [],\n        \"calculations\": [],\n        \"column_limit\": 50,\n        \"join_via_map\": {},\n        \"column_totals\": {},\n        \"userEditedSQL\": \"\",\n        \"dimensionIndex\": 0,\n        \"default_group_by\": true,\n        \"custom_summary_types\": {},\n        \"join_paths_from_topic_name\": \"adoption\"\n      },\n      \"sql\": \"SELECT \\\"product__adoption\\\".\\\"CUSTOMER_NAME\\\" AS \\\"product__adoption.customer_name\\\",\\n    CASE\\n        WHEN CASE\\n            WHEN \\\"product__adoption\\\".\\\"ADOPT_ONPREM_STREAM\\\" = 1 THEN TRUE\\n            ELSE FALSE\\n        END = 1 THEN 'Software Stream, '\\n        ELSE ''\\n    END || CASE\\n        WHEN CASE\\n            WHEN \\\"product__adoption\\\".\\\"ADOPT_ONPREM_EDGE\\\" = 1 THEN TRUE\\n            ELSE FALSE\\n        END = 1 THEN 'Software Edge, '\\n        ELSE ''\\n    END || CASE\\n        WHEN CASE\\n            WHEN \\\"product__adoption\\\".\\\"ADOPT_CLOUD_STREAM\\\" = 1 THEN TRUE\\n            ELSE FALSE\\n        END = 1 THEN 'Cloud Stream, '\\n        ELSE ''\\n    END || CASE\\n        WHEN CASE\\n            WHEN \\\"product__adoption\\\".\\\"ADOPT_CLOUD_EDGE\\\" = 1 THEN TRUE\\n            ELSE FALSE\\n        END = 1 THEN 'Cloud Edge, '\\n        ELSE ''\\n    END || CASE\\n        WHEN CASE\\n            WHEN \\\"product__adoption\\\".\\\"ADOPT_SEARCH\\\" = 1 THEN TRUE\\n            ELSE FALSE\\n        END = 1 THEN 'Cloud Search, '\\n        ELSE ''\\n    END || CASE\\n        WHEN CASE\\n            WHEN \\\"product__adoption\\\".\\\"ADOPT_LAKE\\\" = 1 THEN TRUE\\n            ELSE FALSE\\n        END = 1 THEN 'Cloud Lake'\\n        ELSE ''\\n    END AS \\\"product__adoption.products_adopted\\\",\\n    COALESCE(SUM(\\\"product__adoption\\\".\\\"CLOUD_STREAM_IN_BYTES_30D\\\" / 1024 / 1024 / 1024), 0) AS \\\"product__adoption.total_cloud_stream_in_gb_30d\\\",\\n    COALESCE(SUM(\\\"product__adoption\\\".\\\"CLOUD_EDGE_IN_BYTES_30D\\\" / 1024 / 1024 / 1024), 0) AS \\\"product__adoption.total_cloud_edge_in_gb_30d\\\",\\n    COALESCE(SUM(\\\"product__adoption\\\".\\\"CLOUD_EDGE_NODES_30D\\\"), 0) AS \\\"product__adoption.total_cloud_edge_nodes_30d\\\",\\n    COALESCE(SUM(\\\"product__adoption\\\".\\\"CLOUD_COMPLETED_SEARCHES_30D\\\"), 0) AS \\\"product__adoption.total_cloud_completed_searches_30d\\\",\\n    COALESCE(SUM(\\\"product__adoption\\\".\\\"ONPREM_STREAM_IN_BYTES_30D\\\" / 1024 / 1024 / 1024), 0) AS \\\"product__adoption.total_software_stream_in_gb_30d\\\",\\n    COALESCE(SUM(\\\"product__adoption\\\".\\\"ONPREM_EDGE_NODES_30D\\\"), 0) AS \\\"product__adoption.total_software_edge_nodes_30d\\\",\\n    COALESCE(SUM(\\\"product__adoption\\\".\\\"ONPREM_EDGE_IN_BYTES_30D\\\" / 1024 / 1024 / 1024), 0) AS \\\"product__adoption.total_software_edge_in_gb_30d\\\",\\n    COALESCE(SUM(\\\"product__adoption\\\".\\\"LAKE_GBS_CUSTOMER_DATA\\\"), 0) AS \\\"product__adoption.lake_gbs_customer_data_max\\\",\\n    COALESCE(SUM(\\\"product__adoption\\\".\\\"CONNECTED_BILLABLE_STREAM_IN_BYTES_30D\\\" / 1024 / 1024 / 1024), 0) AS \\\"product__adoption.total_connected_billable_stream_in_gb_30d\\\",\\n    COALESCE(SUM(\\\"product__adoption\\\".\\\"CONNECTED_BILLABLE_EDGE_IN_BYTES_30D\\\" / 1024 / 1024 / 1024), 0) AS \\\"product__adoption.total_connected_billable_edge_in_gb_30d\\\"\\nFROM \\\"PRODUCT\\\".\\\"ADOPTION\\\" AS \\\"product__adoption\\\"\\n    LEFT JOIN \\\"UTIL\\\".\\\"DATES\\\" AS \\\"util__dates\\\" ON \\\"product__adoption\\\".\\\"DATE\\\" = \\\"util__dates\\\".\\\"DATE_ACTUAL\\\"\\nWHERE \\\"product__adoption\\\".\\\"DATE\\\" >= CAST(TIMESTAMP '2025-08-01 00:00:00' AS DATE) AND \\\"product__adoption\\\".\\\"DATE\\\" < CAST((DATE_TRUNC('QUARTER', ((TIMESTAMP '2025-08-01 00:00:00' + INTERVAL '3 month') + INTERVAL '2 month')) + INTERVAL '-2 month') AS DATE) AND \\\"product__adoption\\\".\\\"DATE\\\" >= CAST((DATE_TRUNC('QUARTER', ((CAST(CURRENT_TIMESTAMP AS TIMESTAMP(0)) + INTERVAL '-18 month') + INTERVAL '2 month')) + INTERVAL '-2 month') AS DATE) AND \\\"product__adoption\\\".\\\"DATE\\\" < CAST((DATE_TRUNC('QUARTER', (((DATE_TRUNC('QUARTER', ((CAST(CURRENT_TIMESTAMP AS TIMESTAMP(0)) + INTERVAL '-18 month') + INTERVAL '2 month')) + INTERVAL '-2 month') + INTERVAL '18 month') + INTERVAL '2 month')) + INTERVAL '-2 month') AS DATE) AND CASE\\n        WHEN \\\"product__adoption\\\".\\\"DATE\\\" = \\\"util__dates\\\".\\\"LAST_DAY_OF_FISCAL_QUARTER\\\" THEN TRUE\\n        WHEN DATEDIFF(DAY, \\\"product__adoption\\\".\\\"DATE\\\", CURRENT_DATE) = 1 THEN TRUE\\n        ELSE FALSE\\n    END\\nGROUP BY 1, 2\\nORDER BY 10 DESC NULLS LAST\\nLIMIT 1000\"\n    }\n  ],\n  \"b5c07e22-63a7-4c39-b4e1-39fed0467998\": [\n    {\n      \"document_query_name\": \"Q3 Won & Q4 Open_Stream\",\n      \"drill_name\": \"stream_new_arr\",\n      \"query\": {\n        \"limit\": 1000,\n        \"sorts\": [],\n        \"table\": \"sales__opportunity\",\n        \"fields\": [\n          \"sales__accounts.account_name\",\n          \"sales__opportunity.opportunity_name\",\n          \"sales__accounts.owner_name\",\n          \"sales__opportunity.forecast\",\n          \"sales__opportunity.stage_name\",\n          \"sales__opportunity.record_type\",\n          \"sales__opportunity.new_arr_derived\",\n          \"sales__opportunity.close_date\"\n        ],\n        \"pivots\": [],\n        \"dbtMode\": false,\n        \"filters\": {\n          \"sales__opportunity.close_date\": {\n            \"type\": \"composite\",\n            \"filters\": [\n              {\n                \"kind\": \"TIME_FOR_UNIT_DURATION\",\n                \"type\": \"date\",\n                \"left_side\": \"FY2027 Q1\"\n              },\n              {\n                \"type\": \"composite\",\n                \"filters\": [\n                  {\n                    \"kind\": \"TIME_FOR_INTERVAL_DURATION\",\n                    \"type\": \"date\",\n                    \"left_side\": \"2 complete fiscal quarters ago\",\n                    \"right_side\": \"2 quarters\",\n                    \"is_negative\": false\n                  },\n                  {\n                    \"kind\": \"BETWEEN\",\n                    \"type\": \"date\",\n                    \"left_side\": \"0 fiscal quarters ago\",\n                    \"right_side\": \"2 fiscal quarters from now\",\n                    \"is_negative\": false\n                  }\n                ],\n                \"conjunction\": \"OR\"\n              }\n            ],\n            \"conjunction\": \"AND\",\n            \"is_negative\": false\n          },\n          \"sales__opportunity.stage_name\": {\n            \"kind\": \"EQUALS\",\n            \"type\": \"string\",\n            \"values\": [\n              \"3. Visible Opportunity\"\n            ]\n          },\n          \"sales__opportunity.type_of_opp\": {\n            \"kind\": \"EQUALS\",\n            \"type\": \"string\",\n            \"values\": [\n              \"Downsell\",\n              \"NFR\",\n              \"Services Only\"\n            ],\n            \"is_negative\": true\n          },\n          \"sales__opportunity.stage_last_updated\": {\n            \"kind\": \"BEFORE\",\n            \"type\": \"date\",\n            \"right_side\": \"2025-11-03\",\n            \"is_negative\": false\n          }\n        },\n        \"modelId\": \"ff7d6a64-3403-4b84-922d-e8ac1382baf5\",\n        \"version\": 8,\n        \"controls\": [],\n        \"rewriteSql\": true,\n        \"row_totals\": {},\n        \"fill_fields\": [],\n        \"calculations\": [],\n        \"column_limit\": 50,\n        \"join_via_map\": {},\n        \"column_totals\": {},\n        \"userEditedSQL\": \"\",\n        \"dimensionIndex\": 0,\n        \"default_group_by\": true,\n        \"custom_summary_types\": {},\n        \"join_paths_from_topic_name\": \"opportunity\"\n      },\n      \"sql\": \"SELECT \\\"sales__accounts\\\".\\\"ACCOUNT_NAME\\\" AS \\\"sales__accounts.account_name\\\",\\n    \\\"sales__opportunity\\\".\\\"OPPORTUNITY_NAME\\\" AS \\\"sales__opportunity.opportunity_name\\\",\\n    \\\"sales__accounts\\\".\\\"OWNER_NAME\\\" AS \\\"sales__accounts.owner_name\\\",\\n    \\\"sales__opportunity\\\".\\\"FORECAST\\\" AS \\\"sales__opportunity.forecast\\\",\\n    \\\"sales__opportunity\\\".\\\"STAGE_NAME\\\" AS \\\"sales__opportunity.stage_name\\\",\\n    \\\"sales__opportunity\\\".\\\"RECORD_TYPE\\\" AS \\\"sales__opportunity.record_type\\\",\\n    \\\"sales__opportunity\\\".\\\"NEW_ARR_DERIVED\\\" AS \\\"sales__opportunity.new_arr_derived\\\",\\n    \\\"sales__opportunity\\\".\\\"CLOSE_DATE\\\" AS \\\"sales__opportunity.close_date__raw\\\",\\n    \\\"sales__accounts\\\".\\\"ACCOUNT_ID\\\" AS \\\"sales__accounts.account_id\\\",\\n    \\\"sales__opportunity\\\".\\\"OPPORTUNITY_ID\\\" AS \\\"sales__opportunity.opportunity_id\\\",\\n    TO_CHAR(\\\"sales__opportunity\\\".\\\"CLOSE_DATE\\\", 'YYYY-MM-DD') AS \\\"sales__opportunity.close_date\\\"\\nFROM \\\"SALES\\\".\\\"OPPORTUNITY\\\" AS \\\"sales__opportunity\\\"\\n    LEFT JOIN \\\"SALES\\\".\\\"ACCOUNTS\\\" AS \\\"sales__accounts\\\" ON \\\"sales__opportunity\\\".\\\"ACCOUNT_ID\\\" = \\\"sales__accounts\\\".\\\"ACCOUNT_ID\\\"\\nWHERE \\\"sales__opportunity\\\".\\\"CLOSE_DATE\\\" >= CAST(TIMESTAMP '2026-02-01 00:00:00' AS DATE) AND (\\\"sales__opportunity\\\".\\\"CLOSE_DATE\\\" < CAST((DATE_TRUNC('QUARTER', ((TIMESTAMP '2026-02-01 00:00:00' + INTERVAL '3 month') + INTERVAL '2 month')) + INTERVAL '-2 month') AS DATE) AND (\\\"sales__opportunity\\\".\\\"CLOSE_DATE\\\" >= CAST((DATE_TRUNC('QUARTER', ((CAST(CURRENT_TIMESTAMP AS TIMESTAMP(0)) + INTERVAL '-6 month') + INTERVAL '2 month')) + INTERVAL '-2 month') AS DATE) AND \\\"sales__opportunity\\\".\\\"CLOSE_DATE\\\" < CAST((DATE_TRUNC('QUARTER', (((DATE_TRUNC('QUARTER', ((CAST(CURRENT_TIMESTAMP AS TIMESTAMP(0)) + INTERVAL '-6 month') + INTERVAL '2 month')) + INTERVAL '-2 month') + INTERVAL '6 month') + INTERVAL '2 month')) + INTERVAL '-2 month') AS DATE) OR \\\"sales__opportunity\\\".\\\"CLOSE_DATE\\\" >= CAST((DATE_TRUNC('QUARTER', (CAST(CURRENT_TIMESTAMP AS TIMESTAMP(0)) + INTERVAL '2 month')) + INTERVAL '-2 month') AS DATE) AND \\\"sales__opportunity\\\".\\\"CLOSE_DATE\\\" < CAST((DATE_TRUNC('QUARTER', ((CAST(CURRENT_TIMESTAMP AS TIMESTAMP(0)) + INTERVAL '6 month') + INTERVAL '2 month')) + INTERVAL '-2 month') AS DATE))) AND (\\\"sales__opportunity\\\".\\\"STAGE_NAME\\\" = '3. Visible Opportunity' AND ((\\\"sales__opportunity\\\".\\\"TYPE_OF_OPP\\\" NOT IN ('Downsell', 'NFR', 'Services Only') OR \\\"sales__opportunity\\\".\\\"TYPE_OF_OPP\\\" IS NULL) AND \\\"sales__opportunity\\\".\\\"STAGE_LAST_UPDATED\\\" < CAST(TIMESTAMP '2025-11-03 00:00:00' AS DATE)))\\nGROUP BY 9, 1, 3, 8, 4, 7, 10, 2, 6, 5\\nLIMIT 1000\"\n    }\n  ],\n  \"fd41c0cc-09f5-4781-8081-411e55d2d762\": [\n    {\n      \"document_query_name\": \"Searches Dispatched\",\n      \"drill_name\": \"total_searches_dispatched\",\n      \"query\": {\n        \"limit\": 1000,\n        \"sorts\": [],\n        \"table\": \"product__cloud_telemetry_daily\",\n        \"fields\": [\n          \"product__cloud_orgs.account_name\",\n          \"product__cloud_orgs.org_id\",\n          \"product__cloud_orgs.org_type\",\n          \"product__cloud_orgs.owner_email\",\n          \"product__cloud_telemetry_daily.search_executor_compute_sum\",\n          \"product__cloud_telemetry_daily.dispatched_searches_sum\"\n        ],\n        \"pivots\": [],\n        \"dbtMode\": false,\n        \"filters\": {\n          \"product__cloud_orgs.org_type\": {\n            \"kind\": \"EQUALS\",\n            \"type\": \"string\",\n            \"values\": [\n              \"Customer\",\n              \"Free\"\n            ],\n            \"is_negative\": false\n          },\n          \"product__cloud_telemetry_daily.date\": {\n            \"type\": \"composite\",\n            \"filters\": [\n              {\n                \"kind\": \"TIME_FOR_UNIT_DURATION\",\n                \"type\": \"date\",\n                \"left_side\": \"FY2026 Q3\"\n              },\n              {\n                \"kind\": \"TIME_FOR_INTERVAL_DURATION\",\n                \"type\": \"date\",\n                \"left_side\": \"6 complete fiscal quarters ago\",\n                \"right_side\": \"6 quarters\",\n                \"is_negative\": false\n              }\n            ],\n            \"conjunction\": \"AND\",\n            \"is_negative\": false\n          },\n          \"product__cloud_telemetry_daily.dispatched_searches\": {\n            \"kind\": \"GREATER_THAN\",\n            \"type\": \"number\",\n            \"values\": [\n              \"0\"\n            ],\n            \"is_negative\": false,\n            \"is_inclusive\": false\n          }\n        },\n        \"modelId\": \"867dffa3-a2de-48a5-af58-1d648c48c524\",\n        \"version\": 8,\n        \"controls\": [],\n        \"rewriteSql\": true,\n        \"row_totals\": {},\n        \"fill_fields\": [],\n        \"calculations\": [],\n        \"column_limit\": 50,\n        \"join_via_map\": {},\n        \"column_totals\": {},\n        \"userEditedSQL\": \"\",\n        \"dimensionIndex\": 0,\n        \"default_group_by\": true,\n        \"custom_summary_types\": {},\n        \"join_paths_from_topic_name\": \"cloud_telemetry_daily\"\n      },\n      \"sql\": \"SELECT \\\"product__cloud_orgs\\\".\\\"ACCOUNT_NAME\\\" AS \\\"product__cloud_orgs.account_name\\\",\\n    \\\"product__cloud_orgs\\\".\\\"ORG_ID\\\" AS \\\"product__cloud_orgs.org_id\\\",\\n    \\\"product__cloud_orgs\\\".\\\"ORG_TYPE\\\" AS \\\"product__cloud_orgs.org_type\\\",\\n    \\\"product__cloud_orgs\\\".\\\"OWNER_EMAIL\\\" AS \\\"product__cloud_orgs.owner_email\\\",\\n    COALESCE(SUM(\\\"product__cloud_telemetry_daily\\\".\\\"SEARCH_EXECUTOR_COMPUTE\\\" / 3600), 0) AS \\\"product__cloud_telemetry_daily.search_executor_compute_sum\\\",\\n    COALESCE(SUM(\\\"product__cloud_telemetry_daily\\\".\\\"DISPATCHED_SEARCHES\\\"), 0) AS \\\"product__cloud_telemetry_daily.dispatched_searches_sum\\\",\\n    \\\"product__cloud_orgs\\\".\\\"ACCOUNT_ID\\\" AS \\\"product__cloud_orgs.account_id\\\"\\nFROM \\\"PRODUCT\\\".\\\"CLOUD_TELEMETRY_DAILY\\\" AS \\\"product__cloud_telemetry_daily\\\"\\n    LEFT JOIN \\\"PRODUCT\\\".\\\"CLOUD_ORGS\\\" AS \\\"product__cloud_orgs\\\" ON \\\"product__cloud_telemetry_daily\\\".\\\"ORG_ID\\\" = \\\"product__cloud_orgs\\\".\\\"ORG_ID\\\"\\nWHERE \\\"product__cloud_orgs\\\".\\\"ORG_TYPE\\\" IN ('Customer', 'Free') AND (\\\"product__cloud_telemetry_daily\\\".\\\"DATE\\\" >= CAST(TIMESTAMP '2025-08-01 00:00:00' AS DATE) AND \\\"product__cloud_telemetry_daily\\\".\\\"DATE\\\" < CAST((DATE_TRUNC('QUARTER', ((TIMESTAMP '2025-08-01 00:00:00' + INTERVAL '3 month') + INTERVAL '2 month')) + INTERVAL '-2 month') AS DATE)) AND (\\\"product__cloud_telemetry_daily\\\".\\\"DATE\\\" >= CAST((DATE_TRUNC('QUARTER', ((CAST(CURRENT_TIMESTAMP AS TIMESTAMP(0)) + INTERVAL '-18 month') + INTERVAL '2 month')) + INTERVAL '-2 month') AS DATE) AND (\\\"product__cloud_telemetry_daily\\\".\\\"DATE\\\" < CAST((DATE_TRUNC('QUARTER', (((DATE_TRUNC('QUARTER', ((CAST(CURRENT_TIMESTAMP AS TIMESTAMP(0)) + INTERVAL '-18 month') + INTERVAL '2 month')) + INTERVAL '-2 month') + INTERVAL '18 month') + INTERVAL '2 month')) + INTERVAL '-2 month') AS DATE) AND \\\"product__cloud_telemetry_daily\\\".\\\"DISPATCHED_SEARCHES\\\" > 0))\\nGROUP BY 7, 1, 2, 3, 4\\nLIMIT 1000\"\n    },\n    {\n      \"document_query_name\": \"Searches Dispatched\",\n      \"drill_name\": \"active_orgs\",\n      \"query\": {\n        \"limit\": 1000,\n        \"sorts\": [],\n        \"table\": \"product__cloud_telemetry_daily\",\n        \"fields\": [\n          \"product__cloud_telemetry_daily.primary_key\",\n          \"product__cloud_telemetry_daily.date\",\n          \"product__cloud_telemetry_daily.env\",\n          \"product__cloud_telemetry_daily.org_id\",\n          \"product__cloud_telemetry_daily.org_type\",\n          \"product__cloud_telemetry_daily.is_cribl_tenant\",\n          \"product__cloud_telemetry_daily.account_id\",\n          \"product__cloud_telemetry_daily.account_name\",\n          \"product__cloud_telemetry_daily.in_sfdc\",\n          \"product__cloud_telemetry_daily.tid_create_date\"\n        ],\n        \"pivots\": [],\n        \"dbtMode\": false,\n        \"filters\": {\n          \"product__cloud_orgs.org_type\": {\n            \"kind\": \"EQUALS\",\n            \"type\": \"string\",\n            \"values\": [\n              \"Customer\",\n              \"Free\"\n            ],\n            \"is_negative\": false\n          },\n          \"product__cloud_telemetry_daily.date\": {\n            \"type\": \"composite\",\n            \"filters\": [\n              {\n                \"kind\": \"TIME_FOR_UNIT_DURATION\",\n                \"type\": \"date\",\n                \"left_side\": \"FY2026 Q2\"\n              },\n              {\n                \"kind\": \"TIME_FOR_INTERVAL_DURATION\",\n                \"type\": \"date\",\n                \"left_side\": \"6 complete fiscal quarters ago\",\n                \"right_side\": \"6 quarters\",\n                \"is_negative\": false\n              }\n            ],\n            \"conjunction\": \"AND\",\n            \"is_negative\": false\n          },\n          \"product__cloud_telemetry_daily.is_active\": {\n            \"type\": \"boolean\",\n            \"is_negative\": false,\n            \"treat_nulls_as_false\": false\n          },\n          \"product__cloud_telemetry_daily.dispatched_searches\": {\n            \"kind\": \"GREATER_THAN\",\n            \"type\": \"number\",\n            \"values\": [\n              \"0\"\n            ],\n            \"is_negative\": false,\n            \"is_inclusive\": false\n          }\n        },\n        \"modelId\": \"5432aba0-002d-4c7f-b1d4-7fad064934c7\",\n        \"version\": 8,\n        \"controls\": [],\n        \"rewriteSql\": true,\n        \"row_totals\": {},\n        \"fill_fields\": [],\n        \"calculations\": [],\n        \"column_limit\": 50,\n        \"join_via_map\": {},\n        \"column_totals\": {},\n        \"userEditedSQL\": \"\",\n        \"dimensionIndex\": 0,\n        \"default_group_by\": true,\n        \"custom_summary_types\": {},\n        \"join_paths_from_topic_name\": \"cloud_telemetry_daily\"\n      },\n      \"sql\": \"SELECT \\\"product__cloud_telemetry_daily\\\".\\\"ORG_ID\\\" || \\\"product__cloud_telemetry_daily\\\".\\\"DATE\\\" AS \\\"product__cloud_telemetry_daily.primary_key\\\",\\n    \\\"product__cloud_telemetry_daily\\\".\\\"DATE\\\" AS \\\"product__cloud_telemetry_daily.date__raw\\\",\\n    \\\"product__cloud_telemetry_daily\\\".\\\"ENV\\\" AS \\\"product__cloud_telemetry_daily.env\\\",\\n    \\\"product__cloud_telemetry_daily\\\".\\\"ORG_ID\\\" AS \\\"product__cloud_telemetry_daily.org_id\\\",\\n    \\\"product__cloud_telemetry_daily\\\".\\\"ORG_TYPE\\\" AS \\\"product__cloud_telemetry_daily.org_type\\\",\\n    \\\"product__cloud_telemetry_daily\\\".\\\"IS_CRIBL_TENANT\\\" AS \\\"product__cloud_telemetry_daily.is_cribl_tenant\\\",\\n    \\\"product__cloud_telemetry_daily\\\".\\\"ACCOUNT_ID\\\" AS \\\"product__cloud_telemetry_daily.account_id\\\",\\n    \\\"product__cloud_telemetry_daily\\\".\\\"ACCOUNT_NAME\\\" AS \\\"product__cloud_telemetry_daily.account_name\\\",\\n    \\\"product__cloud_telemetry_daily\\\".\\\"IN_SFDC\\\" AS \\\"product__cloud_telemetry_daily.in_sfdc\\\",\\n    \\\"product__cloud_telemetry_daily\\\".\\\"TID_CREATE_DATE\\\" AS \\\"product__cloud_telemetry_daily.tid_create_date__raw\\\",\\n    TO_CHAR(\\\"product__cloud_telemetry_daily\\\".\\\"DATE\\\", 'YYYY-MM-DD') AS \\\"product__cloud_telemetry_daily.date\\\",\\n    TO_CHAR(\\\"product__cloud_telemetry_daily\\\".\\\"TID_CREATE_DATE\\\", 'YYYY-MM-DD') AS \\\"product__cloud_telemetry_daily.tid_create_date\\\"\\nFROM \\\"PRODUCT\\\".\\\"CLOUD_TELEMETRY_DAILY\\\" AS \\\"product__cloud_telemetry_daily\\\"\\n    LEFT JOIN \\\"PRODUCT\\\".\\\"CLOUD_ORGS\\\" AS \\\"product__cloud_orgs\\\" ON \\\"product__cloud_telemetry_daily\\\".\\\"ORG_ID\\\" = \\\"product__cloud_orgs\\\".\\\"ORG_ID\\\"\\nWHERE \\\"product__cloud_orgs\\\".\\\"ORG_TYPE\\\" IN ('Customer', 'Free') AND (\\\"product__cloud_telemetry_daily\\\".\\\"DATE\\\" >= CAST(TIMESTAMP '2025-05-01 00:00:00' AS DATE) AND \\\"product__cloud_telemetry_daily\\\".\\\"DATE\\\" < CAST((DATE_TRUNC('QUARTER', ((TIMESTAMP '2025-05-01 00:00:00' + INTERVAL '3 month') + INTERVAL '2 month')) + INTERVAL '-2 month') AS DATE)) AND (\\\"product__cloud_telemetry_daily\\\".\\\"DATE\\\" >= CAST((DATE_TRUNC('QUARTER', ((CAST(CURRENT_TIMESTAMP AS TIMESTAMP(0)) + INTERVAL '-18 month') + INTERVAL '2 month')) + INTERVAL '-2 month') AS DATE) AND \\\"product__cloud_telemetry_daily\\\".\\\"DATE\\\" < CAST((DATE_TRUNC('QUARTER', (((DATE_TRUNC('QUARTER', ((CAST(CURRENT_TIMESTAMP AS TIMESTAMP(0)) + INTERVAL '-18 month') + INTERVAL '2 month')) + INTERVAL '-2 month') + INTERVAL '18 month') + INTERVAL '2 month')) + INTERVAL '-2 month') AS DATE) AND (CASE\\n        WHEN \\\"product__cloud_telemetry_daily\\\".\\\"MAUS\\\" > 0 THEN TRUE\\n        WHEN (\\\"product__cloud_telemetry_daily\\\".\\\"STREAM_IN_BYTES_30D\\\" + \\\"product__cloud_telemetry_daily\\\".\\\"EDGE_IN_BYTES_30D\\\" + \\\"product__cloud_telemetry_daily\\\".\\\"CONNECTED_BILLABLE_STREAM_IN_BYTES_30D\\\" + \\\"product__cloud_telemetry_daily\\\".\\\"CONNECTED_BILLABLE_EDGE_IN_BYTES_30D\\\") / 1024 / 1024 >= 100 THEN TRUE\\n        ELSE FALSE\\n    END AND \\\"product__cloud_telemetry_daily\\\".\\\"DISPATCHED_SEARCHES\\\" > 0))\\nGROUP BY 7, 8, 2, 3, 9, 6, 4, 5, 1, 10\\nLIMIT 1000\"\n    }\n  ],\n  \"a465ca4f-97fe-44c1-88c3-1fb2b846a740\": [\n    {\n      \"document_query_name\": \"FEDRAMP Pipeline\",\n      \"drill_name\": \"new_arr_sum\",\n      \"query\": {\n        \"limit\": 20,\n        \"sorts\": [\n          {\n            \"null_sort\": \"OMNI_DEFAULT\",\n            \"column_name\": \"sales__opportunity.new_arr_derived\",\n            \"is_column_sort\": false,\n            \"sort_descending\": true\n          }\n        ],\n        \"table\": \"sales__opportunity\",\n        \"fields\": [\n          \"sales__accounts.account_name\",\n          \"sales__opportunity.opportunity_name\",\n          \"sales__accounts.owner_name\",\n          \"sales__opportunity.forecast\",\n          \"sales__opportunity.stage_name\",\n          \"sales__opportunity.record_type\",\n          \"sales__opportunity.new_arr_derived\",\n          \"sales__opportunity.close_date\"\n        ],\n        \"pivots\": [],\n        \"dbtMode\": false,\n        \"filters\": {\n          \"sales__opportunity.is_closed\": {\n            \"type\": \"boolean\",\n            \"is_negative\": true,\n            \"treat_nulls_as_false\": false\n          },\n          \"sales__opportunity.close_date\": {\n            \"type\": \"composite\",\n            \"filters\": [\n              {\n                \"kind\": \"TIME_FOR_UNIT_DURATION\",\n                \"type\": \"date\",\n                \"left_side\": \"FY2027 Q3\"\n              },\n              {\n                \"kind\": \"BETWEEN\",\n                \"type\": \"date\",\n                \"left_side\": \"2025-11-01\",\n                \"right_side\": \"2026-11-01\",\n                \"is_negative\": false\n              }\n            ],\n            \"conjunction\": \"AND\",\n            \"is_negative\": false\n          },\n          \"sales__opportunity.stage_name\": {\n            \"kind\": \"EQUALS\",\n            \"type\": \"string\",\n            \"values\": [\n              \"2. New Business Meeting\",\n              \"4. POV\",\n              \"3. Visible Opportunity\",\n              \"5. Tech Close\",\n              \"6. Closing\"\n            ],\n            \"is_negative\": false\n          },\n          \"sales__opportunity.fedramp_level\": {\n            \"type\": \"null\",\n            \"is_negative\": true\n          }\n        },\n        \"modelId\": \"e8004817-4bd4-4e02-9d4b-b8f711299b0b\",\n        \"version\": 8,\n        \"controls\": [],\n        \"rewriteSql\": true,\n        \"row_totals\": {},\n        \"fill_fields\": [],\n        \"calculations\": [],\n        \"column_limit\": 50,\n        \"join_via_map\": {},\n        \"column_totals\": {},\n        \"userEditedSQL\": \"\",\n        \"dimensionIndex\": 0,\n        \"default_group_by\": true,\n        \"custom_summary_types\": {},\n        \"join_paths_from_topic_name\": \"opportunity\"\n      },\n      \"sql\": \"SELECT \\\"sales__accounts\\\".\\\"ACCOUNT_NAME\\\" AS \\\"sales__accounts.account_name\\\",\\n    \\\"sales__opportunity\\\".\\\"OPPORTUNITY_NAME\\\" AS \\\"sales__opportunity.opportunity_name\\\",\\n    \\\"sales__accounts\\\".\\\"OWNER_NAME\\\" AS \\\"sales__accounts.owner_name\\\",\\n    \\\"sales__opportunity\\\".\\\"FORECAST\\\" AS \\\"sales__opportunity.forecast\\\",\\n    \\\"sales__opportunity\\\".\\\"STAGE_NAME\\\" AS \\\"sales__opportunity.stage_name\\\",\\n    \\\"sales__opportunity\\\".\\\"RECORD_TYPE\\\" AS \\\"sales__opportunity.record_type\\\",\\n    \\\"sales__opportunity\\\".\\\"NEW_ARR_DERIVED\\\" AS \\\"sales__opportunity.new_arr_derived\\\",\\n    \\\"sales__opportunity\\\".\\\"CLOSE_DATE\\\" AS \\\"sales__opportunity.close_date__raw\\\",\\n    \\\"sales__accounts\\\".\\\"ACCOUNT_ID\\\" AS \\\"sales__accounts.account_id\\\",\\n    \\\"sales__opportunity\\\".\\\"OPPORTUNITY_ID\\\" AS \\\"sales__opportunity.opportunity_id\\\",\\n    TO_CHAR(\\\"sales__opportunity\\\".\\\"CLOSE_DATE\\\", 'YYYY-MM-DD') AS \\\"sales__opportunity.close_date\\\"\\nFROM \\\"SALES\\\".\\\"OPPORTUNITY\\\" AS \\\"sales__opportunity\\\"\\n    LEFT JOIN \\\"SALES\\\".\\\"ACCOUNTS\\\" AS \\\"sales__accounts\\\" ON \\\"sales__opportunity\\\".\\\"ACCOUNT_ID\\\" = \\\"sales__accounts\\\".\\\"ACCOUNT_ID\\\"\\nWHERE NOT \\\"sales__opportunity\\\".\\\"IS_CLOSED\\\" AND (\\\"sales__opportunity\\\".\\\"CLOSE_DATE\\\" >= CAST(TIMESTAMP '2026-08-01 00:00:00' AS DATE) AND \\\"sales__opportunity\\\".\\\"CLOSE_DATE\\\" < CAST((DATE_TRUNC('QUARTER', ((TIMESTAMP '2026-08-01 00:00:00' + INTERVAL '3 month') + INTERVAL '2 month')) + INTERVAL '-2 month') AS DATE)) AND (\\\"sales__opportunity\\\".\\\"CLOSE_DATE\\\" >= CAST(TIMESTAMP '2025-11-01 00:00:00' AS DATE) AND \\\"sales__opportunity\\\".\\\"CLOSE_DATE\\\" < CAST(TIMESTAMP '2026-11-01 00:00:00' AS DATE) AND (\\\"sales__opportunity\\\".\\\"STAGE_NAME\\\" IN ('2. New Business Meeting', '3. Visible Opportunity', '4. POV', '5. Tech Close', '6. Closing') AND \\\"sales__opportunity\\\".\\\"FEDRAMP_LEVEL\\\" IS NOT NULL))\\nGROUP BY 9, 1, 3, 8, 4, 7, 10, 2, 6, 5\\nORDER BY 7 DESC NULLS LAST\\nLIMIT 20\"\n    },\n    {\n      \"document_query_name\": \"FEDRAMP Pipeline\",\n      \"drill_name\": \"count_opps\",\n      \"query\": {\n        \"limit\": 1000,\n        \"sorts\": [],\n        \"table\": \"sales__opportunity\",\n        \"fields\": [\n          \"sales__accounts.account_name\",\n          \"sales__opportunity.opportunity_name\",\n          \"sales__accounts.owner_name\",\n          \"sales__opportunity.forecast\",\n          \"sales__opportunity.stage_name\",\n          \"sales__opportunity.record_type\",\n          \"sales__opportunity.new_arr_derived\",\n          \"sales__opportunity.close_date\"\n        ],\n        \"pivots\": [],\n        \"dbtMode\": false,\n        \"filters\": {\n          \"sales__opportunity.is_closed\": {\n            \"type\": \"boolean\",\n            \"is_negative\": true,\n            \"treat_nulls_as_false\": false\n          },\n          \"sales__opportunity.close_date\": {\n            \"type\": \"composite\",\n            \"filters\": [\n              {\n                \"kind\": \"TIME_FOR_UNIT_DURATION\",\n                \"type\": \"date\",\n                \"left_side\": \"FY2027 Q3\"\n              },\n              {\n                \"kind\": \"BETWEEN\",\n                \"type\": \"date\",\n                \"left_side\": \"2025-11-01\",\n                \"right_side\": \"2026-11-01\",\n                \"is_negative\": false\n              }\n            ],\n            \"conjunction\": \"AND\",\n            \"is_negative\": false\n          },\n          \"sales__opportunity.stage_name\": {\n            \"kind\": \"EQUALS\",\n            \"type\": \"string\",\n            \"values\": [\n              \"2. New Business Meeting\",\n              \"4. POV\",\n              \"3. Visible Opportunity\",\n              \"5. Tech Close\",\n              \"6. Closing\"\n            ],\n            \"is_negative\": false\n          },\n          \"sales__opportunity.fedramp_level\": {\n            \"type\": \"null\",\n            \"is_negative\": true\n          }\n        },\n        \"modelId\": \"dcca15b4-4671-46b3-b287-d11572af3d54\",\n        \"version\": 8,\n        \"controls\": [],\n        \"rewriteSql\": true,\n        \"row_totals\": {},\n        \"fill_fields\": [],\n        \"calculations\": [],\n        \"column_limit\": 50,\n        \"join_via_map\": {},\n        \"column_totals\": {},\n        \"userEditedSQL\": \"\",\n        \"dimensionIndex\": 0,\n        \"default_group_by\": true,\n        \"custom_summary_types\": {},\n        \"join_paths_from_topic_name\": \"opportunity\"\n      },\n      \"sql\": \"SELECT \\\"sales__accounts\\\".\\\"ACCOUNT_NAME\\\" AS \\\"sales__accounts.account_name\\\",\\n    \\\"sales__opportunity\\\".\\\"OPPORTUNITY_NAME\\\" AS \\\"sales__opportunity.opportunity_name\\\",\\n    \\\"sales__accounts\\\".\\\"OWNER_NAME\\\" AS \\\"sales__accounts.owner_name\\\",\\n    \\\"sales__opportunity\\\".\\\"FORECAST\\\" AS \\\"sales__opportunity.forecast\\\",\\n    \\\"sales__opportunity\\\".\\\"STAGE_NAME\\\" AS \\\"sales__opportunity.stage_name\\\",\\n    \\\"sales__opportunity\\\".\\\"RECORD_TYPE\\\" AS \\\"sales__opportunity.record_type\\\",\\n    \\\"sales__opportunity\\\".\\\"NEW_ARR_DERIVED\\\" AS \\\"sales__opportunity.new_arr_derived\\\",\\n    \\\"sales__opportunity\\\".\\\"CLOSE_DATE\\\" AS \\\"sales__opportunity.close_date__raw\\\",\\n    \\\"sales__accounts\\\".\\\"ACCOUNT_ID\\\" AS \\\"sales__accounts.account_id\\\",\\n    \\\"sales__opportunity\\\".\\\"OPPORTUNITY_ID\\\" AS \\\"sales__opportunity.opportunity_id\\\",\\n    TO_CHAR(\\\"sales__opportunity\\\".\\\"CLOSE_DATE\\\", 'YYYY-MM-DD') AS \\\"sales__opportunity.close_date\\\"\\nFROM \\\"SALES\\\".\\\"OPPORTUNITY\\\" AS \\\"sales__opportunity\\\"\\n    LEFT JOIN \\\"SALES\\\".\\\"ACCOUNTS\\\" AS \\\"sales__accounts\\\" ON \\\"sales__opportunity\\\".\\\"ACCOUNT_ID\\\" = \\\"sales__accounts\\\".\\\"ACCOUNT_ID\\\"\\nWHERE NOT \\\"sales__opportunity\\\".\\\"IS_CLOSED\\\" AND (\\\"sales__opportunity\\\".\\\"CLOSE_DATE\\\" >= CAST(TIMESTAMP '2026-08-01 00:00:00' AS DATE) AND \\\"sales__opportunity\\\".\\\"CLOSE_DATE\\\" < CAST((DATE_TRUNC('QUARTER', ((TIMESTAMP '2026-08-01 00:00:00' + INTERVAL '3 month') + INTERVAL '2 month')) + INTERVAL '-2 month') AS DATE)) AND (\\\"sales__opportunity\\\".\\\"CLOSE_DATE\\\" >= CAST(TIMESTAMP '2025-11-01 00:00:00' AS DATE) AND \\\"sales__opportunity\\\".\\\"CLOSE_DATE\\\" < CAST(TIMESTAMP '2026-11-01 00:00:00' AS DATE) AND (\\\"sales__opportunity\\\".\\\"STAGE_NAME\\\" IN ('2. New Business Meeting', '3. Visible Opportunity', '4. POV', '5. Tech Close', '6. Closing') AND \\\"sales__opportunity\\\".\\\"FEDRAMP_LEVEL\\\" IS NOT NULL))\\nGROUP BY 9, 1, 3, 8, 4, 7, 10, 2, 6, 5\\nLIMIT 1000\"\n    }\n  ],\n  \"82b670ff-cdbd-4bfd-9cd1-e33da5a9fa74\": [\n    {\n      \"document_query_name\": \"Product: Edge (Cloud)\",\n      \"drill_name\": \"count_orgs\",\n      \"query\": {\n        \"limit\": 1000,\n        \"sorts\": [],\n        \"table\": \"cloud_edge_nodes_fq\",\n        \"fields\": [\n          \"cloud_edge_nodes_fq.date[fiscal_quarter]\",\n          \"cloud_edge_nodes_fq.org_id\",\n          \"cloud_edge_nodes_fq.total_edge_nodes\"\n        ],\n        \"pivots\": [],\n        \"dbtMode\": false,\n        \"filters\": {\n          \"cloud_edge_nodes_fq.date\": {\n            \"type\": \"composite\",\n            \"filters\": [\n              {\n                \"kind\": \"TIME_FOR_UNIT_DURATION\",\n                \"type\": \"date\",\n                \"left_side\": \"FY2026 Q3\"\n              },\n              {\n                \"kind\": \"TIME_FOR_INTERVAL_DURATION\",\n                \"type\": \"date\",\n                \"left_side\": \"6 complete fiscal quarters ago\",\n                \"right_side\": \"6 quarters\",\n                \"is_negative\": false\n              }\n            ],\n            \"conjunction\": \"AND\",\n            \"is_negative\": false\n          },\n          \"product__cloud_orgs.org_type\": {\n            \"kind\": \"EQUALS\",\n            \"type\": \"string\",\n            \"values\": [\n              \"Customer\",\n              \"Free\"\n            ],\n            \"is_negative\": false\n          },\n          \"cloud_edge_nodes_fq.total_edge_nodes\": {\n            \"kind\": \"GREATER_THAN\",\n            \"type\": \"number\",\n            \"values\": [\n              \"0\"\n            ],\n            \"is_negative\": false,\n            \"is_inclusive\": false\n          }\n        },\n        \"modelId\": \"912e8580-4519-4971-b8c3-1c30608c7f49\",\n        \"version\": 8,\n        \"controls\": [],\n        \"rewriteSql\": true,\n        \"row_totals\": {},\n        \"fill_fields\": [],\n        \"calculations\": [],\n        \"column_limit\": 50,\n        \"join_via_map\": {},\n        \"column_totals\": {},\n        \"userEditedSQL\": \"\",\n        \"dimensionIndex\": 0,\n        \"default_group_by\": true,\n        \"custom_summary_types\": {},\n        \"join_paths_from_topic_name\": \"cloud_edge_nodes_fq\"\n      },\n      \"sql\": \"WITH \\\"cloud_edge_nodes_fq\\\" AS (SELECT *\\n        FROM (SELECT\\n        first_day_of_fq as date,\\n        org_id,\\n        max(edge_nodes) as total_edge_nodes\\n      FROM (SELECT\\n        date_trunc('day',date) as date,\\n        org_id,\\n        d.FIRST_DAY_OF_FISCAL_QUARTER as first_day_of_fq,\\n        max(max_edge_nodes) as edge_nodes\\n        FROM ANALYTICS.PRODUCT.CLOUD_TELEMETRY_DAILY c\\n        left join UTIL.DATES d on c.date = d.DATE_ACTUAL\\n        GROUP BY 1,2,3\\n        ) t1\\n      GROUP BY 1,2\\n            ))\\n\\nSELECT 'FY' || CAST(EXTRACT(YEAR FROM (\\\"cloud_edge_nodes_fq\\\".\\\"DATE\\\" + INTERVAL '11 month')) AS VARCHAR) || (' Q' || CAST(CAST(FLOOR((MOD(EXTRACT(MONTH FROM \\\"cloud_edge_nodes_fq\\\".\\\"DATE\\\") + -13, 12) + 12 - 1) / 3) AS BIGINT) + 1 AS VARCHAR)) AS \\\"cloud_edge_nodes_fq.date[fiscal_quarter]\\\",\\n        \\\"cloud_edge_nodes_fq\\\".\\\"ORG_ID\\\" AS \\\"cloud_edge_nodes_fq.org_id\\\",\\n        \\\"cloud_edge_nodes_fq\\\".\\\"TOTAL_EDGE_NODES\\\" AS \\\"cloud_edge_nodes_fq.total_edge_nodes\\\"\\n    FROM \\\"cloud_edge_nodes_fq\\\"\\n        LEFT JOIN \\\"PRODUCT\\\".\\\"CLOUD_ORGS\\\" AS \\\"product__cloud_orgs\\\" ON \\\"cloud_edge_nodes_fq\\\".\\\"ORG_ID\\\" = \\\"product__cloud_orgs\\\".\\\"ORG_ID\\\"\\n    WHERE \\\"cloud_edge_nodes_fq\\\".\\\"DATE\\\" >= CAST(TIMESTAMP '2025-08-01 00:00:00' AS DATE) AND (\\\"cloud_edge_nodes_fq\\\".\\\"DATE\\\" < CAST((DATE_TRUNC('QUARTER', ((TIMESTAMP '2025-08-01 00:00:00' + INTERVAL '3 month') + INTERVAL '2 month')) + INTERVAL '-2 month') AS DATE) AND \\\"cloud_edge_nodes_fq\\\".\\\"DATE\\\" >= CAST((DATE_TRUNC('QUARTER', ((CAST(CURRENT_TIMESTAMP AS TIMESTAMP(0)) + INTERVAL '-18 month') + INTERVAL '2 month')) + INTERVAL '-2 month') AS DATE)) AND (\\\"cloud_edge_nodes_fq\\\".\\\"DATE\\\" < CAST((DATE_TRUNC('QUARTER', (((DATE_TRUNC('QUARTER', ((CAST(CURRENT_TIMESTAMP AS TIMESTAMP(0)) + INTERVAL '-18 month') + INTERVAL '2 month')) + INTERVAL '-2 month') + INTERVAL '18 month') + INTERVAL '2 month')) + INTERVAL '-2 month') AS DATE) AND (\\\"product__cloud_orgs\\\".\\\"ORG_TYPE\\\" IN ('Customer', 'Free') AND \\\"cloud_edge_nodes_fq\\\".\\\"TOTAL_EDGE_NODES\\\" > 0))\\n    GROUP BY 1, 2, 3\\n    LIMIT 1000\"\n    },\n    {\n      \"document_query_name\": \"Product: Edge (Cloud)\",\n      \"drill_name\": \"total_edge_nodes\",\n      \"query\": {\n        \"limit\": 1000,\n        \"sorts\": [],\n        \"table\": \"cloud_edge_nodes_fq\",\n        \"fields\": [\n          \"product__cloud_orgs.account_name\",\n          \"cloud_edge_nodes_fq.date[fiscal_quarter]\",\n          \"cloud_edge_nodes_fq.org_id\",\n          \"cloud_edge_nodes_fq.total_edge_nodes\"\n        ],\n        \"pivots\": [],\n        \"dbtMode\": false,\n        \"filters\": {\n          \"cloud_edge_nodes_fq.date\": {\n            \"type\": \"composite\",\n            \"filters\": [\n              {\n                \"kind\": \"TIME_FOR_UNIT_DURATION\",\n                \"type\": \"date\",\n                \"left_side\": \"FY2026 Q3\"\n              },\n              {\n                \"kind\": \"TIME_FOR_INTERVAL_DURATION\",\n                \"type\": \"date\",\n                \"left_side\": \"6 complete fiscal quarters ago\",\n                \"right_side\": \"6 quarters\",\n                \"is_negative\": false\n              }\n            ],\n            \"conjunction\": \"AND\",\n            \"is_negative\": false\n          },\n          \"product__cloud_orgs.org_type\": {\n            \"kind\": \"EQUALS\",\n            \"type\": \"string\",\n            \"values\": [\n              \"Customer\",\n              \"Free\"\n            ],\n            \"is_negative\": false\n          },\n          \"cloud_edge_nodes_fq.total_edge_nodes\": {\n            \"kind\": \"GREATER_THAN\",\n            \"type\": \"number\",\n            \"values\": [\n              \"0\"\n            ],\n            \"is_negative\": false,\n            \"is_inclusive\": false\n          }\n        },\n        \"modelId\": \"47ef70b4-ec2e-4022-94d6-2c5ba4e5c810\",\n        \"version\": 8,\n        \"controls\": [],\n        \"rewriteSql\": true,\n        \"row_totals\": {},\n        \"fill_fields\": [],\n        \"calculations\": [],\n        \"column_limit\": 50,\n        \"join_via_map\": {},\n        \"column_totals\": {},\n        \"userEditedSQL\": \"\",\n        \"dimensionIndex\": 0,\n        \"default_group_by\": true,\n        \"custom_summary_types\": {},\n        \"join_paths_from_topic_name\": \"cloud_edge_nodes_fq\"\n      },\n      \"sql\": \"WITH \\\"cloud_edge_nodes_fq\\\" AS (SELECT *\\n        FROM (SELECT\\n        first_day_of_fq as date,\\n        org_id,\\n        max(edge_nodes) as total_edge_nodes\\n      FROM (SELECT\\n        date_trunc('day',date) as date,\\n        org_id,\\n        d.FIRST_DAY_OF_FISCAL_QUARTER as first_day_of_fq,\\n        max(max_edge_nodes) as edge_nodes\\n        FROM ANALYTICS.PRODUCT.CLOUD_TELEMETRY_DAILY c\\n        left join UTIL.DATES d on c.date = d.DATE_ACTUAL\\n        GROUP BY 1,2,3\\n        ) t1\\n      GROUP BY 1,2\\n            ))\\n\\nSELECT 'FY' || CAST(EXTRACT(YEAR FROM (\\\"cloud_edge_nodes_fq\\\".\\\"DATE\\\" + INTERVAL '11 month')) AS VARCHAR) || (' Q' || CAST(CAST(FLOOR((MOD(EXTRACT(MONTH FROM \\\"cloud_edge_nodes_fq\\\".\\\"DATE\\\") + -13, 12) + 12 - 1) / 3) AS BIGINT) + 1 AS VARCHAR)) AS \\\"cloud_edge_nodes_fq.date[fiscal_quarter]\\\",\\n        \\\"cloud_edge_nodes_fq\\\".\\\"ORG_ID\\\" AS \\\"cloud_edge_nodes_fq.org_id\\\",\\n        \\\"cloud_edge_nodes_fq\\\".\\\"TOTAL_EDGE_NODES\\\" AS \\\"cloud_edge_nodes_fq.total_edge_nodes\\\"\\n    FROM \\\"cloud_edge_nodes_fq\\\"\\n        LEFT JOIN \\\"PRODUCT\\\".\\\"CLOUD_ORGS\\\" AS \\\"product__cloud_orgs\\\" ON \\\"cloud_edge_nodes_fq\\\".\\\"ORG_ID\\\" = \\\"product__cloud_orgs\\\".\\\"ORG_ID\\\"\\n    WHERE \\\"cloud_edge_nodes_fq\\\".\\\"DATE\\\" >= CAST(TIMESTAMP '2025-08-01 00:00:00' AS DATE) AND (\\\"cloud_edge_nodes_fq\\\".\\\"DATE\\\" < CAST((DATE_TRUNC('QUARTER', ((TIMESTAMP '2025-08-01 00:00:00' + INTERVAL '3 month') + INTERVAL '2 month')) + INTERVAL '-2 month') AS DATE) AND \\\"cloud_edge_nodes_fq\\\".\\\"DATE\\\" >= CAST((DATE_TRUNC('QUARTER', ((CAST(CURRENT_TIMESTAMP AS TIMESTAMP(0)) + INTERVAL '-18 month') + INTERVAL '2 month')) + INTERVAL '-2 month') AS DATE)) AND (\\\"cloud_edge_nodes_fq\\\".\\\"DATE\\\" < CAST((DATE_TRUNC('QUARTER', (((DATE_TRUNC('QUARTER', ((CAST(CURRENT_TIMESTAMP AS TIMESTAMP(0)) + INTERVAL '-18 month') + INTERVAL '2 month')) + INTERVAL '-2 month') + INTERVAL '18 month') + INTERVAL '2 month')) + INTERVAL '-2 month') AS DATE) AND (\\\"product__cloud_orgs\\\".\\\"ORG_TYPE\\\" IN ('Customer', 'Free') AND \\\"cloud_edge_nodes_fq\\\".\\\"TOTAL_EDGE_NODES\\\" > 0))\\n    GROUP BY 1, 2, 3\\n    LIMIT 1000\"\n    }\n  ],\n  \"51aab484-0dca-4588-9bb5-d66d01556736\": [\n    {\n      \"document_query_name\": \"Product: Edge (Software)\",\n      \"drill_name\": \"count_licenses\",\n      \"query\": {\n        \"limit\": 1000,\n        \"sorts\": [],\n        \"table\": \"software_edge_nodes_fq\",\n        \"fields\": [\n          \"sales__licenses.account_name\",\n          \"software_edge_nodes_fq.fiscal_quarter\",\n          \"software_edge_nodes_fq.license\",\n          \"software_edge_nodes_fq.license_type\",\n          \"software_edge_nodes_fq.max_edge_nodes\"\n        ],\n        \"pivots\": [],\n        \"dbtMode\": false,\n        \"filters\": {\n          \"software_edge_nodes_fq.license\": {\n            \"kind\": \"EQUALS\",\n            \"type\": \"string\",\n            \"values\": [\n              \"n\"\n            ],\n            \"is_negative\": true\n          },\n          \"software_edge_nodes_fq.fiscal_quarter\": {\n            \"type\": \"composite\",\n            \"filters\": [\n              {\n                \"kind\": \"TIME_FOR_UNIT_DURATION\",\n                \"type\": \"date\",\n                \"left_side\": \"FY2026 Q1\"\n              },\n              {\n                \"kind\": \"TIME_FOR_INTERVAL_DURATION\",\n                \"type\": \"date\",\n                \"left_side\": \"6 complete fiscal quarters ago\",\n                \"right_side\": \"6 quarters\",\n                \"is_negative\": false\n              }\n            ],\n            \"conjunction\": \"AND\",\n            \"is_negative\": false\n          },\n          \"software_edge_nodes_fq.max_edge_nodes\": {\n            \"kind\": \"GREATER_THAN\",\n            \"type\": \"number\",\n            \"values\": [\n              \"0\"\n            ],\n            \"is_negative\": false,\n            \"is_inclusive\": false\n          }\n        },\n        \"modelId\": \"767598ab-f985-4ba7-a39e-c866584f8780\",\n        \"version\": 8,\n        \"controls\": [],\n        \"rewriteSql\": true,\n        \"row_totals\": {},\n        \"fill_fields\": [],\n        \"calculations\": [],\n        \"column_limit\": 50,\n        \"join_via_map\": {},\n        \"column_totals\": {},\n        \"userEditedSQL\": \"\",\n        \"dimensionIndex\": 0,\n        \"default_group_by\": true,\n        \"custom_summary_types\": {},\n        \"join_paths_from_topic_name\": \"software_edge_nodes_fq\"\n      },\n      \"sql\": \"WITH \\\"software_edge_nodes_fq\\\" AS (SELECT *\\n        FROM (select\\n  first_day_of_fiscal_quarter as fiscal_quarter,\\n  license,\\n  license_type,\\n  max(edge_nodes) as max_edge_nodes\\nfrom (\\n  select \\n    date::date as date,\\n    license,\\n    license_type,\\n    sum(edge_nodes) as edge_nodes\\n  from analytics.product.onprem_telemetry_daily\\n  where guid is not null \\n  and telemetry_method = 'Client Side' \\n  and license_type ='enterprise'\\n  group by all\\n  ) a\\nleft join analytics.util.dates b on b.date_actual = a.date\\ngroup by all\\n            ))\\n\\nSELECT \\\"FISCAL_QUARTER\\\" AS \\\"software_edge_nodes_fq.fiscal_quarter__raw\\\",\\n        \\\"LICENSE\\\" AS \\\"software_edge_nodes_fq.license\\\",\\n        \\\"LICENSE_TYPE\\\" AS \\\"software_edge_nodes_fq.license_type\\\",\\n        \\\"MAX_EDGE_NODES\\\" AS \\\"software_edge_nodes_fq.max_edge_nodes\\\",\\n        TO_CHAR(\\\"FISCAL_QUARTER\\\", 'YYYY-MM-DD') AS \\\"software_edge_nodes_fq.fiscal_quarter\\\"\\n    FROM \\\"software_edge_nodes_fq\\\"\\n    WHERE (NOT \\\"LICENSE\\\" = 'n' OR \\\"LICENSE\\\" IS NULL) AND (\\\"FISCAL_QUARTER\\\" >= CAST(TIMESTAMP '2025-02-01 00:00:00' AS DATE) AND \\\"FISCAL_QUARTER\\\" < CAST((DATE_TRUNC('QUARTER', ((TIMESTAMP '2025-02-01 00:00:00' + INTERVAL '3 month') + INTERVAL '2 month')) + INTERVAL '-2 month') AS DATE)) AND (\\\"FISCAL_QUARTER\\\" >= CAST((DATE_TRUNC('QUARTER', ((CAST(CURRENT_TIMESTAMP AS TIMESTAMP(0)) + INTERVAL '-18 month') + INTERVAL '2 month')) + INTERVAL '-2 month') AS DATE) AND (\\\"FISCAL_QUARTER\\\" < CAST((DATE_TRUNC('QUARTER', (((DATE_TRUNC('QUARTER', ((CAST(CURRENT_TIMESTAMP AS TIMESTAMP(0)) + INTERVAL '-18 month') + INTERVAL '2 month')) + INTERVAL '-2 month') + INTERVAL '18 month') + INTERVAL '2 month')) + INTERVAL '-2 month') AS DATE) AND \\\"MAX_EDGE_NODES\\\" > 0))\\n    GROUP BY 1, 2, 3, 4\\n    LIMIT 1000\"\n    },\n    {\n      \"document_query_name\": \"Product: Edge (Software)\",\n      \"drill_name\": \"total_edge_nodes\",\n      \"query\": {\n        \"limit\": 1000,\n        \"sorts\": [],\n        \"table\": \"software_edge_nodes_fq\",\n        \"fields\": [\n          \"product__cloud_orgs.account_name\",\n          \"software_edge_nodes_fq.fiscal_quarter\",\n          \"software_edge_nodes_fq.license\",\n          \"software_edge_nodes_fq.license_type\",\n          \"software_edge_nodes_fq.max_edge_nodes\"\n        ],\n        \"pivots\": [],\n        \"dbtMode\": false,\n        \"filters\": {\n          \"software_edge_nodes_fq.license\": {\n            \"kind\": \"EQUALS\",\n            \"type\": \"string\",\n            \"values\": [\n              \"n\"\n            ],\n            \"is_negative\": true\n          },\n          \"software_edge_nodes_fq.fiscal_quarter\": {\n            \"type\": \"composite\",\n            \"filters\": [\n              {\n                \"kind\": \"TIME_FOR_UNIT_DURATION\",\n                \"type\": \"date\",\n                \"left_side\": \"FY2026 Q1\"\n              },\n              {\n                \"kind\": \"TIME_FOR_INTERVAL_DURATION\",\n                \"type\": \"date\",\n                \"left_side\": \"6 complete fiscal quarters ago\",\n                \"right_side\": \"6 quarters\",\n                \"is_negative\": false\n              }\n            ],\n            \"conjunction\": \"AND\",\n            \"is_negative\": false\n          },\n          \"software_edge_nodes_fq.max_edge_nodes\": {\n            \"kind\": \"GREATER_THAN\",\n            \"type\": \"number\",\n            \"values\": [\n              \"0\"\n            ],\n            \"is_negative\": false,\n            \"is_inclusive\": false\n          }\n        },\n        \"modelId\": \"39abb17e-f09c-46c7-aa9f-7d8946121191\",\n        \"version\": 8,\n        \"controls\": [],\n        \"rewriteSql\": true,\n        \"row_totals\": {},\n        \"fill_fields\": [],\n        \"calculations\": [],\n        \"column_limit\": 50,\n        \"join_via_map\": {},\n        \"column_totals\": {},\n        \"userEditedSQL\": \"\",\n        \"dimensionIndex\": 0,\n        \"default_group_by\": true,\n        \"custom_summary_types\": {},\n        \"join_paths_from_topic_name\": \"software_edge_nodes_fq\"\n      }\n    }\n  ]\n}",
        "includeOtherFields": true,
        "options": {}
      },
      "id": "loadQueries1",
      "name": "Load Drill Queries",
      "type": "n8n-nodes-base.set",
      "typeVersion": 3.4,
      "position": [
        3312,
        1296
      ],
      "disabled": true
    },
    {
      "parameters": {
        "options": {
          "reset": false
        }
      },
      "id": "outerLoop1",
      "name": "Loop Over UUIDs",
      "type": "n8n-nodes-base.splitInBatches",
      "typeVersion": 3,
      "position": [
        4640,
        464
      ],
      "executeOnce": false,
      "disabled": true
    },
    {
      "parameters": {
        "jsCode": "const inputData = $('Load Drill Queries').first().json;\n  const systemFields = ['headers', 'params', 'query', 'webhookUrl', 'executionMode'];\n  const drillQueries = {};\n\n  for (const [key, value] of Object.entries(inputData)) {\n    if (!systemFields.includes(key) && typeof value === 'object' && Array.isArray(value)) {\n      drillQueries[key] = value;\n    }\n  }\n\n  const uuidKeys = Object.keys(drillQueries);\n\n  if (uuidKeys.length === 0) {\n    return [{\n      json: {\n        error: 'No drill query UUIDs found in input data',\n        inputKeys: Object.keys(inputData)\n      }\n    }];\n  }\n\n  let drill_queries = uuidKeys.map(document_query_id => ({\n    json: {\n      document_query_id: document_query_id,\n      document_query_name: drillQueries[document_query_id][0][\"document_query_name\"],\n      queries: drillQueries[document_query_id],\n      queryCount: drillQueries[document_query_id].length\n    }\n  }))\n\n  return drill_queries;"
      },
      "type": "n8n-nodes-base.code",
      "typeVersion": 2,
      "position": [
        4144,
        464
      ],
      "id": "d9071922-dd3c-4544-8313-87cd21b0b593",
      "name": "Prepare UUID Loop Data",
      "disabled": true
    },
    {
      "parameters": {
        "jsCode": "// // const inputData = $('Load Drill Queries').first().json;\n// // const systemFields = ['headers', 'params', 'query', 'webhookUrl', 'executionMode'];\n// // const drillQueries = {};\n\n// // for (const [key, value] of Object.entries(inputData)) {\n// //   if (!systemFields.includes(key) && typeof value === 'object' && Array.isArray(value)) {\n// //     drillQueries[key] = value;\n// //   }\n// // }\n\n// // const uuidKeys = Object.keys(drillQueries);\n\n// // if (uuidKeys.length === 0) {\n// //   return [{\n// //     json: {\n// //       error: 'No drill query UUIDs found in input data',\n// //       inputKeys: Object.keys(inputData)\n// //     }\n// //   }];\n// // }\n\n// // let count = 0;\n// // uuidKeys.forEach(uuid => count += drillQueries[uuid].length);\n\n// let input = $input.all();\n// let queries = [];\n// let document_query_id;\n// let document_query_name;\n\n\n\n\n// return {\n//   \"drill_queries_count\": $input.all().length\n// };\n\n\n// Code node mode: Run Once for All Items\n// Input to the node is an array of \"items\".\n// Use $input.all() to read them all. :contentReference[oaicite:1]{index=1}\n\nconst items = $input.all(); // [{ json: {...} }, { json: {...} }, ...]\nif (!items.length) return [{ json: {} }];\n\nconst first = items[0].json;\n\n// Keys that belong to each individual query entry:\nconst PER_QUERY_KEYS = new Set([\"drill_name\", \"query\"]);\n\n// Keys you typically *don't* want to include at the top level:\nconst IGNORE_TOP_LEVEL_KEYS = new Set([\"id\", \"createdAt\", \"updatedAt\", \"drill_name\", \"query\"]);\n\nfunction safeParseQuery(q) {\n  if (q == null) return q;\n  if (typeof q === \"object\") return q; // already parsed\n  if (typeof q === \"string\") {\n    try {\n      return JSON.parse(q);\n    } catch (e) {\n      // If it isn't valid JSON, keep original string\n      return q;\n    }\n  }\n  return q;\n}\n\n// Build the \"queries\" array\nconst queries = items.map(({ json }) => ({\n  document_query_name: json.document_query_name,\n  drill_name: json.drill_name,\n  query: safeParseQuery(json.query),\n}));\n\n// Start output with required top-level fields\nconst output = {\n  document_query_id: first.document_query_id,\n  document_query_name: first.document_query_name,\n  queries,\n  queryCount: queries.length,\n};\n\n// Optionally carry over any other fields that are identical across all items\nfor (const [key, value] of Object.entries(first)) {\n  if (IGNORE_TOP_LEVEL_KEYS.has(key)) continue;\n  if (key === \"document_query_id\" || key === \"document_query_name\") continue;\n\n  const sameAcrossAll = items.every(({ json }) => JSON.stringify(json[key]) === JSON.stringify(value));\n  if (sameAcrossAll) output[key] = value;\n}\n\n// Return a single item (n8n expects items shaped like { json: ... }) :contentReference[oaicite:2]{index=2}\nreturn [{ json: output }];\n"
      },
      "type": "n8n-nodes-base.code",
      "typeVersion": 2,
      "position": [
        3696,
        1120
      ],
      "id": "347e89ad-1d53-4099-8d9d-20a8602b2c12",
      "name": "Get Drill Queries Count"
    },
    {
      "parameters": {
        "jsonSchemaExample": "{\n  \"today\": \"2026-02-22\",\n  \"current_fiscal_quarter\": \"FY2027 Q1\",\n  \"previous_fiscal_quarter\": \"FY2026 Q4\",\n  \"current_fiscal_half\": \"FY2027 H1\",\n  \"previous_fiscal_half\": \"FY2026 H2\"\n}"
      },
      "type": "@n8n/n8n-nodes-langchain.outputParserStructured",
      "typeVersion": 1.3,
      "position": [
        2640,
        1328
      ],
      "id": "0f55f706-a159-4c68-bb74-68f7dbe15efe",
      "name": "Structured Output Parser"
    },
    {
      "parameters": {
        "promptType": "define",
        "text": "=<role>\nYou are a date-aware automation agent that, at runtime, uses the current calendar date and converts it into the organizations fiscal quarter and fiscal half-year.\n</role>\n\n<task>\n1. Capture todays date in ISO-8601 format (YYYY-MM-DD).  \n2. Derive the current fiscal quarter using this mapping:  \n    February, March, April  Q1  \n    May, June, July  Q2  \n    August, September, October  Q3  \n    November, December, January  Q4\n3. Similarly, derive the previous fiscal quarter.\n4. Then, derive the previous' previous fiscal quarter. In the end, you will have 3 fiscal quarters. From here on out, you will consider the \"current_fiscal_quarter\" to be your derived previous fiscal quarter and you will consider the \"previous_fiscal_quarter\" to be your derived 2 quarters previous. This is because we will run this at the end of each quarter that has just finished in order to compare this most recently finished fiscal quarter with 2 quarters ago.\n4. Determine the current fiscal half-year: \n    H1 = Q1 + Q2 (February  July) \n    H2 = Q3 + Q4 (August  January)\n5. Similarly to deriving the current fiscal half-year, derive the previous fiscal half-year\n6. Assign the fiscal year (FY):  \n    FY is labelled by the calendar year of the January that closes Q4.  \n      Example: any date from 2025-11-01 through 2026-01-31 belongs to FY2026 Q4.  \n7. If a month is ever missing from the mapping (unexpected), set  \n   \"fiscal_quarter\": \"Unmapped\", \"fiscal_half\": \"Unmapped\",  \n   add a \"warning\" key explaining why, and continue.  \n8. Produce one JSON object that follows the output_format section exactly.  \n9. Self-check: validate JSON syntax, confirm quarter/half/year logic, and flag any ambiguity or edge case before returning.\n</task>\n\n<context>\nThe organization follows a non-standard fiscal calendar that begins in February and spans ten active months, grouping them into the quarters above.  \nWe prefer the simplest workflow that fully handles edge cases (e.g., leap years, timezone differences, cross-year FY labelling) and follows security-best practices.\n</context>\n\n<examples>\n<fiscal_quarter_examples>\n2024-02-01  FY2025 Q1  \n2024-05-15  FY2025 Q2\n2024-07-29  FY2025 Q2\n2024-08-01  FY2025 Q3\n2024-10-30  FY2025 Q3\n2024-12-30  FY2025 Q4  \n2025-01-31  FY2025 Q4\n2025-02-01  FY2026 Q1\n2025-06-10  FY2026 Q2  \n2025-09-05  FY2026 Q3  \n2025-12-12  FY2026 Q4  \n2026-03-03  FY2027 Q1\n2026-05-22  FY2027 Q2\n</fiscal_quarter_examples>\n\n<fiscal_half_examples>\n2024-02-01  FY2025 H1\n2024-05-15  FY2025 H1\n2024-07-29  FY2025 H1\n2024-08-01  FY2025 H2\n2024-10-30  FY2025 H2\n2024-12-30  FY2025 H2  \n2025-01-31  FY2025 H2  \n2025-02-01  FY2026 H1\n2025-06-10  FY2026 H1  \n2025-09-05  FY2026 H2  \n2025-12-12  FY2026 H2  \n2026-03-03  FY2027 H1\n2026-05-22  FY2027 H1\n</fiscal_half_examples>\n\n</examples>\n\n<guidelines>\n- Output only the JSON objectno extra text.  \n- Keys must be lower_snake_case and wrapped in double quotes.  \n- Do not include trailing commas.  \n- Point out any implicit or non-obvious gotchas (e.g., FY roll-over rules) in the \"warning\" field instead of silently proceeding.  \n- Do not simply agree; highlight anything incorrect or sub-optimal and suggest improvements.  \n- Think step-by-step, then self-check that the response meets every instruction before returning it.\n</guidelines>\n\n<input>\ntoday: {{ $today.format('yyyy-MM-dd') }}\n</input>\n\n<output_format>\n{\n  \"today\": \"2026-05-22\",\n  \"current_fiscal_quarter\": \"FY2027 Q1\",\n  \"previous_fiscal_quarter\": \"FY2026 Q4\",\n  \"current_fiscal_half\": \"FY2027 H1\",\n  \"previous_fiscal_half\": \"FY2026 H2\"\n}\n</output_format>",
        "hasOutputParser": true,
        "options": {}
      },
      "type": "@n8n/n8n-nodes-langchain.agent",
      "typeVersion": 3,
      "position": [
        2480,
        1120
      ],
      "id": "627f6fd7-713f-44fe-8a43-511b655cf548",
      "name": "Fiscal Quarter Extractor"
    },
    {
      "parameters": {
        "model": "o4-mini",
        "options": {}
      },
      "type": "@n8n/n8n-nodes-langchain.lmChatAzureOpenAi",
      "typeVersion": 1,
      "position": [
        2416,
        1328
      ],
      "id": "5421085b-5efc-40de-895d-5f9d003d2ddf",
      "name": "o4-mini",
      "credentials": {
        "azureOpenAiApi": {
          "id": "N96DE6AiByL8h8kA",
          "name": "Azure OpenAI o4-mini"
        }
      }
    },
    {
      "parameters": {
        "httpMethod": "POST",
        "path": "board-deck-takeaways-ze5ubv1w",
        "authentication": "basicAuth",
        "responseMode": "responseNode",
        "options": {
          "responseHeaders": {
            "entries": [
              {
                "name": "Content-Type",
                "value": "application/json"
              }
            ]
          }
        }
      },
      "type": "n8n-nodes-base.webhook",
      "typeVersion": 2.1,
      "position": [
        48,
        1408
      ],
      "id": "6ed5e716-a593-43f8-a2a5-ff2b55e7606a",
      "name": "Trigger",
      "webhookId": "1298ec1c-5d6c-4010-9b21-b40fada0aa39",
      "alwaysOutputData": true,
      "credentials": {
        "httpBasicAuth": {
          "id": "3AVUqEU99hkVKUOW",
          "name": "Zapier Inbound Basic Auth Webhook"
        }
      }
    },
    {
      "parameters": {
        "respondWith": "noData",
        "options": {
          "responseCode": 202
        }
      },
      "type": "n8n-nodes-base.respondToWebhook",
      "typeVersion": 1.5,
      "position": [
        304,
        1408
      ],
      "id": "ee9d858a-7473-476a-8e2d-509ceb132fb6",
      "name": "Respond to Webhook"
    },
    {
      "parameters": {
        "resource": "folder",
        "name": "=Board_Deck_Takeaways_{{ $now.format('yyyyMMdd_HHmmss') }}",
        "driveId": {
          "__rl": true,
          "value": "My Drive",
          "mode": "list",
          "cachedResultName": "My Drive",
          "cachedResultUrl": "https://drive.google.com/drive/my-drive"
        },
        "folderId": {
          "__rl": true,
          "value": "1dSd5PWJ0BH1ksydt-GnYJraDhwLnAbGZ",
          "mode": "list",
          "cachedResultName": "AI Workflow - Board Deck Takeaways",
          "cachedResultUrl": "https://drive.google.com/drive/folders/1dSd5PWJ0BH1ksydt-GnYJraDhwLnAbGZ"
        },
        "options": {}
      },
      "type": "n8n-nodes-base.googleDrive",
      "typeVersion": 3,
      "position": [
        2960,
        1200
      ],
      "id": "15d9460c-b80f-4f00-9421-f1073c6e8a94",
      "name": "Create folder",
      "credentials": {
        "googleDriveOAuth2Api": {
          "id": "SgST8lxFUWMslYat",
          "name": "Google Drive Cribl"
        }
      },
      "disabled": true
    },
    {
      "parameters": {
        "assignments": {
          "assignments": [
            {
              "id": "fa236bc3-f105-4270-adb5-2552a04a69e5",
              "name": "google_drive_folder_id",
              "value": "={{ $('Input Extractor Agent').item.json.output.data.google_drive_folder_id }}",
              "type": "string"
            },
            {
              "id": "230fa6da-2b61-420f-b2d7-10d6cacf6c5d",
              "name": "current_fiscal_quarter",
              "value": "={{ $('Fiscal Quarter Extractor').item.json.output.current_fiscal_quarter }}",
              "type": "string"
            },
            {
              "id": "b0c57526-3be8-49d0-8967-0af6a965063d",
              "name": "previous_fiscal_quarter",
              "value": "={{ $('Fiscal Quarter Extractor').item.json.output.previous_fiscal_quarter }}",
              "type": "string"
            },
            {
              "id": "80a8a4e9-2554-474e-aada-25bfdbddb519",
              "name": "default_user_id",
              "value": "={{ $('Global Vars2').item.json.default_user_id }}",
              "type": "string"
            }
          ]
        },
        "includeOtherFields": true,
        "options": {}
      },
      "type": "n8n-nodes-base.set",
      "typeVersion": 3.4,
      "position": [
        4912,
        624
      ],
      "id": "2644febc-6619-4de2-ac6c-b17278e1c02d",
      "name": "Loop UUID Item",
      "disabled": true
    },
    {
      "parameters": {
        "workflowId": {
          "__rl": true,
          "value": "mDJHNy6DrprAll2W",
          "mode": "list",
          "cachedResultUrl": "/workflow/mDJHNy6DrprAll2W",
          "cachedResultName": "Board_Deck_Document_Query_Analysis_Subworkflow"
        },
        "workflowInputs": {
          "mappingMode": "defineBelow",
          "value": {
            "input": "={{ $json }}"
          },
          "matchingColumns": [
            "input"
          ],
          "schema": [
            {
              "id": "input",
              "displayName": "input",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "canBeUsedToMatch": true,
              "type": "object",
              "removed": false
            }
          ],
          "attemptToConvertTypes": false,
          "convertFieldsToString": true
        },
        "options": {
          "waitForSubWorkflow": false
        }
      },
      "type": "n8n-nodes-base.executeWorkflow",
      "typeVersion": 1.3,
      "position": [
        5120,
        624
      ],
      "id": "0d71b9a5-7d56-4e33-92f6-ccc9a2216c29",
      "name": "Call 'Board_Deck_Document_Query_Analysis_Subworkflow'",
      "disabled": true
    },
    {
      "parameters": {
        "content": "## High number of measures\n```\n{\n  \"c3023df3-39f1-4913-86c8-07d69f6caeb1\": [\n    {\n      \"document_query_name\": \"Incremental Cloud ARR and Customers Over Time\",\n      \"drill_name\": \"total_customers\",\n      \"query\": {\n        \"limit\": 1000,\n        \"sorts\": [],\n        \"table\": \"finance__customer_quarterly_arr\",\n        \"fields\": [\n          \"finance__customer_quarterly_arr.fiscal_quarter[fiscal_quarter]\",\n          \"finance__customer_quarterly_arr.customer_name\",\n          \"finance__customer_quarterly_arr.first_purchase_quarter[date]\",\n          \"finance__customer_quarterly_arr.cribl_id\",\n          \"finance__customer_quarterly_arr.customer_type\",\n          \"finance__customer_quarterly_arr.total_starting_arr\",\n          \"finance__customer_quarterly_arr.total_new_arr\",\n          \"finance__customer_quarterly_arr.total_upsell_arr\",\n          \"finance__customer_quarterly_arr.total_churn_arr\",\n          \"finance__customer_quarterly_arr.total_downsell_arr\",\n          \"finance__customer_quarterly_arr.total_ending_arr\"\n        ],\n        \"pivots\": [],\n        \"dbtMode\": false,\n        \"filters\": {\n          \"finance__customer_quarterly_arr.fiscal_quarter\": {\n            \"type\": \"composite\",\n            \"filters\": [\n              {\n                \"kind\": \"TIME_FOR_UNIT_DURATION\",\n                \"type\": \"date\",\n                \"left_side\": \"FY2026 Q3\"\n              },\n              {\n                \"kind\": \"TIME_FOR_INTERVAL_DURATION\",\n                \"type\": \"date\",\n                \"left_side\": \"6 complete fiscal quarters ago\",\n                \"right_side\": \"6 quarters\",\n                \"is_negative\": false\n              }\n            ],\n            \"conjunction\": \"AND\",\n            \"is_negative\": false\n          },\n          \"finance__customer_quarterly_arr.source_granularity\": {\n            \"kind\": \"EQUALS\",\n            \"type\": \"string\",\n            \"values\": [\n              \"cloud\"\n            ]\n          }\n        },\n        \"modelId\": \"e3a78095-f13c-49a2-9a4c-617fca386ca4\",\n        \"version\": 8,\n        \"controls\": [],\n        \"rewriteSql\": true,\n        \"row_totals\": {},\n        \"fill_fields\": [],\n        \"calculations\": [],\n        \"column_limit\": 50,\n        \"join_via_map\": {},\n        \"column_totals\": {},\n        \"userEditedSQL\": \"\",\n        \"dimensionIndex\": 0,\n        \"default_group_by\": true,\n        \"custom_summary_types\": {},\n        \"join_paths_from_topic_name\": \"customer_quarterly_arr\"\n      },\n      \"sql\": \"SELECT 'FY' || CAST(EXTRACT(YEAR FROM (\\\"FISCAL_QUARTER\\\" + INTERVAL '11 month')) AS VARCHAR) || (' Q' || CAST(CAST(FLOOR((MOD(EXTRACT(MONTH FROM \\\"FISCAL_QUARTER\\\") + -13, 12) + 12 - 1) / 3) AS BIGINT) + 1 AS VARCHAR)) AS \\\"finance__customer_quarterly_arr.fiscal_quarter[fiscal_quarter]\\\",\\n    \\\"CUSTOMER_NAME\\\" AS \\\"finance__customer_quarterly_arr.customer_name\\\",\\n    CAST(DATE_TRUNC('DAY', \\\"FIRST_PURCHASE_QUARTER\\\") AS TIMESTAMP(0)) AS \\\"finance__customer_quarterly_arr.first_purchase_quarter[date]__raw\\\",\\n    \\\"CRIBL_ID\\\" AS \\\"finance__customer_quarterly_arr.cribl_id\\\",\\n    \\\"CUSTOMER_TYPE\\\" AS \\\"finance__customer_quarterly_arr.customer_type\\\",\\n    COALESCE(SUM(CASE\\n        WHEN \\\"STARTING_ARR\\\" > 0 THEN \\\"STARTING_ARR_CLOUD\\\"\\n        ELSE NULL\\n    END), 0) AS \\\"finance__customer_quarterly_arr.total_starting_arr\\\",\\n    COALESCE(SUM(CASE\\n        WHEN \\\"NEW_ARR\\\" > 0 THEN \\\"NEW_ARR_CLOUD\\\"\\n        ELSE NULL\\n    END), 0) AS \\\"finance__customer_quarterly_arr.total_new_arr\\\",\\n    COALESCE(SUM(CASE\\n        WHEN \\\"UPSELL_ARR\\\" > 0 THEN \\\"UPSELL_ARR_CLOUD\\\"\\n        ELSE NULL\\n    END), 0) AS \\\"finance__customer_quarterly_arr.total_upsell_arr\\\",\\n    COALESCE(SUM(CASE\\n        WHEN \\\"CHURN_ARR\\\" < 0 THEN \\\"CHURN_ARR_CLOUD\\\"\\n        ELSE NULL\\n    END), 0) AS \\\"finance__customer_quarterly_arr.total_churn_arr\\\",\\n    COALESCE(SUM(CASE\\n        WHEN \\\"DOWNSELL_ARR\\\" < 0 THEN \\\"DOWNSELL_ARR_CLOUD\\\"\\n        ELSE NULL\\n    END), 0) AS \\\"finance__customer_quarterly_arr.total_downsell_arr\\\",\\n    COALESCE(SUM(CASE\\n        WHEN \\\"ENDING_ARR\\\" > 0 THEN \\\"ENDING_ARR_CLOUD\\\"\\n        ELSE NULL\\n    END), 0) AS \\\"finance__customer_quarterly_arr.total_ending_arr\\\",\\n    TO_CHAR(CAST(DATE_TRUNC('DAY', \\\"FIRST_PURCHASE_QUARTER\\\") AS TIMESTAMP(0)), 'YYYY-MM-DD') AS \\\"finance__customer_quarterly_arr.first_purchase_quarter[date]\\\"\\nFROM \\\"FINANCE\\\".\\\"CUSTOMER_QUARTERLY_ARR\\\" AS \\\"finance__customer_quarterly_arr\\\"\\nWHERE \\\"FISCAL_QUARTER\\\" >= CAST(TIMESTAMP '2025-08-01 00:00:00' AS DATE) AND \\\"FISCAL_QUARTER\\\" < CAST((DATE_TRUNC('QUARTER', ((TIMESTAMP '2025-08-01 00:00:00' + INTERVAL '3 month') + INTERVAL '2 month')) + INTERVAL '-2 month') AS DATE) AND \\\"FISCAL_QUARTER\\\" >= CAST((DATE_TRUNC('QUARTER', ((CAST(CURRENT_TIMESTAMP AS TIMESTAMP(0)) + INTERVAL '-18 month') + INTERVAL '2 month')) + INTERVAL '-2 month') AS DATE) AND \\\"FISCAL_QUARTER\\\" < CAST((DATE_TRUNC('QUARTER', (((DATE_TRUNC('QUARTER', ((CAST(CURRENT_TIMESTAMP AS TIMESTAMP(0)) + INTERVAL '-18 month') + INTERVAL '2 month')) + INTERVAL '-2 month') + INTERVAL '18 month') + INTERVAL '2 month')) + INTERVAL '-2 month') AS DATE)\\nGROUP BY 4, 2, 5, 3, 1\\nLIMIT 1000\"\n    },\n    {\n      \"document_query_name\": \"Incremental Cloud ARR and Customers Over Time\",\n      \"drill_name\": \"total_migration_arr\",\n      \"query\": {\n        \"limit\": 1000,\n        \"sorts\": [],\n        \"table\": \"finance__customer_quarterly_arr\",\n        \"fields\": [\n          \"finance__customer_quarterly_arr.fiscal_quarter[fiscal_quarter]\",\n          \"finance__customer_quarterly_arr.customer_name\",\n          \"finance__customer_quarterly_arr.first_purchase_quarter[date]\",\n          \"finance__customer_quarterly_arr.cribl_id\",\n          \"finance__customer_quarterly_arr.customer_type\",\n          \"finance__customer_quarterly_arr.total_migration_arr\",\n          \"finance__customer_quarterly_arr.migration_arr_cloud\",\n          \"finance__customer_quarterly_arr.migration_arr_software\"\n        ],\n        \"pivots\": [],\n        \"dbtMode\": false,\n        \"filters\": {\n          \"finance__customer_quarterly_arr.fiscal_quarter\": {\n            \"type\": \"composite\",\n            \"filters\": [\n              {\n                \"kind\": \"TIME_FOR_UNIT_DURATION\",\n                \"type\": \"date\",\n                \"left_side\": \"FY2026 Q3\"\n              },\n              {\n                \"kind\": \"TIME_FOR_INTERVAL_DURATION\",\n                \"type\": \"date\",\n                \"left_side\": \"6 complete fiscal quarters ago\",\n                \"right_side\": \"6 quarters\",\n                \"is_negative\": false\n              }\n            ],\n            \"conjunction\": \"AND\",\n            \"is_negative\": false\n          },\n          \"finance__customer_quarterly_arr.source_granularity\": {\n            \"kind\": \"EQUALS\",\n            \"type\": \"string\",\n            \"values\": [\n              \"cloud\"\n            ]\n          }\n        },\n        \"modelId\": \"df073f20-17b0-4d9c-b667-2b2f86b5fae8\",\n        \"version\": 8,\n        \"controls\": [],\n        \"rewriteSql\": true,\n        \"row_totals\": {},\n        \"fill_fields\": [],\n        \"calculations\": [],\n        \"column_limit\": 50,\n        \"join_via_map\": {},\n        \"column_totals\": {},\n        \"userEditedSQL\": \"\",\n        \"dimensionIndex\": 0,\n        \"default_group_by\": true,\n        \"custom_summary_types\": {},\n        \"join_paths_from_topic_name\": \"customer_quarterly_arr\"\n      },\n      \"sql\": \"SELECT 'FY' || CAST(EXTRACT(YEAR FROM (\\\"FISCAL_QUARTER\\\" + INTERVAL '11 month')) AS VARCHAR) || (' Q' || CAST(CAST(FLOOR((MOD(EXTRACT(MONTH FROM \\\"FISCAL_QUARTER\\\") + -13, 12) + 12 - 1) / 3) AS BIGINT) + 1 AS VARCHAR)) AS \\\"finance__customer_quarterly_arr.fiscal_quarter[fiscal_quarter]\\\",\\n    \\\"CUSTOMER_NAME\\\" AS \\\"finance__customer_quarterly_arr.customer_name\\\",\\n    CAST(DATE_TRUNC('DAY', \\\"FIRST_PURCHASE_QUARTER\\\") AS TIMESTAMP(0)) AS \\\"finance__customer_quarterly_arr.first_purchase_quarter[date]__raw\\\",\\n    \\\"CRIBL_ID\\\" AS \\\"finance__customer_quarterly_arr.cribl_id\\\",\\n    \\\"CUSTOMER_TYPE\\\" AS \\\"finance__customer_quarterly_arr.customer_type\\\",\\n    COALESCE(SUM(\\\"MIGRATION_ARR_CLOUD\\\"), 0) AS \\\"finance__customer_quarterly_arr.total_migration_arr\\\",\\n    \\\"MIGRATION_ARR_CLOUD\\\" AS \\\"finance__customer_quarterly_arr.migration_arr_cloud\\\",\\n    \\\"MIGRATION_ARR_SOFTWARE\\\" AS \\\"finance__customer_quarterly_arr.migration_arr_software\\\",\\n    TO_CHAR(CAST(DATE_TRUNC('DAY', \\\"FIRST_PURCHASE_QUARTER\\\") AS TIMESTAMP(0)), 'YYYY-MM-DD') AS \\\"finance__customer_quarterly_arr.first_purchase_quarter[date]\\\"\\nFROM \\\"FINANCE\\\".\\\"CUSTOMER_QUARTERLY_ARR\\\" AS \\\"finance__customer_quarterly_arr\\\"\\nWHERE \\\"FISCAL_QUARTER\\\" >= CAST(TIMESTAMP '2025-08-01 00:00:00' AS DATE) AND \\\"FISCAL_QUARTER\\\" < CAST((DATE_TRUNC('QUARTER', ((TIMESTAMP '2025-08-01 00:00:00' + INTERVAL '3 month') + INTERVAL '2 month')) + INTERVAL '-2 month') AS DATE) AND \\\"FISCAL_QUARTER\\\" >= CAST((DATE_TRUNC('QUARTER', ((CAST(CURRENT_TIMESTAMP AS TIMESTAMP(0)) + INTERVAL '-18 month') + INTERVAL '2 month')) + INTERVAL '-2 month') AS DATE) AND \\\"FISCAL_QUARTER\\\" < CAST((DATE_TRUNC('QUARTER', (((DATE_TRUNC('QUARTER', ((CAST(CURRENT_TIMESTAMP AS TIMESTAMP(0)) + INTERVAL '-18 month') + INTERVAL '2 month')) + INTERVAL '-2 month') + INTERVAL '18 month') + INTERVAL '2 month')) + INTERVAL '-2 month') AS DATE)\\nGROUP BY 4, 2, 5, 3, 1, 7, 8\\nLIMIT 1000\"\n    },\n    {\n      \"document_query_name\": \"Incremental Cloud ARR and Customers Over Time\",\n      \"drill_name\": \"total_gross_new_arr\",\n      \"query\": {\n        \"limit\": 1000,\n        \"sorts\": [\n          {\n            \"column_name\": \"finance__customer_quarterly_arr.total_starting_arr\",\n            \"sort_descending\": true\n          }\n        ],\n        \"table\": \"finance__customer_quarterly_arr\",\n        \"fields\": [\n          \"finance__customer_quarterly_arr.fiscal_quarter[fiscal_quarter]\",\n          \"finance__customer_quarterly_arr.customer_name\",\n          \"finance__customer_quarterly_arr.first_purchase_quarter[date]\",\n          \"finance__customer_quarterly_arr.cribl_id\",\n          \"finance__customer_quarterly_arr.total_starting_arr\",\n          \"finance__customer_quarterly_arr.total_new_arr\",\n          \"finance__customer_quarterly_arr.total_upsell_arr\"\n        ],\n        \"pivots\": [],\n        \"dbtMode\": false,\n        \"filters\": {\n          \"finance__customer_quarterly_arr.fiscal_quarter\": {\n            \"type\": \"composite\",\n            \"filters\": [\n              {\n                \"kind\": \"TIME_FOR_UNIT_DURATION\",\n                \"type\": \"date\",\n                \"left_side\": \"FY2026 Q3\"\n              },\n              {\n                \"kind\": \"TIME_FOR_INTERVAL_DURATION\",\n                \"type\": \"date\",\n                \"left_side\": \"6 complete fiscal quarters ago\",\n                \"right_side\": \"6 quarters\",\n                \"is_negative\": false\n              }\n            ],\n            \"conjunction\": \"AND\",\n            \"is_negative\": false\n          },\n          \"finance__customer_quarterly_arr.source_granularity\": {\n            \"kind\": \"EQUALS\",\n            \"type\": \"string\",\n            \"values\": [\n              \"cloud\"\n            ]\n          }\n        },\n        \"modelId\": \"51b818b3-a897-4ede-a516-ab7436c6be97\",\n        \"version\": 8,\n        \"controls\": [],\n        \"rewriteSql\": true,\n        \"row_totals\": {},\n        \"fill_fields\": [],\n        \"calculations\": [],\n        \"column_limit\": 50,\n        \"join_via_map\": {},\n        \"column_totals\": {},\n        \"userEditedSQL\": \"\",\n        \"dimensionIndex\": 0,\n        \"default_group_by\": true,\n        \"custom_summary_types\": {},\n        \"join_paths_from_topic_name\": \"customer_quarterly_arr\"\n      },\n      \"sql\": \"SELECT 'FY' || CAST(EXTRACT(YEAR FROM (\\\"FISCAL_QUARTER\\\" + INTERVAL '11 month')) AS VARCHAR) || (' Q' || CAST(CAST(FLOOR((MOD(EXTRACT(MONTH FROM \\\"FISCAL_QUARTER\\\") + -13, 12) + 12 - 1) / 3) AS BIGINT) + 1 AS VARCHAR)) AS \\\"finance__customer_quarterly_arr.fiscal_quarter[fiscal_quarter]\\\",\\n    \\\"CUSTOMER_NAME\\\" AS \\\"finance__customer_quarterly_arr.customer_name\\\",\\n    CAST(DATE_TRUNC('DAY', \\\"FIRST_PURCHASE_QUARTER\\\") AS TIMESTAMP(0)) AS \\\"finance__customer_quarterly_arr.first_purchase_quarter[date]__raw\\\",\\n    \\\"CRIBL_ID\\\" AS \\\"finance__customer_quarterly_arr.cribl_id\\\",\\n    COALESCE(SUM(CASE\\n        WHEN \\\"STARTING_ARR\\\" > 0 THEN \\\"STARTING_ARR_CLOUD\\\"\\n        ELSE NULL\\n    END), 0) AS \\\"finance__customer_quarterly_arr.total_starting_arr\\\",\\n    COALESCE(SUM(CASE\\n        WHEN \\\"NEW_ARR\\\" > 0 THEN \\\"NEW_ARR_CLOUD\\\"\\n        ELSE NULL\\n    END), 0) AS \\\"finance__customer_quarterly_arr.total_new_arr\\\",\\n    COALESCE(SUM(CASE\\n        WHEN \\\"UPSELL_ARR\\\" > 0 THEN \\\"UPSELL_ARR_CLOUD\\\"\\n        ELSE NULL\\n    END), 0) AS \\\"finance__customer_quarterly_arr.total_upsell_arr\\\",\\n    TO_CHAR(CAST(DATE_TRUNC('DAY', \\\"FIRST_PURCHASE_QUARTER\\\") AS TIMESTAMP(0)), 'YYYY-MM-DD') AS \\\"finance__customer_quarterly_arr.first_purchase_quarter[date]\\\"\\nFROM \\\"FINANCE\\\".\\\"CUSTOMER_QUARTERLY_ARR\\\" AS \\\"finance__customer_quarterly_arr\\\"\\nWHERE \\\"FISCAL_QUARTER\\\" >= CAST(TIMESTAMP '2025-08-01 00:00:00' AS DATE) AND \\\"FISCAL_QUARTER\\\" < CAST((DATE_TRUNC('QUARTER', ((TIMESTAMP '2025-08-01 00:00:00' + INTERVAL '3 month') + INTERVAL '2 month')) + INTERVAL '-2 month') AS DATE) AND \\\"FISCAL_QUARTER\\\" >= CAST((DATE_TRUNC('QUARTER', ((CAST(CURRENT_TIMESTAMP AS TIMESTAMP(0)) + INTERVAL '-18 month') + INTERVAL '2 month')) + INTERVAL '-2 month') AS DATE) AND \\\"FISCAL_QUARTER\\\" < CAST((DATE_TRUNC('QUARTER', (((DATE_TRUNC('QUARTER', ((CAST(CURRENT_TIMESTAMP AS TIMESTAMP(0)) + INTERVAL '-18 month') + INTERVAL '2 month')) + INTERVAL '-2 month') + INTERVAL '18 month') + INTERVAL '2 month')) + INTERVAL '-2 month') AS DATE)\\nGROUP BY 4, 2, 3, 1\\nLIMIT 1000\"\n    },\n    {\n      \"document_query_name\": \"Incremental Cloud ARR and Customers Over Time\",\n      \"drill_name\": \"total_gross_new_arr\",\n      \"query\": {\n        \"limit\": 1000,\n        \"sorts\": [\n          {\n            \"column_name\": \"finance__customer_quarterly_arr.total_new_arr\",\n            \"sort_descending\": true\n          }\n        ],\n        \"table\": \"finance__customer_quarterly_arr\",\n        \"fields\": [\n          \"finance__customer_quarterly_arr.fiscal_quarter[fiscal_quarter]\",\n          \"finance__customer_quarterly_arr.customer_name\",\n          \"finance__customer_quarterly_arr.first_purchase_quarter[date]\",\n          \"finance__customer_quarterly_arr.cribl_id\",\n          \"finance__customer_quarterly_arr.total_starting_arr\",\n          \"finance__customer_quarterly_arr.total_new_arr\",\n          \"finance__customer_quarterly_arr.total_upsell_arr\"\n        ],\n        \"pivots\": [],\n        \"dbtMode\": false,\n        \"filters\": {\n          \"finance__customer_quarterly_arr.fiscal_quarter\": {\n            \"type\": \"composite\",\n            \"filters\": [\n              {\n                \"kind\": \"TIME_FOR_UNIT_DURATION\",\n                \"type\": \"date\",\n                \"left_side\": \"FY2026 Q3\"\n              },\n              {\n                \"kind\": \"TIME_FOR_INTERVAL_DURATION\",\n                \"type\": \"date\",\n                \"left_side\": \"6 complete fiscal quarters ago\",\n                \"right_side\": \"6 quarters\",\n                \"is_negative\": false\n              }\n            ],\n            \"conjunction\": \"AND\",\n            \"is_negative\": false\n          },\n          \"finance__customer_quarterly_arr.source_granularity\": {\n            \"kind\": \"EQUALS\",\n            \"type\": \"string\",\n            \"values\": [\n              \"cloud\"\n            ]\n          }\n        },\n        \"modelId\": \"51b818b3-a897-4ede-a516-ab7436c6be97\",\n        \"version\": 8,\n        \"controls\": [],\n        \"rewriteSql\": true,\n        \"row_totals\": {},\n        \"fill_fields\": [],\n        \"calculations\": [],\n        \"column_limit\": 50,\n        \"join_via_map\": {},\n        \"column_totals\": {},\n        \"userEditedSQL\": \"\",\n        \"dimensionIndex\": 0,\n        \"default_group_by\": true,\n        \"custom_summary_types\": {},\n        \"join_paths_from_topic_name\": \"customer_quarterly_arr\"\n      },\n      \"sql\": \"SELECT 'FY' || CAST(EXTRACT(YEAR FROM (\\\"FISCAL_QUARTER\\\" + INTERVAL '11 month')) AS VARCHAR) || (' Q' || CAST(CAST(FLOOR((MOD(EXTRACT(MONTH FROM \\\"FISCAL_QUARTER\\\") + -13, 12) + 12 - 1) / 3) AS BIGINT) + 1 AS VARCHAR)) AS \\\"finance__customer_quarterly_arr.fiscal_quarter[fiscal_quarter]\\\",\\n    \\\"CUSTOMER_NAME\\\" AS \\\"finance__customer_quarterly_arr.customer_name\\\",\\n    CAST(DATE_TRUNC('DAY', \\\"FIRST_PURCHASE_QUARTER\\\") AS TIMESTAMP(0)) AS \\\"finance__customer_quarterly_arr.first_purchase_quarter[date]__raw\\\",\\n    \\\"CRIBL_ID\\\" AS \\\"finance__customer_quarterly_arr.cribl_id\\\",\\n    COALESCE(SUM(CASE\\n        WHEN \\\"STARTING_ARR\\\" > 0 THEN \\\"STARTING_ARR_CLOUD\\\"\\n        ELSE NULL\\n    END), 0) AS \\\"finance__customer_quarterly_arr.total_starting_arr\\\",\\n    COALESCE(SUM(CASE\\n        WHEN \\\"NEW_ARR\\\" > 0 THEN \\\"NEW_ARR_CLOUD\\\"\\n        ELSE NULL\\n    END), 0) AS \\\"finance__customer_quarterly_arr.total_new_arr\\\",\\n    COALESCE(SUM(CASE\\n        WHEN \\\"UPSELL_ARR\\\" > 0 THEN \\\"UPSELL_ARR_CLOUD\\\"\\n        ELSE NULL\\n    END), 0) AS \\\"finance__customer_quarterly_arr.total_upsell_arr\\\",\\n    TO_CHAR(CAST(DATE_TRUNC('DAY', \\\"FIRST_PURCHASE_QUARTER\\\") AS TIMESTAMP(0)), 'YYYY-MM-DD') AS \\\"finance__customer_quarterly_arr.first_purchase_quarter[date]\\\"\\nFROM \\\"FINANCE\\\".\\\"CUSTOMER_QUARTERLY_ARR\\\" AS \\\"finance__customer_quarterly_arr\\\"\\nWHERE \\\"FISCAL_QUARTER\\\" >= CAST(TIMESTAMP '2025-08-01 00:00:00' AS DATE) AND \\\"FISCAL_QUARTER\\\" < CAST((DATE_TRUNC('QUARTER', ((TIMESTAMP '2025-08-01 00:00:00' + INTERVAL '3 month') + INTERVAL '2 month')) + INTERVAL '-2 month') AS DATE) AND \\\"FISCAL_QUARTER\\\" >= CAST((DATE_TRUNC('QUARTER', ((CAST(CURRENT_TIMESTAMP AS TIMESTAMP(0)) + INTERVAL '-18 month') + INTERVAL '2 month')) + INTERVAL '-2 month') AS DATE) AND \\\"FISCAL_QUARTER\\\" < CAST((DATE_TRUNC('QUARTER', (((DATE_TRUNC('QUARTER', ((CAST(CURRENT_TIMESTAMP AS TIMESTAMP(0)) + INTERVAL '-18 month') + INTERVAL '2 month')) + INTERVAL '-2 month') + INTERVAL '18 month') + INTERVAL '2 month')) + INTERVAL '-2 month') AS DATE)\\nGROUP BY 4, 2, 3, 1\\nLIMIT 1000\"\n    },\n    {\n      \"document_query_name\": \"Incremental Cloud ARR and Customers Over Time\",\n      \"drill_name\": \"total_gross_new_arr\",\n      \"query\": {\n        \"limit\": 1000,\n        \"sorts\": [\n          {\n            \"column_name\": \"finance__customer_quarterly_arr.total_upsell_arr\",\n            \"sort_descending\": true\n          }\n        ],\n        \"table\": \"finance__customer_quarterly_arr\",\n        \"fields\": [\n          \"finance__customer_quarterly_arr.fiscal_quarter[fiscal_quarter]\",\n          \"finance__customer_quarterly_arr.customer_name\",\n          \"finance__customer_quarterly_arr.first_purchase_quarter[date]\",\n          \"finance__customer_quarterly_arr.cribl_id\",\n          \"finance__customer_quarterly_arr.total_starting_arr\",\n          \"finance__customer_quarterly_arr.total_new_arr\",\n          \"finance__customer_quarterly_arr.total_upsell_arr\"\n        ],\n        \"pivots\": [],\n        \"dbtMode\": false,\n        \"filters\": {\n          \"finance__customer_quarterly_arr.fiscal_quarter\": {\n            \"type\": \"composite\",\n            \"filters\": [\n              {\n                \"kind\": \"TIME_FOR_UNIT_DURATION\",\n                \"type\": \"date\",\n                \"left_side\": \"FY2026 Q3\"\n              },\n              {\n                \"kind\": \"TIME_FOR_INTERVAL_DURATION\",\n                \"type\": \"date\",\n                \"left_side\": \"6 complete fiscal quarters ago\",\n                \"right_side\": \"6 quarters\",\n                \"is_negative\": false\n              }\n            ],\n            \"conjunction\": \"AND\",\n            \"is_negative\": false\n          },\n          \"finance__customer_quarterly_arr.source_granularity\": {\n            \"kind\": \"EQUALS\",\n            \"type\": \"string\",\n            \"values\": [\n              \"cloud\"\n            ]\n          }\n        },\n        \"modelId\": \"51b818b3-a897-4ede-a516-ab7436c6be97\",\n        \"version\": 8,\n        \"controls\": [],\n        \"rewriteSql\": true,\n        \"row_totals\": {},\n        \"fill_fields\": [],\n        \"calculations\": [],\n        \"column_limit\": 50,\n        \"join_via_map\": {},\n        \"column_totals\": {},\n        \"userEditedSQL\": \"\",\n        \"dimensionIndex\": 0,\n        \"default_group_by\": true,\n        \"custom_summary_types\": {},\n        \"join_paths_from_topic_name\": \"customer_quarterly_arr\"\n      },\n      \"sql\": \"SELECT 'FY' || CAST(EXTRACT(YEAR FROM (\\\"FISCAL_QUARTER\\\" + INTERVAL '11 month')) AS VARCHAR) || (' Q' || CAST(CAST(FLOOR((MOD(EXTRACT(MONTH FROM \\\"FISCAL_QUARTER\\\") + -13, 12) + 12 - 1) / 3) AS BIGINT) + 1 AS VARCHAR)) AS \\\"finance__customer_quarterly_arr.fiscal_quarter[fiscal_quarter]\\\",\\n    \\\"CUSTOMER_NAME\\\" AS \\\"finance__customer_quarterly_arr.customer_name\\\",\\n    CAST(DATE_TRUNC('DAY', \\\"FIRST_PURCHASE_QUARTER\\\") AS TIMESTAMP(0)) AS \\\"finance__customer_quarterly_arr.first_purchase_quarter[date]__raw\\\",\\n    \\\"CRIBL_ID\\\" AS \\\"finance__customer_quarterly_arr.cribl_id\\\",\\n    COALESCE(SUM(CASE\\n        WHEN \\\"STARTING_ARR\\\" > 0 THEN \\\"STARTING_ARR_CLOUD\\\"\\n        ELSE NULL\\n    END), 0) AS \\\"finance__customer_quarterly_arr.total_starting_arr\\\",\\n    COALESCE(SUM(CASE\\n        WHEN \\\"NEW_ARR\\\" > 0 THEN \\\"NEW_ARR_CLOUD\\\"\\n        ELSE NULL\\n    END), 0) AS \\\"finance__customer_quarterly_arr.total_new_arr\\\",\\n    COALESCE(SUM(CASE\\n        WHEN \\\"UPSELL_ARR\\\" > 0 THEN \\\"UPSELL_ARR_CLOUD\\\"\\n        ELSE NULL\\n    END), 0) AS \\\"finance__customer_quarterly_arr.total_upsell_arr\\\",\\n    TO_CHAR(CAST(DATE_TRUNC('DAY', \\\"FIRST_PURCHASE_QUARTER\\\") AS TIMESTAMP(0)), 'YYYY-MM-DD') AS \\\"finance__customer_quarterly_arr.first_purchase_quarter[date]\\\"\\nFROM \\\"FINANCE\\\".\\\"CUSTOMER_QUARTERLY_ARR\\\" AS \\\"finance__customer_quarterly_arr\\\"\\nWHERE \\\"FISCAL_QUARTER\\\" >= CAST(TIMESTAMP '2025-08-01 00:00:00' AS DATE) AND \\\"FISCAL_QUARTER\\\" < CAST((DATE_TRUNC('QUARTER', ((TIMESTAMP '2025-08-01 00:00:00' + INTERVAL '3 month') + INTERVAL '2 month')) + INTERVAL '-2 month') AS DATE) AND \\\"FISCAL_QUARTER\\\" >= CAST((DATE_TRUNC('QUARTER', ((CAST(CURRENT_TIMESTAMP AS TIMESTAMP(0)) + INTERVAL '-18 month') + INTERVAL '2 month')) + INTERVAL '-2 month') AS DATE) AND \\\"FISCAL_QUARTER\\\" < CAST((DATE_TRUNC('QUARTER', (((DATE_TRUNC('QUARTER', ((CAST(CURRENT_TIMESTAMP AS TIMESTAMP(0)) + INTERVAL '-18 month') + INTERVAL '2 month')) + INTERVAL '-2 month') + INTERVAL '18 month') + INTERVAL '2 month')) + INTERVAL '-2 month') AS DATE)\\nGROUP BY 4, 2, 3, 1\\nLIMIT 1000\"\n    }\n  ]\n}\n```"
      },
      "type": "n8n-nodes-base.stickyNote",
      "position": [
        2608,
        848
      ],
      "typeVersion": 1,
      "id": "15463490-f48d-43c9-acaf-f0700a88a72a",
      "name": "Sticky Note"
    },
    {
      "parameters": {
        "content": "## Standard number of measures\n```\n{\n  \"fd41c0cc-09f5-4781-8081-411e55d2d762\": [\n    {\n      \"document_query_name\": \"Searches Dispatched\",\n      \"drill_name\": \"total_searches_dispatched\",\n      \"query\": {\n        \"limit\": 1000,\n        \"sorts\": [],\n        \"table\": \"product__cloud_telemetry_daily\",\n        \"fields\": [\n          \"product__cloud_orgs.account_name\",\n          \"product__cloud_orgs.org_id\",\n          \"product__cloud_orgs.org_type\",\n          \"product__cloud_orgs.owner_email\",\n          \"product__cloud_telemetry_daily.search_executor_compute_sum\",\n          \"product__cloud_telemetry_daily.dispatched_searches_sum\"\n        ],\n        \"pivots\": [],\n        \"dbtMode\": false,\n        \"filters\": {\n          \"product__cloud_orgs.org_type\": {\n            \"kind\": \"EQUALS\",\n            \"type\": \"string\",\n            \"values\": [\n              \"Customer\",\n              \"Free\"\n            ],\n            \"is_negative\": false\n          },\n          \"product__cloud_telemetry_daily.date\": {\n            \"type\": \"composite\",\n            \"filters\": [\n              {\n                \"kind\": \"TIME_FOR_UNIT_DURATION\",\n                \"type\": \"date\",\n                \"left_side\": \"FY2026 Q3\"\n              },\n              {\n                \"kind\": \"TIME_FOR_INTERVAL_DURATION\",\n                \"type\": \"date\",\n                \"left_side\": \"6 complete fiscal quarters ago\",\n                \"right_side\": \"6 quarters\",\n                \"is_negative\": false\n              }\n            ],\n            \"conjunction\": \"AND\",\n            \"is_negative\": false\n          },\n          \"product__cloud_telemetry_daily.dispatched_searches\": {\n            \"kind\": \"GREATER_THAN\",\n            \"type\": \"number\",\n            \"values\": [\n              \"0\"\n            ],\n            \"is_negative\": false,\n            \"is_inclusive\": false\n          }\n        },\n        \"modelId\": \"867dffa3-a2de-48a5-af58-1d648c48c524\",\n        \"version\": 8,\n        \"controls\": [],\n        \"rewriteSql\": true,\n        \"row_totals\": {},\n        \"fill_fields\": [],\n        \"calculations\": [],\n        \"column_limit\": 50,\n        \"join_via_map\": {},\n        \"column_totals\": {},\n        \"userEditedSQL\": \"\",\n        \"dimensionIndex\": 0,\n        \"default_group_by\": true,\n        \"custom_summary_types\": {},\n        \"join_paths_from_topic_name\": \"cloud_telemetry_daily\"\n      }\n    },\n    {\n      \"document_query_name\": \"Searches Dispatched\",\n      \"drill_name\": \"active_orgs\",\n      \"query\": {\n        \"limit\": 1000,\n        \"sorts\": [],\n        \"table\": \"product__cloud_telemetry_daily\",\n        \"fields\": [\n          \"product__cloud_telemetry_daily.primary_key\",\n          \"product__cloud_telemetry_daily.date\",\n          \"product__cloud_telemetry_daily.env\",\n          \"product__cloud_telemetry_daily.org_id\",\n          \"product__cloud_telemetry_daily.org_type\",\n          \"product__cloud_telemetry_daily.is_cribl_tenant\",\n          \"product__cloud_telemetry_daily.account_id\",\n          \"product__cloud_telemetry_daily.account_name\",\n          \"product__cloud_telemetry_daily.in_sfdc\",\n          \"product__cloud_telemetry_daily.tid_create_date\"\n        ],\n        \"pivots\": [],\n        \"dbtMode\": false,\n        \"filters\": {\n          \"product__cloud_orgs.org_type\": {\n            \"kind\": \"EQUALS\",\n            \"type\": \"string\",\n            \"values\": [\n              \"Customer\",\n              \"Free\"\n            ],\n            \"is_negative\": false\n          },\n          \"product__cloud_telemetry_daily.date\": {\n            \"type\": \"composite\",\n            \"filters\": [\n              {\n                \"kind\": \"TIME_FOR_UNIT_DURATION\",\n                \"type\": \"date\",\n                \"left_side\": \"FY2026 Q2\"\n              },\n              {\n                \"kind\": \"TIME_FOR_INTERVAL_DURATION\",\n                \"type\": \"date\",\n                \"left_side\": \"6 complete fiscal quarters ago\",\n                \"right_side\": \"6 quarters\",\n                \"is_negative\": false\n              }\n            ],\n            \"conjunction\": \"AND\",\n            \"is_negative\": false\n          },\n          \"product__cloud_telemetry_daily.is_active\": {\n            \"type\": \"boolean\",\n            \"is_negative\": false,\n            \"treat_nulls_as_false\": false\n          },\n          \"product__cloud_telemetry_daily.dispatched_searches\": {\n            \"kind\": \"GREATER_THAN\",\n            \"type\": \"number\",\n            \"values\": [\n              \"0\"\n            ],\n            \"is_negative\": false,\n            \"is_inclusive\": false\n          }\n        },\n        \"modelId\": \"5432aba0-002d-4c7f-b1d4-7fad064934c7\",\n        \"version\": 8,\n        \"controls\": [],\n        \"rewriteSql\": true,\n        \"row_totals\": {},\n        \"fill_fields\": [],\n        \"calculations\": [],\n        \"column_limit\": 50,\n        \"join_via_map\": {},\n        \"column_totals\": {},\n        \"userEditedSQL\": \"\",\n        \"dimensionIndex\": 0,\n        \"default_group_by\": true,\n        \"custom_summary_types\": {},\n        \"join_paths_from_topic_name\": \"cloud_telemetry_daily\"\n      }\n    }\n  ]\n}\n```"
      },
      "type": "n8n-nodes-base.stickyNote",
      "position": [
        2320,
        848
      ],
      "typeVersion": 1,
      "id": "f82162af-6273-4199-a7eb-c8ce142e47bc",
      "name": "Sticky Note1"
    },
    {
      "parameters": {
        "mode": "raw",
        "jsonOutput": "{\n  \"headers\": {\n    \"host\": \"n8n-relayer-1.app.n8n.cloud\",\n    \"user-agent\": \"Zapier\",\n    \"content-length\": \"588\",\n    \"accept\": \"*/*\",\n    \"accept-encoding\": \"gzip, br\",\n    \"authorization\": \"Basic emFwaWVyOldNRXY4NDlmcGZGVlpYNkdoQjM2MGFmT3JmMWtfRFF2TlhfOFRSSjEzS1U=\",\n    \"cdn-loop\": \"cloudflare; loops=1; subreqs=1\",\n    \"cf-connecting-ip\": \"34.239.160.141\",\n    \"cf-ew-via\": \"15\",\n    \"cf-ipcountry\": \"US\",\n    \"cf-ray\": \"9c4f2158a64e12f0-IAD\",\n    \"cf-visitor\": \"{\\\"scheme\\\":\\\"https\\\"}\",\n    \"cf-worker\": \"n8n.cloud\",\n    \"content-type\": \"application/json; charset=utf-8\",\n    \"x-forwarded-for\": \"34.239.160.141, 104.23.213.139\",\n    \"x-forwarded-host\": \"n8n-relayer-1.app.n8n.cloud\",\n    \"x-forwarded-port\": \"443\",\n    \"x-forwarded-proto\": \"https\",\n    \"x-forwarded-server\": \"traefik-prod-users-gwc-72-585f59b6c7-kgpvq\",\n    \"x-is-trusted\": \"yes\",\n    \"x-real-ip\": \"34.239.160.141\"\n  },\n  \"params\": {},\n  \"query\": {},\n  \"body\": {\n    \"channel_id\": \"C0912AANW1L\",\n    \"channel_name\": \"data-eng-test-ai-channel\",\n    \"conversation_id\": \"C0912AANW1L\",\n    \"event_id\": \"1769145667.002600\",\n    \"event_timestamp\": \"2026-01-23T05:21:07.002Z\",\n    \"is_message_user_bot\": \"False\",\n    \"message_text\": \"total lake storage 1EobCyDEDUI9iE-N5Qs3Ga5m5mVyTXAXx\",\n    \"message_timestamp\": \"2026-01-23T03:46:45.456Z\",\n    \"message_ts\": \"1769140005.456469\",\n    \"message_user_email\": \"nkwok@cribl.io\",\n    \"message_user_first_name\": \"Nathan\",\n    \"message_user_id\": \"U06PVBEK9T6\",\n    \"message_user_last_name\": \"Kwok\",\n    \"message_user_name\": \"nathan_kwok\",\n    \"reaction\": \"magnifying-glass\",\n    \"reaction_user_id\": \"U06PVBEK9T6\",\n    \"team_domain\": \"cribl\",\n    \"team_id\": \"T3XQYAF26\"\n  },\n  \"webhookUrl\": \"https://n8n-relayer-1.app.n8n.cloud/webhook-test/board-deck-takeaways-ze5ubv1w\",\n  \"executionMode\": \"test\"\n}",
        "options": {}
      },
      "type": "n8n-nodes-base.set",
      "typeVersion": 3.4,
      "position": [
        304,
        1136
      ],
      "id": "65dd0666-a589-4db6-a143-fa6055ad77fa",
      "name": "Mimic Webhook Request"
    },
    {
      "parameters": {
        "operation": "get",
        "dataTableId": {
          "__rl": true,
          "value": "ZSd1pGH8J8ftEd2V",
          "mode": "list",
          "cachedResultName": "drill_queries",
          "cachedResultUrl": "/projects/2vHf2VxAoKk0WgJE/datatables/ZSd1pGH8J8ftEd2V"
        },
        "filters": {
          "conditions": [
            {
              "keyName": "document_query_name",
              "condition": "ilike",
              "keyValue": "={{ $('Input Extractor Agent').first().json.output.data.document_query_name }}"
            }
          ]
        },
        "returnAll": true
      },
      "type": "n8n-nodes-base.dataTable",
      "typeVersion": 1,
      "position": [
        3312,
        1120
      ],
      "id": "19352516-387d-45fe-8090-54bedd3922ae",
      "name": "Get Drill Queries"
    },
    {
      "parameters": {
        "options": {}
      },
      "type": "@n8n/n8n-nodes-langchain.lmChatGoogleGemini",
      "typeVersion": 1,
      "position": [
        1216,
        1360
      ],
      "id": "be98ecde-4ec7-4e77-9031-2824bb85ad5f",
      "name": "Google Gemini Chat Model",
      "credentials": {
        "googlePalmApi": {
          "id": "LKQbGwmroZKBfciU",
          "name": "Gemini - Cribl"
        }
      }
    },
    {
      "parameters": {
        "promptType": "define",
        "text": "=# Slack Message Input Extractor Agent\n\n## Role\nYou are a data extraction agent that parses Slack messages to extract structured information for board deck takeaway generation. Your job is to identify the document query name and Google Drive folder ID from user messages.\n\n## Input Format\nUsers will send Slack messages in flexible formats. The message may contain:\n- A document query name (or partial/fuzzy match)\n- A Google Drive folder ID (33-character alphanumeric string)\n- Additional text, instructions, or context (ignore this)\n\nThe order of elements may vary. Examples of valid inputs:\n- \"total lake storage 1EobCyDEDUI9iE-N5Qs3Ga5m5mVyTXAXx\"\n- \"1EobCyDEDUI9iE-N5Qs3Ga5m5mVyTXAXx total lake storage\"\n- \"Please process: cribl attrition folder: abc123def456ghi789jkl012mno345pqr\"\n- \"Q3 Won Stream 1EobCyDEDUI9iE-N5Qs3Ga5m5mVyTXAXx thanks!\"\n\n## Input to Process\n{{ $json.body.message_text }}\n\n## Document Query Names\nMatch the user's input to the closest matching name from this list:\n\n1. Top 10 Deals by New ARR\n2. Total RSM Headcount (Active)\n3. Count of Producing and Ramping Reps\n4. FY26 Rep Attainment\n5. Median and Avg Months to Producing\n6. Multi-Product Distribution [Filtered to Last day of Completed FQ]\n7. Multi-Product Adoption\n8. Stream Engagement (Software) by Geo Segment\n9. Total Lake Storage\n10. Searches Dispatched\n11. Product: Edge (Software)\n12. Product: Edge (Cloud)\n13. Cribl TTM Attrition\n14. Product: Cloud Data Diversity\n15. Product: Cloud Data Diversity Table\n16. CFDs Created vs Resolved\n17. Customer Found Defects vs. Customers QoQ\n18. Q3 Won & Q4 Open_Stream\n19. Q3 Won & Q4 Open_Edge\n20. Storage & Analysis Total Pipeline by Stage\n21. FEDRAMP Pipeline\n22. Headcount Growth Copy\n23. Incremental Cloud ARR and Customers Over Time\n24. Storage and Analysis ARR and Customers Over Time\n25. Product: Software Data Diversity Table\n26. Product: Software Data Diversity Chart\n27. Stream Engagement (Cloud) by Geo Segment\n28. Approved Deal Registrations by FQ\n29. New Logo Win Rate by Source\n30. Service Plan Breakdown New Business\n31. Service Plan Breakdown Incremental Business\n32. NBM Opps Created Copy\n33. CFDs Created by Component Copy\n34. Product: Cloud MAUs Copy\n35. Non-Stream ARR with Annualized\n\n## Fuzzy Matching Rules\nAlways return the closest match from the list above. Use these matching strategies:\n- Case-insensitive matching\n- Partial keyword matching (e.g., \"lake storage\"  \"Total Lake Storage\")\n- Common abbreviations (e.g., \"attrition\"  \"Cribl TTM Attrition\")\n- Ignore punctuation differences\n- Match key distinctive terms (e.g., \"Q3 Won Stream\"  \"Q3 Won & Q4 Open_Stream\")\n- \"FEDRAMP\" or \"fed ramp\"  \"FEDRAMP Pipeline\"\n- \"cloud maus\"  \"Product: Cloud MAUs Copy\"\n- \"headcount\"  \"Headcount Growth Copy\"\n- \"nbm opps\"  \"NBM Opps Created Copy\"\n\nIf multiple queries could match, prefer:\n1. Exact matches\n2. Matches with more keywords present\n3. The first match in the list order\n\n## Google Drive Folder ID Extraction\nA valid Google Drive folder ID is:\n- Exactly 33 characters long\n- Contains only alphanumeric characters, hyphens (-), and underscores (_)\n- Pattern: `[A-Za-z0-9_-]{33}`\n\nExtract the first valid folder ID found in the message.\n\n## Output Format\nAlways respond with valid JSON in this exact format:\n\n### Success Case\n```json\n{\n  \"success\": true,\n  \"error\": null,\n  \"data\": {\n    \"document_query_name\": \"Matched Query Name From List\",\n    \"google_drive_folder_id\": \"33_character_folder_id_here\"\n  }\n}\n```\n\n### Error Case\n```json\n{\n  \"success\": false,\n  \"error\": \"Description of what went wrong\",\n  \"data\": null\n}\n```\n\n## Error Handling\nReturn an error in these cases:\n\n1. **Missing folder ID**: No valid 33-character folder ID found\n   - Error: \"No valid Google Drive folder ID found. Expected a 33-character alphanumeric string.\"\n\n2. **No query match possible**: Cannot identify any document query from the message\n   - Error: \"Could not identify a document query name from the message.\"\n\n3. **Empty or invalid input**: Message is empty or contains no useful content\n   - Error: \"Empty or invalid input message.\"\n\n## Examples\n\n### Example 1: Standard input\nInput: \"total lake storage 1EobCyDEDUI9iE-N5Qs3Ga5m5mVyTXAXx\"\nOutput:\n```json\n{\n  \"success\": true,\n  \"error\": null,\n  \"data\": {\n    \"document_query_name\": \"Total Lake Storage\",\n    \"google_drive_folder_id\": \"1EobCyDEDUI9iE-N5Qs3Ga5m5mVyTXAXx\"\n  }\n}\n```\n\n### Example 2: Partial match with extra text\nInput: \"Please run cribl attrition report abc123def456ghi789jkl012mno345pqr thanks!\"\nOutput:\n```json\n{\n  \"success\": true,\n  \"error\": null,\n  \"data\": {\n    \"document_query_name\": \"Cribl TTM Attrition\",\n    \"google_drive_folder_id\": \"abc123def456ghi789jkl012mno345pqr\"\n  }\n}\n```\n\n### Example 3: Reversed order\nInput: \"1EobCyDEDUI9iE-N5Qs3Ga5m5mVyTXAXx Q3 Won Stream\"\nOutput:\n```json\n{\n  \"success\": true,\n  \"error\": null,\n  \"data\": {\n    \"document_query_name\": \"Q3 Won & Q4 Open_Stream\",\n    \"google_drive_folder_id\": \"1EobCyDEDUI9iE-N5Qs3Ga5m5mVyTXAXx\"\n  }\n}\n```\n\n### Example 4: Missing folder ID\nInput: \"total lake storage\"\nOutput:\n```json\n{\n  \"success\": false,\n  \"error\": \"No valid Google Drive folder ID found. Expected a 33-character alphanumeric string.\",\n  \"data\": null\n}\n```\n\n### Example 5: Invalid folder ID length\nInput: \"lake storage abc123\"\nOutput:\n```json\n{\n  \"success\": false,\n  \"error\": \"No valid Google Drive folder ID found. Expected a 33-character alphanumeric string.\",\n  \"data\": null\n}\n```\n\n### Example 6: Unrecognizable query\nInput: \"xyz123 1EobCyDEDUI9iE-N5Qs3Ga5m5mVyTXAXx\"\nOutput:\n```json\n{\n  \"success\": false,\n  \"error\": \"Could not identify a document query name from the message.\",\n  \"data\": null\n}\n```\n\n## Important Notes\n- Process only ONE query per message. If multiple queries appear to be mentioned, use the first/most prominent one.\n- Always return valid JSON with no additional text or explanation.\n- The `document_query_name` in the output must exactly match one of the 35 names in the list above.\n- Be generous with fuzzy matching - users may use informal names, abbreviations, or partial phrases.\n",
        "hasOutputParser": true,
        "options": {}
      },
      "type": "@n8n/n8n-nodes-langchain.agent",
      "typeVersion": 3,
      "position": [
        1264,
        1136
      ],
      "id": "eb7aebf7-8307-44ff-91e5-2b26db92b723",
      "name": "Input Extractor Agent"
    },
    {
      "parameters": {
        "jsonSchemaExample": "{\n  \"success\": true,\n  \"error\": null,\n  \"data\": {\n    \"document_query_name\": \"Matched Query Name From List\",\n    \"google_drive_folder_id\": \"33_character_folder_id_here\"\n  }\n}"
      },
      "type": "@n8n/n8n-nodes-langchain.outputParserStructured",
      "typeVersion": 1.3,
      "position": [
        1440,
        1360
      ],
      "id": "4d1c18ef-ac6d-45d6-8d4d-323f041631ea",
      "name": "Structured Output Parser1"
    },
    {
      "parameters": {
        "content": "## Example Output\n```\n[\n  {\n    \"output\": {\n      \"today\": \"2026-01-23\",\n      \"current_fiscal_quarter\": \"FY2026 Q3\",\n      \"previous_fiscal_quarter\": \"FY2026 Q2\",\n      \"current_fiscal_half\": \"FY2026 H2\",\n      \"previous_fiscal_half\": \"FY2026 H1\"\n    }\n  }\n]\n```"
      },
      "type": "n8n-nodes-base.stickyNote",
      "position": [
        2528,
        1584
      ],
      "typeVersion": 1,
      "id": "1331da98-aaf2-48c7-a75b-b850b768224e",
      "name": "Sticky Note4"
    },
    {
      "parameters": {
        "content": "## TODO\n- Modify permissions for the folder to share with the cribl email in slack input",
        "height": 208
      },
      "type": "n8n-nodes-base.stickyNote",
      "position": [
        4784,
        1616
      ],
      "typeVersion": 1,
      "id": "8dc7f025-9cef-4f86-9278-e4d352662333",
      "name": "Sticky Note3"
    },
    {
      "parameters": {
        "assignments": {
          "assignments": [
            {
              "id": "fa236bc3-f105-4270-adb5-2552a04a69e5",
              "name": "google_drive_folder_id",
              "value": "={{ $('Input Extractor Agent').first().json.output.data.google_drive_folder_id }}",
              "type": "string"
            },
            {
              "id": "230fa6da-2b61-420f-b2d7-10d6cacf6c5d",
              "name": "current_fiscal_quarter",
              "value": "={{ $('Fiscal Quarter Extractor').first().json.output.current_fiscal_quarter }}",
              "type": "string"
            },
            {
              "id": "b0c57526-3be8-49d0-8967-0af6a965063d",
              "name": "previous_fiscal_quarter",
              "value": "={{ $('Fiscal Quarter Extractor').first().json.output.previous_fiscal_quarter }}",
              "type": "string"
            },
            {
              "id": "80a8a4e9-2554-474e-aada-25bfdbddb519",
              "name": "default_user_id",
              "value": "={{ $('Global Vars').first().json.omni_api.omni_user_id }}",
              "type": "string"
            }
          ]
        },
        "includeOtherFields": true,
        "options": {}
      },
      "type": "n8n-nodes-base.set",
      "typeVersion": 3.4,
      "position": [
        4032,
        1120
      ],
      "id": "cf51b536-715d-46c4-a34c-312e60267f44",
      "name": "Loop UUID Item1"
    },
    {
      "parameters": {
        "workflowId": {
          "__rl": true,
          "value": "mDJHNy6DrprAll2W",
          "mode": "list",
          "cachedResultUrl": "/workflow/mDJHNy6DrprAll2W",
          "cachedResultName": "Board_Deck_Document_Query_Analysis_Subworkflow"
        },
        "workflowInputs": {
          "mappingMode": "defineBelow",
          "value": {
            "input": "={{ $json }}"
          },
          "matchingColumns": [
            "input"
          ],
          "schema": [
            {
              "id": "input",
              "displayName": "input",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "canBeUsedToMatch": true,
              "type": "object",
              "removed": false
            }
          ],
          "attemptToConvertTypes": false,
          "convertFieldsToString": true
        },
        "options": {
          "waitForSubWorkflow": true
        }
      },
      "type": "n8n-nodes-base.executeWorkflow",
      "typeVersion": 1.3,
      "position": [
        4352,
        1120
      ],
      "id": "dd0dd440-bd92-40be-955a-d37f4839e492",
      "name": "Call 'Board_Deck_Document_Query_Analysis_Subworkflow'1",
      "onError": "continueErrorOutput"
    },
    {
      "parameters": {
        "conditions": {
          "options": {
            "caseSensitive": true,
            "leftValue": "",
            "typeValidation": "strict",
            "version": 3
          },
          "conditions": [
            {
              "id": "a3d14797-ad7e-4f74-8c4b-108f530a0b3d",
              "leftValue": "={{ $json.output.success }}",
              "rightValue": false,
              "operator": {
                "type": "boolean",
                "operation": "true",
                "singleValue": true
              }
            }
          ],
          "combinator": "and"
        },
        "options": {}
      },
      "type": "n8n-nodes-base.if",
      "typeVersion": 2.3,
      "position": [
        1824,
        1136
      ],
      "id": "76eff01d-7c11-4bc6-acd9-fa90325a2b9b",
      "name": "Check Input Extractor Success"
    },
    {
      "parameters": {
        "method": "POST",
        "url": "={{ $('Global Vars').first().json.zapier_slack_response_webhook.webhook_url }}",
        "sendHeaders": true,
        "specifyHeaders": "json",
        "jsonHeaders": "{\n  \"Content-Type\": \"application/json\"\n}",
        "sendBody": true,
        "specifyBody": "json",
        "jsonBody": "={\n  \"body\": {{ $('Global Vars').first().json.body.toJsonString() }},\n  \"message\": \"{{ $('Input Extractor Agent').item.json.output.error }}\"\n}",
        "options": {}
      },
      "type": "n8n-nodes-base.httpRequest",
      "typeVersion": 4.2,
      "position": [
        2064,
        1424
      ],
      "id": "fc4d3886-b382-4280-ad2e-f56df255357e",
      "name": "Send Slack Failure Message",
      "alwaysOutputData": false,
      "onError": "continueRegularOutput"
    },
    {
      "parameters": {
        "method": "POST",
        "url": "={{ $('Global Vars').first().json.zapier_slack_response_webhook.webhook_url }}",
        "sendHeaders": true,
        "specifyHeaders": "json",
        "jsonHeaders": "{\n  \"Content-Type\": \"application/json\"\n}",
        "sendBody": true,
        "specifyBody": "json",
        "jsonBody": "={\n  \"body\": {{ $('Global Vars').first().json.body.toJsonString() }},\n  \"message\": \"{{ $json.documentId }}\"\n}",
        "options": {}
      },
      "type": "n8n-nodes-base.httpRequest",
      "typeVersion": 4.2,
      "position": [
        4800,
        1024
      ],
      "id": "6fe75804-85e6-40e5-935d-16307263e11c",
      "name": "Send Slack Success Message",
      "alwaysOutputData": false,
      "onError": "continueRegularOutput"
    },
    {
      "parameters": {
        "mode": "raw",
        "jsonOutput": "{\n  \"dashboard_discovery_model_version\": \"1.0\",\n  \"snowflake_base_url\": \"https://ml16699-hya89079.snowflakecomputing.com\",\n  \"omni_documents_search_service\": {\n    \"snowflake_database\": \"ANALYTICS\",\n    \"snowflake_schema\": \"OMNI\",\n    \"service_name\": \"omni_documents_search_service\"\n  },\n  \"omni_api\": {\n    \"omni_base_url\": \"https://cribl.omniapp.co\",\n    \"model_id\": \"4345b118-cbbe-4f7c-a705-ea0aa8da57c0\"\n  },\n  \"snowflake_tables\": {\n    \"omni_documents\": {\n      \"snowflake_database\": \"ANALYTICS\",\n      \"snowflake_schema\": \"OMNI\",\n      \"table_name\": \"DOCUMENTS\"\n    },\n    \"dashboard_recommendations\": {\n      \"snowflake_database\": \"RAW\",\n      \"snowflake_schema\": \"OMNI\",\n      \"table_name\": \"DASHBOARD_RECOMMENDATIONS\"\n    }\n  },\n  \"default_user_id\": \"893ce348-0fb2-44ac-b0f8-06521a341580\"\n}",
        "includeOtherFields": true,
        "include": "except",
        "excludeFields": "headers,params,query,webhookUrl,executionMode",
        "options": {}
      },
      "id": "globalVars1",
      "name": "Global Vars2",
      "type": "n8n-nodes-base.set",
      "typeVersion": 3.4,
      "position": [
        832,
        1440
      ],
      "disabled": true
    },
    {
      "parameters": {
        "workflowId": {
          "__rl": true,
          "value": "OFpD7aepKHcHCvqz",
          "mode": "list",
          "cachedResultUrl": "/workflow/OFpD7aepKHcHCvqz",
          "cachedResultName": "Global_Vars"
        },
        "workflowInputs": {
          "mappingMode": "defineBelow",
          "value": {},
          "matchingColumns": [],
          "schema": [],
          "attemptToConvertTypes": false,
          "convertFieldsToString": true
        },
        "options": {}
      },
      "type": "n8n-nodes-base.executeWorkflow",
      "typeVersion": 1.3,
      "position": [
        816,
        1136
      ],
      "id": "8dccd44e-14c1-46b8-a383-70da5eb9fb1e",
      "name": "Global Vars"
    },
    {
      "parameters": {
        "options": {}
      },
      "type": "@n8n/n8n-nodes-langchain.lmChatGoogleGemini",
      "typeVersion": 1,
      "position": [
        2256,
        1296
      ],
      "id": "7f083a0e-ae13-4aae-9c85-12fbca217c68",
      "name": "Google Gemini Chat Model1",
      "credentials": {
        "googlePalmApi": {
          "id": "LKQbGwmroZKBfciU",
          "name": "Gemini - Cribl"
        }
      }
    }
  ],
  "connections": {
    "When clicking 'Execute workflow'": {
      "main": [
        [
          {
            "node": "Mimic Webhook Request",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Load Drill Queries": {
      "main": [
        []
      ]
    },
    "Loop Over UUIDs": {
      "main": [
        [],
        [
          {
            "node": "Loop UUID Item",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Prepare UUID Loop Data": {
      "main": [
        [
          {
            "node": "Loop Over UUIDs",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Get Drill Queries Count": {
      "main": [
        [
          {
            "node": "Loop UUID Item1",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Structured Output Parser": {
      "ai_outputParser": [
        [
          {
            "node": "Fiscal Quarter Extractor",
            "type": "ai_outputParser",
            "index": 0
          }
        ]
      ]
    },
    "Fiscal Quarter Extractor": {
      "main": [
        [
          {
            "node": "Get Drill Queries",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "o4-mini": {
      "ai_languageModel": [
        []
      ]
    },
    "Trigger": {
      "main": [
        [
          {
            "node": "Respond to Webhook",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Respond to Webhook": {
      "main": [
        [
          {
            "node": "Global Vars",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Create folder": {
      "main": [
        []
      ]
    },
    "Loop UUID Item": {
      "main": [
        [
          {
            "node": "Call 'Board_Deck_Document_Query_Analysis_Subworkflow'",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Call 'Board_Deck_Document_Query_Analysis_Subworkflow'": {
      "main": [
        [
          {
            "node": "Loop Over UUIDs",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Mimic Webhook Request": {
      "main": [
        [
          {
            "node": "Global Vars",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Get Drill Queries": {
      "main": [
        [
          {
            "node": "Get Drill Queries Count",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Google Gemini Chat Model": {
      "ai_languageModel": [
        [
          {
            "node": "Input Extractor Agent",
            "type": "ai_languageModel",
            "index": 0
          }
        ]
      ]
    },
    "Input Extractor Agent": {
      "main": [
        [
          {
            "node": "Check Input Extractor Success",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Structured Output Parser1": {
      "ai_outputParser": [
        [
          {
            "node": "Input Extractor Agent",
            "type": "ai_outputParser",
            "index": 0
          }
        ]
      ]
    },
    "Loop UUID Item1": {
      "main": [
        [
          {
            "node": "Call 'Board_Deck_Document_Query_Analysis_Subworkflow'1",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Check Input Extractor Success": {
      "main": [
        [
          {
            "node": "Fiscal Quarter Extractor",
            "type": "main",
            "index": 0
          }
        ],
        [
          {
            "node": "Send Slack Failure Message",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Call 'Board_Deck_Document_Query_Analysis_Subworkflow'1": {
      "main": [
        [
          {
            "node": "Send Slack Success Message",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Global Vars2": {
      "main": [
        []
      ]
    },
    "Global Vars": {
      "main": [
        [
          {
            "node": "Input Extractor Agent",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Google Gemini Chat Model1": {
      "ai_languageModel": [
        [
          {
            "node": "Fiscal Quarter Extractor",
            "type": "ai_languageModel",
            "index": 0
          }
        ]
      ]
    }
  },
  "settings": {
    "executionOrder": "v1",
    "callerPolicy": "workflowsFromSameOwner",
    "availableInMCP": false
  },
  "staticData": null,
  "meta": {
    "templateCredsSetupCompleted": true
  },
  "pinData": {
    "Trigger": [
      {
        "json": {
          "headers": {
            "host": "n8n-relayer-1.app.n8n.cloud",
            "user-agent": "Zapier",
            "content-length": "588",
            "accept": "*/*",
            "accept-encoding": "gzip, br",
            "authorization": "Basic emFwaWVyOldNRXY4NDlmcGZGVlpYNkdoQjM2MGFmT3JmMWtfRFF2TlhfOFRSSjEzS1U=",
            "cdn-loop": "cloudflare; loops=1; subreqs=1",
            "cf-connecting-ip": "34.239.160.141",
            "cf-ew-via": "15",
            "cf-ipcountry": "US",
            "cf-ray": "9c4f2158a64e12f0-IAD",
            "cf-visitor": "{\"scheme\":\"https\"}",
            "cf-worker": "n8n.cloud",
            "content-type": "application/json; charset=utf-8",
            "x-forwarded-for": "34.239.160.141, 104.23.213.139",
            "x-forwarded-host": "n8n-relayer-1.app.n8n.cloud",
            "x-forwarded-port": "443",
            "x-forwarded-proto": "https",
            "x-forwarded-server": "traefik-prod-users-gwc-72-585f59b6c7-kgpvq",
            "x-is-trusted": "yes",
            "x-real-ip": "34.239.160.141"
          },
          "params": {},
          "query": {},
          "body": {
            "channel_id": "C0912AANW1L",
            "channel_name": "data-eng-test-ai-channel",
            "conversation_id": "C0912AANW1L",
            "event_id": "1769145667.002600",
            "event_timestamp": "2026-01-23T05:21:07.002Z",
            "is_message_user_bot": "False",
            "message_text": "New Logo Win Rate by Source 1EobCyDEDUI9iE-N5Qs3Ga5m5mVyTXAXx",
            "message_timestamp": "2026-01-23T03:46:45.456Z",
            "message_ts": "1769140005.456469",
            "message_user_email": "nkwok@cribl.io",
            "message_user_first_name": "Nathan",
            "message_user_id": "U06PVBEK9T6",
            "message_user_last_name": "Kwok",
            "message_user_name": "nathan_kwok",
            "reaction": "magnifying-glass",
            "reaction_user_id": "U06PVBEK9T6",
            "team_domain": "cribl",
            "team_id": "T3XQYAF26"
          },
          "webhookUrl": "https://n8n-relayer-1.app.n8n.cloud/webhook-test/board-deck-takeaways-ze5ubv1w",
          "executionMode": "test"
        }
      }
    ],
    "Create folder": [
      {
        "json": {
          "kind": "drive#file",
          "id": "1EobCyDEDUI9iE-N5Qs3Ga5m5mVyTXAXx",
          "name": "Board_Deck_Takeaways_20260128_003904",
          "mimeType": "application/vnd.google-apps.folder"
        },
        "pairedItem": {
          "item": 0
        }
      }
    ],
    "Mimic Webhook Request": [
      {
        "json": {
          "headers": {
            "host": "n8n-relayer-1.app.n8n.cloud",
            "user-agent": "Zapier",
            "content-length": "588",
            "accept": "*/*",
            "accept-encoding": "gzip, br",
            "authorization": "Basic emFwaWVyOldNRXY4NDlmcGZGVlpYNkdoQjM2MGFmT3JmMWtfRFF2TlhfOFRSSjEzS1U=",
            "cdn-loop": "cloudflare; loops=1; subreqs=1",
            "cf-connecting-ip": "34.239.160.141",
            "cf-ew-via": "15",
            "cf-ipcountry": "US",
            "cf-ray": "9c4f2158a64e12f0-IAD",
            "cf-visitor": "{\"scheme\":\"https\"}",
            "cf-worker": "n8n.cloud",
            "content-type": "application/json; charset=utf-8",
            "x-forwarded-for": "34.239.160.141, 104.23.213.139",
            "x-forwarded-host": "n8n-relayer-1.app.n8n.cloud",
            "x-forwarded-port": "443",
            "x-forwarded-proto": "https",
            "x-forwarded-server": "traefik-prod-users-gwc-72-585f59b6c7-kgpvq",
            "x-is-trusted": "yes",
            "x-real-ip": "34.239.160.141"
          },
          "params": {},
          "query": {},
          "body": {
            "channel_id": "C0912AANW1L",
            "channel_name": "data-eng-test-ai-channel",
            "conversation_id": "C0912AANW1L",
            "event_id": "1769145667.002600",
            "event_timestamp": "2026-01-23T05:21:07.002Z",
            "is_message_user_bot": "False",
            "message_text": "New Logo Win Rate by Source 1EobCyDEDUI9iE-N5Qs3Ga5m5mVyTXAXx",
            "message_timestamp": "2026-01-23T03:46:45.456Z",
            "message_ts": "1769140005.456469",
            "message_user_email": "nkwok@cribl.io",
            "message_user_first_name": "Nathan",
            "message_user_id": "U06PVBEK9T6",
            "message_user_last_name": "Kwok",
            "message_user_name": "nathan_kwok",
            "reaction": "magnifying-glass",
            "reaction_user_id": "U06PVBEK9T6",
            "team_domain": "cribl",
            "team_id": "T3XQYAF26"
          },
          "webhookUrl": "https://n8n-relayer-1.app.n8n.cloud/webhook-test/board-deck-takeaways-ze5ubv1w",
          "executionMode": "test"
        }
      }
    ],
    "Global Vars": [
      {
        "json": {
          "body": {
            "channel_id": "C0912AANW1L",
            "channel_name": "data-eng-test-ai-channel",
            "conversation_id": "C0912AANW1L",
            "event_id": "1769145667.002600",
            "event_timestamp": "2026-01-23T05:21:07.002Z",
            "is_message_user_bot": "False",
            "message_text": "Approved Deal Registrations by FQ 1EobCyDEDUI9iE-N5Qs3Ga5m5mVyTXAXx",
            "message_timestamp": "2026-01-23T03:46:45.456Z",
            "message_ts": "1769140005.456469",
            "message_user_email": "nkwok@cribl.io",
            "message_user_first_name": "Nathan",
            "message_user_id": "U06PVBEK9T6",
            "message_user_last_name": "Kwok",
            "message_user_name": "nathan_kwok",
            "reaction": "magnifying-glass",
            "reaction_user_id": "U06PVBEK9T6",
            "team_domain": "cribl",
            "team_id": "T3XQYAF26"
          },
          "dashboard_discovery_model_version": "1.0",
          "snowflake_base_url": "https://ml16699-hya89079.snowflakecomputing.com",
          "omni_documents_search_service": {
            "snowflake_database": "ANALYTICS",
            "snowflake_schema": "OMNI",
            "service_name": "omni_documents_search_service"
          },
          "omni_document_queries_query_table_search_service": {
            "snowflake_database": "ANALYTICS",
            "snowflake_schema": "OMNI",
            "service_name": "omni_document_queries_query_table_search_service"
          },
          "omni_document_queries_query_name_search_service": {
            "snowflake_database": "ANALYTICS",
            "snowflake_schema": "OMNI",
            "service_name": "omni_document_queries_query_name_search_service"
          },
          "omni_documents_analyst_agent": {
            "snowflake_database": "SNOWFLAKE_INTELLIGENCE",
            "snowflake_schema": "AGENTS",
            "agent_name": "OMNI_DOCUMENTS_ANALYST_AGENT"
          },
          "omni_document_query_filters_field_name_search_service": {
            "snowflake_database": "ANALYTICS",
            "snowflake_schema": "OMNI",
            "service_name": "omni_document_query_filters_field_name_search_service"
          },
          "zapier_slack_response_webhook": {
            "webhook_url": "https://hooks.zapier.com/hooks/catch/23046078/u1mp0gx/",
            "direct_message_webhook_url": "https://hooks.zapier.com/hooks/catch/23046078/u90bfmt/"
          },
          "slack": {
            "alerts-data-eng_channel_id": "C06QXJR6V7T",
            "ask-data_channel_id": "C02GRDZS7QF",
            "data-eng-test-ai-channel_channel_id": "C0912AANW1L",
            "zapier_bot_id": "B01304K3N6S",
            "error_message": "The Omni agent could not find relevant dashboards :cry:"
          },
          "omni_api": {
            "omni_base_url": "https://cribl.omniapp.co",
            "model_id": "4345b118-cbbe-4f7c-a705-ea0aa8da57c0",
            "omni_user_id": "893ce348-0fb2-44ac-b0f8-06521a341580"
          },
          "snowflake_tables": {
            "omni_users": {
              "snowflake_database": "ANALYTICS",
              "snowflake_schema": "OMNI",
              "table_name": "OMNI_USERS"
            },
            "omni_documents": {
              "snowflake_database": "ANALYTICS",
              "snowflake_schema": "OMNI",
              "table_name": "DOCUMENTS"
            },
            "omni_document_queries": {
              "snowflake_database": "ANALYTICS",
              "snowflake_schema": "OMNI",
              "table_name": "DOCUMENT_QUERIES"
            },
            "dashboard_recommendations": {
              "snowflake_database": "RAW",
              "snowflake_schema": "OMNI",
              "table_name": "DASHBOARD_RECOMMENDATIONS"
            },
            "dashboard_recommendations_feedback": {
              "snowflake_database": "RAW",
              "snowflake_schema": "OMNI",
              "table_name": "DASHBOARD_RECOMMENDATIONS_FEEDBACK"
            },
            "n8n_workflow_executions": {
              "snowflake_database": "RAW",
              "snowflake_schema": "OMNI",
              "table_name": "N8N_WORKFLOW_EXECUTIONS"
            }
          }
        }
      }
    ]
  },
  "versionId": "1e164730-7364-450a-b0b9-dd52519b4246",
  "activeVersionId": "1e164730-7364-450a-b0b9-dd52519b4246",
  "triggerCount": 1,
  "shared": [
    {
      "updatedAt": "2025-12-20T02:14:15.842Z",
      "createdAt": "2025-12-20T02:14:15.842Z",
      "role": "workflow:owner",
      "workflowId": "4cCsYYYaNoTNWB3U",
      "projectId": "2vHf2VxAoKk0WgJE"
    }
  ],
  "activeVersion": {
    "updatedAt": "2026-01-28T22:39:59.233Z",
    "createdAt": "2026-01-28T22:39:59.233Z",
    "versionId": "1e164730-7364-450a-b0b9-dd52519b4246",
    "workflowId": "4cCsYYYaNoTNWB3U",
    "nodes": [
      {
        "parameters": {},
        "id": "trigger1",
        "name": "When clicking 'Execute workflow'",
        "type": "n8n-nodes-base.manualTrigger",
        "typeVersion": 1,
        "position": [
          48,
          1136
        ]
      },
      {
        "parameters": {
          "mode": "raw",
          "jsonOutput": "{\n  \"b7fc410d-6cd1-4f25-bfb2-8f46d4753443\": [\n    {\n      \"document_query_name\": \"Service Plan Breakdown New Business\",\n      \"query\": {\n        \"limit\": 1000,\n        \"sorts\": [],\n        \"table\": \"sales__opportunity\",\n        \"fields\": [\n          \"sales__accounts.account_name\",\n          \"sales__opportunity.opportunity_name\",\n          \"sales__accounts.owner_name\",\n          \"sales__opportunity.forecast\",\n          \"sales__opportunity.stage_name\",\n          \"sales__opportunity.record_type\",\n          \"sales__opportunity.new_arr_derived\",\n          \"sales__opportunity.close_date\"\n        ],\n        \"pivots\": [],\n        \"dbtMode\": false,\n        \"filters\": {\n          \"sales__opportunity.close_date\": {\n            \"type\": \"composite\",\n            \"filters\": [\n              {\n                \"kind\": \"TIME_FOR_UNIT_DURATION\",\n                \"type\": \"date\",\n                \"left_side\": \"FY2026 Q2\"\n              },\n              {\n                \"kind\": \"TIME_FOR_INTERVAL_DURATION\",\n                \"type\": \"date\",\n                \"left_side\": \"6 complete fiscal quarters ago\",\n                \"right_side\": \"6 quarters\",\n                \"is_negative\": false,\n                \"ignore_if_unjoinable\": true\n              }\n            ],\n            \"conjunction\": \"AND\",\n            \"is_negative\": false\n          },\n          \"sales__opportunity.stage_name\": {\n            \"kind\": \"EQUALS\",\n            \"type\": \"string\",\n            \"values\": [\n              \"7. Closed Won\"\n            ],\n            \"is_negative\": false,\n            \"ignore_if_unjoinable\": true\n          },\n          \"sales__opportunity.new_arr_derived\": {\n            \"kind\": \"GREATER_THAN\",\n            \"type\": \"number\",\n            \"values\": [\n              \"50000\"\n            ],\n            \"is_negative\": false,\n            \"is_inclusive\": true,\n            \"ignore_if_unjoinable\": true\n          },\n          \"sales__opportunity.record_type_rolled_up_\": {\n            \"kind\": \"EQUALS\",\n            \"type\": \"string\",\n            \"values\": [\n              \"New\"\n            ],\n            \"is_negative\": false\n          },\n          \"sales__opportunity.service_deployment_type\": {\n            \"kind\": \"EQUALS\",\n            \"type\": \"string\",\n            \"values\": [\n              \"Cribl PS\"\n            ]\n          }\n        },\n        \"modelId\": \"72057df2-f152-424b-b9a9-6140a8a3d98d\",\n        \"version\": 8,\n        \"controls\": [],\n        \"rewriteSql\": true,\n        \"row_totals\": {},\n        \"fill_fields\": [],\n        \"calculations\": [],\n        \"column_limit\": 50,\n        \"join_via_map\": {},\n        \"column_totals\": {},\n        \"userEditedSQL\": \"\",\n        \"dimensionIndex\": 0,\n        \"default_group_by\": true,\n        \"custom_summary_types\": {},\n        \"join_paths_from_topic_name\": \"opportunity\"\n      },\n      \"sql\": \"SELECT \\\"sales__accounts\\\".\\\"ACCOUNT_NAME\\\" AS \\\"sales__accounts.account_name\\\",\\n    \\\"sales__opportunity\\\".\\\"OPPORTUNITY_NAME\\\" AS \\\"sales__opportunity.opportunity_name\\\",\\n    \\\"sales__accounts\\\".\\\"OWNER_NAME\\\" AS \\\"sales__accounts.owner_name\\\",\\n    \\\"sales__opportunity\\\".\\\"FORECAST\\\" AS \\\"sales__opportunity.forecast\\\",\\n    \\\"sales__opportunity\\\".\\\"STAGE_NAME\\\" AS \\\"sales__opportunity.stage_name\\\",\\n    \\\"sales__opportunity\\\".\\\"RECORD_TYPE\\\" AS \\\"sales__opportunity.record_type\\\",\\n    \\\"sales__opportunity\\\".\\\"NEW_ARR_DERIVED\\\" AS \\\"sales__opportunity.new_arr_derived\\\",\\n    \\\"sales__opportunity\\\".\\\"CLOSE_DATE\\\" AS \\\"sales__opportunity.close_date__raw\\\",\\n    \\\"sales__accounts\\\".\\\"ACCOUNT_ID\\\" AS \\\"sales__accounts.account_id\\\",\\n    \\\"sales__opportunity\\\".\\\"OPPORTUNITY_ID\\\" AS \\\"sales__opportunity.opportunity_id\\\",\\n    TO_CHAR(\\\"sales__opportunity\\\".\\\"CLOSE_DATE\\\", 'YYYY-MM-DD') AS \\\"sales__opportunity.close_date\\\"\\nFROM \\\"SALES\\\".\\\"OPPORTUNITY\\\" AS \\\"sales__opportunity\\\"\\n    LEFT JOIN \\\"SALES\\\".\\\"ACCOUNTS\\\" AS \\\"sales__accounts\\\" ON \\\"sales__opportunity\\\".\\\"ACCOUNT_ID\\\" = \\\"sales__accounts\\\".\\\"ACCOUNT_ID\\\"\\nWHERE \\\"sales__opportunity\\\".\\\"CLOSE_DATE\\\" >= CAST(TIMESTAMP '2025-05-01 00:00:00' AS DATE) AND \\\"sales__opportunity\\\".\\\"CLOSE_DATE\\\" < CAST((DATE_TRUNC('QUARTER', ((TIMESTAMP '2025-05-01 00:00:00' + INTERVAL '3 month') + INTERVAL '2 month')) + INTERVAL '-2 month') AS DATE) AND (\\\"sales__opportunity\\\".\\\"CLOSE_DATE\\\" >= CAST((DATE_TRUNC('QUARTER', ((CAST(CURRENT_TIMESTAMP AS TIMESTAMP(0)) + INTERVAL '-18 month') + INTERVAL '2 month')) + INTERVAL '-2 month') AS DATE) AND \\\"sales__opportunity\\\".\\\"CLOSE_DATE\\\" < CAST((DATE_TRUNC('QUARTER', (((DATE_TRUNC('QUARTER', ((CAST(CURRENT_TIMESTAMP AS TIMESTAMP(0)) + INTERVAL '-18 month') + INTERVAL '2 month')) + INTERVAL '-2 month') + INTERVAL '18 month') + INTERVAL '2 month')) + INTERVAL '-2 month') AS DATE)) AND (\\\"sales__opportunity\\\".\\\"STAGE_NAME\\\" = '7. Closed Won' AND \\\"sales__opportunity\\\".\\\"NEW_ARR_DERIVED\\\" >= 50000 AND (CASE\\n        WHEN \\\"sales__opportunity\\\".\\\"RECORD_TYPE\\\" = 'New' THEN 'New'\\n        WHEN \\\"sales__opportunity\\\".\\\"RECORD_TYPE\\\" IN ('Upsell', 'Expansion', 'Renewal+Upsell') THEN 'Upsell'\\n        ELSE \\\"sales__opportunity\\\".\\\"RECORD_TYPE\\\"\\n    END = 'New' AND CASE\\n        WHEN \\\"sales__opportunity\\\".\\\"WHO_IS_DEPLOYING_CUSTOMER\\\" IN ('Cribl PS on deal', 'Cribl PS on separate deal') THEN 'Cribl PS'\\n        WHEN \\\"sales__opportunity\\\".\\\"WHO_IS_DEPLOYING_CUSTOMER\\\" IN ('Service Partner', 'Service Partner + Cribl PS') THEN 'Service Partner'\\n        ELSE 'Self Deployment'\\n    END = 'Cribl PS'))\\nGROUP BY 9, 1, 3, 8, 4, 7, 10, 2, 6, 5\\nLIMIT 1000\",\n      \"drill_name\": \"count_opps\"\n    }\n  ],\n  \"0bdb4f3c-7811-4b6d-b8de-ed515fc500b4\": [\n    {\n      \"document_query_name\": \"Service Plan Breakdown Incremental Business\",\n      \"drill_name\": \"count_opps\",\n      \"query\": {\n        \"limit\": 1000,\n        \"sorts\": [],\n        \"table\": \"sales__opportunity\",\n        \"fields\": [\n          \"sales__accounts.account_name\",\n          \"sales__opportunity.opportunity_name\",\n          \"sales__accounts.owner_name\",\n          \"sales__opportunity.forecast\",\n          \"sales__opportunity.stage_name\",\n          \"sales__opportunity.record_type\",\n          \"sales__opportunity.new_arr_derived\",\n          \"sales__opportunity.close_date\"\n        ],\n        \"pivots\": [],\n        \"dbtMode\": false,\n        \"filters\": {\n          \"sales__opportunity.close_date\": {\n            \"type\": \"composite\",\n            \"filters\": [\n              {\n                \"kind\": \"TIME_FOR_UNIT_DURATION\",\n                \"type\": \"date\",\n                \"left_side\": \"FY2025 Q4\"\n              },\n              {\n                \"kind\": \"TIME_FOR_INTERVAL_DURATION\",\n                \"type\": \"date\",\n                \"left_side\": \"6 complete fiscal quarters ago\",\n                \"right_side\": \"6 quarters\",\n                \"is_negative\": false,\n                \"ignore_if_unjoinable\": true\n              }\n            ],\n            \"conjunction\": \"AND\",\n            \"is_negative\": false\n          },\n          \"sales__opportunity.stage_name\": {\n            \"kind\": \"EQUALS\",\n            \"type\": \"string\",\n            \"values\": [\n              \"7. Closed Won\"\n            ],\n            \"is_negative\": false,\n            \"ignore_if_unjoinable\": true\n          },\n          \"sales__opportunity.new_arr_derived\": {\n            \"kind\": \"GREATER_THAN\",\n            \"type\": \"number\",\n            \"values\": [\n              \"50000\"\n            ],\n            \"is_negative\": false,\n            \"is_inclusive\": true,\n            \"ignore_if_unjoinable\": true\n          },\n          \"sales__opportunity.record_type_rolled_up_\": {\n            \"kind\": \"EQUALS\",\n            \"type\": \"string\",\n            \"values\": [\n              \"New\"\n            ],\n            \"is_negative\": true\n          },\n          \"sales__opportunity.service_deployment_type\": {\n            \"kind\": \"EQUALS\",\n            \"type\": \"string\",\n            \"values\": [\n              \"Service Partner\"\n            ]\n          }\n        },\n        \"modelId\": \"ab2e49da-abca-4b79-8b31-3e680e503495\",\n        \"version\": 8,\n        \"controls\": [],\n        \"rewriteSql\": true,\n        \"row_totals\": {},\n        \"fill_fields\": [],\n        \"calculations\": [],\n        \"column_limit\": 50,\n        \"join_via_map\": {},\n        \"column_totals\": {},\n        \"userEditedSQL\": \"\",\n        \"dimensionIndex\": 0,\n        \"default_group_by\": true,\n        \"custom_summary_types\": {},\n        \"join_paths_from_topic_name\": \"opportunity\"\n      },\n      \"sql\": \"SELECT \\\"sales__accounts\\\".\\\"ACCOUNT_NAME\\\" AS \\\"sales__accounts.account_name\\\",\\n    \\\"sales__opportunity\\\".\\\"OPPORTUNITY_NAME\\\" AS \\\"sales__opportunity.opportunity_name\\\",\\n    \\\"sales__accounts\\\".\\\"OWNER_NAME\\\" AS \\\"sales__accounts.owner_name\\\",\\n    \\\"sales__opportunity\\\".\\\"FORECAST\\\" AS \\\"sales__opportunity.forecast\\\",\\n    \\\"sales__opportunity\\\".\\\"STAGE_NAME\\\" AS \\\"sales__opportunity.stage_name\\\",\\n    \\\"sales__opportunity\\\".\\\"RECORD_TYPE\\\" AS \\\"sales__opportunity.record_type\\\",\\n    \\\"sales__opportunity\\\".\\\"NEW_ARR_DERIVED\\\" AS \\\"sales__opportunity.new_arr_derived\\\",\\n    \\\"sales__opportunity\\\".\\\"CLOSE_DATE\\\" AS \\\"sales__opportunity.close_date__raw\\\",\\n    \\\"sales__accounts\\\".\\\"ACCOUNT_ID\\\" AS \\\"sales__accounts.account_id\\\",\\n    \\\"sales__opportunity\\\".\\\"OPPORTUNITY_ID\\\" AS \\\"sales__opportunity.opportunity_id\\\",\\n    TO_CHAR(\\\"sales__opportunity\\\".\\\"CLOSE_DATE\\\", 'YYYY-MM-DD') AS \\\"sales__opportunity.close_date\\\"\\nFROM \\\"SALES\\\".\\\"OPPORTUNITY\\\" AS \\\"sales__opportunity\\\"\\n    LEFT JOIN \\\"SALES\\\".\\\"ACCOUNTS\\\" AS \\\"sales__accounts\\\" ON \\\"sales__opportunity\\\".\\\"ACCOUNT_ID\\\" = \\\"sales__accounts\\\".\\\"ACCOUNT_ID\\\"\\nWHERE \\\"sales__opportunity\\\".\\\"CLOSE_DATE\\\" >= CAST(TIMESTAMP '2024-11-01 00:00:00' AS DATE) AND \\\"sales__opportunity\\\".\\\"CLOSE_DATE\\\" < CAST((DATE_TRUNC('QUARTER', ((TIMESTAMP '2024-11-01 00:00:00' + INTERVAL '3 month') + INTERVAL '2 month')) + INTERVAL '-2 month') AS DATE) AND (\\\"sales__opportunity\\\".\\\"CLOSE_DATE\\\" >= CAST((DATE_TRUNC('QUARTER', ((CAST(CURRENT_TIMESTAMP AS TIMESTAMP(0)) + INTERVAL '-18 month') + INTERVAL '2 month')) + INTERVAL '-2 month') AS DATE) AND \\\"sales__opportunity\\\".\\\"CLOSE_DATE\\\" < CAST((DATE_TRUNC('QUARTER', (((DATE_TRUNC('QUARTER', ((CAST(CURRENT_TIMESTAMP AS TIMESTAMP(0)) + INTERVAL '-18 month') + INTERVAL '2 month')) + INTERVAL '-2 month') + INTERVAL '18 month') + INTERVAL '2 month')) + INTERVAL '-2 month') AS DATE)) AND (\\\"sales__opportunity\\\".\\\"STAGE_NAME\\\" = '7. Closed Won' AND \\\"sales__opportunity\\\".\\\"NEW_ARR_DERIVED\\\" >= 50000 AND ((NOT CASE\\n        WHEN \\\"sales__opportunity\\\".\\\"RECORD_TYPE\\\" = 'New' THEN 'New'\\n        WHEN \\\"sales__opportunity\\\".\\\"RECORD_TYPE\\\" IN ('Upsell', 'Expansion', 'Renewal+Upsell') THEN 'Upsell'\\n        ELSE \\\"sales__opportunity\\\".\\\"RECORD_TYPE\\\"\\n    END = 'New' OR CASE\\n        WHEN \\\"sales__opportunity\\\".\\\"RECORD_TYPE\\\" = 'New' THEN 'New'\\n        WHEN \\\"sales__opportunity\\\".\\\"RECORD_TYPE\\\" IN ('Upsell', 'Expansion', 'Renewal+Upsell') THEN 'Upsell'\\n        ELSE \\\"sales__opportunity\\\".\\\"RECORD_TYPE\\\"\\n    END IS NULL) AND CASE\\n        WHEN \\\"sales__opportunity\\\".\\\"WHO_IS_DEPLOYING_CUSTOMER\\\" IN ('Cribl PS on deal', 'Cribl PS on separate deal') THEN 'Cribl PS'\\n        WHEN \\\"sales__opportunity\\\".\\\"WHO_IS_DEPLOYING_CUSTOMER\\\" IN ('Service Partner', 'Service Partner + Cribl PS') THEN 'Service Partner'\\n        ELSE 'Self Deployment'\\n    END = 'Service Partner'))\\nGROUP BY 9, 1, 3, 8, 4, 7, 10, 2, 6, 5\\nLIMIT 1000\"\n    }\n  ],\n  \"551e19e0-6d32-4a5e-9a93-ac81cb486d88\": [\n    {\n      \"drill_name\": \"lake_customers\",\n      \"query\": {\n        \"limit\": 1000,\n        \"sorts\": [],\n        \"table\": \"product__adoption\",\n        \"fields\": [\n          \"product__adoption.customer_name\",\n          \"product__adoption.products_adopted\",\n          \"product__adoption.total_cloud_stream_in_gb_30d\",\n          \"product__adoption.total_cloud_edge_in_gb_30d\",\n          \"product__adoption.total_cloud_edge_nodes_30d\",\n          \"product__adoption.total_cloud_completed_searches_30d\",\n          \"product__adoption.total_software_stream_in_gb_30d\",\n          \"product__adoption.total_software_edge_nodes_30d\",\n          \"product__adoption.total_software_edge_in_gb_30d\",\n          \"product__adoption.lake_gbs_customer_data_max\",\n          \"product__adoption.total_connected_billable_stream_in_gb_30d\",\n          \"product__adoption.total_connected_billable_edge_in_gb_30d\"\n        ],\n        \"pivots\": [],\n        \"dbtMode\": false,\n        \"filters\": {\n          \"product__adoption.date\": {\n            \"type\": \"composite\",\n            \"filters\": [\n              {\n                \"kind\": \"TIME_FOR_UNIT_DURATION\",\n                \"type\": \"date\",\n                \"left_side\": \"FY2026 Q3\"\n              },\n              {\n                \"kind\": \"TIME_FOR_INTERVAL_DURATION\",\n                \"type\": \"date\",\n                \"left_side\": \"6 complete fiscal quarters ago\",\n                \"right_side\": \"6 quarters\",\n                \"is_negative\": false\n              }\n            ],\n            \"conjunction\": \"AND\",\n            \"is_negative\": false\n          },\n          \"product__adoption.adopt_lake\": {\n            \"type\": \"boolean\",\n            \"is_negative\": false,\n            \"treat_nulls_as_false\": false\n          },\n          \"product__adoption.is_last_day_of_fq\": {\n            \"type\": \"boolean\",\n            \"is_negative\": false,\n            \"treat_nulls_as_false\": false\n          }\n        },\n        \"modelId\": \"a71397ca-7baa-4641-8ae9-898781b9814c\",\n        \"version\": 8,\n        \"controls\": [],\n        \"rewriteSql\": true,\n        \"row_totals\": {},\n        \"fill_fields\": [],\n        \"calculations\": [],\n        \"column_limit\": 50,\n        \"join_via_map\": {},\n        \"column_totals\": {},\n        \"userEditedSQL\": \"\",\n        \"dimensionIndex\": 0,\n        \"default_group_by\": true,\n        \"custom_summary_types\": {},\n        \"join_paths_from_topic_name\": \"adoption\"\n      },\n      \"sql\": \"SELECT \\\"product__adoption\\\".\\\"CUSTOMER_NAME\\\" AS \\\"product__adoption.customer_name\\\",\\n    CASE\\n        WHEN CASE\\n            WHEN \\\"product__adoption\\\".\\\"ADOPT_ONPREM_STREAM\\\" = 1 THEN TRUE\\n            ELSE FALSE\\n        END = 1 THEN 'Software Stream, '\\n        ELSE ''\\n    END || CASE\\n        WHEN CASE\\n            WHEN \\\"product__adoption\\\".\\\"ADOPT_ONPREM_EDGE\\\" = 1 THEN TRUE\\n            ELSE FALSE\\n        END = 1 THEN 'Software Edge, '\\n        ELSE ''\\n    END || CASE\\n        WHEN CASE\\n            WHEN \\\"product__adoption\\\".\\\"ADOPT_CLOUD_STREAM\\\" = 1 THEN TRUE\\n            ELSE FALSE\\n        END = 1 THEN 'Cloud Stream, '\\n        ELSE ''\\n    END || CASE\\n        WHEN CASE\\n            WHEN \\\"product__adoption\\\".\\\"ADOPT_CLOUD_EDGE\\\" = 1 THEN TRUE\\n            ELSE FALSE\\n        END = 1 THEN 'Cloud Edge, '\\n        ELSE ''\\n    END || CASE\\n        WHEN CASE\\n            WHEN \\\"product__adoption\\\".\\\"ADOPT_SEARCH\\\" = 1 THEN TRUE\\n            ELSE FALSE\\n        END = 1 THEN 'Cloud Search, '\\n        ELSE ''\\n    END || CASE\\n        WHEN CASE\\n            WHEN \\\"product__adoption\\\".\\\"ADOPT_LAKE\\\" = 1 THEN TRUE\\n            ELSE FALSE\\n        END = 1 THEN 'Cloud Lake'\\n        ELSE ''\\n    END AS \\\"product__adoption.products_adopted\\\",\\n    COALESCE(SUM(\\\"product__adoption\\\".\\\"CLOUD_STREAM_IN_BYTES_30D\\\" / 1024 / 1024 / 1024), 0) AS \\\"product__adoption.total_cloud_stream_in_gb_30d\\\",\\n    COALESCE(SUM(\\\"product__adoption\\\".\\\"CLOUD_EDGE_IN_BYTES_30D\\\" / 1024 / 1024 / 1024), 0) AS \\\"product__adoption.total_cloud_edge_in_gb_30d\\\",\\n    COALESCE(SUM(\\\"product__adoption\\\".\\\"CLOUD_EDGE_NODES_30D\\\"), 0) AS \\\"product__adoption.total_cloud_edge_nodes_30d\\\",\\n    COALESCE(SUM(\\\"product__adoption\\\".\\\"CLOUD_COMPLETED_SEARCHES_30D\\\"), 0) AS \\\"product__adoption.total_cloud_completed_searches_30d\\\",\\n    COALESCE(SUM(\\\"product__adoption\\\".\\\"ONPREM_STREAM_IN_BYTES_30D\\\" / 1024 / 1024 / 1024), 0) AS \\\"product__adoption.total_software_stream_in_gb_30d\\\",\\n    COALESCE(SUM(\\\"product__adoption\\\".\\\"ONPREM_EDGE_NODES_30D\\\"), 0) AS \\\"product__adoption.total_software_edge_nodes_30d\\\",\\n    COALESCE(SUM(\\\"product__adoption\\\".\\\"ONPREM_EDGE_IN_BYTES_30D\\\" / 1024 / 1024 / 1024), 0) AS \\\"product__adoption.total_software_edge_in_gb_30d\\\",\\n    COALESCE(SUM(\\\"product__adoption\\\".\\\"LAKE_GBS_CUSTOMER_DATA\\\"), 0) AS \\\"product__adoption.lake_gbs_customer_data_max\\\",\\n    COALESCE(SUM(\\\"product__adoption\\\".\\\"CONNECTED_BILLABLE_STREAM_IN_BYTES_30D\\\" / 1024 / 1024 / 1024), 0) AS \\\"product__adoption.total_connected_billable_stream_in_gb_30d\\\",\\n    COALESCE(SUM(\\\"product__adoption\\\".\\\"CONNECTED_BILLABLE_EDGE_IN_BYTES_30D\\\" / 1024 / 1024 / 1024), 0) AS \\\"product__adoption.total_connected_billable_edge_in_gb_30d\\\"\\nFROM \\\"PRODUCT\\\".\\\"ADOPTION\\\" AS \\\"product__adoption\\\"\\n    LEFT JOIN \\\"UTIL\\\".\\\"DATES\\\" AS \\\"util__dates\\\" ON \\\"product__adoption\\\".\\\"DATE\\\" = \\\"util__dates\\\".\\\"DATE_ACTUAL\\\"\\nWHERE \\\"product__adoption\\\".\\\"DATE\\\" >= CAST(TIMESTAMP '2025-08-01 00:00:00' AS DATE) AND (\\\"product__adoption\\\".\\\"DATE\\\" < CAST((DATE_TRUNC('QUARTER', ((TIMESTAMP '2025-08-01 00:00:00' + INTERVAL '3 month') + INTERVAL '2 month')) + INTERVAL '-2 month') AS DATE) AND \\\"product__adoption\\\".\\\"DATE\\\" >= CAST((DATE_TRUNC('QUARTER', ((CAST(CURRENT_TIMESTAMP AS TIMESTAMP(0)) + INTERVAL '-18 month') + INTERVAL '2 month')) + INTERVAL '-2 month') AS DATE)) AND (\\\"product__adoption\\\".\\\"DATE\\\" < CAST((DATE_TRUNC('QUARTER', (((DATE_TRUNC('QUARTER', ((CAST(CURRENT_TIMESTAMP AS TIMESTAMP(0)) + INTERVAL '-18 month') + INTERVAL '2 month')) + INTERVAL '-2 month') + INTERVAL '18 month') + INTERVAL '2 month')) + INTERVAL '-2 month') AS DATE) AND (CASE\\n        WHEN \\\"product__adoption\\\".\\\"ADOPT_LAKE\\\" = 1 THEN TRUE\\n        ELSE FALSE\\n    END AND CASE\\n        WHEN \\\"product__adoption\\\".\\\"DATE\\\" = \\\"util__dates\\\".\\\"LAST_DAY_OF_FISCAL_QUARTER\\\" THEN TRUE\\n        WHEN DATEDIFF(DAY, \\\"product__adoption\\\".\\\"DATE\\\", CURRENT_DATE) = 1 THEN TRUE\\n        ELSE FALSE\\n    END))\\nGROUP BY 1, 2\\nLIMIT 1000\"\n    },\n    {\n      \"drill_name\": \"max_lake_gbs_customer_data\",\n      \"query\": {\n        \"limit\": 1000,\n        \"sorts\": [\n          {\n            \"column_name\": \"product__adoption.lake_gbs_customer_data_max\",\n            \"sort_descending\": true\n          }\n        ],\n        \"table\": \"product__adoption\",\n        \"fields\": [\n          \"product__adoption.customer_name\",\n          \"product__adoption.products_adopted\",\n          \"product__adoption.total_cloud_stream_in_gb_30d\",\n          \"product__adoption.total_cloud_edge_in_gb_30d\",\n          \"product__adoption.total_cloud_edge_nodes_30d\",\n          \"product__adoption.total_cloud_completed_searches_30d\",\n          \"product__adoption.total_software_stream_in_gb_30d\",\n          \"product__adoption.total_software_edge_nodes_30d\",\n          \"product__adoption.total_software_edge_in_gb_30d\",\n          \"product__adoption.lake_gbs_customer_data_max\",\n          \"product__adoption.total_connected_billable_stream_in_gb_30d\",\n          \"product__adoption.total_connected_billable_edge_in_gb_30d\"\n        ],\n        \"pivots\": [],\n        \"dbtMode\": false,\n        \"filters\": {\n          \"product__adoption.date\": {\n            \"type\": \"composite\",\n            \"filters\": [\n              {\n                \"kind\": \"TIME_FOR_UNIT_DURATION\",\n                \"type\": \"date\",\n                \"left_side\": \"FY2026 Q3\"\n              },\n              {\n                \"kind\": \"TIME_FOR_INTERVAL_DURATION\",\n                \"type\": \"date\",\n                \"left_side\": \"6 complete fiscal quarters ago\",\n                \"right_side\": \"6 quarters\",\n                \"is_negative\": false\n              }\n            ],\n            \"conjunction\": \"AND\",\n            \"is_negative\": false\n          },\n          \"product__adoption.is_last_day_of_fq\": {\n            \"type\": \"boolean\",\n            \"is_negative\": false,\n            \"treat_nulls_as_false\": false\n          }\n        },\n        \"modelId\": \"558ca1ef-61d7-48dd-8221-44b1d22ec9dd\",\n        \"version\": 8,\n        \"controls\": [],\n        \"manualSort\": true,\n        \"rewriteSql\": true,\n        \"row_totals\": {},\n        \"fill_fields\": [],\n        \"calculations\": [],\n        \"column_limit\": 50,\n        \"join_via_map\": {},\n        \"column_totals\": {},\n        \"userEditedSQL\": \"\",\n        \"dimensionIndex\": 0,\n        \"default_group_by\": true,\n        \"custom_summary_types\": {},\n        \"join_paths_from_topic_name\": \"adoption\"\n      },\n      \"sql\": \"SELECT \\\"product__adoption\\\".\\\"CUSTOMER_NAME\\\" AS \\\"product__adoption.customer_name\\\",\\n    CASE\\n        WHEN CASE\\n            WHEN \\\"product__adoption\\\".\\\"ADOPT_ONPREM_STREAM\\\" = 1 THEN TRUE\\n            ELSE FALSE\\n        END = 1 THEN 'Software Stream, '\\n        ELSE ''\\n    END || CASE\\n        WHEN CASE\\n            WHEN \\\"product__adoption\\\".\\\"ADOPT_ONPREM_EDGE\\\" = 1 THEN TRUE\\n            ELSE FALSE\\n        END = 1 THEN 'Software Edge, '\\n        ELSE ''\\n    END || CASE\\n        WHEN CASE\\n            WHEN \\\"product__adoption\\\".\\\"ADOPT_CLOUD_STREAM\\\" = 1 THEN TRUE\\n            ELSE FALSE\\n        END = 1 THEN 'Cloud Stream, '\\n        ELSE ''\\n    END || CASE\\n        WHEN CASE\\n            WHEN \\\"product__adoption\\\".\\\"ADOPT_CLOUD_EDGE\\\" = 1 THEN TRUE\\n            ELSE FALSE\\n        END = 1 THEN 'Cloud Edge, '\\n        ELSE ''\\n    END || CASE\\n        WHEN CASE\\n            WHEN \\\"product__adoption\\\".\\\"ADOPT_SEARCH\\\" = 1 THEN TRUE\\n            ELSE FALSE\\n        END = 1 THEN 'Cloud Search, '\\n        ELSE ''\\n    END || CASE\\n        WHEN CASE\\n            WHEN \\\"product__adoption\\\".\\\"ADOPT_LAKE\\\" = 1 THEN TRUE\\n            ELSE FALSE\\n        END = 1 THEN 'Cloud Lake'\\n        ELSE ''\\n    END AS \\\"product__adoption.products_adopted\\\",\\n    COALESCE(SUM(\\\"product__adoption\\\".\\\"CLOUD_STREAM_IN_BYTES_30D\\\" / 1024 / 1024 / 1024), 0) AS \\\"product__adoption.total_cloud_stream_in_gb_30d\\\",\\n    COALESCE(SUM(\\\"product__adoption\\\".\\\"CLOUD_EDGE_IN_BYTES_30D\\\" / 1024 / 1024 / 1024), 0) AS \\\"product__adoption.total_cloud_edge_in_gb_30d\\\",\\n    COALESCE(SUM(\\\"product__adoption\\\".\\\"CLOUD_EDGE_NODES_30D\\\"), 0) AS \\\"product__adoption.total_cloud_edge_nodes_30d\\\",\\n    COALESCE(SUM(\\\"product__adoption\\\".\\\"CLOUD_COMPLETED_SEARCHES_30D\\\"), 0) AS \\\"product__adoption.total_cloud_completed_searches_30d\\\",\\n    COALESCE(SUM(\\\"product__adoption\\\".\\\"ONPREM_STREAM_IN_BYTES_30D\\\" / 1024 / 1024 / 1024), 0) AS \\\"product__adoption.total_software_stream_in_gb_30d\\\",\\n    COALESCE(SUM(\\\"product__adoption\\\".\\\"ONPREM_EDGE_NODES_30D\\\"), 0) AS \\\"product__adoption.total_software_edge_nodes_30d\\\",\\n    COALESCE(SUM(\\\"product__adoption\\\".\\\"ONPREM_EDGE_IN_BYTES_30D\\\" / 1024 / 1024 / 1024), 0) AS \\\"product__adoption.total_software_edge_in_gb_30d\\\",\\n    COALESCE(SUM(\\\"product__adoption\\\".\\\"LAKE_GBS_CUSTOMER_DATA\\\"), 0) AS \\\"product__adoption.lake_gbs_customer_data_max\\\",\\n    COALESCE(SUM(\\\"product__adoption\\\".\\\"CONNECTED_BILLABLE_STREAM_IN_BYTES_30D\\\" / 1024 / 1024 / 1024), 0) AS \\\"product__adoption.total_connected_billable_stream_in_gb_30d\\\",\\n    COALESCE(SUM(\\\"product__adoption\\\".\\\"CONNECTED_BILLABLE_EDGE_IN_BYTES_30D\\\" / 1024 / 1024 / 1024), 0) AS \\\"product__adoption.total_connected_billable_edge_in_gb_30d\\\"\\nFROM \\\"PRODUCT\\\".\\\"ADOPTION\\\" AS \\\"product__adoption\\\"\\n    LEFT JOIN \\\"UTIL\\\".\\\"DATES\\\" AS \\\"util__dates\\\" ON \\\"product__adoption\\\".\\\"DATE\\\" = \\\"util__dates\\\".\\\"DATE_ACTUAL\\\"\\nWHERE \\\"product__adoption\\\".\\\"DATE\\\" >= CAST(TIMESTAMP '2025-08-01 00:00:00' AS DATE) AND \\\"product__adoption\\\".\\\"DATE\\\" < CAST((DATE_TRUNC('QUARTER', ((TIMESTAMP '2025-08-01 00:00:00' + INTERVAL '3 month') + INTERVAL '2 month')) + INTERVAL '-2 month') AS DATE) AND \\\"product__adoption\\\".\\\"DATE\\\" >= CAST((DATE_TRUNC('QUARTER', ((CAST(CURRENT_TIMESTAMP AS TIMESTAMP(0)) + INTERVAL '-18 month') + INTERVAL '2 month')) + INTERVAL '-2 month') AS DATE) AND \\\"product__adoption\\\".\\\"DATE\\\" < CAST((DATE_TRUNC('QUARTER', (((DATE_TRUNC('QUARTER', ((CAST(CURRENT_TIMESTAMP AS TIMESTAMP(0)) + INTERVAL '-18 month') + INTERVAL '2 month')) + INTERVAL '-2 month') + INTERVAL '18 month') + INTERVAL '2 month')) + INTERVAL '-2 month') AS DATE) AND CASE\\n        WHEN \\\"product__adoption\\\".\\\"DATE\\\" = \\\"util__dates\\\".\\\"LAST_DAY_OF_FISCAL_QUARTER\\\" THEN TRUE\\n        WHEN DATEDIFF(DAY, \\\"product__adoption\\\".\\\"DATE\\\", CURRENT_DATE) = 1 THEN TRUE\\n        ELSE FALSE\\n    END\\nGROUP BY 1, 2\\nORDER BY 10 DESC NULLS LAST\\nLIMIT 1000\"\n    }\n  ],\n  \"b5c07e22-63a7-4c39-b4e1-39fed0467998\": [\n    {\n      \"document_query_name\": \"Q3 Won & Q4 Open_Stream\",\n      \"drill_name\": \"stream_new_arr\",\n      \"query\": {\n        \"limit\": 1000,\n        \"sorts\": [],\n        \"table\": \"sales__opportunity\",\n        \"fields\": [\n          \"sales__accounts.account_name\",\n          \"sales__opportunity.opportunity_name\",\n          \"sales__accounts.owner_name\",\n          \"sales__opportunity.forecast\",\n          \"sales__opportunity.stage_name\",\n          \"sales__opportunity.record_type\",\n          \"sales__opportunity.new_arr_derived\",\n          \"sales__opportunity.close_date\"\n        ],\n        \"pivots\": [],\n        \"dbtMode\": false,\n        \"filters\": {\n          \"sales__opportunity.close_date\": {\n            \"type\": \"composite\",\n            \"filters\": [\n              {\n                \"kind\": \"TIME_FOR_UNIT_DURATION\",\n                \"type\": \"date\",\n                \"left_side\": \"FY2027 Q1\"\n              },\n              {\n                \"type\": \"composite\",\n                \"filters\": [\n                  {\n                    \"kind\": \"TIME_FOR_INTERVAL_DURATION\",\n                    \"type\": \"date\",\n                    \"left_side\": \"2 complete fiscal quarters ago\",\n                    \"right_side\": \"2 quarters\",\n                    \"is_negative\": false\n                  },\n                  {\n                    \"kind\": \"BETWEEN\",\n                    \"type\": \"date\",\n                    \"left_side\": \"0 fiscal quarters ago\",\n                    \"right_side\": \"2 fiscal quarters from now\",\n                    \"is_negative\": false\n                  }\n                ],\n                \"conjunction\": \"OR\"\n              }\n            ],\n            \"conjunction\": \"AND\",\n            \"is_negative\": false\n          },\n          \"sales__opportunity.stage_name\": {\n            \"kind\": \"EQUALS\",\n            \"type\": \"string\",\n            \"values\": [\n              \"3. Visible Opportunity\"\n            ]\n          },\n          \"sales__opportunity.type_of_opp\": {\n            \"kind\": \"EQUALS\",\n            \"type\": \"string\",\n            \"values\": [\n              \"Downsell\",\n              \"NFR\",\n              \"Services Only\"\n            ],\n            \"is_negative\": true\n          },\n          \"sales__opportunity.stage_last_updated\": {\n            \"kind\": \"BEFORE\",\n            \"type\": \"date\",\n            \"right_side\": \"2025-11-03\",\n            \"is_negative\": false\n          }\n        },\n        \"modelId\": \"ff7d6a64-3403-4b84-922d-e8ac1382baf5\",\n        \"version\": 8,\n        \"controls\": [],\n        \"rewriteSql\": true,\n        \"row_totals\": {},\n        \"fill_fields\": [],\n        \"calculations\": [],\n        \"column_limit\": 50,\n        \"join_via_map\": {},\n        \"column_totals\": {},\n        \"userEditedSQL\": \"\",\n        \"dimensionIndex\": 0,\n        \"default_group_by\": true,\n        \"custom_summary_types\": {},\n        \"join_paths_from_topic_name\": \"opportunity\"\n      },\n      \"sql\": \"SELECT \\\"sales__accounts\\\".\\\"ACCOUNT_NAME\\\" AS \\\"sales__accounts.account_name\\\",\\n    \\\"sales__opportunity\\\".\\\"OPPORTUNITY_NAME\\\" AS \\\"sales__opportunity.opportunity_name\\\",\\n    \\\"sales__accounts\\\".\\\"OWNER_NAME\\\" AS \\\"sales__accounts.owner_name\\\",\\n    \\\"sales__opportunity\\\".\\\"FORECAST\\\" AS \\\"sales__opportunity.forecast\\\",\\n    \\\"sales__opportunity\\\".\\\"STAGE_NAME\\\" AS \\\"sales__opportunity.stage_name\\\",\\n    \\\"sales__opportunity\\\".\\\"RECORD_TYPE\\\" AS \\\"sales__opportunity.record_type\\\",\\n    \\\"sales__opportunity\\\".\\\"NEW_ARR_DERIVED\\\" AS \\\"sales__opportunity.new_arr_derived\\\",\\n    \\\"sales__opportunity\\\".\\\"CLOSE_DATE\\\" AS \\\"sales__opportunity.close_date__raw\\\",\\n    \\\"sales__accounts\\\".\\\"ACCOUNT_ID\\\" AS \\\"sales__accounts.account_id\\\",\\n    \\\"sales__opportunity\\\".\\\"OPPORTUNITY_ID\\\" AS \\\"sales__opportunity.opportunity_id\\\",\\n    TO_CHAR(\\\"sales__opportunity\\\".\\\"CLOSE_DATE\\\", 'YYYY-MM-DD') AS \\\"sales__opportunity.close_date\\\"\\nFROM \\\"SALES\\\".\\\"OPPORTUNITY\\\" AS \\\"sales__opportunity\\\"\\n    LEFT JOIN \\\"SALES\\\".\\\"ACCOUNTS\\\" AS \\\"sales__accounts\\\" ON \\\"sales__opportunity\\\".\\\"ACCOUNT_ID\\\" = \\\"sales__accounts\\\".\\\"ACCOUNT_ID\\\"\\nWHERE \\\"sales__opportunity\\\".\\\"CLOSE_DATE\\\" >= CAST(TIMESTAMP '2026-02-01 00:00:00' AS DATE) AND (\\\"sales__opportunity\\\".\\\"CLOSE_DATE\\\" < CAST((DATE_TRUNC('QUARTER', ((TIMESTAMP '2026-02-01 00:00:00' + INTERVAL '3 month') + INTERVAL '2 month')) + INTERVAL '-2 month') AS DATE) AND (\\\"sales__opportunity\\\".\\\"CLOSE_DATE\\\" >= CAST((DATE_TRUNC('QUARTER', ((CAST(CURRENT_TIMESTAMP AS TIMESTAMP(0)) + INTERVAL '-6 month') + INTERVAL '2 month')) + INTERVAL '-2 month') AS DATE) AND \\\"sales__opportunity\\\".\\\"CLOSE_DATE\\\" < CAST((DATE_TRUNC('QUARTER', (((DATE_TRUNC('QUARTER', ((CAST(CURRENT_TIMESTAMP AS TIMESTAMP(0)) + INTERVAL '-6 month') + INTERVAL '2 month')) + INTERVAL '-2 month') + INTERVAL '6 month') + INTERVAL '2 month')) + INTERVAL '-2 month') AS DATE) OR \\\"sales__opportunity\\\".\\\"CLOSE_DATE\\\" >= CAST((DATE_TRUNC('QUARTER', (CAST(CURRENT_TIMESTAMP AS TIMESTAMP(0)) + INTERVAL '2 month')) + INTERVAL '-2 month') AS DATE) AND \\\"sales__opportunity\\\".\\\"CLOSE_DATE\\\" < CAST((DATE_TRUNC('QUARTER', ((CAST(CURRENT_TIMESTAMP AS TIMESTAMP(0)) + INTERVAL '6 month') + INTERVAL '2 month')) + INTERVAL '-2 month') AS DATE))) AND (\\\"sales__opportunity\\\".\\\"STAGE_NAME\\\" = '3. Visible Opportunity' AND ((\\\"sales__opportunity\\\".\\\"TYPE_OF_OPP\\\" NOT IN ('Downsell', 'NFR', 'Services Only') OR \\\"sales__opportunity\\\".\\\"TYPE_OF_OPP\\\" IS NULL) AND \\\"sales__opportunity\\\".\\\"STAGE_LAST_UPDATED\\\" < CAST(TIMESTAMP '2025-11-03 00:00:00' AS DATE)))\\nGROUP BY 9, 1, 3, 8, 4, 7, 10, 2, 6, 5\\nLIMIT 1000\"\n    }\n  ],\n  \"fd41c0cc-09f5-4781-8081-411e55d2d762\": [\n    {\n      \"document_query_name\": \"Searches Dispatched\",\n      \"drill_name\": \"total_searches_dispatched\",\n      \"query\": {\n        \"limit\": 1000,\n        \"sorts\": [],\n        \"table\": \"product__cloud_telemetry_daily\",\n        \"fields\": [\n          \"product__cloud_orgs.account_name\",\n          \"product__cloud_orgs.org_id\",\n          \"product__cloud_orgs.org_type\",\n          \"product__cloud_orgs.owner_email\",\n          \"product__cloud_telemetry_daily.search_executor_compute_sum\",\n          \"product__cloud_telemetry_daily.dispatched_searches_sum\"\n        ],\n        \"pivots\": [],\n        \"dbtMode\": false,\n        \"filters\": {\n          \"product__cloud_orgs.org_type\": {\n            \"kind\": \"EQUALS\",\n            \"type\": \"string\",\n            \"values\": [\n              \"Customer\",\n              \"Free\"\n            ],\n            \"is_negative\": false\n          },\n          \"product__cloud_telemetry_daily.date\": {\n            \"type\": \"composite\",\n            \"filters\": [\n              {\n                \"kind\": \"TIME_FOR_UNIT_DURATION\",\n                \"type\": \"date\",\n                \"left_side\": \"FY2026 Q3\"\n              },\n              {\n                \"kind\": \"TIME_FOR_INTERVAL_DURATION\",\n                \"type\": \"date\",\n                \"left_side\": \"6 complete fiscal quarters ago\",\n                \"right_side\": \"6 quarters\",\n                \"is_negative\": false\n              }\n            ],\n            \"conjunction\": \"AND\",\n            \"is_negative\": false\n          },\n          \"product__cloud_telemetry_daily.dispatched_searches\": {\n            \"kind\": \"GREATER_THAN\",\n            \"type\": \"number\",\n            \"values\": [\n              \"0\"\n            ],\n            \"is_negative\": false,\n            \"is_inclusive\": false\n          }\n        },\n        \"modelId\": \"867dffa3-a2de-48a5-af58-1d648c48c524\",\n        \"version\": 8,\n        \"controls\": [],\n        \"rewriteSql\": true,\n        \"row_totals\": {},\n        \"fill_fields\": [],\n        \"calculations\": [],\n        \"column_limit\": 50,\n        \"join_via_map\": {},\n        \"column_totals\": {},\n        \"userEditedSQL\": \"\",\n        \"dimensionIndex\": 0,\n        \"default_group_by\": true,\n        \"custom_summary_types\": {},\n        \"join_paths_from_topic_name\": \"cloud_telemetry_daily\"\n      },\n      \"sql\": \"SELECT \\\"product__cloud_orgs\\\".\\\"ACCOUNT_NAME\\\" AS \\\"product__cloud_orgs.account_name\\\",\\n    \\\"product__cloud_orgs\\\".\\\"ORG_ID\\\" AS \\\"product__cloud_orgs.org_id\\\",\\n    \\\"product__cloud_orgs\\\".\\\"ORG_TYPE\\\" AS \\\"product__cloud_orgs.org_type\\\",\\n    \\\"product__cloud_orgs\\\".\\\"OWNER_EMAIL\\\" AS \\\"product__cloud_orgs.owner_email\\\",\\n    COALESCE(SUM(\\\"product__cloud_telemetry_daily\\\".\\\"SEARCH_EXECUTOR_COMPUTE\\\" / 3600), 0) AS \\\"product__cloud_telemetry_daily.search_executor_compute_sum\\\",\\n    COALESCE(SUM(\\\"product__cloud_telemetry_daily\\\".\\\"DISPATCHED_SEARCHES\\\"), 0) AS \\\"product__cloud_telemetry_daily.dispatched_searches_sum\\\",\\n    \\\"product__cloud_orgs\\\".\\\"ACCOUNT_ID\\\" AS \\\"product__cloud_orgs.account_id\\\"\\nFROM \\\"PRODUCT\\\".\\\"CLOUD_TELEMETRY_DAILY\\\" AS \\\"product__cloud_telemetry_daily\\\"\\n    LEFT JOIN \\\"PRODUCT\\\".\\\"CLOUD_ORGS\\\" AS \\\"product__cloud_orgs\\\" ON \\\"product__cloud_telemetry_daily\\\".\\\"ORG_ID\\\" = \\\"product__cloud_orgs\\\".\\\"ORG_ID\\\"\\nWHERE \\\"product__cloud_orgs\\\".\\\"ORG_TYPE\\\" IN ('Customer', 'Free') AND (\\\"product__cloud_telemetry_daily\\\".\\\"DATE\\\" >= CAST(TIMESTAMP '2025-08-01 00:00:00' AS DATE) AND \\\"product__cloud_telemetry_daily\\\".\\\"DATE\\\" < CAST((DATE_TRUNC('QUARTER', ((TIMESTAMP '2025-08-01 00:00:00' + INTERVAL '3 month') + INTERVAL '2 month')) + INTERVAL '-2 month') AS DATE)) AND (\\\"product__cloud_telemetry_daily\\\".\\\"DATE\\\" >= CAST((DATE_TRUNC('QUARTER', ((CAST(CURRENT_TIMESTAMP AS TIMESTAMP(0)) + INTERVAL '-18 month') + INTERVAL '2 month')) + INTERVAL '-2 month') AS DATE) AND (\\\"product__cloud_telemetry_daily\\\".\\\"DATE\\\" < CAST((DATE_TRUNC('QUARTER', (((DATE_TRUNC('QUARTER', ((CAST(CURRENT_TIMESTAMP AS TIMESTAMP(0)) + INTERVAL '-18 month') + INTERVAL '2 month')) + INTERVAL '-2 month') + INTERVAL '18 month') + INTERVAL '2 month')) + INTERVAL '-2 month') AS DATE) AND \\\"product__cloud_telemetry_daily\\\".\\\"DISPATCHED_SEARCHES\\\" > 0))\\nGROUP BY 7, 1, 2, 3, 4\\nLIMIT 1000\"\n    },\n    {\n      \"document_query_name\": \"Searches Dispatched\",\n      \"drill_name\": \"active_orgs\",\n      \"query\": {\n        \"limit\": 1000,\n        \"sorts\": [],\n        \"table\": \"product__cloud_telemetry_daily\",\n        \"fields\": [\n          \"product__cloud_telemetry_daily.primary_key\",\n          \"product__cloud_telemetry_daily.date\",\n          \"product__cloud_telemetry_daily.env\",\n          \"product__cloud_telemetry_daily.org_id\",\n          \"product__cloud_telemetry_daily.org_type\",\n          \"product__cloud_telemetry_daily.is_cribl_tenant\",\n          \"product__cloud_telemetry_daily.account_id\",\n          \"product__cloud_telemetry_daily.account_name\",\n          \"product__cloud_telemetry_daily.in_sfdc\",\n          \"product__cloud_telemetry_daily.tid_create_date\"\n        ],\n        \"pivots\": [],\n        \"dbtMode\": false,\n        \"filters\": {\n          \"product__cloud_orgs.org_type\": {\n            \"kind\": \"EQUALS\",\n            \"type\": \"string\",\n            \"values\": [\n              \"Customer\",\n              \"Free\"\n            ],\n            \"is_negative\": false\n          },\n          \"product__cloud_telemetry_daily.date\": {\n            \"type\": \"composite\",\n            \"filters\": [\n              {\n                \"kind\": \"TIME_FOR_UNIT_DURATION\",\n                \"type\": \"date\",\n                \"left_side\": \"FY2026 Q2\"\n              },\n              {\n                \"kind\": \"TIME_FOR_INTERVAL_DURATION\",\n                \"type\": \"date\",\n                \"left_side\": \"6 complete fiscal quarters ago\",\n                \"right_side\": \"6 quarters\",\n                \"is_negative\": false\n              }\n            ],\n            \"conjunction\": \"AND\",\n            \"is_negative\": false\n          },\n          \"product__cloud_telemetry_daily.is_active\": {\n            \"type\": \"boolean\",\n            \"is_negative\": false,\n            \"treat_nulls_as_false\": false\n          },\n          \"product__cloud_telemetry_daily.dispatched_searches\": {\n            \"kind\": \"GREATER_THAN\",\n            \"type\": \"number\",\n            \"values\": [\n              \"0\"\n            ],\n            \"is_negative\": false,\n            \"is_inclusive\": false\n          }\n        },\n        \"modelId\": \"5432aba0-002d-4c7f-b1d4-7fad064934c7\",\n        \"version\": 8,\n        \"controls\": [],\n        \"rewriteSql\": true,\n        \"row_totals\": {},\n        \"fill_fields\": [],\n        \"calculations\": [],\n        \"column_limit\": 50,\n        \"join_via_map\": {},\n        \"column_totals\": {},\n        \"userEditedSQL\": \"\",\n        \"dimensionIndex\": 0,\n        \"default_group_by\": true,\n        \"custom_summary_types\": {},\n        \"join_paths_from_topic_name\": \"cloud_telemetry_daily\"\n      },\n      \"sql\": \"SELECT \\\"product__cloud_telemetry_daily\\\".\\\"ORG_ID\\\" || \\\"product__cloud_telemetry_daily\\\".\\\"DATE\\\" AS \\\"product__cloud_telemetry_daily.primary_key\\\",\\n    \\\"product__cloud_telemetry_daily\\\".\\\"DATE\\\" AS \\\"product__cloud_telemetry_daily.date__raw\\\",\\n    \\\"product__cloud_telemetry_daily\\\".\\\"ENV\\\" AS \\\"product__cloud_telemetry_daily.env\\\",\\n    \\\"product__cloud_telemetry_daily\\\".\\\"ORG_ID\\\" AS \\\"product__cloud_telemetry_daily.org_id\\\",\\n    \\\"product__cloud_telemetry_daily\\\".\\\"ORG_TYPE\\\" AS \\\"product__cloud_telemetry_daily.org_type\\\",\\n    \\\"product__cloud_telemetry_daily\\\".\\\"IS_CRIBL_TENANT\\\" AS \\\"product__cloud_telemetry_daily.is_cribl_tenant\\\",\\n    \\\"product__cloud_telemetry_daily\\\".\\\"ACCOUNT_ID\\\" AS \\\"product__cloud_telemetry_daily.account_id\\\",\\n    \\\"product__cloud_telemetry_daily\\\".\\\"ACCOUNT_NAME\\\" AS \\\"product__cloud_telemetry_daily.account_name\\\",\\n    \\\"product__cloud_telemetry_daily\\\".\\\"IN_SFDC\\\" AS \\\"product__cloud_telemetry_daily.in_sfdc\\\",\\n    \\\"product__cloud_telemetry_daily\\\".\\\"TID_CREATE_DATE\\\" AS \\\"product__cloud_telemetry_daily.tid_create_date__raw\\\",\\n    TO_CHAR(\\\"product__cloud_telemetry_daily\\\".\\\"DATE\\\", 'YYYY-MM-DD') AS \\\"product__cloud_telemetry_daily.date\\\",\\n    TO_CHAR(\\\"product__cloud_telemetry_daily\\\".\\\"TID_CREATE_DATE\\\", 'YYYY-MM-DD') AS \\\"product__cloud_telemetry_daily.tid_create_date\\\"\\nFROM \\\"PRODUCT\\\".\\\"CLOUD_TELEMETRY_DAILY\\\" AS \\\"product__cloud_telemetry_daily\\\"\\n    LEFT JOIN \\\"PRODUCT\\\".\\\"CLOUD_ORGS\\\" AS \\\"product__cloud_orgs\\\" ON \\\"product__cloud_telemetry_daily\\\".\\\"ORG_ID\\\" = \\\"product__cloud_orgs\\\".\\\"ORG_ID\\\"\\nWHERE \\\"product__cloud_orgs\\\".\\\"ORG_TYPE\\\" IN ('Customer', 'Free') AND (\\\"product__cloud_telemetry_daily\\\".\\\"DATE\\\" >= CAST(TIMESTAMP '2025-05-01 00:00:00' AS DATE) AND \\\"product__cloud_telemetry_daily\\\".\\\"DATE\\\" < CAST((DATE_TRUNC('QUARTER', ((TIMESTAMP '2025-05-01 00:00:00' + INTERVAL '3 month') + INTERVAL '2 month')) + INTERVAL '-2 month') AS DATE)) AND (\\\"product__cloud_telemetry_daily\\\".\\\"DATE\\\" >= CAST((DATE_TRUNC('QUARTER', ((CAST(CURRENT_TIMESTAMP AS TIMESTAMP(0)) + INTERVAL '-18 month') + INTERVAL '2 month')) + INTERVAL '-2 month') AS DATE) AND \\\"product__cloud_telemetry_daily\\\".\\\"DATE\\\" < CAST((DATE_TRUNC('QUARTER', (((DATE_TRUNC('QUARTER', ((CAST(CURRENT_TIMESTAMP AS TIMESTAMP(0)) + INTERVAL '-18 month') + INTERVAL '2 month')) + INTERVAL '-2 month') + INTERVAL '18 month') + INTERVAL '2 month')) + INTERVAL '-2 month') AS DATE) AND (CASE\\n        WHEN \\\"product__cloud_telemetry_daily\\\".\\\"MAUS\\\" > 0 THEN TRUE\\n        WHEN (\\\"product__cloud_telemetry_daily\\\".\\\"STREAM_IN_BYTES_30D\\\" + \\\"product__cloud_telemetry_daily\\\".\\\"EDGE_IN_BYTES_30D\\\" + \\\"product__cloud_telemetry_daily\\\".\\\"CONNECTED_BILLABLE_STREAM_IN_BYTES_30D\\\" + \\\"product__cloud_telemetry_daily\\\".\\\"CONNECTED_BILLABLE_EDGE_IN_BYTES_30D\\\") / 1024 / 1024 >= 100 THEN TRUE\\n        ELSE FALSE\\n    END AND \\\"product__cloud_telemetry_daily\\\".\\\"DISPATCHED_SEARCHES\\\" > 0))\\nGROUP BY 7, 8, 2, 3, 9, 6, 4, 5, 1, 10\\nLIMIT 1000\"\n    }\n  ],\n  \"a465ca4f-97fe-44c1-88c3-1fb2b846a740\": [\n    {\n      \"document_query_name\": \"FEDRAMP Pipeline\",\n      \"drill_name\": \"new_arr_sum\",\n      \"query\": {\n        \"limit\": 20,\n        \"sorts\": [\n          {\n            \"null_sort\": \"OMNI_DEFAULT\",\n            \"column_name\": \"sales__opportunity.new_arr_derived\",\n            \"is_column_sort\": false,\n            \"sort_descending\": true\n          }\n        ],\n        \"table\": \"sales__opportunity\",\n        \"fields\": [\n          \"sales__accounts.account_name\",\n          \"sales__opportunity.opportunity_name\",\n          \"sales__accounts.owner_name\",\n          \"sales__opportunity.forecast\",\n          \"sales__opportunity.stage_name\",\n          \"sales__opportunity.record_type\",\n          \"sales__opportunity.new_arr_derived\",\n          \"sales__opportunity.close_date\"\n        ],\n        \"pivots\": [],\n        \"dbtMode\": false,\n        \"filters\": {\n          \"sales__opportunity.is_closed\": {\n            \"type\": \"boolean\",\n            \"is_negative\": true,\n            \"treat_nulls_as_false\": false\n          },\n          \"sales__opportunity.close_date\": {\n            \"type\": \"composite\",\n            \"filters\": [\n              {\n                \"kind\": \"TIME_FOR_UNIT_DURATION\",\n                \"type\": \"date\",\n                \"left_side\": \"FY2027 Q3\"\n              },\n              {\n                \"kind\": \"BETWEEN\",\n                \"type\": \"date\",\n                \"left_side\": \"2025-11-01\",\n                \"right_side\": \"2026-11-01\",\n                \"is_negative\": false\n              }\n            ],\n            \"conjunction\": \"AND\",\n            \"is_negative\": false\n          },\n          \"sales__opportunity.stage_name\": {\n            \"kind\": \"EQUALS\",\n            \"type\": \"string\",\n            \"values\": [\n              \"2. New Business Meeting\",\n              \"4. POV\",\n              \"3. Visible Opportunity\",\n              \"5. Tech Close\",\n              \"6. Closing\"\n            ],\n            \"is_negative\": false\n          },\n          \"sales__opportunity.fedramp_level\": {\n            \"type\": \"null\",\n            \"is_negative\": true\n          }\n        },\n        \"modelId\": \"e8004817-4bd4-4e02-9d4b-b8f711299b0b\",\n        \"version\": 8,\n        \"controls\": [],\n        \"rewriteSql\": true,\n        \"row_totals\": {},\n        \"fill_fields\": [],\n        \"calculations\": [],\n        \"column_limit\": 50,\n        \"join_via_map\": {},\n        \"column_totals\": {},\n        \"userEditedSQL\": \"\",\n        \"dimensionIndex\": 0,\n        \"default_group_by\": true,\n        \"custom_summary_types\": {},\n        \"join_paths_from_topic_name\": \"opportunity\"\n      },\n      \"sql\": \"SELECT \\\"sales__accounts\\\".\\\"ACCOUNT_NAME\\\" AS \\\"sales__accounts.account_name\\\",\\n    \\\"sales__opportunity\\\".\\\"OPPORTUNITY_NAME\\\" AS \\\"sales__opportunity.opportunity_name\\\",\\n    \\\"sales__accounts\\\".\\\"OWNER_NAME\\\" AS \\\"sales__accounts.owner_name\\\",\\n    \\\"sales__opportunity\\\".\\\"FORECAST\\\" AS \\\"sales__opportunity.forecast\\\",\\n    \\\"sales__opportunity\\\".\\\"STAGE_NAME\\\" AS \\\"sales__opportunity.stage_name\\\",\\n    \\\"sales__opportunity\\\".\\\"RECORD_TYPE\\\" AS \\\"sales__opportunity.record_type\\\",\\n    \\\"sales__opportunity\\\".\\\"NEW_ARR_DERIVED\\\" AS \\\"sales__opportunity.new_arr_derived\\\",\\n    \\\"sales__opportunity\\\".\\\"CLOSE_DATE\\\" AS \\\"sales__opportunity.close_date__raw\\\",\\n    \\\"sales__accounts\\\".\\\"ACCOUNT_ID\\\" AS \\\"sales__accounts.account_id\\\",\\n    \\\"sales__opportunity\\\".\\\"OPPORTUNITY_ID\\\" AS \\\"sales__opportunity.opportunity_id\\\",\\n    TO_CHAR(\\\"sales__opportunity\\\".\\\"CLOSE_DATE\\\", 'YYYY-MM-DD') AS \\\"sales__opportunity.close_date\\\"\\nFROM \\\"SALES\\\".\\\"OPPORTUNITY\\\" AS \\\"sales__opportunity\\\"\\n    LEFT JOIN \\\"SALES\\\".\\\"ACCOUNTS\\\" AS \\\"sales__accounts\\\" ON \\\"sales__opportunity\\\".\\\"ACCOUNT_ID\\\" = \\\"sales__accounts\\\".\\\"ACCOUNT_ID\\\"\\nWHERE NOT \\\"sales__opportunity\\\".\\\"IS_CLOSED\\\" AND (\\\"sales__opportunity\\\".\\\"CLOSE_DATE\\\" >= CAST(TIMESTAMP '2026-08-01 00:00:00' AS DATE) AND \\\"sales__opportunity\\\".\\\"CLOSE_DATE\\\" < CAST((DATE_TRUNC('QUARTER', ((TIMESTAMP '2026-08-01 00:00:00' + INTERVAL '3 month') + INTERVAL '2 month')) + INTERVAL '-2 month') AS DATE)) AND (\\\"sales__opportunity\\\".\\\"CLOSE_DATE\\\" >= CAST(TIMESTAMP '2025-11-01 00:00:00' AS DATE) AND \\\"sales__opportunity\\\".\\\"CLOSE_DATE\\\" < CAST(TIMESTAMP '2026-11-01 00:00:00' AS DATE) AND (\\\"sales__opportunity\\\".\\\"STAGE_NAME\\\" IN ('2. New Business Meeting', '3. Visible Opportunity', '4. POV', '5. Tech Close', '6. Closing') AND \\\"sales__opportunity\\\".\\\"FEDRAMP_LEVEL\\\" IS NOT NULL))\\nGROUP BY 9, 1, 3, 8, 4, 7, 10, 2, 6, 5\\nORDER BY 7 DESC NULLS LAST\\nLIMIT 20\"\n    },\n    {\n      \"document_query_name\": \"FEDRAMP Pipeline\",\n      \"drill_name\": \"count_opps\",\n      \"query\": {\n        \"limit\": 1000,\n        \"sorts\": [],\n        \"table\": \"sales__opportunity\",\n        \"fields\": [\n          \"sales__accounts.account_name\",\n          \"sales__opportunity.opportunity_name\",\n          \"sales__accounts.owner_name\",\n          \"sales__opportunity.forecast\",\n          \"sales__opportunity.stage_name\",\n          \"sales__opportunity.record_type\",\n          \"sales__opportunity.new_arr_derived\",\n          \"sales__opportunity.close_date\"\n        ],\n        \"pivots\": [],\n        \"dbtMode\": false,\n        \"filters\": {\n          \"sales__opportunity.is_closed\": {\n            \"type\": \"boolean\",\n            \"is_negative\": true,\n            \"treat_nulls_as_false\": false\n          },\n          \"sales__opportunity.close_date\": {\n            \"type\": \"composite\",\n            \"filters\": [\n              {\n                \"kind\": \"TIME_FOR_UNIT_DURATION\",\n                \"type\": \"date\",\n                \"left_side\": \"FY2027 Q3\"\n              },\n              {\n                \"kind\": \"BETWEEN\",\n                \"type\": \"date\",\n                \"left_side\": \"2025-11-01\",\n                \"right_side\": \"2026-11-01\",\n                \"is_negative\": false\n              }\n            ],\n            \"conjunction\": \"AND\",\n            \"is_negative\": false\n          },\n          \"sales__opportunity.stage_name\": {\n            \"kind\": \"EQUALS\",\n            \"type\": \"string\",\n            \"values\": [\n              \"2. New Business Meeting\",\n              \"4. POV\",\n              \"3. Visible Opportunity\",\n              \"5. Tech Close\",\n              \"6. Closing\"\n            ],\n            \"is_negative\": false\n          },\n          \"sales__opportunity.fedramp_level\": {\n            \"type\": \"null\",\n            \"is_negative\": true\n          }\n        },\n        \"modelId\": \"dcca15b4-4671-46b3-b287-d11572af3d54\",\n        \"version\": 8,\n        \"controls\": [],\n        \"rewriteSql\": true,\n        \"row_totals\": {},\n        \"fill_fields\": [],\n        \"calculations\": [],\n        \"column_limit\": 50,\n        \"join_via_map\": {},\n        \"column_totals\": {},\n        \"userEditedSQL\": \"\",\n        \"dimensionIndex\": 0,\n        \"default_group_by\": true,\n        \"custom_summary_types\": {},\n        \"join_paths_from_topic_name\": \"opportunity\"\n      },\n      \"sql\": \"SELECT \\\"sales__accounts\\\".\\\"ACCOUNT_NAME\\\" AS \\\"sales__accounts.account_name\\\",\\n    \\\"sales__opportunity\\\".\\\"OPPORTUNITY_NAME\\\" AS \\\"sales__opportunity.opportunity_name\\\",\\n    \\\"sales__accounts\\\".\\\"OWNER_NAME\\\" AS \\\"sales__accounts.owner_name\\\",\\n    \\\"sales__opportunity\\\".\\\"FORECAST\\\" AS \\\"sales__opportunity.forecast\\\",\\n    \\\"sales__opportunity\\\".\\\"STAGE_NAME\\\" AS \\\"sales__opportunity.stage_name\\\",\\n    \\\"sales__opportunity\\\".\\\"RECORD_TYPE\\\" AS \\\"sales__opportunity.record_type\\\",\\n    \\\"sales__opportunity\\\".\\\"NEW_ARR_DERIVED\\\" AS \\\"sales__opportunity.new_arr_derived\\\",\\n    \\\"sales__opportunity\\\".\\\"CLOSE_DATE\\\" AS \\\"sales__opportunity.close_date__raw\\\",\\n    \\\"sales__accounts\\\".\\\"ACCOUNT_ID\\\" AS \\\"sales__accounts.account_id\\\",\\n    \\\"sales__opportunity\\\".\\\"OPPORTUNITY_ID\\\" AS \\\"sales__opportunity.opportunity_id\\\",\\n    TO_CHAR(\\\"sales__opportunity\\\".\\\"CLOSE_DATE\\\", 'YYYY-MM-DD') AS \\\"sales__opportunity.close_date\\\"\\nFROM \\\"SALES\\\".\\\"OPPORTUNITY\\\" AS \\\"sales__opportunity\\\"\\n    LEFT JOIN \\\"SALES\\\".\\\"ACCOUNTS\\\" AS \\\"sales__accounts\\\" ON \\\"sales__opportunity\\\".\\\"ACCOUNT_ID\\\" = \\\"sales__accounts\\\".\\\"ACCOUNT_ID\\\"\\nWHERE NOT \\\"sales__opportunity\\\".\\\"IS_CLOSED\\\" AND (\\\"sales__opportunity\\\".\\\"CLOSE_DATE\\\" >= CAST(TIMESTAMP '2026-08-01 00:00:00' AS DATE) AND \\\"sales__opportunity\\\".\\\"CLOSE_DATE\\\" < CAST((DATE_TRUNC('QUARTER', ((TIMESTAMP '2026-08-01 00:00:00' + INTERVAL '3 month') + INTERVAL '2 month')) + INTERVAL '-2 month') AS DATE)) AND (\\\"sales__opportunity\\\".\\\"CLOSE_DATE\\\" >= CAST(TIMESTAMP '2025-11-01 00:00:00' AS DATE) AND \\\"sales__opportunity\\\".\\\"CLOSE_DATE\\\" < CAST(TIMESTAMP '2026-11-01 00:00:00' AS DATE) AND (\\\"sales__opportunity\\\".\\\"STAGE_NAME\\\" IN ('2. New Business Meeting', '3. Visible Opportunity', '4. POV', '5. Tech Close', '6. Closing') AND \\\"sales__opportunity\\\".\\\"FEDRAMP_LEVEL\\\" IS NOT NULL))\\nGROUP BY 9, 1, 3, 8, 4, 7, 10, 2, 6, 5\\nLIMIT 1000\"\n    }\n  ],\n  \"82b670ff-cdbd-4bfd-9cd1-e33da5a9fa74\": [\n    {\n      \"document_query_name\": \"Product: Edge (Cloud)\",\n      \"drill_name\": \"count_orgs\",\n      \"query\": {\n        \"limit\": 1000,\n        \"sorts\": [],\n        \"table\": \"cloud_edge_nodes_fq\",\n        \"fields\": [\n          \"cloud_edge_nodes_fq.date[fiscal_quarter]\",\n          \"cloud_edge_nodes_fq.org_id\",\n          \"cloud_edge_nodes_fq.total_edge_nodes\"\n        ],\n        \"pivots\": [],\n        \"dbtMode\": false,\n        \"filters\": {\n          \"cloud_edge_nodes_fq.date\": {\n            \"type\": \"composite\",\n            \"filters\": [\n              {\n                \"kind\": \"TIME_FOR_UNIT_DURATION\",\n                \"type\": \"date\",\n                \"left_side\": \"FY2026 Q3\"\n              },\n              {\n                \"kind\": \"TIME_FOR_INTERVAL_DURATION\",\n                \"type\": \"date\",\n                \"left_side\": \"6 complete fiscal quarters ago\",\n                \"right_side\": \"6 quarters\",\n                \"is_negative\": false\n              }\n            ],\n            \"conjunction\": \"AND\",\n            \"is_negative\": false\n          },\n          \"product__cloud_orgs.org_type\": {\n            \"kind\": \"EQUALS\",\n            \"type\": \"string\",\n            \"values\": [\n              \"Customer\",\n              \"Free\"\n            ],\n            \"is_negative\": false\n          },\n          \"cloud_edge_nodes_fq.total_edge_nodes\": {\n            \"kind\": \"GREATER_THAN\",\n            \"type\": \"number\",\n            \"values\": [\n              \"0\"\n            ],\n            \"is_negative\": false,\n            \"is_inclusive\": false\n          }\n        },\n        \"modelId\": \"912e8580-4519-4971-b8c3-1c30608c7f49\",\n        \"version\": 8,\n        \"controls\": [],\n        \"rewriteSql\": true,\n        \"row_totals\": {},\n        \"fill_fields\": [],\n        \"calculations\": [],\n        \"column_limit\": 50,\n        \"join_via_map\": {},\n        \"column_totals\": {},\n        \"userEditedSQL\": \"\",\n        \"dimensionIndex\": 0,\n        \"default_group_by\": true,\n        \"custom_summary_types\": {},\n        \"join_paths_from_topic_name\": \"cloud_edge_nodes_fq\"\n      },\n      \"sql\": \"WITH \\\"cloud_edge_nodes_fq\\\" AS (SELECT *\\n        FROM (SELECT\\n        first_day_of_fq as date,\\n        org_id,\\n        max(edge_nodes) as total_edge_nodes\\n      FROM (SELECT\\n        date_trunc('day',date) as date,\\n        org_id,\\n        d.FIRST_DAY_OF_FISCAL_QUARTER as first_day_of_fq,\\n        max(max_edge_nodes) as edge_nodes\\n        FROM ANALYTICS.PRODUCT.CLOUD_TELEMETRY_DAILY c\\n        left join UTIL.DATES d on c.date = d.DATE_ACTUAL\\n        GROUP BY 1,2,3\\n        ) t1\\n      GROUP BY 1,2\\n            ))\\n\\nSELECT 'FY' || CAST(EXTRACT(YEAR FROM (\\\"cloud_edge_nodes_fq\\\".\\\"DATE\\\" + INTERVAL '11 month')) AS VARCHAR) || (' Q' || CAST(CAST(FLOOR((MOD(EXTRACT(MONTH FROM \\\"cloud_edge_nodes_fq\\\".\\\"DATE\\\") + -13, 12) + 12 - 1) / 3) AS BIGINT) + 1 AS VARCHAR)) AS \\\"cloud_edge_nodes_fq.date[fiscal_quarter]\\\",\\n        \\\"cloud_edge_nodes_fq\\\".\\\"ORG_ID\\\" AS \\\"cloud_edge_nodes_fq.org_id\\\",\\n        \\\"cloud_edge_nodes_fq\\\".\\\"TOTAL_EDGE_NODES\\\" AS \\\"cloud_edge_nodes_fq.total_edge_nodes\\\"\\n    FROM \\\"cloud_edge_nodes_fq\\\"\\n        LEFT JOIN \\\"PRODUCT\\\".\\\"CLOUD_ORGS\\\" AS \\\"product__cloud_orgs\\\" ON \\\"cloud_edge_nodes_fq\\\".\\\"ORG_ID\\\" = \\\"product__cloud_orgs\\\".\\\"ORG_ID\\\"\\n    WHERE \\\"cloud_edge_nodes_fq\\\".\\\"DATE\\\" >= CAST(TIMESTAMP '2025-08-01 00:00:00' AS DATE) AND (\\\"cloud_edge_nodes_fq\\\".\\\"DATE\\\" < CAST((DATE_TRUNC('QUARTER', ((TIMESTAMP '2025-08-01 00:00:00' + INTERVAL '3 month') + INTERVAL '2 month')) + INTERVAL '-2 month') AS DATE) AND \\\"cloud_edge_nodes_fq\\\".\\\"DATE\\\" >= CAST((DATE_TRUNC('QUARTER', ((CAST(CURRENT_TIMESTAMP AS TIMESTAMP(0)) + INTERVAL '-18 month') + INTERVAL '2 month')) + INTERVAL '-2 month') AS DATE)) AND (\\\"cloud_edge_nodes_fq\\\".\\\"DATE\\\" < CAST((DATE_TRUNC('QUARTER', (((DATE_TRUNC('QUARTER', ((CAST(CURRENT_TIMESTAMP AS TIMESTAMP(0)) + INTERVAL '-18 month') + INTERVAL '2 month')) + INTERVAL '-2 month') + INTERVAL '18 month') + INTERVAL '2 month')) + INTERVAL '-2 month') AS DATE) AND (\\\"product__cloud_orgs\\\".\\\"ORG_TYPE\\\" IN ('Customer', 'Free') AND \\\"cloud_edge_nodes_fq\\\".\\\"TOTAL_EDGE_NODES\\\" > 0))\\n    GROUP BY 1, 2, 3\\n    LIMIT 1000\"\n    },\n    {\n      \"document_query_name\": \"Product: Edge (Cloud)\",\n      \"drill_name\": \"total_edge_nodes\",\n      \"query\": {\n        \"limit\": 1000,\n        \"sorts\": [],\n        \"table\": \"cloud_edge_nodes_fq\",\n        \"fields\": [\n          \"product__cloud_orgs.account_name\",\n          \"cloud_edge_nodes_fq.date[fiscal_quarter]\",\n          \"cloud_edge_nodes_fq.org_id\",\n          \"cloud_edge_nodes_fq.total_edge_nodes\"\n        ],\n        \"pivots\": [],\n        \"dbtMode\": false,\n        \"filters\": {\n          \"cloud_edge_nodes_fq.date\": {\n            \"type\": \"composite\",\n            \"filters\": [\n              {\n                \"kind\": \"TIME_FOR_UNIT_DURATION\",\n                \"type\": \"date\",\n                \"left_side\": \"FY2026 Q3\"\n              },\n              {\n                \"kind\": \"TIME_FOR_INTERVAL_DURATION\",\n                \"type\": \"date\",\n                \"left_side\": \"6 complete fiscal quarters ago\",\n                \"right_side\": \"6 quarters\",\n                \"is_negative\": false\n              }\n            ],\n            \"conjunction\": \"AND\",\n            \"is_negative\": false\n          },\n          \"product__cloud_orgs.org_type\": {\n            \"kind\": \"EQUALS\",\n            \"type\": \"string\",\n            \"values\": [\n              \"Customer\",\n              \"Free\"\n            ],\n            \"is_negative\": false\n          },\n          \"cloud_edge_nodes_fq.total_edge_nodes\": {\n            \"kind\": \"GREATER_THAN\",\n            \"type\": \"number\",\n            \"values\": [\n              \"0\"\n            ],\n            \"is_negative\": false,\n            \"is_inclusive\": false\n          }\n        },\n        \"modelId\": \"47ef70b4-ec2e-4022-94d6-2c5ba4e5c810\",\n        \"version\": 8,\n        \"controls\": [],\n        \"rewriteSql\": true,\n        \"row_totals\": {},\n        \"fill_fields\": [],\n        \"calculations\": [],\n        \"column_limit\": 50,\n        \"join_via_map\": {},\n        \"column_totals\": {},\n        \"userEditedSQL\": \"\",\n        \"dimensionIndex\": 0,\n        \"default_group_by\": true,\n        \"custom_summary_types\": {},\n        \"join_paths_from_topic_name\": \"cloud_edge_nodes_fq\"\n      },\n      \"sql\": \"WITH \\\"cloud_edge_nodes_fq\\\" AS (SELECT *\\n        FROM (SELECT\\n        first_day_of_fq as date,\\n        org_id,\\n        max(edge_nodes) as total_edge_nodes\\n      FROM (SELECT\\n        date_trunc('day',date) as date,\\n        org_id,\\n        d.FIRST_DAY_OF_FISCAL_QUARTER as first_day_of_fq,\\n        max(max_edge_nodes) as edge_nodes\\n        FROM ANALYTICS.PRODUCT.CLOUD_TELEMETRY_DAILY c\\n        left join UTIL.DATES d on c.date = d.DATE_ACTUAL\\n        GROUP BY 1,2,3\\n        ) t1\\n      GROUP BY 1,2\\n            ))\\n\\nSELECT 'FY' || CAST(EXTRACT(YEAR FROM (\\\"cloud_edge_nodes_fq\\\".\\\"DATE\\\" + INTERVAL '11 month')) AS VARCHAR) || (' Q' || CAST(CAST(FLOOR((MOD(EXTRACT(MONTH FROM \\\"cloud_edge_nodes_fq\\\".\\\"DATE\\\") + -13, 12) + 12 - 1) / 3) AS BIGINT) + 1 AS VARCHAR)) AS \\\"cloud_edge_nodes_fq.date[fiscal_quarter]\\\",\\n        \\\"cloud_edge_nodes_fq\\\".\\\"ORG_ID\\\" AS \\\"cloud_edge_nodes_fq.org_id\\\",\\n        \\\"cloud_edge_nodes_fq\\\".\\\"TOTAL_EDGE_NODES\\\" AS \\\"cloud_edge_nodes_fq.total_edge_nodes\\\"\\n    FROM \\\"cloud_edge_nodes_fq\\\"\\n        LEFT JOIN \\\"PRODUCT\\\".\\\"CLOUD_ORGS\\\" AS \\\"product__cloud_orgs\\\" ON \\\"cloud_edge_nodes_fq\\\".\\\"ORG_ID\\\" = \\\"product__cloud_orgs\\\".\\\"ORG_ID\\\"\\n    WHERE \\\"cloud_edge_nodes_fq\\\".\\\"DATE\\\" >= CAST(TIMESTAMP '2025-08-01 00:00:00' AS DATE) AND (\\\"cloud_edge_nodes_fq\\\".\\\"DATE\\\" < CAST((DATE_TRUNC('QUARTER', ((TIMESTAMP '2025-08-01 00:00:00' + INTERVAL '3 month') + INTERVAL '2 month')) + INTERVAL '-2 month') AS DATE) AND \\\"cloud_edge_nodes_fq\\\".\\\"DATE\\\" >= CAST((DATE_TRUNC('QUARTER', ((CAST(CURRENT_TIMESTAMP AS TIMESTAMP(0)) + INTERVAL '-18 month') + INTERVAL '2 month')) + INTERVAL '-2 month') AS DATE)) AND (\\\"cloud_edge_nodes_fq\\\".\\\"DATE\\\" < CAST((DATE_TRUNC('QUARTER', (((DATE_TRUNC('QUARTER', ((CAST(CURRENT_TIMESTAMP AS TIMESTAMP(0)) + INTERVAL '-18 month') + INTERVAL '2 month')) + INTERVAL '-2 month') + INTERVAL '18 month') + INTERVAL '2 month')) + INTERVAL '-2 month') AS DATE) AND (\\\"product__cloud_orgs\\\".\\\"ORG_TYPE\\\" IN ('Customer', 'Free') AND \\\"cloud_edge_nodes_fq\\\".\\\"TOTAL_EDGE_NODES\\\" > 0))\\n    GROUP BY 1, 2, 3\\n    LIMIT 1000\"\n    }\n  ],\n  \"51aab484-0dca-4588-9bb5-d66d01556736\": [\n    {\n      \"document_query_name\": \"Product: Edge (Software)\",\n      \"drill_name\": \"count_licenses\",\n      \"query\": {\n        \"limit\": 1000,\n        \"sorts\": [],\n        \"table\": \"software_edge_nodes_fq\",\n        \"fields\": [\n          \"sales__licenses.account_name\",\n          \"software_edge_nodes_fq.fiscal_quarter\",\n          \"software_edge_nodes_fq.license\",\n          \"software_edge_nodes_fq.license_type\",\n          \"software_edge_nodes_fq.max_edge_nodes\"\n        ],\n        \"pivots\": [],\n        \"dbtMode\": false,\n        \"filters\": {\n          \"software_edge_nodes_fq.license\": {\n            \"kind\": \"EQUALS\",\n            \"type\": \"string\",\n            \"values\": [\n              \"n\"\n            ],\n            \"is_negative\": true\n          },\n          \"software_edge_nodes_fq.fiscal_quarter\": {\n            \"type\": \"composite\",\n            \"filters\": [\n              {\n                \"kind\": \"TIME_FOR_UNIT_DURATION\",\n                \"type\": \"date\",\n                \"left_side\": \"FY2026 Q1\"\n              },\n              {\n                \"kind\": \"TIME_FOR_INTERVAL_DURATION\",\n                \"type\": \"date\",\n                \"left_side\": \"6 complete fiscal quarters ago\",\n                \"right_side\": \"6 quarters\",\n                \"is_negative\": false\n              }\n            ],\n            \"conjunction\": \"AND\",\n            \"is_negative\": false\n          },\n          \"software_edge_nodes_fq.max_edge_nodes\": {\n            \"kind\": \"GREATER_THAN\",\n            \"type\": \"number\",\n            \"values\": [\n              \"0\"\n            ],\n            \"is_negative\": false,\n            \"is_inclusive\": false\n          }\n        },\n        \"modelId\": \"767598ab-f985-4ba7-a39e-c866584f8780\",\n        \"version\": 8,\n        \"controls\": [],\n        \"rewriteSql\": true,\n        \"row_totals\": {},\n        \"fill_fields\": [],\n        \"calculations\": [],\n        \"column_limit\": 50,\n        \"join_via_map\": {},\n        \"column_totals\": {},\n        \"userEditedSQL\": \"\",\n        \"dimensionIndex\": 0,\n        \"default_group_by\": true,\n        \"custom_summary_types\": {},\n        \"join_paths_from_topic_name\": \"software_edge_nodes_fq\"\n      },\n      \"sql\": \"WITH \\\"software_edge_nodes_fq\\\" AS (SELECT *\\n        FROM (select\\n  first_day_of_fiscal_quarter as fiscal_quarter,\\n  license,\\n  license_type,\\n  max(edge_nodes) as max_edge_nodes\\nfrom (\\n  select \\n    date::date as date,\\n    license,\\n    license_type,\\n    sum(edge_nodes) as edge_nodes\\n  from analytics.product.onprem_telemetry_daily\\n  where guid is not null \\n  and telemetry_method = 'Client Side' \\n  and license_type ='enterprise'\\n  group by all\\n  ) a\\nleft join analytics.util.dates b on b.date_actual = a.date\\ngroup by all\\n            ))\\n\\nSELECT \\\"FISCAL_QUARTER\\\" AS \\\"software_edge_nodes_fq.fiscal_quarter__raw\\\",\\n        \\\"LICENSE\\\" AS \\\"software_edge_nodes_fq.license\\\",\\n        \\\"LICENSE_TYPE\\\" AS \\\"software_edge_nodes_fq.license_type\\\",\\n        \\\"MAX_EDGE_NODES\\\" AS \\\"software_edge_nodes_fq.max_edge_nodes\\\",\\n        TO_CHAR(\\\"FISCAL_QUARTER\\\", 'YYYY-MM-DD') AS \\\"software_edge_nodes_fq.fiscal_quarter\\\"\\n    FROM \\\"software_edge_nodes_fq\\\"\\n    WHERE (NOT \\\"LICENSE\\\" = 'n' OR \\\"LICENSE\\\" IS NULL) AND (\\\"FISCAL_QUARTER\\\" >= CAST(TIMESTAMP '2025-02-01 00:00:00' AS DATE) AND \\\"FISCAL_QUARTER\\\" < CAST((DATE_TRUNC('QUARTER', ((TIMESTAMP '2025-02-01 00:00:00' + INTERVAL '3 month') + INTERVAL '2 month')) + INTERVAL '-2 month') AS DATE)) AND (\\\"FISCAL_QUARTER\\\" >= CAST((DATE_TRUNC('QUARTER', ((CAST(CURRENT_TIMESTAMP AS TIMESTAMP(0)) + INTERVAL '-18 month') + INTERVAL '2 month')) + INTERVAL '-2 month') AS DATE) AND (\\\"FISCAL_QUARTER\\\" < CAST((DATE_TRUNC('QUARTER', (((DATE_TRUNC('QUARTER', ((CAST(CURRENT_TIMESTAMP AS TIMESTAMP(0)) + INTERVAL '-18 month') + INTERVAL '2 month')) + INTERVAL '-2 month') + INTERVAL '18 month') + INTERVAL '2 month')) + INTERVAL '-2 month') AS DATE) AND \\\"MAX_EDGE_NODES\\\" > 0))\\n    GROUP BY 1, 2, 3, 4\\n    LIMIT 1000\"\n    },\n    {\n      \"document_query_name\": \"Product: Edge (Software)\",\n      \"drill_name\": \"total_edge_nodes\",\n      \"query\": {\n        \"limit\": 1000,\n        \"sorts\": [],\n        \"table\": \"software_edge_nodes_fq\",\n        \"fields\": [\n          \"product__cloud_orgs.account_name\",\n          \"software_edge_nodes_fq.fiscal_quarter\",\n          \"software_edge_nodes_fq.license\",\n          \"software_edge_nodes_fq.license_type\",\n          \"software_edge_nodes_fq.max_edge_nodes\"\n        ],\n        \"pivots\": [],\n        \"dbtMode\": false,\n        \"filters\": {\n          \"software_edge_nodes_fq.license\": {\n            \"kind\": \"EQUALS\",\n            \"type\": \"string\",\n            \"values\": [\n              \"n\"\n            ],\n            \"is_negative\": true\n          },\n          \"software_edge_nodes_fq.fiscal_quarter\": {\n            \"type\": \"composite\",\n            \"filters\": [\n              {\n                \"kind\": \"TIME_FOR_UNIT_DURATION\",\n                \"type\": \"date\",\n                \"left_side\": \"FY2026 Q1\"\n              },\n              {\n                \"kind\": \"TIME_FOR_INTERVAL_DURATION\",\n                \"type\": \"date\",\n                \"left_side\": \"6 complete fiscal quarters ago\",\n                \"right_side\": \"6 quarters\",\n                \"is_negative\": false\n              }\n            ],\n            \"conjunction\": \"AND\",\n            \"is_negative\": false\n          },\n          \"software_edge_nodes_fq.max_edge_nodes\": {\n            \"kind\": \"GREATER_THAN\",\n            \"type\": \"number\",\n            \"values\": [\n              \"0\"\n            ],\n            \"is_negative\": false,\n            \"is_inclusive\": false\n          }\n        },\n        \"modelId\": \"39abb17e-f09c-46c7-aa9f-7d8946121191\",\n        \"version\": 8,\n        \"controls\": [],\n        \"rewriteSql\": true,\n        \"row_totals\": {},\n        \"fill_fields\": [],\n        \"calculations\": [],\n        \"column_limit\": 50,\n        \"join_via_map\": {},\n        \"column_totals\": {},\n        \"userEditedSQL\": \"\",\n        \"dimensionIndex\": 0,\n        \"default_group_by\": true,\n        \"custom_summary_types\": {},\n        \"join_paths_from_topic_name\": \"software_edge_nodes_fq\"\n      }\n    }\n  ]\n}",
          "includeOtherFields": true,
          "options": {}
        },
        "id": "loadQueries1",
        "name": "Load Drill Queries",
        "type": "n8n-nodes-base.set",
        "typeVersion": 3.4,
        "position": [
          3312,
          1296
        ],
        "disabled": true
      },
      {
        "parameters": {
          "options": {
            "reset": false
          }
        },
        "id": "outerLoop1",
        "name": "Loop Over UUIDs",
        "type": "n8n-nodes-base.splitInBatches",
        "typeVersion": 3,
        "position": [
          4640,
          464
        ],
        "executeOnce": false,
        "disabled": true
      },
      {
        "parameters": {
          "jsCode": "const inputData = $('Load Drill Queries').first().json;\n  const systemFields = ['headers', 'params', 'query', 'webhookUrl', 'executionMode'];\n  const drillQueries = {};\n\n  for (const [key, value] of Object.entries(inputData)) {\n    if (!systemFields.includes(key) && typeof value === 'object' && Array.isArray(value)) {\n      drillQueries[key] = value;\n    }\n  }\n\n  const uuidKeys = Object.keys(drillQueries);\n\n  if (uuidKeys.length === 0) {\n    return [{\n      json: {\n        error: 'No drill query UUIDs found in input data',\n        inputKeys: Object.keys(inputData)\n      }\n    }];\n  }\n\n  let drill_queries = uuidKeys.map(document_query_id => ({\n    json: {\n      document_query_id: document_query_id,\n      document_query_name: drillQueries[document_query_id][0][\"document_query_name\"],\n      queries: drillQueries[document_query_id],\n      queryCount: drillQueries[document_query_id].length\n    }\n  }))\n\n  return drill_queries;"
        },
        "type": "n8n-nodes-base.code",
        "typeVersion": 2,
        "position": [
          4144,
          464
        ],
        "id": "d9071922-dd3c-4544-8313-87cd21b0b593",
        "name": "Prepare UUID Loop Data",
        "disabled": true
      },
      {
        "parameters": {
          "jsCode": "// // const inputData = $('Load Drill Queries').first().json;\n// // const systemFields = ['headers', 'params', 'query', 'webhookUrl', 'executionMode'];\n// // const drillQueries = {};\n\n// // for (const [key, value] of Object.entries(inputData)) {\n// //   if (!systemFields.includes(key) && typeof value === 'object' && Array.isArray(value)) {\n// //     drillQueries[key] = value;\n// //   }\n// // }\n\n// // const uuidKeys = Object.keys(drillQueries);\n\n// // if (uuidKeys.length === 0) {\n// //   return [{\n// //     json: {\n// //       error: 'No drill query UUIDs found in input data',\n// //       inputKeys: Object.keys(inputData)\n// //     }\n// //   }];\n// // }\n\n// // let count = 0;\n// // uuidKeys.forEach(uuid => count += drillQueries[uuid].length);\n\n// let input = $input.all();\n// let queries = [];\n// let document_query_id;\n// let document_query_name;\n\n\n\n\n// return {\n//   \"drill_queries_count\": $input.all().length\n// };\n\n\n// Code node mode: Run Once for All Items\n// Input to the node is an array of \"items\".\n// Use $input.all() to read them all. :contentReference[oaicite:1]{index=1}\n\nconst items = $input.all(); // [{ json: {...} }, { json: {...} }, ...]\nif (!items.length) return [{ json: {} }];\n\nconst first = items[0].json;\n\n// Keys that belong to each individual query entry:\nconst PER_QUERY_KEYS = new Set([\"drill_name\", \"query\"]);\n\n// Keys you typically *don't* want to include at the top level:\nconst IGNORE_TOP_LEVEL_KEYS = new Set([\"id\", \"createdAt\", \"updatedAt\", \"drill_name\", \"query\"]);\n\nfunction safeParseQuery(q) {\n  if (q == null) return q;\n  if (typeof q === \"object\") return q; // already parsed\n  if (typeof q === \"string\") {\n    try {\n      return JSON.parse(q);\n    } catch (e) {\n      // If it isn't valid JSON, keep original string\n      return q;\n    }\n  }\n  return q;\n}\n\n// Build the \"queries\" array\nconst queries = items.map(({ json }) => ({\n  document_query_name: json.document_query_name,\n  drill_name: json.drill_name,\n  query: safeParseQuery(json.query),\n}));\n\n// Start output with required top-level fields\nconst output = {\n  document_query_id: first.document_query_id,\n  document_query_name: first.document_query_name,\n  queries,\n  queryCount: queries.length,\n};\n\n// Optionally carry over any other fields that are identical across all items\nfor (const [key, value] of Object.entries(first)) {\n  if (IGNORE_TOP_LEVEL_KEYS.has(key)) continue;\n  if (key === \"document_query_id\" || key === \"document_query_name\") continue;\n\n  const sameAcrossAll = items.every(({ json }) => JSON.stringify(json[key]) === JSON.stringify(value));\n  if (sameAcrossAll) output[key] = value;\n}\n\n// Return a single item (n8n expects items shaped like { json: ... }) :contentReference[oaicite:2]{index=2}\nreturn [{ json: output }];\n"
        },
        "type": "n8n-nodes-base.code",
        "typeVersion": 2,
        "position": [
          3696,
          1120
        ],
        "id": "347e89ad-1d53-4099-8d9d-20a8602b2c12",
        "name": "Get Drill Queries Count"
      },
      {
        "parameters": {
          "jsonSchemaExample": "{\n  \"today\": \"2026-02-22\",\n  \"current_fiscal_quarter\": \"FY2027 Q1\",\n  \"previous_fiscal_quarter\": \"FY2026 Q4\",\n  \"current_fiscal_half\": \"FY2027 H1\",\n  \"previous_fiscal_half\": \"FY2026 H2\"\n}"
        },
        "type": "@n8n/n8n-nodes-langchain.outputParserStructured",
        "typeVersion": 1.3,
        "position": [
          2640,
          1328
        ],
        "id": "0f55f706-a159-4c68-bb74-68f7dbe15efe",
        "name": "Structured Output Parser"
      },
      {
        "parameters": {
          "promptType": "define",
          "text": "=<role>\nYou are a date-aware automation agent that, at runtime, uses the current calendar date and converts it into the organizations fiscal quarter and fiscal half-year.\n</role>\n\n<task>\n1. Capture todays date in ISO-8601 format (YYYY-MM-DD).  \n2. Derive the current fiscal quarter using this mapping:  \n    February, March, April  Q1  \n    May, June, July  Q2  \n    August, September, October  Q3  \n    November, December, January  Q4\n3. Similarly, derive the previous fiscal quarter.\n4. Then, derive the previous' previous fiscal quarter. In the end, you will have 3 fiscal quarters. From here on out, you will consider the \"current_fiscal_quarter\" to be your derived previous fiscal quarter and you will consider the \"previous_fiscal_quarter\" to be your derived 2 quarters previous. This is because we will run this at the end of each quarter that has just finished in order to compare this most recently finished fiscal quarter with 2 quarters ago.\n4. Determine the current fiscal half-year: \n    H1 = Q1 + Q2 (February  July) \n    H2 = Q3 + Q4 (August  January)\n5. Similarly to deriving the current fiscal half-year, derive the previous fiscal half-year\n6. Assign the fiscal year (FY):  \n    FY is labelled by the calendar year of the January that closes Q4.  \n      Example: any date from 2025-11-01 through 2026-01-31 belongs to FY2026 Q4.  \n7. If a month is ever missing from the mapping (unexpected), set  \n   \"fiscal_quarter\": \"Unmapped\", \"fiscal_half\": \"Unmapped\",  \n   add a \"warning\" key explaining why, and continue.  \n8. Produce one JSON object that follows the output_format section exactly.  \n9. Self-check: validate JSON syntax, confirm quarter/half/year logic, and flag any ambiguity or edge case before returning.\n</task>\n\n<context>\nThe organization follows a non-standard fiscal calendar that begins in February and spans ten active months, grouping them into the quarters above.  \nWe prefer the simplest workflow that fully handles edge cases (e.g., leap years, timezone differences, cross-year FY labelling) and follows security-best practices.\n</context>\n\n<examples>\n<fiscal_quarter_examples>\n2024-02-01  FY2025 Q1  \n2024-05-15  FY2025 Q2\n2024-07-29  FY2025 Q2\n2024-08-01  FY2025 Q3\n2024-10-30  FY2025 Q3\n2024-12-30  FY2025 Q4  \n2025-01-31  FY2025 Q4\n2025-02-01  FY2026 Q1\n2025-06-10  FY2026 Q2  \n2025-09-05  FY2026 Q3  \n2025-12-12  FY2026 Q4  \n2026-03-03  FY2027 Q1\n2026-05-22  FY2027 Q2\n</fiscal_quarter_examples>\n\n<fiscal_half_examples>\n2024-02-01  FY2025 H1\n2024-05-15  FY2025 H1\n2024-07-29  FY2025 H1\n2024-08-01  FY2025 H2\n2024-10-30  FY2025 H2\n2024-12-30  FY2025 H2  \n2025-01-31  FY2025 H2  \n2025-02-01  FY2026 H1\n2025-06-10  FY2026 H1  \n2025-09-05  FY2026 H2  \n2025-12-12  FY2026 H2  \n2026-03-03  FY2027 H1\n2026-05-22  FY2027 H1\n</fiscal_half_examples>\n\n</examples>\n\n<guidelines>\n- Output only the JSON objectno extra text.  \n- Keys must be lower_snake_case and wrapped in double quotes.  \n- Do not include trailing commas.  \n- Point out any implicit or non-obvious gotchas (e.g., FY roll-over rules) in the \"warning\" field instead of silently proceeding.  \n- Do not simply agree; highlight anything incorrect or sub-optimal and suggest improvements.  \n- Think step-by-step, then self-check that the response meets every instruction before returning it.\n</guidelines>\n\n<input>\ntoday: {{ $today.format('yyyy-MM-dd') }}\n</input>\n\n<output_format>\n{\n  \"today\": \"2026-05-22\",\n  \"current_fiscal_quarter\": \"FY2027 Q1\",\n  \"previous_fiscal_quarter\": \"FY2026 Q4\",\n  \"current_fiscal_half\": \"FY2027 H1\",\n  \"previous_fiscal_half\": \"FY2026 H2\"\n}\n</output_format>",
          "hasOutputParser": true,
          "options": {}
        },
        "type": "@n8n/n8n-nodes-langchain.agent",
        "typeVersion": 3,
        "position": [
          2480,
          1120
        ],
        "id": "627f6fd7-713f-44fe-8a43-511b655cf548",
        "name": "Fiscal Quarter Extractor"
      },
      {
        "parameters": {
          "model": "o4-mini",
          "options": {}
        },
        "type": "@n8n/n8n-nodes-langchain.lmChatAzureOpenAi",
        "typeVersion": 1,
        "position": [
          2416,
          1328
        ],
        "id": "5421085b-5efc-40de-895d-5f9d003d2ddf",
        "name": "o4-mini",
        "credentials": {
          "azureOpenAiApi": {
            "id": "N96DE6AiByL8h8kA",
            "name": "Azure OpenAI o4-mini"
          }
        }
      },
      {
        "parameters": {
          "httpMethod": "POST",
          "path": "board-deck-takeaways-ze5ubv1w",
          "authentication": "basicAuth",
          "responseMode": "responseNode",
          "options": {
            "responseHeaders": {
              "entries": [
                {
                  "name": "Content-Type",
                  "value": "application/json"
                }
              ]
            }
          }
        },
        "type": "n8n-nodes-base.webhook",
        "typeVersion": 2.1,
        "position": [
          48,
          1408
        ],
        "id": "6ed5e716-a593-43f8-a2a5-ff2b55e7606a",
        "name": "Trigger",
        "webhookId": "1298ec1c-5d6c-4010-9b21-b40fada0aa39",
        "alwaysOutputData": true,
        "credentials": {
          "httpBasicAuth": {
            "id": "3AVUqEU99hkVKUOW",
            "name": "Zapier Inbound Basic Auth Webhook"
          }
        }
      },
      {
        "parameters": {
          "respondWith": "noData",
          "options": {
            "responseCode": 202
          }
        },
        "type": "n8n-nodes-base.respondToWebhook",
        "typeVersion": 1.5,
        "position": [
          304,
          1408
        ],
        "id": "ee9d858a-7473-476a-8e2d-509ceb132fb6",
        "name": "Respond to Webhook"
      },
      {
        "parameters": {
          "resource": "folder",
          "name": "=Board_Deck_Takeaways_{{ $now.format('yyyyMMdd_HHmmss') }}",
          "driveId": {
            "__rl": true,
            "value": "My Drive",
            "mode": "list",
            "cachedResultName": "My Drive",
            "cachedResultUrl": "https://drive.google.com/drive/my-drive"
          },
          "folderId": {
            "__rl": true,
            "value": "1dSd5PWJ0BH1ksydt-GnYJraDhwLnAbGZ",
            "mode": "list",
            "cachedResultName": "AI Workflow - Board Deck Takeaways",
            "cachedResultUrl": "https://drive.google.com/drive/folders/1dSd5PWJ0BH1ksydt-GnYJraDhwLnAbGZ"
          },
          "options": {}
        },
        "type": "n8n-nodes-base.googleDrive",
        "typeVersion": 3,
        "position": [
          2960,
          1200
        ],
        "id": "15d9460c-b80f-4f00-9421-f1073c6e8a94",
        "name": "Create folder",
        "credentials": {
          "googleDriveOAuth2Api": {
            "id": "SgST8lxFUWMslYat",
            "name": "Google Drive Cribl"
          }
        },
        "disabled": true
      },
      {
        "parameters": {
          "assignments": {
            "assignments": [
              {
                "id": "fa236bc3-f105-4270-adb5-2552a04a69e5",
                "name": "google_drive_folder_id",
                "value": "={{ $('Input Extractor Agent').item.json.output.data.google_drive_folder_id }}",
                "type": "string"
              },
              {
                "id": "230fa6da-2b61-420f-b2d7-10d6cacf6c5d",
                "name": "current_fiscal_quarter",
                "value": "={{ $('Fiscal Quarter Extractor').item.json.output.current_fiscal_quarter }}",
                "type": "string"
              },
              {
                "id": "b0c57526-3be8-49d0-8967-0af6a965063d",
                "name": "previous_fiscal_quarter",
                "value": "={{ $('Fiscal Quarter Extractor').item.json.output.previous_fiscal_quarter }}",
                "type": "string"
              },
              {
                "id": "80a8a4e9-2554-474e-aada-25bfdbddb519",
                "name": "default_user_id",
                "value": "={{ $('Global Vars2').item.json.default_user_id }}",
                "type": "string"
              }
            ]
          },
          "includeOtherFields": true,
          "options": {}
        },
        "type": "n8n-nodes-base.set",
        "typeVersion": 3.4,
        "position": [
          4912,
          624
        ],
        "id": "2644febc-6619-4de2-ac6c-b17278e1c02d",
        "name": "Loop UUID Item",
        "disabled": true
      },
      {
        "parameters": {
          "workflowId": {
            "__rl": true,
            "value": "mDJHNy6DrprAll2W",
            "mode": "list",
            "cachedResultUrl": "/workflow/mDJHNy6DrprAll2W",
            "cachedResultName": "Board_Deck_Document_Query_Analysis_Subworkflow"
          },
          "workflowInputs": {
            "mappingMode": "defineBelow",
            "value": {
              "input": "={{ $json }}"
            },
            "matchingColumns": [
              "input"
            ],
            "schema": [
              {
                "id": "input",
                "displayName": "input",
                "required": false,
                "defaultMatch": false,
                "display": true,
                "canBeUsedToMatch": true,
                "type": "object",
                "removed": false
              }
            ],
            "attemptToConvertTypes": false,
            "convertFieldsToString": true
          },
          "options": {
            "waitForSubWorkflow": false
          }
        },
        "type": "n8n-nodes-base.executeWorkflow",
        "typeVersion": 1.3,
        "position": [
          5120,
          624
        ],
        "id": "0d71b9a5-7d56-4e33-92f6-ccc9a2216c29",
        "name": "Call 'Board_Deck_Document_Query_Analysis_Subworkflow'",
        "disabled": true
      },
      {
        "parameters": {
          "content": "## High number of measures\n```\n{\n  \"c3023df3-39f1-4913-86c8-07d69f6caeb1\": [\n    {\n      \"document_query_name\": \"Incremental Cloud ARR and Customers Over Time\",\n      \"drill_name\": \"total_customers\",\n      \"query\": {\n        \"limit\": 1000,\n        \"sorts\": [],\n        \"table\": \"finance__customer_quarterly_arr\",\n        \"fields\": [\n          \"finance__customer_quarterly_arr.fiscal_quarter[fiscal_quarter]\",\n          \"finance__customer_quarterly_arr.customer_name\",\n          \"finance__customer_quarterly_arr.first_purchase_quarter[date]\",\n          \"finance__customer_quarterly_arr.cribl_id\",\n          \"finance__customer_quarterly_arr.customer_type\",\n          \"finance__customer_quarterly_arr.total_starting_arr\",\n          \"finance__customer_quarterly_arr.total_new_arr\",\n          \"finance__customer_quarterly_arr.total_upsell_arr\",\n          \"finance__customer_quarterly_arr.total_churn_arr\",\n          \"finance__customer_quarterly_arr.total_downsell_arr\",\n          \"finance__customer_quarterly_arr.total_ending_arr\"\n        ],\n        \"pivots\": [],\n        \"dbtMode\": false,\n        \"filters\": {\n          \"finance__customer_quarterly_arr.fiscal_quarter\": {\n            \"type\": \"composite\",\n            \"filters\": [\n              {\n                \"kind\": \"TIME_FOR_UNIT_DURATION\",\n                \"type\": \"date\",\n                \"left_side\": \"FY2026 Q3\"\n              },\n              {\n                \"kind\": \"TIME_FOR_INTERVAL_DURATION\",\n                \"type\": \"date\",\n                \"left_side\": \"6 complete fiscal quarters ago\",\n                \"right_side\": \"6 quarters\",\n                \"is_negative\": false\n              }\n            ],\n            \"conjunction\": \"AND\",\n            \"is_negative\": false\n          },\n          \"finance__customer_quarterly_arr.source_granularity\": {\n            \"kind\": \"EQUALS\",\n            \"type\": \"string\",\n            \"values\": [\n              \"cloud\"\n            ]\n          }\n        },\n        \"modelId\": \"e3a78095-f13c-49a2-9a4c-617fca386ca4\",\n        \"version\": 8,\n        \"controls\": [],\n        \"rewriteSql\": true,\n        \"row_totals\": {},\n        \"fill_fields\": [],\n        \"calculations\": [],\n        \"column_limit\": 50,\n        \"join_via_map\": {},\n        \"column_totals\": {},\n        \"userEditedSQL\": \"\",\n        \"dimensionIndex\": 0,\n        \"default_group_by\": true,\n        \"custom_summary_types\": {},\n        \"join_paths_from_topic_name\": \"customer_quarterly_arr\"\n      },\n      \"sql\": \"SELECT 'FY' || CAST(EXTRACT(YEAR FROM (\\\"FISCAL_QUARTER\\\" + INTERVAL '11 month')) AS VARCHAR) || (' Q' || CAST(CAST(FLOOR((MOD(EXTRACT(MONTH FROM \\\"FISCAL_QUARTER\\\") + -13, 12) + 12 - 1) / 3) AS BIGINT) + 1 AS VARCHAR)) AS \\\"finance__customer_quarterly_arr.fiscal_quarter[fiscal_quarter]\\\",\\n    \\\"CUSTOMER_NAME\\\" AS \\\"finance__customer_quarterly_arr.customer_name\\\",\\n    CAST(DATE_TRUNC('DAY', \\\"FIRST_PURCHASE_QUARTER\\\") AS TIMESTAMP(0)) AS \\\"finance__customer_quarterly_arr.first_purchase_quarter[date]__raw\\\",\\n    \\\"CRIBL_ID\\\" AS \\\"finance__customer_quarterly_arr.cribl_id\\\",\\n    \\\"CUSTOMER_TYPE\\\" AS \\\"finance__customer_quarterly_arr.customer_type\\\",\\n    COALESCE(SUM(CASE\\n        WHEN \\\"STARTING_ARR\\\" > 0 THEN \\\"STARTING_ARR_CLOUD\\\"\\n        ELSE NULL\\n    END), 0) AS \\\"finance__customer_quarterly_arr.total_starting_arr\\\",\\n    COALESCE(SUM(CASE\\n        WHEN \\\"NEW_ARR\\\" > 0 THEN \\\"NEW_ARR_CLOUD\\\"\\n        ELSE NULL\\n    END), 0) AS \\\"finance__customer_quarterly_arr.total_new_arr\\\",\\n    COALESCE(SUM(CASE\\n        WHEN \\\"UPSELL_ARR\\\" > 0 THEN \\\"UPSELL_ARR_CLOUD\\\"\\n        ELSE NULL\\n    END), 0) AS \\\"finance__customer_quarterly_arr.total_upsell_arr\\\",\\n    COALESCE(SUM(CASE\\n        WHEN \\\"CHURN_ARR\\\" < 0 THEN \\\"CHURN_ARR_CLOUD\\\"\\n        ELSE NULL\\n    END), 0) AS \\\"finance__customer_quarterly_arr.total_churn_arr\\\",\\n    COALESCE(SUM(CASE\\n        WHEN \\\"DOWNSELL_ARR\\\" < 0 THEN \\\"DOWNSELL_ARR_CLOUD\\\"\\n        ELSE NULL\\n    END), 0) AS \\\"finance__customer_quarterly_arr.total_downsell_arr\\\",\\n    COALESCE(SUM(CASE\\n        WHEN \\\"ENDING_ARR\\\" > 0 THEN \\\"ENDING_ARR_CLOUD\\\"\\n        ELSE NULL\\n    END), 0) AS \\\"finance__customer_quarterly_arr.total_ending_arr\\\",\\n    TO_CHAR(CAST(DATE_TRUNC('DAY', \\\"FIRST_PURCHASE_QUARTER\\\") AS TIMESTAMP(0)), 'YYYY-MM-DD') AS \\\"finance__customer_quarterly_arr.first_purchase_quarter[date]\\\"\\nFROM \\\"FINANCE\\\".\\\"CUSTOMER_QUARTERLY_ARR\\\" AS \\\"finance__customer_quarterly_arr\\\"\\nWHERE \\\"FISCAL_QUARTER\\\" >= CAST(TIMESTAMP '2025-08-01 00:00:00' AS DATE) AND \\\"FISCAL_QUARTER\\\" < CAST((DATE_TRUNC('QUARTER', ((TIMESTAMP '2025-08-01 00:00:00' + INTERVAL '3 month') + INTERVAL '2 month')) + INTERVAL '-2 month') AS DATE) AND \\\"FISCAL_QUARTER\\\" >= CAST((DATE_TRUNC('QUARTER', ((CAST(CURRENT_TIMESTAMP AS TIMESTAMP(0)) + INTERVAL '-18 month') + INTERVAL '2 month')) + INTERVAL '-2 month') AS DATE) AND \\\"FISCAL_QUARTER\\\" < CAST((DATE_TRUNC('QUARTER', (((DATE_TRUNC('QUARTER', ((CAST(CURRENT_TIMESTAMP AS TIMESTAMP(0)) + INTERVAL '-18 month') + INTERVAL '2 month')) + INTERVAL '-2 month') + INTERVAL '18 month') + INTERVAL '2 month')) + INTERVAL '-2 month') AS DATE)\\nGROUP BY 4, 2, 5, 3, 1\\nLIMIT 1000\"\n    },\n    {\n      \"document_query_name\": \"Incremental Cloud ARR and Customers Over Time\",\n      \"drill_name\": \"total_migration_arr\",\n      \"query\": {\n        \"limit\": 1000,\n        \"sorts\": [],\n        \"table\": \"finance__customer_quarterly_arr\",\n        \"fields\": [\n          \"finance__customer_quarterly_arr.fiscal_quarter[fiscal_quarter]\",\n          \"finance__customer_quarterly_arr.customer_name\",\n          \"finance__customer_quarterly_arr.first_purchase_quarter[date]\",\n          \"finance__customer_quarterly_arr.cribl_id\",\n          \"finance__customer_quarterly_arr.customer_type\",\n          \"finance__customer_quarterly_arr.total_migration_arr\",\n          \"finance__customer_quarterly_arr.migration_arr_cloud\",\n          \"finance__customer_quarterly_arr.migration_arr_software\"\n        ],\n        \"pivots\": [],\n        \"dbtMode\": false,\n        \"filters\": {\n          \"finance__customer_quarterly_arr.fiscal_quarter\": {\n            \"type\": \"composite\",\n            \"filters\": [\n              {\n                \"kind\": \"TIME_FOR_UNIT_DURATION\",\n                \"type\": \"date\",\n                \"left_side\": \"FY2026 Q3\"\n              },\n              {\n                \"kind\": \"TIME_FOR_INTERVAL_DURATION\",\n                \"type\": \"date\",\n                \"left_side\": \"6 complete fiscal quarters ago\",\n                \"right_side\": \"6 quarters\",\n                \"is_negative\": false\n              }\n            ],\n            \"conjunction\": \"AND\",\n            \"is_negative\": false\n          },\n          \"finance__customer_quarterly_arr.source_granularity\": {\n            \"kind\": \"EQUALS\",\n            \"type\": \"string\",\n            \"values\": [\n              \"cloud\"\n            ]\n          }\n        },\n        \"modelId\": \"df073f20-17b0-4d9c-b667-2b2f86b5fae8\",\n        \"version\": 8,\n        \"controls\": [],\n        \"rewriteSql\": true,\n        \"row_totals\": {},\n        \"fill_fields\": [],\n        \"calculations\": [],\n        \"column_limit\": 50,\n        \"join_via_map\": {},\n        \"column_totals\": {},\n        \"userEditedSQL\": \"\",\n        \"dimensionIndex\": 0,\n        \"default_group_by\": true,\n        \"custom_summary_types\": {},\n        \"join_paths_from_topic_name\": \"customer_quarterly_arr\"\n      },\n      \"sql\": \"SELECT 'FY' || CAST(EXTRACT(YEAR FROM (\\\"FISCAL_QUARTER\\\" + INTERVAL '11 month')) AS VARCHAR) || (' Q' || CAST(CAST(FLOOR((MOD(EXTRACT(MONTH FROM \\\"FISCAL_QUARTER\\\") + -13, 12) + 12 - 1) / 3) AS BIGINT) + 1 AS VARCHAR)) AS \\\"finance__customer_quarterly_arr.fiscal_quarter[fiscal_quarter]\\\",\\n    \\\"CUSTOMER_NAME\\\" AS \\\"finance__customer_quarterly_arr.customer_name\\\",\\n    CAST(DATE_TRUNC('DAY', \\\"FIRST_PURCHASE_QUARTER\\\") AS TIMESTAMP(0)) AS \\\"finance__customer_quarterly_arr.first_purchase_quarter[date]__raw\\\",\\n    \\\"CRIBL_ID\\\" AS \\\"finance__customer_quarterly_arr.cribl_id\\\",\\n    \\\"CUSTOMER_TYPE\\\" AS \\\"finance__customer_quarterly_arr.customer_type\\\",\\n    COALESCE(SUM(\\\"MIGRATION_ARR_CLOUD\\\"), 0) AS \\\"finance__customer_quarterly_arr.total_migration_arr\\\",\\n    \\\"MIGRATION_ARR_CLOUD\\\" AS \\\"finance__customer_quarterly_arr.migration_arr_cloud\\\",\\n    \\\"MIGRATION_ARR_SOFTWARE\\\" AS \\\"finance__customer_quarterly_arr.migration_arr_software\\\",\\n    TO_CHAR(CAST(DATE_TRUNC('DAY', \\\"FIRST_PURCHASE_QUARTER\\\") AS TIMESTAMP(0)), 'YYYY-MM-DD') AS \\\"finance__customer_quarterly_arr.first_purchase_quarter[date]\\\"\\nFROM \\\"FINANCE\\\".\\\"CUSTOMER_QUARTERLY_ARR\\\" AS \\\"finance__customer_quarterly_arr\\\"\\nWHERE \\\"FISCAL_QUARTER\\\" >= CAST(TIMESTAMP '2025-08-01 00:00:00' AS DATE) AND \\\"FISCAL_QUARTER\\\" < CAST((DATE_TRUNC('QUARTER', ((TIMESTAMP '2025-08-01 00:00:00' + INTERVAL '3 month') + INTERVAL '2 month')) + INTERVAL '-2 month') AS DATE) AND \\\"FISCAL_QUARTER\\\" >= CAST((DATE_TRUNC('QUARTER', ((CAST(CURRENT_TIMESTAMP AS TIMESTAMP(0)) + INTERVAL '-18 month') + INTERVAL '2 month')) + INTERVAL '-2 month') AS DATE) AND \\\"FISCAL_QUARTER\\\" < CAST((DATE_TRUNC('QUARTER', (((DATE_TRUNC('QUARTER', ((CAST(CURRENT_TIMESTAMP AS TIMESTAMP(0)) + INTERVAL '-18 month') + INTERVAL '2 month')) + INTERVAL '-2 month') + INTERVAL '18 month') + INTERVAL '2 month')) + INTERVAL '-2 month') AS DATE)\\nGROUP BY 4, 2, 5, 3, 1, 7, 8\\nLIMIT 1000\"\n    },\n    {\n      \"document_query_name\": \"Incremental Cloud ARR and Customers Over Time\",\n      \"drill_name\": \"total_gross_new_arr\",\n      \"query\": {\n        \"limit\": 1000,\n        \"sorts\": [\n          {\n            \"column_name\": \"finance__customer_quarterly_arr.total_starting_arr\",\n            \"sort_descending\": true\n          }\n        ],\n        \"table\": \"finance__customer_quarterly_arr\",\n        \"fields\": [\n          \"finance__customer_quarterly_arr.fiscal_quarter[fiscal_quarter]\",\n          \"finance__customer_quarterly_arr.customer_name\",\n          \"finance__customer_quarterly_arr.first_purchase_quarter[date]\",\n          \"finance__customer_quarterly_arr.cribl_id\",\n          \"finance__customer_quarterly_arr.total_starting_arr\",\n          \"finance__customer_quarterly_arr.total_new_arr\",\n          \"finance__customer_quarterly_arr.total_upsell_arr\"\n        ],\n        \"pivots\": [],\n        \"dbtMode\": false,\n        \"filters\": {\n          \"finance__customer_quarterly_arr.fiscal_quarter\": {\n            \"type\": \"composite\",\n            \"filters\": [\n              {\n                \"kind\": \"TIME_FOR_UNIT_DURATION\",\n                \"type\": \"date\",\n                \"left_side\": \"FY2026 Q3\"\n              },\n              {\n                \"kind\": \"TIME_FOR_INTERVAL_DURATION\",\n                \"type\": \"date\",\n                \"left_side\": \"6 complete fiscal quarters ago\",\n                \"right_side\": \"6 quarters\",\n                \"is_negative\": false\n              }\n            ],\n            \"conjunction\": \"AND\",\n            \"is_negative\": false\n          },\n          \"finance__customer_quarterly_arr.source_granularity\": {\n            \"kind\": \"EQUALS\",\n            \"type\": \"string\",\n            \"values\": [\n              \"cloud\"\n            ]\n          }\n        },\n        \"modelId\": \"51b818b3-a897-4ede-a516-ab7436c6be97\",\n        \"version\": 8,\n        \"controls\": [],\n        \"rewriteSql\": true,\n        \"row_totals\": {},\n        \"fill_fields\": [],\n        \"calculations\": [],\n        \"column_limit\": 50,\n        \"join_via_map\": {},\n        \"column_totals\": {},\n        \"userEditedSQL\": \"\",\n        \"dimensionIndex\": 0,\n        \"default_group_by\": true,\n        \"custom_summary_types\": {},\n        \"join_paths_from_topic_name\": \"customer_quarterly_arr\"\n      },\n      \"sql\": \"SELECT 'FY' || CAST(EXTRACT(YEAR FROM (\\\"FISCAL_QUARTER\\\" + INTERVAL '11 month')) AS VARCHAR) || (' Q' || CAST(CAST(FLOOR((MOD(EXTRACT(MONTH FROM \\\"FISCAL_QUARTER\\\") + -13, 12) + 12 - 1) / 3) AS BIGINT) + 1 AS VARCHAR)) AS \\\"finance__customer_quarterly_arr.fiscal_quarter[fiscal_quarter]\\\",\\n    \\\"CUSTOMER_NAME\\\" AS \\\"finance__customer_quarterly_arr.customer_name\\\",\\n    CAST(DATE_TRUNC('DAY', \\\"FIRST_PURCHASE_QUARTER\\\") AS TIMESTAMP(0)) AS \\\"finance__customer_quarterly_arr.first_purchase_quarter[date]__raw\\\",\\n    \\\"CRIBL_ID\\\" AS \\\"finance__customer_quarterly_arr.cribl_id\\\",\\n    COALESCE(SUM(CASE\\n        WHEN \\\"STARTING_ARR\\\" > 0 THEN \\\"STARTING_ARR_CLOUD\\\"\\n        ELSE NULL\\n    END), 0) AS \\\"finance__customer_quarterly_arr.total_starting_arr\\\",\\n    COALESCE(SUM(CASE\\n        WHEN \\\"NEW_ARR\\\" > 0 THEN \\\"NEW_ARR_CLOUD\\\"\\n        ELSE NULL\\n    END), 0) AS \\\"finance__customer_quarterly_arr.total_new_arr\\\",\\n    COALESCE(SUM(CASE\\n        WHEN \\\"UPSELL_ARR\\\" > 0 THEN \\\"UPSELL_ARR_CLOUD\\\"\\n        ELSE NULL\\n    END), 0) AS \\\"finance__customer_quarterly_arr.total_upsell_arr\\\",\\n    TO_CHAR(CAST(DATE_TRUNC('DAY', \\\"FIRST_PURCHASE_QUARTER\\\") AS TIMESTAMP(0)), 'YYYY-MM-DD') AS \\\"finance__customer_quarterly_arr.first_purchase_quarter[date]\\\"\\nFROM \\\"FINANCE\\\".\\\"CUSTOMER_QUARTERLY_ARR\\\" AS \\\"finance__customer_quarterly_arr\\\"\\nWHERE \\\"FISCAL_QUARTER\\\" >= CAST(TIMESTAMP '2025-08-01 00:00:00' AS DATE) AND \\\"FISCAL_QUARTER\\\" < CAST((DATE_TRUNC('QUARTER', ((TIMESTAMP '2025-08-01 00:00:00' + INTERVAL '3 month') + INTERVAL '2 month')) + INTERVAL '-2 month') AS DATE) AND \\\"FISCAL_QUARTER\\\" >= CAST((DATE_TRUNC('QUARTER', ((CAST(CURRENT_TIMESTAMP AS TIMESTAMP(0)) + INTERVAL '-18 month') + INTERVAL '2 month')) + INTERVAL '-2 month') AS DATE) AND \\\"FISCAL_QUARTER\\\" < CAST((DATE_TRUNC('QUARTER', (((DATE_TRUNC('QUARTER', ((CAST(CURRENT_TIMESTAMP AS TIMESTAMP(0)) + INTERVAL '-18 month') + INTERVAL '2 month')) + INTERVAL '-2 month') + INTERVAL '18 month') + INTERVAL '2 month')) + INTERVAL '-2 month') AS DATE)\\nGROUP BY 4, 2, 3, 1\\nLIMIT 1000\"\n    },\n    {\n      \"document_query_name\": \"Incremental Cloud ARR and Customers Over Time\",\n      \"drill_name\": \"total_gross_new_arr\",\n      \"query\": {\n        \"limit\": 1000,\n        \"sorts\": [\n          {\n            \"column_name\": \"finance__customer_quarterly_arr.total_new_arr\",\n            \"sort_descending\": true\n          }\n        ],\n        \"table\": \"finance__customer_quarterly_arr\",\n        \"fields\": [\n          \"finance__customer_quarterly_arr.fiscal_quarter[fiscal_quarter]\",\n          \"finance__customer_quarterly_arr.customer_name\",\n          \"finance__customer_quarterly_arr.first_purchase_quarter[date]\",\n          \"finance__customer_quarterly_arr.cribl_id\",\n          \"finance__customer_quarterly_arr.total_starting_arr\",\n          \"finance__customer_quarterly_arr.total_new_arr\",\n          \"finance__customer_quarterly_arr.total_upsell_arr\"\n        ],\n        \"pivots\": [],\n        \"dbtMode\": false,\n        \"filters\": {\n          \"finance__customer_quarterly_arr.fiscal_quarter\": {\n            \"type\": \"composite\",\n            \"filters\": [\n              {\n                \"kind\": \"TIME_FOR_UNIT_DURATION\",\n                \"type\": \"date\",\n                \"left_side\": \"FY2026 Q3\"\n              },\n              {\n                \"kind\": \"TIME_FOR_INTERVAL_DURATION\",\n                \"type\": \"date\",\n                \"left_side\": \"6 complete fiscal quarters ago\",\n                \"right_side\": \"6 quarters\",\n                \"is_negative\": false\n              }\n            ],\n            \"conjunction\": \"AND\",\n            \"is_negative\": false\n          },\n          \"finance__customer_quarterly_arr.source_granularity\": {\n            \"kind\": \"EQUALS\",\n            \"type\": \"string\",\n            \"values\": [\n              \"cloud\"\n            ]\n          }\n        },\n        \"modelId\": \"51b818b3-a897-4ede-a516-ab7436c6be97\",\n        \"version\": 8,\n        \"controls\": [],\n        \"rewriteSql\": true,\n        \"row_totals\": {},\n        \"fill_fields\": [],\n        \"calculations\": [],\n        \"column_limit\": 50,\n        \"join_via_map\": {},\n        \"column_totals\": {},\n        \"userEditedSQL\": \"\",\n        \"dimensionIndex\": 0,\n        \"default_group_by\": true,\n        \"custom_summary_types\": {},\n        \"join_paths_from_topic_name\": \"customer_quarterly_arr\"\n      },\n      \"sql\": \"SELECT 'FY' || CAST(EXTRACT(YEAR FROM (\\\"FISCAL_QUARTER\\\" + INTERVAL '11 month')) AS VARCHAR) || (' Q' || CAST(CAST(FLOOR((MOD(EXTRACT(MONTH FROM \\\"FISCAL_QUARTER\\\") + -13, 12) + 12 - 1) / 3) AS BIGINT) + 1 AS VARCHAR)) AS \\\"finance__customer_quarterly_arr.fiscal_quarter[fiscal_quarter]\\\",\\n    \\\"CUSTOMER_NAME\\\" AS \\\"finance__customer_quarterly_arr.customer_name\\\",\\n    CAST(DATE_TRUNC('DAY', \\\"FIRST_PURCHASE_QUARTER\\\") AS TIMESTAMP(0)) AS \\\"finance__customer_quarterly_arr.first_purchase_quarter[date]__raw\\\",\\n    \\\"CRIBL_ID\\\" AS \\\"finance__customer_quarterly_arr.cribl_id\\\",\\n    COALESCE(SUM(CASE\\n        WHEN \\\"STARTING_ARR\\\" > 0 THEN \\\"STARTING_ARR_CLOUD\\\"\\n        ELSE NULL\\n    END), 0) AS \\\"finance__customer_quarterly_arr.total_starting_arr\\\",\\n    COALESCE(SUM(CASE\\n        WHEN \\\"NEW_ARR\\\" > 0 THEN \\\"NEW_ARR_CLOUD\\\"\\n        ELSE NULL\\n    END), 0) AS \\\"finance__customer_quarterly_arr.total_new_arr\\\",\\n    COALESCE(SUM(CASE\\n        WHEN \\\"UPSELL_ARR\\\" > 0 THEN \\\"UPSELL_ARR_CLOUD\\\"\\n        ELSE NULL\\n    END), 0) AS \\\"finance__customer_quarterly_arr.total_upsell_arr\\\",\\n    TO_CHAR(CAST(DATE_TRUNC('DAY', \\\"FIRST_PURCHASE_QUARTER\\\") AS TIMESTAMP(0)), 'YYYY-MM-DD') AS \\\"finance__customer_quarterly_arr.first_purchase_quarter[date]\\\"\\nFROM \\\"FINANCE\\\".\\\"CUSTOMER_QUARTERLY_ARR\\\" AS \\\"finance__customer_quarterly_arr\\\"\\nWHERE \\\"FISCAL_QUARTER\\\" >= CAST(TIMESTAMP '2025-08-01 00:00:00' AS DATE) AND \\\"FISCAL_QUARTER\\\" < CAST((DATE_TRUNC('QUARTER', ((TIMESTAMP '2025-08-01 00:00:00' + INTERVAL '3 month') + INTERVAL '2 month')) + INTERVAL '-2 month') AS DATE) AND \\\"FISCAL_QUARTER\\\" >= CAST((DATE_TRUNC('QUARTER', ((CAST(CURRENT_TIMESTAMP AS TIMESTAMP(0)) + INTERVAL '-18 month') + INTERVAL '2 month')) + INTERVAL '-2 month') AS DATE) AND \\\"FISCAL_QUARTER\\\" < CAST((DATE_TRUNC('QUARTER', (((DATE_TRUNC('QUARTER', ((CAST(CURRENT_TIMESTAMP AS TIMESTAMP(0)) + INTERVAL '-18 month') + INTERVAL '2 month')) + INTERVAL '-2 month') + INTERVAL '18 month') + INTERVAL '2 month')) + INTERVAL '-2 month') AS DATE)\\nGROUP BY 4, 2, 3, 1\\nLIMIT 1000\"\n    },\n    {\n      \"document_query_name\": \"Incremental Cloud ARR and Customers Over Time\",\n      \"drill_name\": \"total_gross_new_arr\",\n      \"query\": {\n        \"limit\": 1000,\n        \"sorts\": [\n          {\n            \"column_name\": \"finance__customer_quarterly_arr.total_upsell_arr\",\n            \"sort_descending\": true\n          }\n        ],\n        \"table\": \"finance__customer_quarterly_arr\",\n        \"fields\": [\n          \"finance__customer_quarterly_arr.fiscal_quarter[fiscal_quarter]\",\n          \"finance__customer_quarterly_arr.customer_name\",\n          \"finance__customer_quarterly_arr.first_purchase_quarter[date]\",\n          \"finance__customer_quarterly_arr.cribl_id\",\n          \"finance__customer_quarterly_arr.total_starting_arr\",\n          \"finance__customer_quarterly_arr.total_new_arr\",\n          \"finance__customer_quarterly_arr.total_upsell_arr\"\n        ],\n        \"pivots\": [],\n        \"dbtMode\": false,\n        \"filters\": {\n          \"finance__customer_quarterly_arr.fiscal_quarter\": {\n            \"type\": \"composite\",\n            \"filters\": [\n              {\n                \"kind\": \"TIME_FOR_UNIT_DURATION\",\n                \"type\": \"date\",\n                \"left_side\": \"FY2026 Q3\"\n              },\n              {\n                \"kind\": \"TIME_FOR_INTERVAL_DURATION\",\n                \"type\": \"date\",\n                \"left_side\": \"6 complete fiscal quarters ago\",\n                \"right_side\": \"6 quarters\",\n                \"is_negative\": false\n              }\n            ],\n            \"conjunction\": \"AND\",\n            \"is_negative\": false\n          },\n          \"finance__customer_quarterly_arr.source_granularity\": {\n            \"kind\": \"EQUALS\",\n            \"type\": \"string\",\n            \"values\": [\n              \"cloud\"\n            ]\n          }\n        },\n        \"modelId\": \"51b818b3-a897-4ede-a516-ab7436c6be97\",\n        \"version\": 8,\n        \"controls\": [],\n        \"rewriteSql\": true,\n        \"row_totals\": {},\n        \"fill_fields\": [],\n        \"calculations\": [],\n        \"column_limit\": 50,\n        \"join_via_map\": {},\n        \"column_totals\": {},\n        \"userEditedSQL\": \"\",\n        \"dimensionIndex\": 0,\n        \"default_group_by\": true,\n        \"custom_summary_types\": {},\n        \"join_paths_from_topic_name\": \"customer_quarterly_arr\"\n      },\n      \"sql\": \"SELECT 'FY' || CAST(EXTRACT(YEAR FROM (\\\"FISCAL_QUARTER\\\" + INTERVAL '11 month')) AS VARCHAR) || (' Q' || CAST(CAST(FLOOR((MOD(EXTRACT(MONTH FROM \\\"FISCAL_QUARTER\\\") + -13, 12) + 12 - 1) / 3) AS BIGINT) + 1 AS VARCHAR)) AS \\\"finance__customer_quarterly_arr.fiscal_quarter[fiscal_quarter]\\\",\\n    \\\"CUSTOMER_NAME\\\" AS \\\"finance__customer_quarterly_arr.customer_name\\\",\\n    CAST(DATE_TRUNC('DAY', \\\"FIRST_PURCHASE_QUARTER\\\") AS TIMESTAMP(0)) AS \\\"finance__customer_quarterly_arr.first_purchase_quarter[date]__raw\\\",\\n    \\\"CRIBL_ID\\\" AS \\\"finance__customer_quarterly_arr.cribl_id\\\",\\n    COALESCE(SUM(CASE\\n        WHEN \\\"STARTING_ARR\\\" > 0 THEN \\\"STARTING_ARR_CLOUD\\\"\\n        ELSE NULL\\n    END), 0) AS \\\"finance__customer_quarterly_arr.total_starting_arr\\\",\\n    COALESCE(SUM(CASE\\n        WHEN \\\"NEW_ARR\\\" > 0 THEN \\\"NEW_ARR_CLOUD\\\"\\n        ELSE NULL\\n    END), 0) AS \\\"finance__customer_quarterly_arr.total_new_arr\\\",\\n    COALESCE(SUM(CASE\\n        WHEN \\\"UPSELL_ARR\\\" > 0 THEN \\\"UPSELL_ARR_CLOUD\\\"\\n        ELSE NULL\\n    END), 0) AS \\\"finance__customer_quarterly_arr.total_upsell_arr\\\",\\n    TO_CHAR(CAST(DATE_TRUNC('DAY', \\\"FIRST_PURCHASE_QUARTER\\\") AS TIMESTAMP(0)), 'YYYY-MM-DD') AS \\\"finance__customer_quarterly_arr.first_purchase_quarter[date]\\\"\\nFROM \\\"FINANCE\\\".\\\"CUSTOMER_QUARTERLY_ARR\\\" AS \\\"finance__customer_quarterly_arr\\\"\\nWHERE \\\"FISCAL_QUARTER\\\" >= CAST(TIMESTAMP '2025-08-01 00:00:00' AS DATE) AND \\\"FISCAL_QUARTER\\\" < CAST((DATE_TRUNC('QUARTER', ((TIMESTAMP '2025-08-01 00:00:00' + INTERVAL '3 month') + INTERVAL '2 month')) + INTERVAL '-2 month') AS DATE) AND \\\"FISCAL_QUARTER\\\" >= CAST((DATE_TRUNC('QUARTER', ((CAST(CURRENT_TIMESTAMP AS TIMESTAMP(0)) + INTERVAL '-18 month') + INTERVAL '2 month')) + INTERVAL '-2 month') AS DATE) AND \\\"FISCAL_QUARTER\\\" < CAST((DATE_TRUNC('QUARTER', (((DATE_TRUNC('QUARTER', ((CAST(CURRENT_TIMESTAMP AS TIMESTAMP(0)) + INTERVAL '-18 month') + INTERVAL '2 month')) + INTERVAL '-2 month') + INTERVAL '18 month') + INTERVAL '2 month')) + INTERVAL '-2 month') AS DATE)\\nGROUP BY 4, 2, 3, 1\\nLIMIT 1000\"\n    }\n  ]\n}\n```"
        },
        "type": "n8n-nodes-base.stickyNote",
        "position": [
          2608,
          848
        ],
        "typeVersion": 1,
        "id": "15463490-f48d-43c9-acaf-f0700a88a72a",
        "name": "Sticky Note"
      },
      {
        "parameters": {
          "content": "## Standard number of measures\n```\n{\n  \"fd41c0cc-09f5-4781-8081-411e55d2d762\": [\n    {\n      \"document_query_name\": \"Searches Dispatched\",\n      \"drill_name\": \"total_searches_dispatched\",\n      \"query\": {\n        \"limit\": 1000,\n        \"sorts\": [],\n        \"table\": \"product__cloud_telemetry_daily\",\n        \"fields\": [\n          \"product__cloud_orgs.account_name\",\n          \"product__cloud_orgs.org_id\",\n          \"product__cloud_orgs.org_type\",\n          \"product__cloud_orgs.owner_email\",\n          \"product__cloud_telemetry_daily.search_executor_compute_sum\",\n          \"product__cloud_telemetry_daily.dispatched_searches_sum\"\n        ],\n        \"pivots\": [],\n        \"dbtMode\": false,\n        \"filters\": {\n          \"product__cloud_orgs.org_type\": {\n            \"kind\": \"EQUALS\",\n            \"type\": \"string\",\n            \"values\": [\n              \"Customer\",\n              \"Free\"\n            ],\n            \"is_negative\": false\n          },\n          \"product__cloud_telemetry_daily.date\": {\n            \"type\": \"composite\",\n            \"filters\": [\n              {\n                \"kind\": \"TIME_FOR_UNIT_DURATION\",\n                \"type\": \"date\",\n                \"left_side\": \"FY2026 Q3\"\n              },\n              {\n                \"kind\": \"TIME_FOR_INTERVAL_DURATION\",\n                \"type\": \"date\",\n                \"left_side\": \"6 complete fiscal quarters ago\",\n                \"right_side\": \"6 quarters\",\n                \"is_negative\": false\n              }\n            ],\n            \"conjunction\": \"AND\",\n            \"is_negative\": false\n          },\n          \"product__cloud_telemetry_daily.dispatched_searches\": {\n            \"kind\": \"GREATER_THAN\",\n            \"type\": \"number\",\n            \"values\": [\n              \"0\"\n            ],\n            \"is_negative\": false,\n            \"is_inclusive\": false\n          }\n        },\n        \"modelId\": \"867dffa3-a2de-48a5-af58-1d648c48c524\",\n        \"version\": 8,\n        \"controls\": [],\n        \"rewriteSql\": true,\n        \"row_totals\": {},\n        \"fill_fields\": [],\n        \"calculations\": [],\n        \"column_limit\": 50,\n        \"join_via_map\": {},\n        \"column_totals\": {},\n        \"userEditedSQL\": \"\",\n        \"dimensionIndex\": 0,\n        \"default_group_by\": true,\n        \"custom_summary_types\": {},\n        \"join_paths_from_topic_name\": \"cloud_telemetry_daily\"\n      }\n    },\n    {\n      \"document_query_name\": \"Searches Dispatched\",\n      \"drill_name\": \"active_orgs\",\n      \"query\": {\n        \"limit\": 1000,\n        \"sorts\": [],\n        \"table\": \"product__cloud_telemetry_daily\",\n        \"fields\": [\n          \"product__cloud_telemetry_daily.primary_key\",\n          \"product__cloud_telemetry_daily.date\",\n          \"product__cloud_telemetry_daily.env\",\n          \"product__cloud_telemetry_daily.org_id\",\n          \"product__cloud_telemetry_daily.org_type\",\n          \"product__cloud_telemetry_daily.is_cribl_tenant\",\n          \"product__cloud_telemetry_daily.account_id\",\n          \"product__cloud_telemetry_daily.account_name\",\n          \"product__cloud_telemetry_daily.in_sfdc\",\n          \"product__cloud_telemetry_daily.tid_create_date\"\n        ],\n        \"pivots\": [],\n        \"dbtMode\": false,\n        \"filters\": {\n          \"product__cloud_orgs.org_type\": {\n            \"kind\": \"EQUALS\",\n            \"type\": \"string\",\n            \"values\": [\n              \"Customer\",\n              \"Free\"\n            ],\n            \"is_negative\": false\n          },\n          \"product__cloud_telemetry_daily.date\": {\n            \"type\": \"composite\",\n            \"filters\": [\n              {\n                \"kind\": \"TIME_FOR_UNIT_DURATION\",\n                \"type\": \"date\",\n                \"left_side\": \"FY2026 Q2\"\n              },\n              {\n                \"kind\": \"TIME_FOR_INTERVAL_DURATION\",\n                \"type\": \"date\",\n                \"left_side\": \"6 complete fiscal quarters ago\",\n                \"right_side\": \"6 quarters\",\n                \"is_negative\": false\n              }\n            ],\n            \"conjunction\": \"AND\",\n            \"is_negative\": false\n          },\n          \"product__cloud_telemetry_daily.is_active\": {\n            \"type\": \"boolean\",\n            \"is_negative\": false,\n            \"treat_nulls_as_false\": false\n          },\n          \"product__cloud_telemetry_daily.dispatched_searches\": {\n            \"kind\": \"GREATER_THAN\",\n            \"type\": \"number\",\n            \"values\": [\n              \"0\"\n            ],\n            \"is_negative\": false,\n            \"is_inclusive\": false\n          }\n        },\n        \"modelId\": \"5432aba0-002d-4c7f-b1d4-7fad064934c7\",\n        \"version\": 8,\n        \"controls\": [],\n        \"rewriteSql\": true,\n        \"row_totals\": {},\n        \"fill_fields\": [],\n        \"calculations\": [],\n        \"column_limit\": 50,\n        \"join_via_map\": {},\n        \"column_totals\": {},\n        \"userEditedSQL\": \"\",\n        \"dimensionIndex\": 0,\n        \"default_group_by\": true,\n        \"custom_summary_types\": {},\n        \"join_paths_from_topic_name\": \"cloud_telemetry_daily\"\n      }\n    }\n  ]\n}\n```"
        },
        "type": "n8n-nodes-base.stickyNote",
        "position": [
          2320,
          848
        ],
        "typeVersion": 1,
        "id": "f82162af-6273-4199-a7eb-c8ce142e47bc",
        "name": "Sticky Note1"
      },
      {
        "parameters": {
          "mode": "raw",
          "jsonOutput": "{\n  \"headers\": {\n    \"host\": \"n8n-relayer-1.app.n8n.cloud\",\n    \"user-agent\": \"Zapier\",\n    \"content-length\": \"588\",\n    \"accept\": \"*/*\",\n    \"accept-encoding\": \"gzip, br\",\n    \"authorization\": \"Basic emFwaWVyOldNRXY4NDlmcGZGVlpYNkdoQjM2MGFmT3JmMWtfRFF2TlhfOFRSSjEzS1U=\",\n    \"cdn-loop\": \"cloudflare; loops=1; subreqs=1\",\n    \"cf-connecting-ip\": \"34.239.160.141\",\n    \"cf-ew-via\": \"15\",\n    \"cf-ipcountry\": \"US\",\n    \"cf-ray\": \"9c4f2158a64e12f0-IAD\",\n    \"cf-visitor\": \"{\\\"scheme\\\":\\\"https\\\"}\",\n    \"cf-worker\": \"n8n.cloud\",\n    \"content-type\": \"application/json; charset=utf-8\",\n    \"x-forwarded-for\": \"34.239.160.141, 104.23.213.139\",\n    \"x-forwarded-host\": \"n8n-relayer-1.app.n8n.cloud\",\n    \"x-forwarded-port\": \"443\",\n    \"x-forwarded-proto\": \"https\",\n    \"x-forwarded-server\": \"traefik-prod-users-gwc-72-585f59b6c7-kgpvq\",\n    \"x-is-trusted\": \"yes\",\n    \"x-real-ip\": \"34.239.160.141\"\n  },\n  \"params\": {},\n  \"query\": {},\n  \"body\": {\n    \"channel_id\": \"C0912AANW1L\",\n    \"channel_name\": \"data-eng-test-ai-channel\",\n    \"conversation_id\": \"C0912AANW1L\",\n    \"event_id\": \"1769145667.002600\",\n    \"event_timestamp\": \"2026-01-23T05:21:07.002Z\",\n    \"is_message_user_bot\": \"False\",\n    \"message_text\": \"total lake storage 1EobCyDEDUI9iE-N5Qs3Ga5m5mVyTXAXx\",\n    \"message_timestamp\": \"2026-01-23T03:46:45.456Z\",\n    \"message_ts\": \"1769140005.456469\",\n    \"message_user_email\": \"nkwok@cribl.io\",\n    \"message_user_first_name\": \"Nathan\",\n    \"message_user_id\": \"U06PVBEK9T6\",\n    \"message_user_last_name\": \"Kwok\",\n    \"message_user_name\": \"nathan_kwok\",\n    \"reaction\": \"magnifying-glass\",\n    \"reaction_user_id\": \"U06PVBEK9T6\",\n    \"team_domain\": \"cribl\",\n    \"team_id\": \"T3XQYAF26\"\n  },\n  \"webhookUrl\": \"https://n8n-relayer-1.app.n8n.cloud/webhook-test/board-deck-takeaways-ze5ubv1w\",\n  \"executionMode\": \"test\"\n}",
          "options": {}
        },
        "type": "n8n-nodes-base.set",
        "typeVersion": 3.4,
        "position": [
          304,
          1136
        ],
        "id": "65dd0666-a589-4db6-a143-fa6055ad77fa",
        "name": "Mimic Webhook Request"
      },
      {
        "parameters": {
          "operation": "get",
          "dataTableId": {
            "__rl": true,
            "value": "ZSd1pGH8J8ftEd2V",
            "mode": "list",
            "cachedResultName": "drill_queries",
            "cachedResultUrl": "/projects/2vHf2VxAoKk0WgJE/datatables/ZSd1pGH8J8ftEd2V"
          },
          "filters": {
            "conditions": [
              {
                "keyName": "document_query_name",
                "condition": "ilike",
                "keyValue": "={{ $('Input Extractor Agent').first().json.output.data.document_query_name }}"
              }
            ]
          },
          "returnAll": true
        },
        "type": "n8n-nodes-base.dataTable",
        "typeVersion": 1,
        "position": [
          3312,
          1120
        ],
        "id": "19352516-387d-45fe-8090-54bedd3922ae",
        "name": "Get Drill Queries"
      },
      {
        "parameters": {
          "options": {}
        },
        "type": "@n8n/n8n-nodes-langchain.lmChatGoogleGemini",
        "typeVersion": 1,
        "position": [
          1216,
          1360
        ],
        "id": "be98ecde-4ec7-4e77-9031-2824bb85ad5f",
        "name": "Google Gemini Chat Model",
        "credentials": {
          "googlePalmApi": {
            "id": "LKQbGwmroZKBfciU",
            "name": "Gemini - Cribl"
          }
        }
      },
      {
        "parameters": {
          "promptType": "define",
          "text": "=# Slack Message Input Extractor Agent\n\n## Role\nYou are a data extraction agent that parses Slack messages to extract structured information for board deck takeaway generation. Your job is to identify the document query name and Google Drive folder ID from user messages.\n\n## Input Format\nUsers will send Slack messages in flexible formats. The message may contain:\n- A document query name (or partial/fuzzy match)\n- A Google Drive folder ID (33-character alphanumeric string)\n- Additional text, instructions, or context (ignore this)\n\nThe order of elements may vary. Examples of valid inputs:\n- \"total lake storage 1EobCyDEDUI9iE-N5Qs3Ga5m5mVyTXAXx\"\n- \"1EobCyDEDUI9iE-N5Qs3Ga5m5mVyTXAXx total lake storage\"\n- \"Please process: cribl attrition folder: abc123def456ghi789jkl012mno345pqr\"\n- \"Q3 Won Stream 1EobCyDEDUI9iE-N5Qs3Ga5m5mVyTXAXx thanks!\"\n\n## Input to Process\n{{ $json.body.message_text }}\n\n## Document Query Names\nMatch the user's input to the closest matching name from this list:\n\n1. Top 10 Deals by New ARR\n2. Total RSM Headcount (Active)\n3. Count of Producing and Ramping Reps\n4. FY26 Rep Attainment\n5. Median and Avg Months to Producing\n6. Multi-Product Distribution [Filtered to Last day of Completed FQ]\n7. Multi-Product Adoption\n8. Stream Engagement (Software) by Geo Segment\n9. Total Lake Storage\n10. Searches Dispatched\n11. Product: Edge (Software)\n12. Product: Edge (Cloud)\n13. Cribl TTM Attrition\n14. Product: Cloud Data Diversity\n15. Product: Cloud Data Diversity Table\n16. CFDs Created vs Resolved\n17. Customer Found Defects vs. Customers QoQ\n18. Q3 Won & Q4 Open_Stream\n19. Q3 Won & Q4 Open_Edge\n20. Storage & Analysis Total Pipeline by Stage\n21. FEDRAMP Pipeline\n22. Headcount Growth Copy\n23. Incremental Cloud ARR and Customers Over Time\n24. Storage and Analysis ARR and Customers Over Time\n25. Product: Software Data Diversity Table\n26. Product: Software Data Diversity Chart\n27. Stream Engagement (Cloud) by Geo Segment\n28. Approved Deal Registrations by FQ\n29. New Logo Win Rate by Source\n30. Service Plan Breakdown New Business\n31. Service Plan Breakdown Incremental Business\n32. NBM Opps Created Copy\n33. CFDs Created by Component Copy\n34. Product: Cloud MAUs Copy\n35. Non-Stream ARR with Annualized\n\n## Fuzzy Matching Rules\nAlways return the closest match from the list above. Use these matching strategies:\n- Case-insensitive matching\n- Partial keyword matching (e.g., \"lake storage\"  \"Total Lake Storage\")\n- Common abbreviations (e.g., \"attrition\"  \"Cribl TTM Attrition\")\n- Ignore punctuation differences\n- Match key distinctive terms (e.g., \"Q3 Won Stream\"  \"Q3 Won & Q4 Open_Stream\")\n- \"FEDRAMP\" or \"fed ramp\"  \"FEDRAMP Pipeline\"\n- \"cloud maus\"  \"Product: Cloud MAUs Copy\"\n- \"headcount\"  \"Headcount Growth Copy\"\n- \"nbm opps\"  \"NBM Opps Created Copy\"\n\nIf multiple queries could match, prefer:\n1. Exact matches\n2. Matches with more keywords present\n3. The first match in the list order\n\n## Google Drive Folder ID Extraction\nA valid Google Drive folder ID is:\n- Exactly 33 characters long\n- Contains only alphanumeric characters, hyphens (-), and underscores (_)\n- Pattern: `[A-Za-z0-9_-]{33}`\n\nExtract the first valid folder ID found in the message.\n\n## Output Format\nAlways respond with valid JSON in this exact format:\n\n### Success Case\n```json\n{\n  \"success\": true,\n  \"error\": null,\n  \"data\": {\n    \"document_query_name\": \"Matched Query Name From List\",\n    \"google_drive_folder_id\": \"33_character_folder_id_here\"\n  }\n}\n```\n\n### Error Case\n```json\n{\n  \"success\": false,\n  \"error\": \"Description of what went wrong\",\n  \"data\": null\n}\n```\n\n## Error Handling\nReturn an error in these cases:\n\n1. **Missing folder ID**: No valid 33-character folder ID found\n   - Error: \"No valid Google Drive folder ID found. Expected a 33-character alphanumeric string.\"\n\n2. **No query match possible**: Cannot identify any document query from the message\n   - Error: \"Could not identify a document query name from the message.\"\n\n3. **Empty or invalid input**: Message is empty or contains no useful content\n   - Error: \"Empty or invalid input message.\"\n\n## Examples\n\n### Example 1: Standard input\nInput: \"total lake storage 1EobCyDEDUI9iE-N5Qs3Ga5m5mVyTXAXx\"\nOutput:\n```json\n{\n  \"success\": true,\n  \"error\": null,\n  \"data\": {\n    \"document_query_name\": \"Total Lake Storage\",\n    \"google_drive_folder_id\": \"1EobCyDEDUI9iE-N5Qs3Ga5m5mVyTXAXx\"\n  }\n}\n```\n\n### Example 2: Partial match with extra text\nInput: \"Please run cribl attrition report abc123def456ghi789jkl012mno345pqr thanks!\"\nOutput:\n```json\n{\n  \"success\": true,\n  \"error\": null,\n  \"data\": {\n    \"document_query_name\": \"Cribl TTM Attrition\",\n    \"google_drive_folder_id\": \"abc123def456ghi789jkl012mno345pqr\"\n  }\n}\n```\n\n### Example 3: Reversed order\nInput: \"1EobCyDEDUI9iE-N5Qs3Ga5m5mVyTXAXx Q3 Won Stream\"\nOutput:\n```json\n{\n  \"success\": true,\n  \"error\": null,\n  \"data\": {\n    \"document_query_name\": \"Q3 Won & Q4 Open_Stream\",\n    \"google_drive_folder_id\": \"1EobCyDEDUI9iE-N5Qs3Ga5m5mVyTXAXx\"\n  }\n}\n```\n\n### Example 4: Missing folder ID\nInput: \"total lake storage\"\nOutput:\n```json\n{\n  \"success\": false,\n  \"error\": \"No valid Google Drive folder ID found. Expected a 33-character alphanumeric string.\",\n  \"data\": null\n}\n```\n\n### Example 5: Invalid folder ID length\nInput: \"lake storage abc123\"\nOutput:\n```json\n{\n  \"success\": false,\n  \"error\": \"No valid Google Drive folder ID found. Expected a 33-character alphanumeric string.\",\n  \"data\": null\n}\n```\n\n### Example 6: Unrecognizable query\nInput: \"xyz123 1EobCyDEDUI9iE-N5Qs3Ga5m5mVyTXAXx\"\nOutput:\n```json\n{\n  \"success\": false,\n  \"error\": \"Could not identify a document query name from the message.\",\n  \"data\": null\n}\n```\n\n## Important Notes\n- Process only ONE query per message. If multiple queries appear to be mentioned, use the first/most prominent one.\n- Always return valid JSON with no additional text or explanation.\n- The `document_query_name` in the output must exactly match one of the 35 names in the list above.\n- Be generous with fuzzy matching - users may use informal names, abbreviations, or partial phrases.\n",
          "hasOutputParser": true,
          "options": {}
        },
        "type": "@n8n/n8n-nodes-langchain.agent",
        "typeVersion": 3,
        "position": [
          1264,
          1136
        ],
        "id": "eb7aebf7-8307-44ff-91e5-2b26db92b723",
        "name": "Input Extractor Agent"
      },
      {
        "parameters": {
          "jsonSchemaExample": "{\n  \"success\": true,\n  \"error\": null,\n  \"data\": {\n    \"document_query_name\": \"Matched Query Name From List\",\n    \"google_drive_folder_id\": \"33_character_folder_id_here\"\n  }\n}"
        },
        "type": "@n8n/n8n-nodes-langchain.outputParserStructured",
        "typeVersion": 1.3,
        "position": [
          1440,
          1360
        ],
        "id": "4d1c18ef-ac6d-45d6-8d4d-323f041631ea",
        "name": "Structured Output Parser1"
      },
      {
        "parameters": {
          "content": "## Example Output\n```\n[\n  {\n    \"output\": {\n      \"today\": \"2026-01-23\",\n      \"current_fiscal_quarter\": \"FY2026 Q3\",\n      \"previous_fiscal_quarter\": \"FY2026 Q2\",\n      \"current_fiscal_half\": \"FY2026 H2\",\n      \"previous_fiscal_half\": \"FY2026 H1\"\n    }\n  }\n]\n```"
        },
        "type": "n8n-nodes-base.stickyNote",
        "position": [
          2528,
          1584
        ],
        "typeVersion": 1,
        "id": "1331da98-aaf2-48c7-a75b-b850b768224e",
        "name": "Sticky Note4"
      },
      {
        "parameters": {
          "content": "## TODO\n- Modify permissions for the folder to share with the cribl email in slack input",
          "height": 208
        },
        "type": "n8n-nodes-base.stickyNote",
        "position": [
          4784,
          1616
        ],
        "typeVersion": 1,
        "id": "8dc7f025-9cef-4f86-9278-e4d352662333",
        "name": "Sticky Note3"
      },
      {
        "parameters": {
          "assignments": {
            "assignments": [
              {
                "id": "fa236bc3-f105-4270-adb5-2552a04a69e5",
                "name": "google_drive_folder_id",
                "value": "={{ $('Input Extractor Agent').first().json.output.data.google_drive_folder_id }}",
                "type": "string"
              },
              {
                "id": "230fa6da-2b61-420f-b2d7-10d6cacf6c5d",
                "name": "current_fiscal_quarter",
                "value": "={{ $('Fiscal Quarter Extractor').first().json.output.current_fiscal_quarter }}",
                "type": "string"
              },
              {
                "id": "b0c57526-3be8-49d0-8967-0af6a965063d",
                "name": "previous_fiscal_quarter",
                "value": "={{ $('Fiscal Quarter Extractor').first().json.output.previous_fiscal_quarter }}",
                "type": "string"
              },
              {
                "id": "80a8a4e9-2554-474e-aada-25bfdbddb519",
                "name": "default_user_id",
                "value": "={{ $('Global Vars').first().json.omni_api.omni_user_id }}",
                "type": "string"
              }
            ]
          },
          "includeOtherFields": true,
          "options": {}
        },
        "type": "n8n-nodes-base.set",
        "typeVersion": 3.4,
        "position": [
          4032,
          1120
        ],
        "id": "cf51b536-715d-46c4-a34c-312e60267f44",
        "name": "Loop UUID Item1"
      },
      {
        "parameters": {
          "workflowId": {
            "__rl": true,
            "value": "mDJHNy6DrprAll2W",
            "mode": "list",
            "cachedResultUrl": "/workflow/mDJHNy6DrprAll2W",
            "cachedResultName": "Board_Deck_Document_Query_Analysis_Subworkflow"
          },
          "workflowInputs": {
            "mappingMode": "defineBelow",
            "value": {
              "input": "={{ $json }}"
            },
            "matchingColumns": [
              "input"
            ],
            "schema": [
              {
                "id": "input",
                "displayName": "input",
                "required": false,
                "defaultMatch": false,
                "display": true,
                "canBeUsedToMatch": true,
                "type": "object",
                "removed": false
              }
            ],
            "attemptToConvertTypes": false,
            "convertFieldsToString": true
          },
          "options": {
            "waitForSubWorkflow": true
          }
        },
        "type": "n8n-nodes-base.executeWorkflow",
        "typeVersion": 1.3,
        "position": [
          4352,
          1120
        ],
        "id": "dd0dd440-bd92-40be-955a-d37f4839e492",
        "name": "Call 'Board_Deck_Document_Query_Analysis_Subworkflow'1",
        "onError": "continueErrorOutput"
      },
      {
        "parameters": {
          "conditions": {
            "options": {
              "caseSensitive": true,
              "leftValue": "",
              "typeValidation": "strict",
              "version": 3
            },
            "conditions": [
              {
                "id": "a3d14797-ad7e-4f74-8c4b-108f530a0b3d",
                "leftValue": "={{ $json.output.success }}",
                "rightValue": false,
                "operator": {
                  "type": "boolean",
                  "operation": "true",
                  "singleValue": true
                }
              }
            ],
            "combinator": "and"
          },
          "options": {}
        },
        "type": "n8n-nodes-base.if",
        "typeVersion": 2.3,
        "position": [
          1824,
          1136
        ],
        "id": "76eff01d-7c11-4bc6-acd9-fa90325a2b9b",
        "name": "Check Input Extractor Success"
      },
      {
        "parameters": {
          "method": "POST",
          "url": "={{ $('Global Vars').first().json.zapier_slack_response_webhook.webhook_url }}",
          "sendHeaders": true,
          "specifyHeaders": "json",
          "jsonHeaders": "{\n  \"Content-Type\": \"application/json\"\n}",
          "sendBody": true,
          "specifyBody": "json",
          "jsonBody": "={\n  \"body\": {{ $('Global Vars').first().json.body.toJsonString() }},\n  \"message\": \"{{ $('Input Extractor Agent').item.json.output.error }}\"\n}",
          "options": {}
        },
        "type": "n8n-nodes-base.httpRequest",
        "typeVersion": 4.2,
        "position": [
          2064,
          1424
        ],
        "id": "fc4d3886-b382-4280-ad2e-f56df255357e",
        "name": "Send Slack Failure Message",
        "alwaysOutputData": false,
        "onError": "continueRegularOutput"
      },
      {
        "parameters": {
          "method": "POST",
          "url": "={{ $('Global Vars').first().json.zapier_slack_response_webhook.webhook_url }}",
          "sendHeaders": true,
          "specifyHeaders": "json",
          "jsonHeaders": "{\n  \"Content-Type\": \"application/json\"\n}",
          "sendBody": true,
          "specifyBody": "json",
          "jsonBody": "={\n  \"body\": {{ $('Global Vars').first().json.body.toJsonString() }},\n  \"message\": \"{{ $json.documentId }}\"\n}",
          "options": {}
        },
        "type": "n8n-nodes-base.httpRequest",
        "typeVersion": 4.2,
        "position": [
          4800,
          1024
        ],
        "id": "6fe75804-85e6-40e5-935d-16307263e11c",
        "name": "Send Slack Success Message",
        "alwaysOutputData": false,
        "onError": "continueRegularOutput"
      },
      {
        "parameters": {
          "mode": "raw",
          "jsonOutput": "{\n  \"dashboard_discovery_model_version\": \"1.0\",\n  \"snowflake_base_url\": \"https://ml16699-hya89079.snowflakecomputing.com\",\n  \"omni_documents_search_service\": {\n    \"snowflake_database\": \"ANALYTICS\",\n    \"snowflake_schema\": \"OMNI\",\n    \"service_name\": \"omni_documents_search_service\"\n  },\n  \"omni_api\": {\n    \"omni_base_url\": \"https://cribl.omniapp.co\",\n    \"model_id\": \"4345b118-cbbe-4f7c-a705-ea0aa8da57c0\"\n  },\n  \"snowflake_tables\": {\n    \"omni_documents\": {\n      \"snowflake_database\": \"ANALYTICS\",\n      \"snowflake_schema\": \"OMNI\",\n      \"table_name\": \"DOCUMENTS\"\n    },\n    \"dashboard_recommendations\": {\n      \"snowflake_database\": \"RAW\",\n      \"snowflake_schema\": \"OMNI\",\n      \"table_name\": \"DASHBOARD_RECOMMENDATIONS\"\n    }\n  },\n  \"default_user_id\": \"893ce348-0fb2-44ac-b0f8-06521a341580\"\n}",
          "includeOtherFields": true,
          "include": "except",
          "excludeFields": "headers,params,query,webhookUrl,executionMode",
          "options": {}
        },
        "id": "globalVars1",
        "name": "Global Vars2",
        "type": "n8n-nodes-base.set",
        "typeVersion": 3.4,
        "position": [
          832,
          1440
        ],
        "disabled": true
      },
      {
        "parameters": {
          "workflowId": {
            "__rl": true,
            "value": "OFpD7aepKHcHCvqz",
            "mode": "list",
            "cachedResultUrl": "/workflow/OFpD7aepKHcHCvqz",
            "cachedResultName": "Global_Vars"
          },
          "workflowInputs": {
            "mappingMode": "defineBelow",
            "value": {},
            "matchingColumns": [],
            "schema": [],
            "attemptToConvertTypes": false,
            "convertFieldsToString": true
          },
          "options": {}
        },
        "type": "n8n-nodes-base.executeWorkflow",
        "typeVersion": 1.3,
        "position": [
          816,
          1136
        ],
        "id": "8dccd44e-14c1-46b8-a383-70da5eb9fb1e",
        "name": "Global Vars"
      },
      {
        "parameters": {
          "options": {}
        },
        "type": "@n8n/n8n-nodes-langchain.lmChatGoogleGemini",
        "typeVersion": 1,
        "position": [
          2256,
          1296
        ],
        "id": "7f083a0e-ae13-4aae-9c85-12fbca217c68",
        "name": "Google Gemini Chat Model1",
        "credentials": {
          "googlePalmApi": {
            "id": "LKQbGwmroZKBfciU",
            "name": "Gemini - Cribl"
          }
        }
      }
    ],
    "connections": {
      "When clicking 'Execute workflow'": {
        "main": [
          [
            {
              "node": "Mimic Webhook Request",
              "type": "main",
              "index": 0
            }
          ]
        ]
      },
      "Load Drill Queries": {
        "main": [
          []
        ]
      },
      "Loop Over UUIDs": {
        "main": [
          [],
          [
            {
              "node": "Loop UUID Item",
              "type": "main",
              "index": 0
            }
          ]
        ]
      },
      "Prepare UUID Loop Data": {
        "main": [
          [
            {
              "node": "Loop Over UUIDs",
              "type": "main",
              "index": 0
            }
          ]
        ]
      },
      "Get Drill Queries Count": {
        "main": [
          [
            {
              "node": "Loop UUID Item1",
              "type": "main",
              "index": 0
            }
          ]
        ]
      },
      "Structured Output Parser": {
        "ai_outputParser": [
          [
            {
              "node": "Fiscal Quarter Extractor",
              "type": "ai_outputParser",
              "index": 0
            }
          ]
        ]
      },
      "Fiscal Quarter Extractor": {
        "main": [
          [
            {
              "node": "Get Drill Queries",
              "type": "main",
              "index": 0
            }
          ]
        ]
      },
      "o4-mini": {
        "ai_languageModel": [
          []
        ]
      },
      "Trigger": {
        "main": [
          [
            {
              "node": "Respond to Webhook",
              "type": "main",
              "index": 0
            }
          ]
        ]
      },
      "Respond to Webhook": {
        "main": [
          [
            {
              "node": "Global Vars",
              "type": "main",
              "index": 0
            }
          ]
        ]
      },
      "Create folder": {
        "main": [
          []
        ]
      },
      "Loop UUID Item": {
        "main": [
          [
            {
              "node": "Call 'Board_Deck_Document_Query_Analysis_Subworkflow'",
              "type": "main",
              "index": 0
            }
          ]
        ]
      },
      "Call 'Board_Deck_Document_Query_Analysis_Subworkflow'": {
        "main": [
          [
            {
              "node": "Loop Over UUIDs",
              "type": "main",
              "index": 0
            }
          ]
        ]
      },
      "Mimic Webhook Request": {
        "main": [
          [
            {
              "node": "Global Vars",
              "type": "main",
              "index": 0
            }
          ]
        ]
      },
      "Get Drill Queries": {
        "main": [
          [
            {
              "node": "Get Drill Queries Count",
              "type": "main",
              "index": 0
            }
          ]
        ]
      },
      "Google Gemini Chat Model": {
        "ai_languageModel": [
          [
            {
              "node": "Input Extractor Agent",
              "type": "ai_languageModel",
              "index": 0
            }
          ]
        ]
      },
      "Input Extractor Agent": {
        "main": [
          [
            {
              "node": "Check Input Extractor Success",
              "type": "main",
              "index": 0
            }
          ]
        ]
      },
      "Structured Output Parser1": {
        "ai_outputParser": [
          [
            {
              "node": "Input Extractor Agent",
              "type": "ai_outputParser",
              "index": 0
            }
          ]
        ]
      },
      "Loop UUID Item1": {
        "main": [
          [
            {
              "node": "Call 'Board_Deck_Document_Query_Analysis_Subworkflow'1",
              "type": "main",
              "index": 0
            }
          ]
        ]
      },
      "Check Input Extractor Success": {
        "main": [
          [
            {
              "node": "Fiscal Quarter Extractor",
              "type": "main",
              "index": 0
            }
          ],
          [
            {
              "node": "Send Slack Failure Message",
              "type": "main",
              "index": 0
            }
          ]
        ]
      },
      "Call 'Board_Deck_Document_Query_Analysis_Subworkflow'1": {
        "main": [
          [
            {
              "node": "Send Slack Success Message",
              "type": "main",
              "index": 0
            }
          ]
        ]
      },
      "Global Vars2": {
        "main": [
          []
        ]
      },
      "Global Vars": {
        "main": [
          [
            {
              "node": "Input Extractor Agent",
              "type": "main",
              "index": 0
            }
          ]
        ]
      },
      "Google Gemini Chat Model1": {
        "ai_languageModel": [
          [
            {
              "node": "Fiscal Quarter Extractor",
              "type": "ai_languageModel",
              "index": 0
            }
          ]
        ]
      }
    },
    "authors": "Nathan K",
    "name": null,
    "description": null
  },
  "tags": []
}