{
  "updatedAt": "2025-11-21T04:33:38.000Z",
  "createdAt": "2025-11-15T23:39:49.140Z",
  "id": "biW8aKwAI78Eo4Gw",
  "name": "PDF_Processing_Pipeline",
  "active": false,
  "isArchived": false,
  "nodes": [
    {
      "parameters": {
        "rule": {
          "interval": [
            {
              "triggerAtHour": 9
            }
          ]
        }
      },
      "id": "c214b04f-b039-4274-9501-5418fb697e16",
      "name": "Set Schedule",
      "type": "n8n-nodes-base.scheduleTrigger",
      "typeVersion": 1.2,
      "position": [
        -9904,
        4464
      ]
    },
    {
      "parameters": {
        "conditions": {
          "options": {
            "caseSensitive": true,
            "leftValue": "",
            "typeValidation": "strict",
            "version": 2
          },
          "conditions": [
            {
              "id": "id-1",
              "leftValue": "={{ $json.gemini_file_store_name }}",
              "operator": {
                "type": "string",
                "operation": "notEmpty"
              }
            }
          ],
          "combinator": "and"
        },
        "options": {}
      },
      "id": "60dee38e-ac2d-46e3-9c21-458a6af011fc",
      "name": "IF",
      "type": "n8n-nodes-base.if",
      "typeVersion": 2.2,
      "position": [
        -9120,
        4464
      ]
    },
    {
      "parameters": {
        "resource": "fileFolder",
        "searchMethod": "query",
        "queryString": "mimeType='application/pdf'",
        "limit": 100,
        "filter": {
          "folderId": {
            "__rl": true,
            "value": "1tWCIBgXf1072fCB2o4g2M2kzPKnnXmFD",
            "mode": "list",
            "cachedResultName": "ingest",
            "cachedResultUrl": "https://drive.google.com/drive/folders/1tWCIBgXf1072fCB2o4g2M2kzPKnnXmFD"
          }
        },
        "options": {}
      },
      "id": "18d75be6-1134-416b-819e-05e2d3e02e14",
      "name": "Search files and folders",
      "type": "n8n-nodes-base.googleDrive",
      "typeVersion": 3,
      "position": [
        -8672,
        4448
      ],
      "credentials": {
        "googleDriveOAuth2Api": {
          "id": "XOPXkOVbKhQILqsj",
          "name": "Google Drive"
        }
      }
    },
    {
      "parameters": {
        "options": {}
      },
      "id": "c0f19397-d7cf-43d0-8e93-8da1bc8d2573",
      "name": "Loop Over Items",
      "type": "n8n-nodes-base.splitInBatches",
      "typeVersion": 3,
      "position": [
        -8144,
        4448
      ]
    },
    {
      "parameters": {
        "operation": "download",
        "fileId": {
          "__rl": true,
          "mode": "id",
          "value": "={{ $('Search files and folders').item.json.id }}"
        },
        "options": {}
      },
      "id": "426fd173-aa8b-4d3a-b2a6-d54904b1294d",
      "name": "Download file",
      "type": "n8n-nodes-base.googleDrive",
      "typeVersion": 3,
      "position": [
        -7920,
        4464
      ],
      "credentials": {
        "googleDriveOAuth2Api": {
          "id": "XOPXkOVbKhQILqsj",
          "name": "Google Drive"
        }
      }
    },
    {
      "parameters": {
        "conditions": {
          "options": {
            "caseSensitive": true,
            "leftValue": "",
            "typeValidation": "loose",
            "version": 2
          },
          "conditions": [
            {
              "id": "id-1",
              "leftValue": "={{ $json }}",
              "operator": {
                "type": "object",
                "operation": "empty",
                "singleValue": true
              }
            }
          ],
          "combinator": "and"
        },
        "looseTypeValidation": true,
        "options": {}
      },
      "id": "3f2638bc-6332-41d0-9aa9-a0af02d6a25e",
      "name": "New Doc?",
      "type": "n8n-nodes-base.if",
      "typeVersion": 2.2,
      "position": [
        -6608,
        4464
      ],
      "notesInFlow": true,
      "notes": "If something returned, then we have processed the same file_id before.\nTrue means we have not seen file with this file_id before.\nFalse means we have seen file with this file_id before."
    },
    {
      "parameters": {
        "conditions": {
          "options": {
            "caseSensitive": true,
            "leftValue": "",
            "typeValidation": "strict",
            "version": 2
          },
          "conditions": [
            {
              "id": "id-1",
              "leftValue": "={{ $json }}",
              "operator": {
                "type": "object",
                "operation": "notEmpty",
                "singleValue": true
              }
            }
          ],
          "combinator": "and"
        },
        "options": {}
      },
      "id": "c6c7045c-8c6c-43b8-be2e-563d1185deec",
      "name": "Identical Content Exists?",
      "type": "n8n-nodes-base.if",
      "typeVersion": 2.2,
      "position": [
        -5840,
        4000
      ],
      "notesInFlow": true,
      "alwaysOutputData": false,
      "notes": "Does a different id file with the same contents exist?\nTrue means different file with same content exists. False means content is new."
    },
    {
      "parameters": {
        "conditions": {
          "options": {
            "caseSensitive": true,
            "leftValue": "",
            "typeValidation": "strict",
            "version": 2
          },
          "conditions": [
            {
              "id": "id-1",
              "leftValue": "={{ $('Find file by file_id').item.json.document_content_hash }}",
              "rightValue": "={{ $('Document Content Hash').item.json.document_content_hash }}",
              "operator": {
                "type": "string",
                "operation": "notEquals"
              }
            }
          ],
          "combinator": "and"
        },
        "options": {}
      },
      "id": "d160b5e1-f738-4320-b85d-abc5e13fde2a",
      "name": "Has it Changed?",
      "type": "n8n-nodes-base.if",
      "typeVersion": 2.2,
      "position": [
        -5840,
        4480
      ],
      "notesInFlow": true,
      "alwaysOutputData": false,
      "onError": "continueRegularOutput",
      "notes": "Compare db's document_content_hash to this workflow's document_content_hash. \nTrue means same document. False means different versions of \"same\" document."
    },
    {
      "parameters": {
        "jsCode": "// Log that the file is being skipped (no changes detected)\nfor (const item of $input.all()) {\n  console.log(`Skipping file: ${item.json.name || 'Unknown'} - No changes detected`);\n}\n\n// Return all input items unchanged\nreturn $input.all();"
      },
      "id": "15fbbb90-bfb8-48e4-9cc0-745a547237e4",
      "name": "Do Nothing",
      "type": "n8n-nodes-base.code",
      "typeVersion": 2,
      "position": [
        -5232,
        3280
      ]
    },
    {
      "parameters": {
        "operation": "move",
        "fileId": {
          "__rl": true,
          "value": "={{ $json.document_id }}",
          "mode": "id"
        },
        "driveId": {
          "__rl": true,
          "value": "My Drive",
          "mode": "list",
          "cachedResultName": "My Drive",
          "cachedResultUrl": "https://drive.google.com/drive/my-drive"
        },
        "folderId": {
          "__rl": true,
          "value": "1cRRMOtEaNWgFeNnzhwkKBzkkhqNcH1gO",
          "mode": "list",
          "cachedResultName": "archive",
          "cachedResultUrl": "https://drive.google.com/drive/folders/1cRRMOtEaNWgFeNnzhwkKBzkkhqNcH1gO"
        }
      },
      "id": "8e5fb666-d494-4055-8209-2592275f35ef",
      "name": "Archive Unchanged File",
      "type": "n8n-nodes-base.googleDrive",
      "typeVersion": 3,
      "position": [
        -5008,
        3280
      ],
      "credentials": {
        "googleDriveOAuth2Api": {
          "id": "XOPXkOVbKhQILqsj",
          "name": "Google Drive"
        }
      },
      "onError": "continueRegularOutput",
      "notes": "TODO: Set archive folder ID"
    },
    {
      "parameters": {
        "method": "DELETE",
        "url": "=https://generativelanguage.googleapis.com/v1beta/{{ $('Search Record Manager').item.json.file_id }}",
        "authentication": "genericCredentialType",
        "genericAuthType": "httpHeaderAuth",
        "options": {}
      },
      "id": "4f73f19d-9609-470f-996e-1bf5309792b9",
      "name": "Delete Old from Gemini",
      "type": "n8n-nodes-base.httpRequest",
      "typeVersion": 4.3,
      "position": [
        -5344,
        4672
      ],
      "credentials": {
        "httpHeaderAuth": {
          "id": "WQrHDqFW3lnlPoJG",
          "name": "Gemini API"
        }
      },
      "disabled": true,
      "notes": "Delete outdated version from Gemini"
    },
    {
      "parameters": {
        "operation": "executeQuery",
        "query": "DELETE FROM gemini_record_manager WHERE document_id = $1",
        "options": {}
      },
      "id": "44215034-981b-4286-be12-c8bc57c4f7ec",
      "name": "Delete Old Record",
      "type": "n8n-nodes-base.postgres",
      "typeVersion": 2.6,
      "position": [
        -5120,
        4672
      ],
      "disabled": true
    },
    {
      "parameters": {
        "jsCode": "const items = $input.all();\nconst downloadFileItems = $(\"Download file\").all();\n\nfor (const [index, item] of items.entries()) {\n  item.binary = downloadFileItems[index]?.binary;\n}\n\nreturn items;"
      },
      "id": "0c32f510-66e0-40d0-9f86-e2feb06d45c6",
      "name": "Reload Binary for PDF",
      "type": "n8n-nodes-base.code",
      "typeVersion": 2,
      "position": [
        -4688,
        4512
      ],
      "notes": "Binary reload required due to n8n limitation"
    },
    {
      "parameters": {
        "conditions": {
          "options": {
            "caseSensitive": true,
            "leftValue": "",
            "typeValidation": "strict",
            "version": 2
          },
          "conditions": [
            {
              "id": "id-1",
              "leftValue": "={{ $binary }}",
              "operator": {
                "type": "object",
                "operation": "exists"
              }
            },
            {
              "id": "id-2",
              "leftValue": "={{ $binary.data.fileSize.split(\" \")[0].toNumber() }}",
              "rightValue": 0,
              "operator": {
                "type": "number",
                "operation": "gt"
              }
            }
          ],
          "combinator": "and"
        },
        "options": {}
      },
      "id": "7fe96413-2762-4a4c-8496-c32799cc5300",
      "name": "IF1",
      "type": "n8n-nodes-base.if",
      "typeVersion": 2.2,
      "position": [
        -4464,
        4512
      ]
    },
    {
      "parameters": {
        "assignments": {
          "assignments": [
            {
              "id": "id-1",
              "name": "document_type",
              "value": "<__PLACEHOLDER_VALUE__Document Type (e.g., invoice, contract, report)__>",
              "type": "string"
            },
            {
              "id": "id-2",
              "name": "period",
              "value": "<__PLACEHOLDER_VALUE__Period (e.g., 2024-Q1, January 2024)__>",
              "type": "string"
            },
            {
              "id": "id-3",
              "name": "entities",
              "value": "[\"<__PLACEHOLDER_VALUE__Entity 1__>\", \"<__PLACEHOLDER_VALUE__Entity 2__>\"]",
              "type": "array"
            },
            {
              "id": "id-4",
              "name": "categories",
              "value": "[\"<__PLACEHOLDER_VALUE__Category 1__>\", \"<__PLACEHOLDER_VALUE__Category 2__>\"]",
              "type": "array"
            }
          ]
        },
        "includeOtherFields": true,
        "options": {}
      },
      "id": "93099eb1-7530-4b21-b188-8f0d0da1abb3",
      "name": "Custom Metadata (Manual)",
      "type": "n8n-nodes-base.set",
      "typeVersion": 3.4,
      "position": [
        -3488,
        3552
      ],
      "disabled": true
    },
    {
      "parameters": {
        "options": {
          "temperature": 0.1
        }
      },
      "id": "10ea86ce-a71c-4262-ad3b-a8053792c88a",
      "name": "Google Gemini Chat Model",
      "type": "@n8n/n8n-nodes-langchain.lmChatGoogleGemini",
      "typeVersion": 1,
      "position": [
        -3920,
        3776
      ],
      "credentials": {
        "googlePalmApi": {
          "id": "LKQbGwmroZKBfciU",
          "name": "Gemini - Cribl"
        }
      },
      "disabled": true
    },
    {
      "parameters": {
        "jsonSchemaExample": "{\n  \"document_title\": \"ABC Elementary School District General Obligation Bonds\",\n  \"school_district_name\": \"ABC Elementary School District\",\n  \"county\": \"San Diego County\",\n  \"state\": \"CA\",\n  \"overall_rating\": \"AA-\",\n  \"overall_rating_agency\": \"S&P\",\n  \"overall_due_date\": \"2045-08-01\",\n  \"bond_issues\": [\n    {\n      \"bond_amount\": 56000000,\n      \"election_year\": \"2024\",\n      \"bond_type\": \"General Obligation Bonds\",\n      \"bond_series\": \"A\",\n      \"due_date\": \"2045-08-01\"\n    },\n    {\n      \"bond_amount\": 22000000,\n      \"election_year\": \"2016\",\n      \"bond_type\": \"2025 Refunding General\",\n      \"bond_series\": \"D\",\n      \"due_date\": \"2045-08-01\"\n    }\n  ]\n}"
      },
      "id": "b9210b09-29ad-4af7-bf40-184c4e74390d",
      "name": "Structured Output Parser",
      "type": "@n8n/n8n-nodes-langchain.outputParserStructured",
      "typeVersion": 1.3,
      "position": [
        -3776,
        3776
      ],
      "disabled": true
    },
    {
      "parameters": {
        "method": "POST",
        "url": "https://generativelanguage.googleapis.com/upload/v1beta/files",
        "authentication": "genericCredentialType",
        "genericAuthType": "httpHeaderAuth",
        "sendHeaders": true,
        "headerParameters": {
          "parameters": [
            {
              "name": "X-Goog-Upload-Protocol",
              "value": "resumable"
            },
            {
              "name": "X-Goog-Upload-Command",
              "value": "start"
            },
            {
              "name": "X-Goog-Upload-Header-Content-Length",
              "value": "={{ $json.file_size }}"
            },
            {
              "name": "X-Goog-Upload-Header-Content-Type",
              "value": "application/pdf"
            },
            {
              "name": "Content-Type",
              "value": "application/json"
            }
          ]
        },
        "sendBody": true,
        "specifyBody": "json",
        "jsonBody": "={\n  \"file\": {\n    \"display_name\": \"={{ $json.file_name }}\",\n    \"custom_metadata\": \"={{ $json.metadata }}\"\n  }\n}",
        "options": {}
      },
      "id": "9b474dc2-370a-49ea-b74c-f53a7a9a7ecb",
      "name": "Set File Parameters & Get Upload URL",
      "type": "n8n-nodes-base.httpRequest",
      "typeVersion": 4.3,
      "position": [
        -2928,
        3552
      ],
      "credentials": {
        "httpHeaderAuth": {
          "id": "WQrHDqFW3lnlPoJG",
          "name": "Gemini API"
        }
      },
      "disabled": true
    },
    {
      "parameters": {
        "mode": "runOnceForEachItem",
        "jsCode": "// Reload binary from Google Drive for upload (second reload)\nconst fileId = $json.id;\n\n// Re-download file\nconst requestOptions = {\n  method: 'GET',\n  url: `https://www.googleapis.com/drive/v3/files/${fileId}?alt=media`,\n  encoding: null,\n  json: false\n};\n\nconst binaryData = await this.helpers.httpRequestWithAuthentication.call(\n  this,\n  'googleDriveOAuth2Api',\n  requestOptions\n);\n\nreturn {\n  json: $json,\n  binary: {\n    data: await this.helpers.prepareBinaryData(\n      Buffer.from(binaryData),\n      $json.file_name\n    )\n  }\n};"
      },
      "id": "7f4bdd09-6e47-47a4-a532-0a0f4a4b6296",
      "name": "Reload Binary for Upload",
      "type": "n8n-nodes-base.code",
      "typeVersion": 2,
      "position": [
        -2608,
        3552
      ],
      "disabled": true
    },
    {
      "parameters": {
        "method": "POST",
        "url": "={{ $('Set File Parameters & Get Upload URL').item.json.uploadUrl }}",
        "authentication": "genericCredentialType",
        "genericAuthType": "httpHeaderAuth",
        "sendHeaders": true,
        "headerParameters": {
          "parameters": [
            {
              "name": "X-Goog-Upload-Offset",
              "value": "0"
            },
            {
              "name": "X-Goog-Upload-Command",
              "value": "upload, finalize"
            },
            {
              "name": "Content-Type",
              "value": "application/pdf"
            }
          ]
        },
        "sendBody": true,
        "contentType": "binaryData",
        "inputDataFieldName": "data",
        "options": {}
      },
      "id": "ee9520b8-a3c2-4094-9649-fb3e37efad18",
      "name": "Upload to File Search Store",
      "type": "n8n-nodes-base.httpRequest",
      "typeVersion": 4.3,
      "position": [
        -2320,
        3552
      ],
      "credentials": {
        "httpHeaderAuth": {
          "id": "WQrHDqFW3lnlPoJG",
          "name": "Gemini API"
        }
      },
      "disabled": true
    },
    {
      "parameters": {
        "amount": 3
      },
      "id": "5ab7b75d-0a34-444b-a97b-896bb8723eb3",
      "name": "Initial Wait",
      "type": "n8n-nodes-base.wait",
      "typeVersion": 1.1,
      "position": [
        -2064,
        3552
      ],
      "webhookId": "65ffbc87-56e5-48ba-bc9d-5e128ced5081",
      "disabled": true
    },
    {
      "parameters": {
        "url": "=https://generativelanguage.googleapis.com/v1beta/files/{{ $json.file_id }}",
        "sendHeaders": true,
        "headerParameters": {
          "parameters": [
            {
              "name": "x-goog-api-key",
              "value": "<__PLACEHOLDER_VALUE__Your Gemini API Key__>"
            }
          ]
        },
        "options": {}
      },
      "id": "f0f653ae-a748-46d7-b6a2-f1b2827d160e",
      "name": "Check if Processed",
      "type": "n8n-nodes-base.httpRequest",
      "typeVersion": 4.3,
      "position": [
        -1808,
        3552
      ],
      "disabled": true
    },
    {
      "parameters": {
        "operation": "move",
        "fileId": {
          "__rl": true,
          "value": "={{ $('Download file').item.json.id }}",
          "mode": "id"
        },
        "driveId": {
          "__rl": true,
          "value": "My Drive",
          "mode": "list",
          "cachedResultName": "My Drive",
          "cachedResultUrl": "https://drive.google.com/drive/my-drive"
        },
        "folderId": {
          "__rl": true,
          "value": "1cRRMOtEaNWgFeNnzhwkKBzkkhqNcH1gO",
          "mode": "list",
          "cachedResultName": "archive",
          "cachedResultUrl": "https://drive.google.com/drive/folders/1cRRMOtEaNWgFeNnzhwkKBzkkhqNcH1gO"
        }
      },
      "id": "0dcccf07-7c70-4346-a6d8-1450d27b1551",
      "name": "Archive Processed File",
      "type": "n8n-nodes-base.googleDrive",
      "typeVersion": 3,
      "position": [
        -1072,
        5184
      ],
      "credentials": {
        "googleDriveOAuth2Api": {
          "id": "XOPXkOVbKhQILqsj",
          "name": "Google Drive"
        }
      }
    },
    {
      "parameters": {
        "mode": "raw",
        "jsonOutput": "{\n  \"gemini_file_store_name\": \"fileSearchStores/docparsing-q2d4v79x1uw7\"\n}\n",
        "includeOtherFields": true,
        "options": {}
      },
      "id": "83acb5c9-2191-46d9-9f95-532c65cd6709",
      "name": "Global Vars",
      "type": "n8n-nodes-base.set",
      "typeVersion": 3.4,
      "position": [
        -9408,
        4464
      ]
    },
    {
      "parameters": {
        "dataTableId": {
          "__rl": true,
          "value": "IlGavx32TAXCSixq",
          "mode": "list",
          "cachedResultName": "workflow_lock",
          "cachedResultUrl": "/projects/2vHf2VxAoKk0WgJE/datatables/IlGavx32TAXCSixq"
        },
        "columns": {
          "mappingMode": "defineBelow",
          "value": {
            "workflow_id": "={{ $workflow.id }}",
            "workflow_name": "={{ $workflow.name }}",
            "execution_id": "={{ $execution.id }}"
          },
          "matchingColumns": [],
          "schema": [
            {
              "id": "workflow_id",
              "displayName": "workflow_id",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": false
            },
            {
              "id": "workflow_name",
              "displayName": "workflow_name",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": false
            },
            {
              "id": "execution_id",
              "displayName": "execution_id",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "number",
              "readOnly": false,
              "removed": false
            }
          ],
          "attemptToConvertTypes": false,
          "convertFieldsToString": false
        },
        "options": {}
      },
      "type": "n8n-nodes-base.dataTable",
      "typeVersion": 1,
      "position": [
        -8400,
        4272
      ],
      "id": "420b690c-65c0-4324-91d3-05a71ba06ff4",
      "name": "Obtain Lock"
    },
    {
      "parameters": {
        "operation": "deleteRows",
        "dataTableId": {
          "__rl": true,
          "value": "IlGavx32TAXCSixq",
          "mode": "list",
          "cachedResultName": "workflow_lock",
          "cachedResultUrl": "/projects/2vHf2VxAoKk0WgJE/datatables/IlGavx32TAXCSixq"
        },
        "matchType": "allConditions",
        "filters": {
          "conditions": [
            {
              "keyName": "workflow_id",
              "keyValue": "={{ $workflow.id }}"
            }
          ]
        },
        "options": {}
      },
      "type": "n8n-nodes-base.dataTable",
      "typeVersion": 1,
      "position": [
        -7760,
        4176
      ],
      "id": "e3efdb1e-46ef-46b9-96b0-861124fb9c0d",
      "name": "Clear Lock"
    },
    {
      "parameters": {
        "operation": "rowNotExists",
        "dataTableId": {
          "__rl": true,
          "value": "IlGavx32TAXCSixq",
          "mode": "list",
          "cachedResultName": "workflow_lock",
          "cachedResultUrl": "/projects/2vHf2VxAoKk0WgJE/datatables/IlGavx32TAXCSixq"
        },
        "matchType": "allConditions",
        "filters": {
          "conditions": [
            {
              "keyName": "workflow_id",
              "keyValue": "={{ $workflow.id }}"
            }
          ]
        }
      },
      "type": "n8n-nodes-base.dataTable",
      "typeVersion": 1,
      "position": [
        -9632,
        4464
      ],
      "id": "a1f23a19-3871-4e6b-85f7-7fe1b756c283",
      "name": "Check if lock exists"
    },
    {
      "parameters": {
        "type": "SHA256",
        "value": "={{ $('Download file').item.json.name }}",
        "dataPropertyName": "document_name_hash"
      },
      "type": "n8n-nodes-base.crypto",
      "typeVersion": 1,
      "position": [
        -7392,
        4464
      ],
      "id": "568fa631-5a11-4bb4-9199-094d4b041f59",
      "name": "Document Name Hash"
    },
    {
      "parameters": {
        "type": "SHA256",
        "binaryData": true,
        "dataPropertyName": "document_content_hash"
      },
      "type": "n8n-nodes-base.crypto",
      "typeVersion": 1,
      "position": [
        -7680,
        4464
      ],
      "id": "e5a084fa-63f6-438e-85f3-6e65601bfada",
      "name": "Document Content Hash"
    },
    {
      "parameters": {
        "content": "### TODO\ncheck if id changes with new file version upload. Could use that instead of name hash"
      },
      "type": "n8n-nodes-base.stickyNote",
      "position": [
        -7440,
        4288
      ],
      "typeVersion": 1,
      "id": "28de8987-4d27-422d-afc5-fa83dda58de6",
      "name": "Sticky Note1"
    },
    {
      "parameters": {
        "operation": "get",
        "tableId": "gemini_file_store",
        "filters": {
          "conditions": [
            {
              "keyName": "document_id",
              "keyValue": "={{ $('Download file').item.json.id }}"
            }
          ]
        }
      },
      "type": "n8n-nodes-base.supabase",
      "typeVersion": 1,
      "position": [
        -7040,
        4464
      ],
      "id": "2d6bf7c7-ea74-48bc-be1f-31ddb8631693",
      "name": "Find file by file_id",
      "alwaysOutputData": true,
      "credentials": {
        "supabaseApi": {
          "id": "V1uzndLMe2n07Mxy",
          "name": "Supabase Bonds"
        }
      },
      "onError": "continueRegularOutput",
      "notes": "Returns a row if previous file with same Google Drive file_id"
    },
    {
      "parameters": {
        "content": "Does a different id file with the same contents exist?\nTrue means different file_id but same content exists. \nFalse means different file_id and content is entirely new (new file_id + new contents).",
        "height": 352,
        "width": 352
      },
      "type": "n8n-nodes-base.stickyNote",
      "position": [
        -5936,
        3856
      ],
      "typeVersion": 1,
      "id": "a0816630-acbb-4e48-b7ee-9f388dfdd3e0",
      "name": "Sticky Note"
    },
    {
      "parameters": {
        "operation": "get",
        "tableId": "gemini_file_store",
        "filters": {
          "conditions": [
            {
              "keyName": "document_content_hash",
              "keyValue": "={{ $('Document Name Hash').item.json.document_content_hash }}"
            }
          ]
        }
      },
      "type": "n8n-nodes-base.supabase",
      "typeVersion": 1,
      "position": [
        -6192,
        4000
      ],
      "id": "f41f05e4-47d5-4249-b3ad-d3c18c2b081b",
      "name": "Get document content hash",
      "alwaysOutputData": true,
      "notesInFlow": true,
      "credentials": {
        "supabaseApi": {
          "id": "V1uzndLMe2n07Mxy",
          "name": "Supabase Bonds"
        }
      },
      "onError": "continueRegularOutput",
      "notes": "Returns if a previously processed file also has the same contents"
    },
    {
      "parameters": {
        "content": "True means it is the same file_id AND the same contents (a row came back). \nTherefore, do nothing and archive this file.",
        "height": 288,
        "width": 448
      },
      "type": "n8n-nodes-base.stickyNote",
      "position": [
        -5488,
        3136
      ],
      "typeVersion": 1,
      "id": "01a23695-f831-4d24-a97d-c4c735bbaf9b",
      "name": "Sticky Note2"
    },
    {
      "parameters": {
        "content": "True means new file_id so it is potentially a new file. \n\nHowever, could have same content but different file_id. Therefore, see if different file_id with same content exists.\n\n\nFalse means we have processed this file before (with same file_id). But the file could have had its contents changed.",
        "height": 496,
        "width": 384
      },
      "type": "n8n-nodes-base.stickyNote",
      "position": [
        -6720,
        4128
      ],
      "typeVersion": 1,
      "id": "48ae29f6-8935-4c88-abb9-eab75f0d6b1e",
      "name": "Sticky Note4"
    },
    {
      "parameters": {
        "content": "Compare db's document_content_hash to this workflow's document_content_hash. \nTrue means same file_id but different contents.\nFalse means same file_id and same contents.",
        "height": 336,
        "width": 352
      },
      "type": "n8n-nodes-base.stickyNote",
      "position": [
        -5936,
        4368
      ],
      "typeVersion": 1,
      "id": "717906f7-aa36-468b-92c6-5d78343e0c69",
      "name": "Sticky Note5"
    },
    {
      "parameters": {
        "content": "Delete old file's vectors so only new content for the same file_id is vectorized",
        "height": 320,
        "width": 432
      },
      "type": "n8n-nodes-base.stickyNote",
      "position": [
        -5424,
        4560
      ],
      "typeVersion": 1,
      "id": "ec4ab1f0-c5f4-4b47-a0da-52680afd9fbb",
      "name": "Sticky Note3"
    },
    {
      "parameters": {
        "content": "### Store Extracted Data\nCreate row in bond_raw to store extract data. Will parse later.\nIf create fails because row with same document_id exists, then update row.",
        "height": 448,
        "width": 688
      },
      "type": "n8n-nodes-base.stickyNote",
      "position": [
        -2976,
        4384
      ],
      "typeVersion": 1,
      "id": "af23958b-0581-42a0-a24f-2afc7019bc8a",
      "name": "Sticky Note6"
    },
    {
      "parameters": {
        "options": {
          "temperature": 0.1
        }
      },
      "id": "cf1abbe4-788b-48c7-ad2a-c9edb294b451",
      "name": "Google Gemini Chat Model2",
      "type": "@n8n/n8n-nodes-langchain.lmChatGoogleGemini",
      "typeVersion": 1,
      "position": [
        -4240,
        4736
      ],
      "credentials": {
        "googlePalmApi": {
          "id": "z9ZJZSzT6uD25axI",
          "name": "Gemini n8n-gemini-1"
        }
      },
      "disabled": true
    },
    {
      "parameters": {
        "options": {
          "temperature": 0.2
        }
      },
      "type": "@n8n/n8n-nodes-langchain.lmChatGoogleGemini",
      "typeVersion": 1,
      "position": [
        -3792,
        4928
      ],
      "id": "63c44ed4-e821-4c93-8cad-8185994a9799",
      "name": "Google Gemini Chat Model3",
      "credentials": {
        "googlePalmApi": {
          "id": "asyTUPHct94lis3G",
          "name": "Gemini n8n-gemini-0"
        }
      },
      "disabled": true
    },
    {
      "parameters": {
        "content": "```\n{\n    \"document_title\": \"$56,000,000 EAST SIDE UNION HIGH SCHOOL DISTRICT (Santa Clara County, California) General Obligation Bonds 2016 Election, Series D; $6,420,000 EAST SIDE UNION HIGH SCHOOL DISTRICT (Santa Clara County, California) 2025 Refunding General Obligation Bonds, Series A; $35,545,000 EAST SIDE UNION HIGH SCHOOL DISTRICT (Santa Clara County, California) 2025 Refunding General Obligation Bonds, Series B\",\n    \"school_district_name\": \"EAST SIDE UNION HIGH SCHOOL DISTRICT\",\n    \"county\": \"Santa Clara County, California\",\n    \"state\": \"CA\",\n    \"overall_rating\": \"Aa3\",\n    \"overall_rating_agency\": \"Moody’s\",\n    \"overall_due_date\": \"2035-08-01\",\n    \"professional_services\": {\n      \"legal_counsel\": \"Jones Hall, A Professional Law Corporation\",\n      \"disclosure_counsel\": \"Jones Hall, A Professional Law Corporation\",\n      \"financial_advisor\": \"Dale Scott & Company Inc.\",\n      \"paying_agent\": \"U.S. Bank Trust Company, National Association\"\n    },\n    \"date_bond_closes\": \"2025-05-21\",\n    \"date_of_delivery\": \"2025-05-21\",\n    \"interest_payment_dates\": \"semiannually on each February 1 and August 1\",\n    \"interest_commencing_date\": \"2025-08-01\",\n    \"redemption_dates\": [],\n    \"underwriters\": [\n      {\n        \"name\": \"Loop Capital Markets LLC\"\n      }\n    ],\n    \"superintendent\": \"Glenn Vander Zee\",\n    \"financial_management_contact\": {\n      \"name\": \"Tom Huynh\",\n      \"title\": \"Associate Superintendent of Business Services\",\n      \"address\": \"830 North Capitol Ave., San José, California 95133\",\n      \"phone\": \"(408) 347-5050\"\n    },\n    \"board_of_education\": [\n      {\n        \"name\": \"Brian Do\",\n        \"role\": \"President\"\n      },\n      {\n        \"name\": \"Van T. Le\",\n        \"role\": \"Vice President\"\n      },\n      {\n        \"name\": \"Lorena Chavez\",\n        \"role\": \"Clerk\"\n      },\n      {\n        \"name\": \"Pattie Cortese\",\n        \"role\": \"Member\"\n      },\n      {\n        \"name\": \"J. Manuel Herrera\",\n        \"role\": \"Member\"\n      }\n    ],\n    \"assessed_valuation_summary\": {\n      \"fiscal_year\": \"2024-25\",\n      \"total_assessed_valuation\": 112255546441,\n      \"valuation_source\": \"California Municipal Statistics, Inc.\",\n      \"is_county_teeter_plan_participant\": true,\n      \"notes\": \"Assessed valuations are subject to change due to general economic conditions, supply and demand for real property, government regulations, man-made or natural disasters (e.g., earthquakes, wildfires, floods, droughts, mudslides), and public health disasters (e.g., COVID-19 pandemic). The District cannot predict the future effects of these factors on assessed values or economic activity. The County's Teeter Plan participation ensures the District receives 100% of secured property taxes levied, mitigating delinquency risk.\"\n    },\n    \"estimated_sources_and_uses\": {\n      \"total_sources\": 104664986.6,\n      \"total_uses\": 104664986.6,\n      \"sources_by_issue\": [\n        {\n          \"issue\": \"Series D Bonds\",\n          \"principal_amount\": 56000000,\n          \"net_original_issue_premium\": 3430454.2,\n          \"total\": 59430454.2\n        },\n        {\n          \"issue\": \"2025 Refunding General Obligation Bonds, Series A\",\n          \"principal_amount\": 6420000,\n          \"net_original_issue_premium\": 575387.7,\n          \"total\": 6995387.7\n        },\n        {\n          \"issue\": \"2025 Refunding General Obligation Bonds, Series B\",\n          \"principal_amount\": 35545000,\n          \"net_original_issue_premium\": 2694144.7,\n          \"total\": 38239144.7\n        }\n      ],\n      \"uses_by_category\": [\n        {\n          \"category\": \"Deposit to Building Fund\",\n          \"total_amount\": 55754000,\n          \"measure_vv_amount\": 0,\n          \"measure_m_amount\": 0\n        },\n        {\n          \"category\": \"Deposit to Escrow Fund\",\n          \"total_amount\": 44741927.5,\n          \"measure_vv_amount\": 0,\n          \"measure_m_amount\": 0\n        },\n        {\n          \"category\": \"Deposit to Debt Service Fund\",\n          \"total_amount\": 3263551.73,\n          \"measure_vv_amount\": 0,\n          \"measure_m_amount\": 0\n        },\n        {\n          \"category\": \"Costs of Issuance(1)\",\n          \"total_amount\": 905507.37,\n          \"measure_vv_amount\": 0,\n          \"measure_m_amount\": 0\n        }\n      ]\n    },\n    \"debt_service_schedule\": [\n      {\n        \"issue\": \"Series D Bonds\",\n        \"schedule\": [\n          {\n            \"period_ending\": \"2025-08-01\",\n            \"principal\": 0,\n            \"interest\": 544444.44,\n            \"total_debt_service\": 544444.44\n          },\n          {\n            \"period_ending\": \"2026-08-01\",\n            \"principal\": 16080000,\n            \"interest\": 2800000,\n            \"total_debt_service\": 18880000\n          },\n          {\n            \"period_ending\": \"2027-08-01\",\n            \"principal\": 8160000,\n            \"interest\": 1996000,\n            \"total_debt_service\": 10156000\n          },\n          {\n            \"period_ending\": \"2028-08-01\",\n            \"principal\": 8950000,\n            \"interest\": 1588000,\n            \"total_debt_service\": 10538000\n          },\n          {\n            \"period_ending\": \"2029-08-01\",\n            \"principal\": 4325000,\n            \"interest\": 1140500,\n            \"total_debt_service\": 5465500\n          },\n          {\n            \"period_ending\": \"2030-08-01\",\n            \"principal\": 4750000,\n            \"interest\": 924250,\n            \"total_debt_service\": 5674250\n          },\n          {\n            \"period_ending\": \"2031-08-01\",\n            \"principal\": 5200000,\n            \"interest\": 686750,\n            \"total_debt_service\": 5886750\n          },\n          {\n            \"period_ending\": \"2032-08-01\",\n            \"principal\": 4080000,\n            \"interest\": 426750,\n            \"total_debt_service\": 4506750\n          },\n          {\n            \"period_ending\": \"2033-08-01\",\n            \"principal\": 4455000,\n            \"interest\": 222750,\n            \"total_debt_service\": 4677750\n          }\n        ]\n      },\n      {\n        \"issue\": \"Series A Refunding Bonds\",\n        \"schedule\": [\n          {\n            \"period_ending\": \"2025-08-01\",\n            \"principal\": 0,\n            \"interest\": 62416.67,\n            \"total_debt_service\": 62416.67\n          },\n          {\n            \"period_ending\": \"2026-08-01\",\n            \"principal\": 0,\n            \"interest\": 321000,\n            \"total_debt_service\": 321000\n          },\n          {\n            \"period_ending\": \"2027-08-01\",\n            \"principal\": 0,\n            \"interest\": 321000,\n            \"total_debt_service\": 321000\n          },\n          {\n            \"period_ending\": \"2028-08-01\",\n            \"principal\": 1865000,\n            \"interest\": 321000,\n            \"total_debt_service\": 2186000\n          },\n          {\n            \"period_ending\": \"2029-08-01\",\n            \"principal\": 0,\n            \"interest\": 227750,\n            \"total_debt_service\": 227750\n          },\n          {\n            \"period_ending\": \"2030-08-01\",\n            \"principal\": 1385000,\n            \"interest\": 227750,\n            \"total_debt_service\": 1612750\n          },\n          {\n            \"period_ending\": \"2031-08-01\",\n            \"principal\": 950000,\n            \"interest\": 158500,\n            \"total_debt_service\": 1108500\n          },\n          {\n            \"period_ending\": \"2032-08-01\",\n            \"principal\": 1415000,\n            \"interest\": 111000,\n            \"total_debt_service\": 1526000\n          },\n          {\n            \"period_ending\": \"2033-08-01\",\n            \"principal\": 805000,\n            \"interest\": 40250,\n            \"total_debt_service\": 845250\n          }\n        ]\n      },\n      {\n        \"issue\": \"Series B Refunding Bonds\",\n        \"schedule\": [\n          {\n            \"period_ending\": \"2025-08-01\",\n            \"principal\": 560000,\n            \"interest\": 345576.39,\n            \"total_debt_service\": 905576.39\n          },\n          {\n            \"period_ending\": \"2026-08-01\",\n            \"principal\": 4740000,\n            \"interest\": 1749250,\n            \"total_debt_service\": 6489250\n          },\n          {\n            \"period_ending\": \"2027-08-01\",\n            \"principal\": 5195000,\n            \"interest\": 1512250,\n            \"total_debt_service\": 6707250\n          },\n          {\n            \"period_ending\": \"2028-08-01\",\n            \"principal\": 4680000,\n            \"interest\": 1252500,\n            \"total_debt_service\": 5932500\n          },\n          {\n            \"period_ending\": \"2029-08-01\",\n            \"principal\": 2070000,\n            \"interest\": 1018500,\n            \"total_debt_service\": 3088500\n          },\n          {\n            \"period_ending\": \"2030-08-01\",\n            \"principal\": 1450000,\n            \"interest\": 915000,\n            \"total_debt_service\": 2365000\n          },\n          {\n            \"period_ending\": \"2031-08-01\",\n            \"principal\": 7310000,\n            \"interest\": 842500,\n            \"total_debt_service\": 8152500\n          },\n          {\n            \"period_ending\": \"2032-08-01\",\n            \"principal\": 5320000,\n            \"interest\": 477000,\n            \"total_debt_service\": 5797000\n          },\n          {\n            \"period_ending\": \"2033-08-01\",\n            \"principal\": 1930000,\n            \"interest\": 211000,\n            \"total_debt_service\": 2141000\n          },\n          {\n            \"period_ending\": \"2034-08-01\",\n            \"principal\": 1020000,\n            \"interest\": 114500,\n            \"total_debt_service\": 1134500\n          },\n          {\n            \"period_ending\": \"2035-08-01\",\n            \"principal\": 1270000,\n            \"interest\": 63500,\n            \"total_debt_service\": 1333500\n          }\n        ]\n      }\n    ],\n    \"bond_issues\": [\n      {\n        \"bond_amount\": 56000000,\n        \"election_year\": \"2016\",\n        \"bond_type\": \"General Obligation Bonds\",\n        \"bond_series\": \"Series D\",\n        \"rating\": \"Aa3\",\n        \"due_date\": \"2033-08-01\",\n        \"interest_commencing_date\": \"2025-08-01\",\n        \"redemption_policy\": {\n          \"optional_call_date\": \"\",\n          \"maturities_callable_after\": \"\",\n          \"redemption_price\": \"\"\n        },\n        \"maturity_schedule\": {\n          \"base_cusip\": \"275282\",\n          \"maturities\": [\n            {\n              \"maturity_date\": \"2026-08-01\",\n              \"principal_amount\": 16080000,\n              \"interest_rate\": \"5.000%\",\n              \"yield\": \"3.080%\",\n              \"price\": \"102.230\",\n              \"cusip\": \"TA9\"\n            },\n            {\n              \"maturity_date\": \"2027-08-01\",\n              \"principal_amount\": 8160000,\n              \"interest_rate\": \"5.000%\",\n              \"yield\": \"3.100%\",\n              \"price\": \"103.996\",\n              \"cusip\": \"TB7\"\n            },\n            {\n              \"maturity_date\": \"2028-08-01\",\n              \"principal_amount\": 8950000,\n              \"interest_rate\": \"5.000%\",\n              \"yield\": \"3.100%\",\n              \"price\": \"105.731\",\n              \"cusip\": \"TC5\"\n            },\n            {\n              \"maturity_date\": \"2029-08-01\",\n              \"principal_amount\": 4325000,\n              \"interest_rate\": \"5.000%\",\n              \"yield\": \"3.140%\",\n              \"price\": \"107.251\",\n              \"cusip\": \"TD3\"\n            },\n            {\n              \"maturity_date\": \"2030-08-01\",\n              \"principal_amount\": 4750000,\n              \"interest_rate\": \"5.000%\",\n              \"yield\": \"3.160%\",\n              \"price\": \"108.746\",\n              \"cusip\": \"TE1\"\n            },\n            {\n              \"maturity_date\": \"2031-08-01\",\n              \"principal_amount\": 5200000,\n              \"interest_rate\": \"5.000%\",\n              \"yield\": \"3.200%\",\n              \"price\": \"110.037\",\n              \"cusip\": \"TF8\"\n            },\n            {\n              \"maturity_date\": \"2032-08-01\",\n              \"principal_amount\": 4080000,\n              \"interest_rate\": \"5.000%\",\n              \"yield\": \"3.270%\",\n              \"price\": \"111.006\",\n              \"cusip\": \"TG6\"\n            },\n            {\n              \"maturity_date\": \"2033-08-01\",\n              \"principal_amount\": 4455000,\n              \"interest_rate\": \"5.000%\",\n              \"yield\": \"3.320%\",\n              \"price\": \"111.961\",\n              \"cusip\": \"TH4\"\n            }\n          ]\n        },\n        \"debt_service_schedule\": [\n          {\n            \"period_ending\": \"2025-08-01\",\n            \"principal\": 0,\n            \"interest\": 544444.44,\n            \"total_debt_service\": 544444.44\n          },\n          {\n            \"period_ending\": \"2026-08-01\",\n            \"principal\": 16080000,\n            \"interest\": 2800000,\n            \"total_debt_service\": 18880000\n          },\n          {\n            \"period_ending\": \"2027-08-01\",\n            \"principal\": 8160000,\n            \"interest\": 1996000,\n            \"total_debt_service\": 10156000\n          },\n          {\n            \"period_ending\": \"2028-08-01\",\n            \"principal\": 8950000,\n            \"interest\": 1588000,\n            \"total_debt_service\": 10538000\n          },\n          {\n            \"period_ending\": \"2029-08-01\",\n            \"principal\": 4325000,\n            \"interest\": 1140500,\n            \"total_debt_service\": 5465500\n          },\n          {\n            \"period_ending\": \"2030-08-01\",\n            \"principal\": 4750000,\n            \"interest\": 924250,\n            \"total_debt_service\": 5674250\n          },\n          {\n            \"period_ending\": \"2031-08-01\",\n            \"principal\": 5200000,\n            \"interest\": 686750,\n            \"total_debt_service\": 5886750\n          },\n          {\n            \"period_ending\": \"2032-08-01\",\n            \"principal\": 4080000,\n            \"interest\": 426750,\n            \"total_debt_service\": 4506750\n          },\n          {\n            \"period_ending\": \"2033-08-01\",\n            \"principal\": 4455000,\n            \"interest\": 222750,\n            \"total_debt_service\": 4677750\n          }\n        ]\n      },\n      {\n        \"bond_amount\": 6420000,\n        \"election_year\": \"2025\",\n        \"bond_type\": \"Refunding General Obligation Bonds\",\n        \"bond_series\": \"Series A\",\n        \"rating\": \"Aa3\",\n        \"due_date\": \"2033-08-01\",\n        \"interest_commencing_date\": \"2025-08-01\",\n        \"redemption_policy\": {\n          \"optional_call_date\": \"\",\n          \"maturities_callable_after\": \"\",\n          \"redemption_price\": \"\"\n        },\n        \"maturity_schedule\": {\n          \"base_cusip\": \"275282\",\n          \"maturities\": [\n            {\n              \"maturity_date\": \"2028-08-01\",\n              \"principal_amount\": 1865000,\n              \"interest_rate\": \"5.000%\",\n              \"yield\": \"3.100%\",\n              \"price\": \"105.731\",\n              \"cusip\": \"SJ1\"\n            },\n            {\n              \"maturity_date\": \"2030-08-01\",\n              \"principal_amount\": 1385000,\n              \"interest_rate\": \"5.000%\",\n              \"yield\": \"3.160%\",\n              \"price\": \"108.746\",\n              \"cusip\": \"SK8\"\n            },\n            {\n              \"maturity_date\": \"2031-08-01\",\n              \"principal_amount\": 950000,\n              \"interest_rate\": \"5.000%\",\n              \"yield\": \"3.200%\",\n              \"price\": \"110.037\",\n              \"cusip\": \"SL6\"\n            },\n            {\n              \"maturity_date\": \"2032-08-01\",\n              \"principal_amount\": 1415000,\n              \"interest_rate\": \"5.000%\",\n              \"yield\": \"3.270%\",\n              \"price\": \"111.006\",\n              \"cusip\": \"SM4\"\n            },\n            {\n              \"maturity_date\": \"2033-08-01\",\n              \"principal_amount\": 805000,\n              \"interest_rate\": \"5.000%\",\n              \"yield\": \"3.320%\",\n              \"price\": \"111.961\",\n              \"cusip\": \"SN2\"\n            }\n          ]\n        },\n        \"debt_service_schedule\": [\n          {\n            \"period_ending\": \"2025-08-01\",\n            \"principal\": 0,\n            \"interest\": 62416.67,\n            \"total_debt_service\": 62416.67\n          },\n          {\n            \"period_ending\": \"2026-08-01\",\n            \"principal\": 0,\n            \"interest\": 321000,\n            \"total_debt_service\": 321000\n          },\n          {\n            \"period_ending\": \"2027-08-01\",\n            \"principal\": 0,\n            \"interest\": 321000,\n            \"total_debt_service\": 321000\n          },\n          {\n            \"period_ending\": \"2028-08-01\",\n            \"principal\": 1865000,\n            \"interest\": 321000,\n            \"total_debt_service\": 2186000\n          },\n          {\n            \"period_ending\": \"2029-08-01\",\n            \"principal\": 0,\n            \"interest\": 227750,\n            \"total_debt_service\": 227750\n          },\n          {\n            \"period_ending\": \"2030-08-01\",\n            \"principal\": 1385000,\n            \"interest\": 227750,\n            \"total_debt_service\": 1612750\n          },\n          {\n            \"period_ending\": \"2031-08-01\",\n            \"principal\": 950000,\n            \"interest\": 158500,\n            \"total_debt_service\": 1108500\n          },\n          {\n            \"period_ending\": \"2032-08-01\",\n            \"principal\": 1415000,\n            \"interest\": 111000,\n            \"total_debt_service\": 1526000\n          },\n          {\n            \"period_ending\": \"2033-08-01\",\n            \"principal\": 805000,\n            \"interest\": 40250,\n            \"total_debt_service\": 845250\n          }\n        ]\n      },\n      {\n        \"bond_amount\": 35545000,\n        \"election_year\": \"2025\",\n        \"bond_type\": \"Refunding General Obligation Bonds\",\n        \"bond_series\": \"Series B\",\n        \"rating\": \"Aa3\",\n        \"due_date\": \"2035-08-01\",\n        \"interest_commencing_date\": \"2025-08-01\",\n        \"redemption_policy\": {\n          \"optional_call_date\": \"\",\n          \"maturities_callable_after\": \"\",\n          \"redemption_price\": \"\"\n        },\n        \"maturity_schedule\": {\n          \"base_cusip\": \"275282\",\n          \"maturities\": [\n            {\n              \"maturity_date\": \"2025-08-01\",\n              \"principal_amount\": 560000,\n              \"interest_rate\": \"5.000%\",\n              \"yield\": \"3.080%\",\n              \"price\": \"100.362\",\n              \"cusip\": \"SP7\"\n            },\n            {\n              \"maturity_date\": \"2026-08-01\",\n              \"principal_amount\": 4740000,\n              \"interest_rate\": \"5.000%\",\n              \"yield\": \"3.080%\",\n              \"price\": \"102.230\",\n              \"cusip\": \"SQ5\"\n            },\n            {\n              \"maturity_date\": \"2027-08-01\",\n              \"principal_amount\": 5195000,\n              \"interest_rate\": \"5.000%\",\n              \"yield\": \"3.100%\",\n              \"price\": \"103.996\",\n              \"cusip\": \"SR3\"\n            },\n            {\n              \"maturity_date\": \"2028-08-01\",\n              \"principal_amount\": 4680000,\n              \"interest_rate\": \"5.000%\",\n              \"yield\": \"3.100%\",\n              \"price\": \"105.731\",\n              \"cusip\": \"SS1\"\n            },\n            {\n              \"maturity_date\": \"2029-08-01\",\n              \"principal_amount\": 2070000,\n              \"interest_rate\": \"5.000%\",\n              \"yield\": \"3.140%\",\n              \"price\": \"107.251\",\n              \"cusip\": \"ST9\"\n            },\n            {\n              \"maturity_date\": \"2030-08-01\",\n              \"principal_amount\": 1450000,\n              \"interest_rate\": \"5.000%\",\n              \"yield\": \"3.160%\",\n              \"price\": \"108.746\",\n              \"cusip\": \"SU6\"\n            },\n            {\n              \"maturity_date\": \"2031-08-01\",\n              \"principal_amount\": 7310000,\n              \"interest_rate\": \"5.000%\",\n              \"yield\": \"3.200%\",\n              \"price\": \"110.037\",\n              \"cusip\": \"SV4\"\n            },\n            {\n              \"maturity_date\": \"2032-08-01\",\n              \"principal_amount\": 5320000,\n              \"interest_rate\": \"5.000%\",\n              \"yield\": \"3.270%\",\n              \"price\": \"111.006\",\n              \"cusip\": \"SW2\"\n            },\n            {\n              \"maturity_date\": \"2033-08-01\",\n              \"principal_amount\": 1930000,\n              \"interest_rate\": \"5.000%\",\n              \"yield\": \"3.320%\",\n              \"price\": \"111.961\",\n              \"cusip\": \"SX0\"\n            },\n            {\n              \"maturity_date\": \"2034-08-01\",\n              \"principal_amount\": 1020000,\n              \"interest_rate\": \"5.000%\",\n              \"yield\": \"3.420%\",\n              \"price\": \"112.370\",\n              \"cusip\": \"SY8\"\n            },\n            {\n              \"maturity_date\": \"2035-08-01\",\n              \"principal_amount\": 1270000,\n              \"interest_rate\": \"5.000%\",\n              \"yield\": \"3.540%\",\n              \"price\": \"112.398\",\n              \"cusip\": \"SZ5\"\n            }\n          ]\n        },\n        \"debt_service_schedule\": [\n          {\n            \"period_ending\": \"2025-08-01\",\n            \"principal\": 560000,\n            \"interest\": 345576.39,\n            \"total_debt_service\": 905576.39\n          },\n          {\n            \"period_ending\": \"2026-08-01\",\n            \"principal\": 4740000,\n            \"interest\": 1749250,\n            \"total_debt_service\": 6489250\n          },\n          {\n            \"period_ending\": \"2027-08-01\",\n            \"principal\": 5195000,\n            \"interest\": 1512250,\n            \"total_debt_service\": 6707250\n          },\n          {\n            \"period_ending\": \"2028-08-01\",\n            \"principal\": 4680000,\n            \"interest\": 1252500,\n            \"total_debt_service\": 5932500\n          },\n          {\n            \"period_ending\": \"2029-08-01\",\n            \"principal\": 2070000,\n            \"interest\": 1018500,\n            \"total_debt_service\": 3088500\n          },\n          {\n            \"period_ending\": \"2030-08-01\",\n            \"principal\": 1450000,\n            \"interest\": 915000,\n            \"total_debt_service\": 2365000\n          },\n          {\n            \"period_ending\": \"2031-08-01\",\n            \"principal\": 7310000,\n            \"interest\": 842500,\n            \"total_debt_service\": 8152500\n          },\n          {\n            \"period_ending\": \"2032-08-01\",\n            \"principal\": 5320000,\n            \"interest\": 477000,\n            \"total_debt_service\": 5797000\n          },\n          {\n            \"period_ending\": \"2033-08-01\",\n            \"principal\": 1930000,\n            \"interest\": 211000,\n            \"total_debt_service\": 2141000\n          },\n          {\n            \"period_ending\": \"2034-08-01\",\n            \"principal\": 1020000,\n            \"interest\": 114500,\n            \"total_debt_service\": 1134500\n          },\n          {\n            \"period_ending\": \"2035-08-01\",\n            \"principal\": 1270000,\n            \"interest\": 63500,\n            \"total_debt_service\": 1333500\n          }\n        ]\n      }\n    ]\n  }\n\n```",
        "height": 272
      },
      "type": "n8n-nodes-base.stickyNote",
      "position": [
        -3968,
        4160
      ],
      "typeVersion": 1,
      "id": "7cc2e616-e05a-4f9f-82f5-4084ee30a612",
      "name": "Sticky Note7"
    },
    {
      "parameters": {
        "descriptionType": "manual",
        "toolDescription": "Create a row in Supabase for a given table_name table",
        "tableId": "={{ $fromAI('table_name', `Table name`, 'string') }}",
        "dataToSend": "autoMapInputData",
        "inputsToIgnore": "table_name"
      },
      "type": "n8n-nodes-base.supabaseTool",
      "typeVersion": 1,
      "position": [
        -1504,
        7088
      ],
      "id": "e82dbd35-1654-4263-bc51-46fad13cac7d",
      "name": "Create a row in Supabase",
      "credentials": {
        "supabaseApi": {
          "id": "V1uzndLMe2n07Mxy",
          "name": "Supabase Bonds"
        }
      },
      "disabled": true
    },
    {
      "parameters": {
        "promptType": "define",
        "text": "=<role>\nYou are a data loading agent responsible for inserting structured data into a single Supabase table by calling Supabase tool functions.\n\nYour job is to:\n\n- Read a JSON payload that represents one document and its extracted output.\n- Insert that payload into the target table using the Supabase \"create row\" tool.\n- If the \"create row\" call fails because a row already exists (for example, due to a unique or primary key conflict on `document_id`), call the Supabase \"update row\" tool instead.\n- Always pass the `table_name` parameter through to the tools exactly as provided to you.\n\nYour goal is to persist the provided JSON as-is into the target table without changing its structure or values.\n  </role>\n\n  <input_json>\n{{ $json.toJsonString() }}\n\nThe JSON payload has the following logical structure:\n\n- Top-level fields:\n  - `document_id`: the primary identifier for the row.\n  - `output`: an object containing the parsed bond document data (nested structures, arrays, and objects).\n- The `output` object may contain multiple nested objects and arrays such as:\n  - `bond_document`\n  - `professional_services`\n  - `financial_management_contact`\n  - `assessed_valuation_summary`\n  - `estimated_sources_uses`\n  - `estimated_source_issue`\n  - `estimated_use_category`\n  - `underwriter`\n  - `board_member`\n  - `debt_service_issue`\n  - `debt_service_entry`\n  - `bond_issue`\n  - `bond_maturity`\n  - `bond_issue_debt_service`\n  - And any other nested structures present in the input.\n\nYou do not need to interpret or restructure these nested fields. They are stored in the `output` column as JSONB.\n  </input_json>\n\n<table_name>\nbond_raw\n</table_name>\n\n  <target_table>\nYou are inserting into a single Supabase table with (at least) the following columns:\n\n- `document_id` (TEXT, PRIMARY KEY)\n- `output` (JSONB)\n- `created_at` (TIMESTAMP WITH TIME ZONE, defaulted by the database)\n- `updated_at` (TIMESTAMP WITH TIME ZONE, managed by a database trigger)\n\nYou do not need to set `created_at` or `updated_at`. The database will handle those automatically.\n\nThe `table_name` for this table is provided to you externally and must be passed unchanged into every Supabase tool call.\n  </target_table>\n\n  <tools>\nYou are equipped with at least the following Supabase tools:\n\n- `create_row` (or equivalent)\n  - Parameters:\n    - `table_name`: the name of the target table.\n    - `payload`: the row data.\n  - Behavior:\n    - Inserts a new row into the table.\n    - May fail if a row with the same `document_id` already exists (for example, due to a primary key or unique constraint).\n\n- `update_row` (or equivalent)\n  - Parameters:\n    - `table_name`: the name of the target table.\n    - `payload`: the row data.\n  - Behavior:\n    - Updates an existing row in the table that matches the primary key or unique key (such as `document_id`).\n\nYou do not define these tools. You only call them correctly.\n  </tools>\n\n  <task>\nFor each JSON payload you receive:\n\n1. Treat the entire JSON object as the row data to be stored.\n2. Call the Supabase \"create row\" tool:\n   - Use the provided `table_name` parameter.\n   - Pass the full JSON payload as the `payload`.\n3. If the \"create row\" call fails because a row with the same `document_id` already exists:\n   - Call the Supabase \"update row\" tool with:\n     - The same `table_name`.\n     - The same JSON payload as the `payload`.\n\nYou must not transform, restructure, or partially select from the payload. The tools already know how to map the input into the table columns.\n  </task>\n\n  <detailed_behavior>\n    <data_usage>\nWhen working with the input JSON:\n\n- Use the payload as-is.\n- Do not modify any keys.\n- Do not modify any values.\n- Do not compute or derive any new fields.\n- Do not generate any new IDs, timestamps, or default values.\n- Do not remove any fields.\n\nIf the JSON contains extra fields beyond the known columns, rely on the Supabase tools and table configuration to handle them.\n    </data_usage>\n\n    <insert_then_update_pattern>\nYou must follow this order of operations:\n\n1. Create attempt\n\n   - First, always attempt to insert the row using the \"create row\" tool:\n     - `table_name` = the table name you are given.\n     - `payload` = the complete input JSON.\n\n2. On failure due to existing record\n\n   - If the \"create row\" call fails because of a uniqueness or primary key conflict on `document_id` (or an equivalent unique key):\n     - Call the \"update row\" tool:\n       - `table_name` = the same table name.\n       - `payload` = the same input JSON.\n   - Do not call the update tool preemptively.\n   - Use the update tool only as a fallback when the create call fails.\n\n3. Other errors\n\n   - If the \"create row\" tool fails for reasons other than a duplicate or unique key (for example, invalid data type, missing required fields, or permission issues):\n     - Do not attempt to fix or transform the data.\n     - Surface or log the error as necessary.\n    </insert_then_update_pattern>\n\n    <column_mapping>\nThe tools already know how to map the JSON fields to columns. In particular:\n\n- `document_id` in the JSON maps to the `document_id` column.\n- `output` in the JSON maps to the `output` JSONB column.\n- Nested structures inside `output` are stored as JSONB and do not need to be flattened by you.\n\nYou must not attempt to manually extract or flatten any nested fields inside `output`.\n    </column_mapping>\n  </detailed_behavior>\n\n  <execution_steps>\nFor each run with a JSON payload:\n\n1. Receive the JSON\n\n   - Use `{{ $json.toJsonString() }}` as the complete input payload.\n   - Assume the JSON is syntactically valid.\n\n2. Call \"create row\"\n\n   - Build a tool call to the Supabase \"create row\" function:\n     - Set `table_name` to the table name provided to you.\n     - Set `payload` to the entire JSON object.\n\n3. Check for failure\n\n   - If the \"create row\" call succeeds:\n     - Do nothing further for this payload.\n   - If the \"create row\" call fails due to a unique or primary key conflict on `document_id`:\n     - Proceed to step 4.\n   - If it fails for other reasons:\n     - Do not transform the payload.\n     - Surface or return the error.\n\n4. Call \"update row\"\n\n   - Build a tool call to the Supabase \"update row\" function:\n     - Use the same `table_name`.\n     - Use the same full JSON payload as `payload`.\n\n5. Do not modify data\n\n   - At no point should you:\n     - Change field names.\n     - Change values.\n     - Add new fields.\n     - Drop existing fields.\n\nYour single responsibility is to push the exact JSON payload into the table using a create-then-update fallback pattern.\n  </execution_steps>\n\n<tool_call_style>\nWhen you build tool calls:\n\n- Always include `table_name` and set it to the exact table name provided to you.\n- Always pass the full input JSON as the payload.\n- Do not split the JSON into multiple rows or multiple tables.\n- Do not perform any JSON restructuring.\n\nYour single goal: faithfully store the given JSON payload in the target table, first by attempting a create, and if that fails due to an existing `document_id`, by performing an update.\n\n</tool_call_style>\n",
        "needsFallback": true,
        "options": {
          "maxIterations": 5
        }
      },
      "type": "@n8n/n8n-nodes-langchain.agent",
      "typeVersion": 3,
      "position": [
        -1824,
        6864
      ],
      "id": "e0b1d9fc-888f-44c9-ab86-7365e8f5e8a0",
      "name": "Insert Bond Data into DB",
      "disabled": true
    },
    {
      "parameters": {
        "model": "z-ai/glm-4.5-air:free",
        "options": {}
      },
      "type": "@n8n/n8n-nodes-langchain.lmChatOpenRouter",
      "typeVersion": 1,
      "position": [
        -1824,
        7200
      ],
      "id": "6224f140-c595-4199-aa8f-55b8322492e6",
      "name": "OpenRouter Chat Model",
      "credentials": {
        "openRouterApi": {
          "id": "g27vQJVFoD7lzE1t",
          "name": "openrouter_0"
        }
      },
      "disabled": true
    },
    {
      "parameters": {
        "model": "moonshotai/kimi-k2:free",
        "options": {}
      },
      "type": "@n8n/n8n-nodes-langchain.lmChatOpenRouter",
      "typeVersion": 1,
      "position": [
        -1984,
        7088
      ],
      "id": "9548c3e2-034a-420e-aca5-64c2dcc023c8",
      "name": "OpenRouter Chat Model1",
      "credentials": {
        "openRouterApi": {
          "id": "GUP0mJDTjvklHHs7",
          "name": "openrouter"
        }
      },
      "disabled": true
    },
    {
      "parameters": {
        "content": "### Split unwrapped\n```\n{\n  \"bond_document\": {\n    \"document_id\": \"11TRkJA7dCqe30RTgOHaZT9HFhcdIMyak\",\n    \"document_title\": \"$56,000,000 EAST SIDE UNION HIGH SCHOOL DISTRICT (Santa Clara County, California) General Obligation Bonds 2016 Election, Series D; $6,420,000 EAST SIDE UNION HIGH SCHOOL DISTRICT (Santa Clara County, California) 2025 Refunding General Obligation Bonds, Series A; $35,545,000 EAST SIDE UNION HIGH SCHOOL DISTRICT (Santa Clara County, California) 2025 Refunding General Obligation Bonds, Series B\",\n    \"school_district_name\": \"EAST SIDE UNION HIGH SCHOOL DISTRICT\",\n    \"county\": \"Santa Clara County, California\",\n    \"state\": \"CA\",\n    \"overall_rating\": \"Aa3\",\n    \"overall_rating_agency\": \"Moody’s\",\n    \"overall_due_date\": \"2035-08-01\",\n    \"date_bond_closes\": \"2025-05-21\",\n    \"date_of_delivery\": \"2025-05-21\",\n    \"interest_payment_description\": \"semiannually on each February 1 and August 1\",\n    \"interest_commencing_date\": \"2025-08-01\",\n    \"superintendent\": \"Glenn Vander Zee\"\n  },\n  \"professional_services\": {\n    \"document_id\": \"11TRkJA7dCqe30RTgOHaZT9HFhcdIMyak\",\n    \"legal_counsel\": \"Jones Hall, A Professional Law Corporation\",\n    \"disclosure_counsel\": \"Jones Hall, A Professional Law Corporation\",\n    \"financial_advisor\": \"Dale Scott & Company Inc.\",\n    \"paying_agent\": \"U.S. Bank Trust Company, National Association\"\n  },\n  \"financial_management_contact\": {\n    \"document_id\": \"11TRkJA7dCqe30RTgOHaZT9HFhcdIMyak\",\n    \"name\": \"Tom Huynh\",\n    \"title\": \"Associate Superintendent of Business Services\",\n    \"address\": \"830 North Capitol Ave., San José, California 95133\",\n    \"phone\": \"(408) 347-5050\"\n  },\n  \"assessed_valuation_summary\": {\n    \"document_id\": \"11TRkJA7dCqe30RTgOHaZT9HFhcdIMyak\",\n    \"fiscal_year\": \"2024-25\",\n    \"total_assessed_valuation\": 112255546441,\n    \"valuation_source\": \"California Municipal Statistics, Inc.\",\n    \"is_county_teeter_plan_participant\": true,\n    \"notes\": \"Assessed valuations are subject to change due to general economic conditions, supply and demand for real property, government regulations, man-made or natural disasters (e.g., earthquakes, wildfires, floods, droughts, mudslides), and public health disasters (e.g., COVID-19 pandemic). The District cannot predict the future effects of these factors on assessed values or economic activity. The County's Teeter Plan participation ensures the District receives 100% of secured property taxes levied, mitigating delinquency risk.\"\n  },\n  \"estimated_sources_uses\": {\n    \"document_id\": \"11TRkJA7dCqe30RTgOHaZT9HFhcdIMyak\",\n    \"total_sources\": 104664986.6,\n    \"total_uses\": 104664986.6\n  },\n  \"estimated_source_issue\": [\n    {\n      \"document_id\": \"11TRkJA7dCqe30RTgOHaZT9HFhcdIMyak\",\n      \"issue\": \"Series D Bonds\",\n      \"principal_amount\": 56000000,\n      \"net_original_issue_premium\": 3430454.2,\n      \"total\": 59430454.2\n    },\n    {\n      \"document_id\": \"11TRkJA7dCqe30RTgOHaZT9HFhcdIMyak\",\n      \"issue\": \"2025 Refunding General Obligation Bonds, Series A\",\n      \"principal_amount\": 6420000,\n      \"net_original_issue_premium\": 575387.7,\n      \"total\": 6995387.7\n    },\n    {\n      \"document_id\": \"11TRkJA7dCqe30RTgOHaZT9HFhcdIMyak\",\n      \"issue\": \"2025 Refunding General Obligation Bonds, Series B\",\n      \"principal_amount\": 35545000,\n      \"net_original_issue_premium\": 2694144.7,\n      \"total\": 38239144.7\n    }\n  ],\n  \"estimated_use_category\": [\n    {\n      \"document_id\": \"11TRkJA7dCqe30RTgOHaZT9HFhcdIMyak\",\n      \"category\": \"Deposit to Building Fund\",\n      \"total_amount\": 55754000,\n      \"measure_vv_amount\": 0,\n      \"measure_m_amount\": 0\n    },\n    {\n      \"document_id\": \"11TRkJA7dCqe30RTgOHaZT9HFhcdIMyak\",\n      \"category\": \"Deposit to Escrow Fund\",\n      \"total_amount\": 44741927.5,\n      \"measure_vv_amount\": 0,\n      \"measure_m_amount\": 0\n    },\n    {\n      \"document_id\": \"11TRkJA7dCqe30RTgOHaZT9HFhcdIMyak\",\n      \"category\": \"Deposit to Debt Service Fund\",\n      \"total_amount\": 3263551.73,\n      \"measure_vv_amount\": 0,\n      \"measure_m_amount\": 0\n    },\n    {\n      \"document_id\": \"11TRkJA7dCqe30RTgOHaZT9HFhcdIMyak\",\n      \"category\": \"Costs of Issuance(1)\",\n      \"total_amount\": 905507.37,\n      \"measure_vv_amount\": 0,\n      \"measure_m_amount\": 0\n    }\n  ],\n  \"redemption_date\": [],\n  \"underwriter\": [\n    {\n      \"document_id\": \"11TRkJA7dCqe30RTgOHaZT9HFhcdIMyak\",\n      \"name\": \"Loop Capital Markets LLC\"\n    }\n  ],\n  \"board_member\": [\n    {\n      \"document_id\": \"11TRkJA7dCqe30RTgOHaZT9HFhcdIMyak\",\n      \"name\": \"Brian Do\",\n      \"role\": \"President\"\n    },\n    {\n      \"document_id\": \"11TRkJA7dCqe30RTgOHaZT9HFhcdIMyak\",\n      \"name\": \"Van T. Le\",\n      \"role\": \"Vice President\"\n    },\n    {\n      \"document_id\": \"11TRkJA7dCqe30RTgOHaZT9HFhcdIMyak\",\n      \"name\": \"Lorena Chavez\",\n      \"role\": \"Clerk\"\n    },\n    {\n      \"document_id\": \"11TRkJA7dCqe30RTgOHaZT9HFhcdIMyak\",\n      \"name\": \"Pattie Cortese\",\n      \"role\": \"Member\"\n    },\n    {\n      \"document_id\": \"11TRkJA7dCqe30RTgOHaZT9HFhcdIMyak\",\n      \"name\": \"J. Manuel Herrera\",\n      \"role\": \"Member\"\n    }\n  ],\n  \"debt_service_issue\": [\n    {\n      \"document_id\": \"11TRkJA7dCqe30RTgOHaZT9HFhcdIMyak\",\n      \"issue_name\": \"Series D Bonds\"\n    },\n    {\n      \"document_id\": \"11TRkJA7dCqe30RTgOHaZT9HFhcdIMyak\",\n      \"issue_name\": \"Series A Refunding Bonds\"\n    },\n    {\n      \"document_id\": \"11TRkJA7dCqe30RTgOHaZT9HFhcdIMyak\",\n      \"issue_name\": \"Series B Refunding Bonds\"\n    }\n  ],\n  \"debt_service_entry\": [\n    {\n      \"issue_name\": \"Series D Bonds\",\n      \"period_ending\": \"2025-08-01\",\n      \"principal\": 0,\n      \"interest\": 544444.44,\n      \"total_debt_service\": 544444.44\n    },\n    {\n      \"issue_name\": \"Series D Bonds\",\n      \"period_ending\": \"2026-08-01\",\n      \"principal\": 16080000,\n      \"interest\": 2800000,\n      \"total_debt_service\": 18880000\n    },\n    {\n      \"issue_name\": \"Series D Bonds\",\n      \"period_ending\": \"2027-08-01\",\n      \"principal\": 8160000,\n      \"interest\": 1996000,\n      \"total_debt_service\": 10156000\n    },\n    {\n      \"issue_name\": \"Series D Bonds\",\n      \"period_ending\": \"2028-08-01\",\n      \"principal\": 8950000,\n      \"interest\": 1588000,\n      \"total_debt_service\": 10538000\n    },\n    {\n      \"issue_name\": \"Series D Bonds\",\n      \"period_ending\": \"2029-08-01\",\n      \"principal\": 4325000,\n      \"interest\": 1140500,\n      \"total_debt_service\": 5465500\n    },\n    {\n      \"issue_name\": \"Series D Bonds\",\n      \"period_ending\": \"2030-08-01\",\n      \"principal\": 4750000,\n      \"interest\": 924250,\n      \"total_debt_service\": 5674250\n    },\n    {\n      \"issue_name\": \"Series D Bonds\",\n      \"period_ending\": \"2031-08-01\",\n      \"principal\": 5200000,\n      \"interest\": 686750,\n      \"total_debt_service\": 5886750\n    },\n    {\n      \"issue_name\": \"Series D Bonds\",\n      \"period_ending\": \"2032-08-01\",\n      \"principal\": 4080000,\n      \"interest\": 426750,\n      \"total_debt_service\": 4506750\n    },\n    {\n      \"issue_name\": \"Series D Bonds\",\n      \"period_ending\": \"2033-08-01\",\n      \"principal\": 4455000,\n      \"interest\": 222750,\n      \"total_debt_service\": 4677750\n    },\n    {\n      \"issue_name\": \"Series A Refunding Bonds\",\n      \"period_ending\": \"2025-08-01\",\n      \"principal\": 0,\n      \"interest\": 62416.67,\n      \"total_debt_service\": 62416.67\n    },\n    {\n      \"issue_name\": \"Series A Refunding Bonds\",\n      \"period_ending\": \"2026-08-01\",\n      \"principal\": 0,\n      \"interest\": 321000,\n      \"total_debt_service\": 321000\n    },\n    {\n      \"issue_name\": \"Series A Refunding Bonds\",\n      \"period_ending\": \"2027-08-01\",\n      \"principal\": 0,\n      \"interest\": 321000,\n      \"total_debt_service\": 321000\n    },\n    {\n      \"issue_name\": \"Series A Refunding Bonds\",\n      \"period_ending\": \"2028-08-01\",\n      \"principal\": 1865000,\n      \"interest\": 321000,\n      \"total_debt_service\": 2186000\n    },\n    {\n      \"issue_name\": \"Series A Refunding Bonds\",\n      \"period_ending\": \"2029-08-01\",\n      \"principal\": 0,\n      \"interest\": 227750,\n      \"total_debt_service\": 227750\n    },\n    {\n      \"issue_name\": \"Series A Refunding Bonds\",\n      \"period_ending\": \"2030-08-01\",\n      \"principal\": 1385000,\n      \"interest\": 227750,\n      \"total_debt_service\": 1612750\n    },\n    {\n      \"issue_name\": \"Series A Refunding Bonds\",\n      \"period_ending\": \"2031-08-01\",\n      \"principal\": 950000,\n      \"interest\": 158500,\n      \"total_debt_service\": 1108500\n    },\n    {\n      \"issue_name\": \"Series A Refunding Bonds\",\n      \"period_ending\": \"2032-08-01\",\n      \"principal\": 1415000,\n      \"interest\": 111000,\n      \"total_debt_service\": 1526000\n    },\n    {\n      \"issue_name\": \"Series A Refunding Bonds\",\n      \"period_ending\": \"2033-08-01\",\n      \"principal\": 805000,\n      \"interest\": 40250,\n      \"total_debt_service\": 845250\n    },\n    {\n      \"issue_name\": \"Series B Refunding Bonds\",\n      \"period_ending\": \"2025-08-01\",\n      \"principal\": 560000,\n      \"interest\": 345576.39,\n      \"total_debt_service\": 905576.39\n    },\n    {\n      \"issue_name\": \"Series B Refunding Bonds\",\n      \"period_ending\": \"2026-08-01\",\n      \"principal\": 4740000,\n      \"interest\": 1749250,\n      \"total_debt_service\": 6489250\n    },\n    {\n      \"issue_name\": \"Series B Refunding Bonds\",\n      \"period_ending\": \"2027-08-01\",\n      \"principal\": 5195000,\n      \"interest\": 1512250,\n      \"total_debt_service\": 6707250\n    },\n    {\n      \"issue_name\": \"Series B Refunding Bonds\",\n      \"period_ending\": \"2028-08-01\",\n      \"principal\": 4680000,\n      \"interest\": 1252500,\n      \"total_debt_service\": 5932500\n    },\n    {\n      \"issue_name\": \"Series B Refunding Bonds\",\n      \"period_ending\": \"2029-08-01\",\n      \"principal\": 2070000,\n      \"interest\": 1018500,\n      \"total_debt_service\": 3088500\n    },\n    {\n      \"issue_name\": \"Series B Refunding Bonds\",\n      \"period_ending\": \"2030-08-01\",\n      \"principal\": 1450000,\n      \"interest\": 915000,\n      \"total_debt_service\": 2365000\n    },\n    {\n      \"issue_name\": \"Series B Refunding Bonds\",\n      \"period_ending\": \"2031-08-01\",\n      \"principal\": 7310000,\n      \"interest\": 842500,\n      \"total_debt_service\": 8152500\n    },\n    {\n      \"issue_name\": \"Series B Refunding Bonds\",\n      \"period_ending\": \"2032-08-01\",\n      \"principal\": 5320000,\n      \"interest\": 477000,\n      \"total_debt_service\": 5797000\n    },\n    {\n      \"issue_name\": \"Series B Refunding Bonds\",\n      \"period_ending\": \"2033-08-01\",\n      \"principal\": 1930000,\n      \"interest\": 211000,\n      \"total_debt_service\": 2141000\n    },\n    {\n      \"issue_name\": \"Series B Refunding Bonds\",\n      \"period_ending\": \"2034-08-01\",\n      \"principal\": 1020000,\n      \"interest\": 114500,\n      \"total_debt_service\": 1134500\n    },\n    {\n      \"issue_name\": \"Series B Refunding Bonds\",\n      \"period_ending\": \"2035-08-01\",\n      \"principal\": 1270000,\n      \"interest\": 63500,\n      \"total_debt_service\": 1333500\n    }\n  ],\n  \"bond_issue\": [\n    {\n      \"document_id\": \"11TRkJA7dCqe30RTgOHaZT9HFhcdIMyak\",\n      \"bond_amount\": 56000000,\n      \"election_year\": 2016,\n      \"bond_type\": \"General Obligation Bonds\",\n      \"bond_series\": \"Series D\",\n      \"rating\": \"Aa3\",\n      \"due_date\": \"2033-08-01\",\n      \"interest_commencing_date\": \"2025-08-01\",\n      \"base_cusip\": \"275282\",\n      \"optional_call_date\": null,\n      \"maturities_callable_after\": null,\n      \"redemption_price\": null\n    },\n    {\n      \"document_id\": \"11TRkJA7dCqe30RTgOHaZT9HFhcdIMyak\",\n      \"bond_amount\": 6420000,\n      \"election_year\": 2025,\n      \"bond_type\": \"Refunding General Obligation Bonds\",\n      \"bond_series\": \"Series A\",\n      \"rating\": \"Aa3\",\n      \"due_date\": \"2033-08-01\",\n      \"interest_commencing_date\": \"2025-08-01\",\n      \"base_cusip\": \"275282\",\n      \"optional_call_date\": null,\n      \"maturities_callable_after\": null,\n      \"redemption_price\": null\n    },\n    {\n      \"document_id\": \"11TRkJA7dCqe30RTgOHaZT9HFhcdIMyak\",\n      \"bond_amount\": 35545000,\n      \"election_year\": 2025,\n      \"bond_type\": \"Refunding General Obligation Bonds\",\n      \"bond_series\": \"Series B\",\n      \"rating\": \"Aa3\",\n      \"due_date\": \"2035-08-01\",\n      \"interest_commencing_date\": \"2025-08-01\",\n      \"base_cusip\": \"275282\",\n      \"optional_call_date\": null,\n      \"maturities_callable_after\": null,\n      \"redemption_price\": null\n    }\n  ],\n  \"bond_maturity\": [\n    {\n      \"bond_series\": \"Series D\",\n      \"maturity_date\": \"2026-08-01\",\n      \"principal_amount\": 16080000,\n      \"interest_rate\": 5,\n      \"yield\": 3.08,\n      \"price\": 102.23,\n      \"cusip\": \"TA9\"\n    },\n    {\n      \"bond_series\": \"Series D\",\n      \"maturity_date\": \"2027-08-01\",\n      \"principal_amount\": 8160000,\n      \"interest_rate\": 5,\n      \"yield\": 3.1,\n      \"price\": 103.996,\n      \"cusip\": \"TB7\"\n    },\n    {\n      \"bond_series\": \"Series D\",\n      \"maturity_date\": \"2028-08-01\",\n      \"principal_amount\": 8950000,\n      \"interest_rate\": 5,\n      \"yield\": 3.1,\n      \"price\": 105.731,\n      \"cusip\": \"TC5\"\n    },\n    {\n      \"bond_series\": \"Series D\",\n      \"maturity_date\": \"2029-08-01\",\n      \"principal_amount\": 4325000,\n      \"interest_rate\": 5,\n      \"yield\": 3.14,\n      \"price\": 107.251,\n      \"cusip\": \"TD3\"\n    },\n    {\n      \"bond_series\": \"Series D\",\n      \"maturity_date\": \"2030-08-01\",\n      \"principal_amount\": 4750000,\n      \"interest_rate\": 5,\n      \"yield\": 3.16,\n      \"price\": 108.746,\n      \"cusip\": \"TE1\"\n    },\n    {\n      \"bond_series\": \"Series D\",\n      \"maturity_date\": \"2031-08-01\",\n      \"principal_amount\": 5200000,\n      \"interest_rate\": 5,\n      \"yield\": 3.2,\n      \"price\": 110.037,\n      \"cusip\": \"TF8\"\n    },\n    {\n      \"bond_series\": \"Series D\",\n      \"maturity_date\": \"2032-08-01\",\n      \"principal_amount\": 4080000,\n      \"interest_rate\": 5,\n      \"yield\": 3.27,\n      \"price\": 111.006,\n      \"cusip\": \"TG6\"\n    },\n    {\n      \"bond_series\": \"Series D\",\n      \"maturity_date\": \"2033-08-01\",\n      \"principal_amount\": 4455000,\n      \"interest_rate\": 5,\n      \"yield\": 3.32,\n      \"price\": 111.961,\n      \"cusip\": \"TH4\"\n    },\n    {\n      \"bond_series\": \"Series A\",\n      \"maturity_date\": \"2028-08-01\",\n      \"principal_amount\": 1865000,\n      \"interest_rate\": 5,\n      \"yield\": 3.1,\n      \"price\": 105.731,\n      \"cusip\": \"SJ1\"\n    },\n    {\n      \"bond_series\": \"Series A\",\n      \"maturity_date\": \"2030-08-01\",\n      \"principal_amount\": 1385000,\n      \"interest_rate\": 5,\n      \"yield\": 3.16,\n      \"price\": 108.746,\n      \"cusip\": \"SK8\"\n    },\n    {\n      \"bond_series\": \"Series A\",\n      \"maturity_date\": \"2031-08-01\",\n      \"principal_amount\": 950000,\n      \"interest_rate\": 5,\n      \"yield\": 3.2,\n      \"price\": 110.037,\n      \"cusip\": \"SL6\"\n    },\n    {\n      \"bond_series\": \"Series A\",\n      \"maturity_date\": \"2032-08-01\",\n      \"principal_amount\": 1415000,\n      \"interest_rate\": 5,\n      \"yield\": 3.27,\n      \"price\": 111.006,\n      \"cusip\": \"SM4\"\n    },\n    {\n      \"bond_series\": \"Series A\",\n      \"maturity_date\": \"2033-08-01\",\n      \"principal_amount\": 805000,\n      \"interest_rate\": 5,\n      \"yield\": 3.32,\n      \"price\": 111.961,\n      \"cusip\": \"SN2\"\n    },\n    {\n      \"bond_series\": \"Series B\",\n      \"maturity_date\": \"2025-08-01\",\n      \"principal_amount\": 560000,\n      \"interest_rate\": 5,\n      \"yield\": 3.08,\n      \"price\": 100.362,\n      \"cusip\": \"SP7\"\n    },\n    {\n      \"bond_series\": \"Series B\",\n      \"maturity_date\": \"2026-08-01\",\n      \"principal_amount\": 4740000,\n      \"interest_rate\": 5,\n      \"yield\": 3.08,\n      \"price\": 102.23,\n      \"cusip\": \"SQ5\"\n    },\n    {\n      \"bond_series\": \"Series B\",\n      \"maturity_date\": \"2027-08-01\",\n      \"principal_amount\": 5195000,\n      \"interest_rate\": 5,\n      \"yield\": 3.1,\n      \"price\": 103.996,\n      \"cusip\": \"SR3\"\n    },\n    {\n      \"bond_series\": \"Series B\",\n      \"maturity_date\": \"2028-08-01\",\n      \"principal_amount\": 4680000,\n      \"interest_rate\": 5,\n      \"yield\": 3.1,\n      \"price\": 105.731,\n      \"cusip\": \"SS1\"\n    },\n    {\n      \"bond_series\": \"Series B\",\n      \"maturity_date\": \"2029-08-01\",\n      \"principal_amount\": 2070000,\n      \"interest_rate\": 5,\n      \"yield\": 3.14,\n      \"price\": 107.251,\n      \"cusip\": \"ST9\"\n    },\n    {\n      \"bond_series\": \"Series B\",\n      \"maturity_date\": \"2030-08-01\",\n      \"principal_amount\": 1450000,\n      \"interest_rate\": 5,\n      \"yield\": 3.16,\n      \"price\": 108.746,\n      \"cusip\": \"SU6\"\n    },\n    {\n      \"bond_series\": \"Series B\",\n      \"maturity_date\": \"2031-08-01\",\n      \"principal_amount\": 7310000,\n      \"interest_rate\": 5,\n      \"yield\": 3.2,\n      \"price\": 110.037,\n      \"cusip\": \"SV4\"\n    },\n    {\n      \"bond_series\": \"Series B\",\n      \"maturity_date\": \"2032-08-01\",\n      \"principal_amount\": 5320000,\n      \"interest_rate\": 5,\n      \"yield\": 3.27,\n      \"price\": 111.006,\n      \"cusip\": \"SW2\"\n    },\n    {\n      \"bond_series\": \"Series B\",\n      \"maturity_date\": \"2033-08-01\",\n      \"principal_amount\": 1930000,\n      \"interest_rate\": 5,\n      \"yield\": 3.32,\n      \"price\": 111.961,\n      \"cusip\": \"SX0\"\n    },\n    {\n      \"bond_series\": \"Series B\",\n      \"maturity_date\": \"2034-08-01\",\n      \"principal_amount\": 1020000,\n      \"interest_rate\": 5,\n      \"yield\": 3.42,\n      \"price\": 112.37,\n      \"cusip\": \"SY8\"\n    },\n    {\n      \"bond_series\": \"Series B\",\n      \"maturity_date\": \"2035-08-01\",\n      \"principal_amount\": 1270000,\n      \"interest_rate\": 5,\n      \"yield\": 3.54,\n      \"price\": 112.398,\n      \"cusip\": \"SZ5\"\n    }\n  ],\n  \"bond_issue_debt_service\": [\n    {\n      \"bond_series\": \"Series D\",\n      \"period_ending\": \"2025-08-01\",\n      \"principal\": 0,\n      \"interest\": 544444.44,\n      \"total_debt_service\": 544444.44\n    },\n    {\n      \"bond_series\": \"Series D\",\n      \"period_ending\": \"2026-08-01\",\n      \"principal\": 16080000,\n      \"interest\": 2800000,\n      \"total_debt_service\": 18880000\n    },\n    {\n      \"bond_series\": \"Series D\",\n      \"period_ending\": \"2027-08-01\",\n      \"principal\": 8160000,\n      \"interest\": 1996000,\n      \"total_debt_service\": 10156000\n    },\n    {\n      \"bond_series\": \"Series D\",\n      \"period_ending\": \"2028-08-01\",\n      \"principal\": 8950000,\n      \"interest\": 1588000,\n      \"total_debt_service\": 10538000\n    },\n    {\n      \"bond_series\": \"Series D\",\n      \"period_ending\": \"2029-08-01\",\n      \"principal\": 4325000,\n      \"interest\": 1140500,\n      \"total_debt_service\": 5465500\n    },\n    {\n      \"bond_series\": \"Series D\",\n      \"period_ending\": \"2030-08-01\",\n      \"principal\": 4750000,\n      \"interest\": 924250,\n      \"total_debt_service\": 5674250\n    },\n    {\n      \"bond_series\": \"Series D\",\n      \"period_ending\": \"2031-08-01\",\n      \"principal\": 5200000,\n      \"interest\": 686750,\n      \"total_debt_service\": 5886750\n    },\n    {\n      \"bond_series\": \"Series D\",\n      \"period_ending\": \"2032-08-01\",\n      \"principal\": 4080000,\n      \"interest\": 426750,\n      \"total_debt_service\": 4506750\n    },\n    {\n      \"bond_series\": \"Series D\",\n      \"period_ending\": \"2033-08-01\",\n      \"principal\": 4455000,\n      \"interest\": 222750,\n      \"total_debt_service\": 4677750\n    },\n    {\n      \"bond_series\": \"Series A\",\n      \"period_ending\": \"2025-08-01\",\n      \"principal\": 0,\n      \"interest\": 62416.67,\n      \"total_debt_service\": 62416.67\n    },\n    {\n      \"bond_series\": \"Series A\",\n      \"period_ending\": \"2026-08-01\",\n      \"principal\": 0,\n      \"interest\": 321000,\n      \"total_debt_service\": 321000\n    },\n    {\n      \"bond_series\": \"Series A\",\n      \"period_ending\": \"2027-08-01\",\n      \"principal\": 0,\n      \"interest\": 321000,\n      \"total_debt_service\": 321000\n    },\n    {\n      \"bond_series\": \"Series A\",\n      \"period_ending\": \"2028-08-01\",\n      \"principal\": 1865000,\n      \"interest\": 321000,\n      \"total_debt_service\": 2186000\n    },\n    {\n      \"bond_series\": \"Series A\",\n      \"period_ending\": \"2029-08-01\",\n      \"principal\": 0,\n      \"interest\": 227750,\n      \"total_debt_service\": 227750\n    },\n    {\n      \"bond_series\": \"Series A\",\n      \"period_ending\": \"2030-08-01\",\n      \"principal\": 1385000,\n      \"interest\": 227750,\n      \"total_debt_service\": 1612750\n    },\n    {\n      \"bond_series\": \"Series A\",\n      \"period_ending\": \"2031-08-01\",\n      \"principal\": 950000,\n      \"interest\": 158500,\n      \"total_debt_service\": 1108500\n    },\n    {\n      \"bond_series\": \"Series A\",\n      \"period_ending\": \"2032-08-01\",\n      \"principal\": 1415000,\n      \"interest\": 111000,\n      \"total_debt_service\": 1526000\n    },\n    {\n      \"bond_series\": \"Series A\",\n      \"period_ending\": \"2033-08-01\",\n      \"principal\": 805000,\n      \"interest\": 40250,\n      \"total_debt_service\": 845250\n    },\n    {\n      \"bond_series\": \"Series B\",\n      \"period_ending\": \"2025-08-01\",\n      \"principal\": 560000,\n      \"interest\": 345576.39,\n      \"total_debt_service\": 905576.39\n    },\n    {\n      \"bond_series\": \"Series B\",\n      \"period_ending\": \"2026-08-01\",\n      \"principal\": 4740000,\n      \"interest\": 1749250,\n      \"total_debt_service\": 6489250\n    },\n    {\n      \"bond_series\": \"Series B\",\n      \"period_ending\": \"2027-08-01\",\n      \"principal\": 5195000,\n      \"interest\": 1512250,\n      \"total_debt_service\": 6707250\n    },\n    {\n      \"bond_series\": \"Series B\",\n      \"period_ending\": \"2028-08-01\",\n      \"principal\": 4680000,\n      \"interest\": 1252500,\n      \"total_debt_service\": 5932500\n    },\n    {\n      \"bond_series\": \"Series B\",\n      \"period_ending\": \"2029-08-01\",\n      \"principal\": 2070000,\n      \"interest\": 1018500,\n      \"total_debt_service\": 3088500\n    },\n    {\n      \"bond_series\": \"Series B\",\n      \"period_ending\": \"2030-08-01\",\n      \"principal\": 1450000,\n      \"interest\": 915000,\n      \"total_debt_service\": 2365000\n    },\n    {\n      \"bond_series\": \"Series B\",\n      \"period_ending\": \"2031-08-01\",\n      \"principal\": 7310000,\n      \"interest\": 842500,\n      \"total_debt_service\": 8152500\n    },\n    {\n      \"bond_series\": \"Series B\",\n      \"period_ending\": \"2032-08-01\",\n      \"principal\": 5320000,\n      \"interest\": 477000,\n      \"total_debt_service\": 5797000\n    },\n    {\n      \"bond_series\": \"Series B\",\n      \"period_ending\": \"2033-08-01\",\n      \"principal\": 1930000,\n      \"interest\": 211000,\n      \"total_debt_service\": 2141000\n    },\n    {\n      \"bond_series\": \"Series B\",\n      \"period_ending\": \"2034-08-01\",\n      \"principal\": 1020000,\n      \"interest\": 114500,\n      \"total_debt_service\": 1134500\n    },\n    {\n      \"bond_series\": \"Series B\",\n      \"period_ending\": \"2035-08-01\",\n      \"principal\": 1270000,\n      \"interest\": 63500,\n      \"total_debt_service\": 1333500\n    }\n  ]\n}\n```"
      },
      "type": "n8n-nodes-base.stickyNote",
      "position": [
        -3360,
        4032
      ],
      "typeVersion": 1,
      "id": "229c2a97-dcc6-4e50-af34-cdc46ec04b0e",
      "name": "Sticky Note8"
    },
    {
      "parameters": {
        "descriptionType": "manual",
        "toolDescription": "Update a row in Supabase for a given table_name table",
        "operation": "update",
        "tableId": "={{ $fromAI('table_name', `Table name`, 'string') }}",
        "matchType": "allFilters",
        "filters": {
          "conditions": [
            {
              "keyName": "=document_id",
              "condition": "eq",
              "keyValue": "={{ $json.document_id }}"
            }
          ]
        },
        "dataToSend": "autoMapInputData",
        "inputsToIgnore": "table_name"
      },
      "type": "n8n-nodes-base.supabaseTool",
      "typeVersion": 1,
      "position": [
        -1648,
        7200
      ],
      "id": "ccb7c2d1-26a2-4e92-905a-bc490678737c",
      "name": "Update a row in Supabase",
      "credentials": {
        "supabaseApi": {
          "id": "V1uzndLMe2n07Mxy",
          "name": "Supabase Bonds"
        }
      },
      "disabled": true
    },
    {
      "parameters": {
        "content": "### Split wrapped\n```\n{\n  \"document_id\": \"11TRkJA7dCqe30RTgOHaZT9HFhcdIMyak\",\n  \"output\": {\n    \"bond_document\": {\n      \"document_id\": \"11TRkJA7dCqe30RTgOHaZT9HFhcdIMyak\",\n      \"document_title\": \"$56,000,000 EAST SIDE UNION HIGH SCHOOL DISTRICT (Santa Clara County, California) General Obligation Bonds 2016 Election, Series D; $6,420,000 EAST SIDE UNION HIGH SCHOOL DISTRICT (Santa Clara County, California) 2025 Refunding General Obligation Bonds, Series A; $35,545,000 EAST SIDE UNION HIGH SCHOOL DISTRICT (Santa Clara County, California) 2025 Refunding General Obligation Bonds, Series B\",\n      \"school_district_name\": \"EAST SIDE UNION HIGH SCHOOL DISTRICT\",\n      \"county\": \"Santa Clara County, California\",\n      \"state\": \"CA\",\n      \"overall_rating\": \"Aa3\",\n      \"overall_rating_agency\": \"Moody’s\",\n      \"overall_due_date\": \"2035-08-01\",\n      \"date_bond_closes\": \"2025-05-21\",\n      \"date_of_delivery\": \"2025-05-21\",\n      \"interest_payment_description\": \"semiannually on each February 1 and August 1\",\n      \"interest_commencing_date\": \"2025-08-01\",\n      \"superintendent\": \"Glenn Vander Zee\"\n    },\n    \"professional_services\": {\n      \"document_id\": \"11TRkJA7dCqe30RTgOHaZT9HFhcdIMyak\",\n      \"legal_counsel\": \"Jones Hall, A Professional Law Corporation\",\n      \"disclosure_counsel\": \"Jones Hall, A Professional Law Corporation\",\n      \"financial_advisor\": \"Dale Scott & Company Inc.\",\n      \"paying_agent\": \"U.S. Bank Trust Company, National Association\"\n    },\n    \"financial_management_contact\": {\n      \"document_id\": \"11TRkJA7dCqe30RTgOHaZT9HFhcdIMyak\",\n      \"name\": \"Tom Huynh\",\n      \"title\": \"Associate Superintendent of Business Services\",\n      \"address\": \"830 North Capitol Ave., San José, California 95133\",\n      \"phone\": \"(408) 347-5050\"\n    },\n    \"assessed_valuation_summary\": {\n      \"document_id\": \"11TRkJA7dCqe30RTgOHaZT9HFhcdIMyak\",\n      \"fiscal_year\": \"2024-25\",\n      \"total_assessed_valuation\": 112255546441,\n      \"valuation_source\": \"California Municipal Statistics, Inc.\",\n      \"is_county_teeter_plan_participant\": true,\n      \"notes\": \"Assessed valuations are subject to change due to general economic conditions, supply and demand for real property, government regulations, man-made or natural disasters (e.g., earthquakes, wildfires, floods, droughts, mudslides), and public health disasters (e.g., COVID-19 pandemic). The District cannot predict the future effects of these factors on assessed values or economic activity. The County's Teeter Plan participation ensures the District receives 100% of secured property taxes levied, mitigating delinquency risk.\"\n    },\n    \"estimated_sources_uses\": {\n      \"document_id\": \"11TRkJA7dCqe30RTgOHaZT9HFhcdIMyak\",\n      \"total_sources\": 104664986.6,\n      \"total_uses\": 104664986.6\n    },\n    \"estimated_source_issue\": [\n      {\n        \"document_id\": \"11TRkJA7dCqe30RTgOHaZT9HFhcdIMyak\",\n        \"issue\": \"Series D Bonds\",\n        \"principal_amount\": 56000000,\n        \"net_original_issue_premium\": 3430454.2,\n        \"total\": 59430454.2\n      },\n      {\n        \"document_id\": \"11TRkJA7dCqe30RTgOHaZT9HFhcdIMyak\",\n        \"issue\": \"2025 Refunding General Obligation Bonds, Series A\",\n        \"principal_amount\": 6420000,\n        \"net_original_issue_premium\": 575387.7,\n        \"total\": 6995387.7\n      },\n      {\n        \"document_id\": \"11TRkJA7dCqe30RTgOHaZT9HFhcdIMyak\",\n        \"issue\": \"2025 Refunding General Obligation Bonds, Series B\",\n        \"principal_amount\": 35545000,\n        \"net_original_issue_premium\": 2694144.7,\n        \"total\": 38239144.7\n      }\n    ],\n    \"estimated_use_category\": [\n      {\n        \"document_id\": \"11TRkJA7dCqe30RTgOHaZT9HFhcdIMyak\",\n        \"category\": \"Deposit to Building Fund\",\n        \"total_amount\": 55754000,\n        \"measure_vv_amount\": 0,\n        \"measure_m_amount\": 0\n      },\n      {\n        \"document_id\": \"11TRkJA7dCqe30RTgOHaZT9HFhcdIMyak\",\n        \"category\": \"Deposit to Escrow Fund\",\n        \"total_amount\": 44741927.5,\n        \"measure_vv_amount\": 0,\n        \"measure_m_amount\": 0\n      },\n      {\n        \"document_id\": \"11TRkJA7dCqe30RTgOHaZT9HFhcdIMyak\",\n        \"category\": \"Deposit to Debt Service Fund\",\n        \"total_amount\": 3263551.73,\n        \"measure_vv_amount\": 0,\n        \"measure_m_amount\": 0\n      },\n      {\n        \"document_id\": \"11TRkJA7dCqe30RTgOHaZT9HFhcdIMyak\",\n        \"category\": \"Costs of Issuance(1)\",\n        \"total_amount\": 905507.37,\n        \"measure_vv_amount\": 0,\n        \"measure_m_amount\": 0\n      }\n    ],\n    \"redemption_date\": [],\n    \"underwriter\": [\n      {\n        \"document_id\": \"11TRkJA7dCqe30RTgOHaZT9HFhcdIMyak\",\n        \"name\": \"Loop Capital Markets LLC\"\n      }\n    ],\n    \"board_member\": [\n      {\n        \"document_id\": \"11TRkJA7dCqe30RTgOHaZT9HFhcdIMyak\",\n        \"name\": \"Brian Do\",\n        \"role\": \"President\"\n      },\n      {\n        \"document_id\": \"11TRkJA7dCqe30RTgOHaZT9HFhcdIMyak\",\n        \"name\": \"Van T. Le\",\n        \"role\": \"Vice President\"\n      },\n      {\n        \"document_id\": \"11TRkJA7dCqe30RTgOHaZT9HFhcdIMyak\",\n        \"name\": \"Lorena Chavez\",\n        \"role\": \"Clerk\"\n      },\n      {\n        \"document_id\": \"11TRkJA7dCqe30RTgOHaZT9HFhcdIMyak\",\n        \"name\": \"Pattie Cortese\",\n        \"role\": \"Member\"\n      },\n      {\n        \"document_id\": \"11TRkJA7dCqe30RTgOHaZT9HFhcdIMyak\",\n        \"name\": \"J. Manuel Herrera\",\n        \"role\": \"Member\"\n      }\n    ],\n    \"debt_service_issue\": [\n      {\n        \"document_id\": \"11TRkJA7dCqe30RTgOHaZT9HFhcdIMyak\",\n        \"issue_name\": \"Series D Bonds\"\n      },\n      {\n        \"document_id\": \"11TRkJA7dCqe30RTgOHaZT9HFhcdIMyak\",\n        \"issue_name\": \"Series A Refunding Bonds\"\n      },\n      {\n        \"document_id\": \"11TRkJA7dCqe30RTgOHaZT9HFhcdIMyak\",\n        \"issue_name\": \"Series B Refunding Bonds\"\n      }\n    ],\n    \"debt_service_entry\": [\n      {\n        \"issue_name\": \"Series D Bonds\",\n        \"period_ending\": \"2025-08-01\",\n        \"principal\": 0,\n        \"interest\": 544444.44,\n        \"total_debt_service\": 544444.44\n      },\n      {\n        \"issue_name\": \"Series D Bonds\",\n        \"period_ending\": \"2026-08-01\",\n        \"principal\": 16080000,\n        \"interest\": 2800000,\n        \"total_debt_service\": 18880000\n      },\n      {\n        \"issue_name\": \"Series D Bonds\",\n        \"period_ending\": \"2027-08-01\",\n        \"principal\": 8160000,\n        \"interest\": 1996000,\n        \"total_debt_service\": 10156000\n      },\n      {\n        \"issue_name\": \"Series D Bonds\",\n        \"period_ending\": \"2028-08-01\",\n        \"principal\": 8950000,\n        \"interest\": 1588000,\n        \"total_debt_service\": 10538000\n      },\n      {\n        \"issue_name\": \"Series D Bonds\",\n        \"period_ending\": \"2029-08-01\",\n        \"principal\": 4325000,\n        \"interest\": 1140500,\n        \"total_debt_service\": 5465500\n      },\n      {\n        \"issue_name\": \"Series D Bonds\",\n        \"period_ending\": \"2030-08-01\",\n        \"principal\": 4750000,\n        \"interest\": 924250,\n        \"total_debt_service\": 5674250\n      },\n      {\n        \"issue_name\": \"Series D Bonds\",\n        \"period_ending\": \"2031-08-01\",\n        \"principal\": 5200000,\n        \"interest\": 686750,\n        \"total_debt_service\": 5886750\n      },\n      {\n        \"issue_name\": \"Series D Bonds\",\n        \"period_ending\": \"2032-08-01\",\n        \"principal\": 4080000,\n        \"interest\": 426750,\n        \"total_debt_service\": 4506750\n      },\n      {\n        \"issue_name\": \"Series D Bonds\",\n        \"period_ending\": \"2033-08-01\",\n        \"principal\": 4455000,\n        \"interest\": 222750,\n        \"total_debt_service\": 4677750\n      },\n      {\n        \"issue_name\": \"Series A Refunding Bonds\",\n        \"period_ending\": \"2025-08-01\",\n        \"principal\": 0,\n        \"interest\": 62416.67,\n        \"total_debt_service\": 62416.67\n      },\n      {\n        \"issue_name\": \"Series A Refunding Bonds\",\n        \"period_ending\": \"2026-08-01\",\n        \"principal\": 0,\n        \"interest\": 321000,\n        \"total_debt_service\": 321000\n      },\n      {\n        \"issue_name\": \"Series A Refunding Bonds\",\n        \"period_ending\": \"2027-08-01\",\n        \"principal\": 0,\n        \"interest\": 321000,\n        \"total_debt_service\": 321000\n      },\n      {\n        \"issue_name\": \"Series A Refunding Bonds\",\n        \"period_ending\": \"2028-08-01\",\n        \"principal\": 1865000,\n        \"interest\": 321000,\n        \"total_debt_service\": 2186000\n      },\n      {\n        \"issue_name\": \"Series A Refunding Bonds\",\n        \"period_ending\": \"2029-08-01\",\n        \"principal\": 0,\n        \"interest\": 227750,\n        \"total_debt_service\": 227750\n      },\n      {\n        \"issue_name\": \"Series A Refunding Bonds\",\n        \"period_ending\": \"2030-08-01\",\n        \"principal\": 1385000,\n        \"interest\": 227750,\n        \"total_debt_service\": 1612750\n      },\n      {\n        \"issue_name\": \"Series A Refunding Bonds\",\n        \"period_ending\": \"2031-08-01\",\n        \"principal\": 950000,\n        \"interest\": 158500,\n        \"total_debt_service\": 1108500\n      },\n      {\n        \"issue_name\": \"Series A Refunding Bonds\",\n        \"period_ending\": \"2032-08-01\",\n        \"principal\": 1415000,\n        \"interest\": 111000,\n        \"total_debt_service\": 1526000\n      },\n      {\n        \"issue_name\": \"Series A Refunding Bonds\",\n        \"period_ending\": \"2033-08-01\",\n        \"principal\": 805000,\n        \"interest\": 40250,\n        \"total_debt_service\": 845250\n      },\n      {\n        \"issue_name\": \"Series B Refunding Bonds\",\n        \"period_ending\": \"2025-08-01\",\n        \"principal\": 560000,\n        \"interest\": 345576.39,\n        \"total_debt_service\": 905576.39\n      },\n      {\n        \"issue_name\": \"Series B Refunding Bonds\",\n        \"period_ending\": \"2026-08-01\",\n        \"principal\": 4740000,\n        \"interest\": 1749250,\n        \"total_debt_service\": 6489250\n      },\n      {\n        \"issue_name\": \"Series B Refunding Bonds\",\n        \"period_ending\": \"2027-08-01\",\n        \"principal\": 5195000,\n        \"interest\": 1512250,\n        \"total_debt_service\": 6707250\n      },\n      {\n        \"issue_name\": \"Series B Refunding Bonds\",\n        \"period_ending\": \"2028-08-01\",\n        \"principal\": 4680000,\n        \"interest\": 1252500,\n        \"total_debt_service\": 5932500\n      },\n      {\n        \"issue_name\": \"Series B Refunding Bonds\",\n        \"period_ending\": \"2029-08-01\",\n        \"principal\": 2070000,\n        \"interest\": 1018500,\n        \"total_debt_service\": 3088500\n      },\n      {\n        \"issue_name\": \"Series B Refunding Bonds\",\n        \"period_ending\": \"2030-08-01\",\n        \"principal\": 1450000,\n        \"interest\": 915000,\n        \"total_debt_service\": 2365000\n      },\n      {\n        \"issue_name\": \"Series B Refunding Bonds\",\n        \"period_ending\": \"2031-08-01\",\n        \"principal\": 7310000,\n        \"interest\": 842500,\n        \"total_debt_service\": 8152500\n      },\n      {\n        \"issue_name\": \"Series B Refunding Bonds\",\n        \"period_ending\": \"2032-08-01\",\n        \"principal\": 5320000,\n        \"interest\": 477000,\n        \"total_debt_service\": 5797000\n      },\n      {\n        \"issue_name\": \"Series B Refunding Bonds\",\n        \"period_ending\": \"2033-08-01\",\n        \"principal\": 1930000,\n        \"interest\": 211000,\n        \"total_debt_service\": 2141000\n      },\n      {\n        \"issue_name\": \"Series B Refunding Bonds\",\n        \"period_ending\": \"2034-08-01\",\n        \"principal\": 1020000,\n        \"interest\": 114500,\n        \"total_debt_service\": 1134500\n      },\n      {\n        \"issue_name\": \"Series B Refunding Bonds\",\n        \"period_ending\": \"2035-08-01\",\n        \"principal\": 1270000,\n        \"interest\": 63500,\n        \"total_debt_service\": 1333500\n      }\n    ],\n    \"bond_issue\": [\n      {\n        \"document_id\": \"11TRkJA7dCqe30RTgOHaZT9HFhcdIMyak\",\n        \"bond_amount\": 56000000,\n        \"election_year\": 2016,\n        \"bond_type\": \"General Obligation Bonds\",\n        \"bond_series\": \"Series D\",\n        \"rating\": \"Aa3\",\n        \"due_date\": \"2033-08-01\",\n        \"interest_commencing_date\": \"2025-08-01\",\n        \"base_cusip\": \"275282\",\n        \"optional_call_date\": null,\n        \"maturities_callable_after\": null,\n        \"redemption_price\": null\n      },\n      {\n        \"document_id\": \"11TRkJA7dCqe30RTgOHaZT9HFhcdIMyak\",\n        \"bond_amount\": 6420000,\n        \"election_year\": 2025,\n        \"bond_type\": \"Refunding General Obligation Bonds\",\n        \"bond_series\": \"Series A\",\n        \"rating\": \"Aa3\",\n        \"due_date\": \"2033-08-01\",\n        \"interest_commencing_date\": \"2025-08-01\",\n        \"base_cusip\": \"275282\",\n        \"optional_call_date\": null,\n        \"maturities_callable_after\": null,\n        \"redemption_price\": null\n      },\n      {\n        \"document_id\": \"11TRkJA7dCqe30RTgOHaZT9HFhcdIMyak\",\n        \"bond_amount\": 35545000,\n        \"election_year\": 2025,\n        \"bond_type\": \"Refunding General Obligation Bonds\",\n        \"bond_series\": \"Series B\",\n        \"rating\": \"Aa3\",\n        \"due_date\": \"2035-08-01\",\n        \"interest_commencing_date\": \"2025-08-01\",\n        \"base_cusip\": \"275282\",\n        \"optional_call_date\": null,\n        \"maturities_callable_after\": null,\n        \"redemption_price\": null\n      }\n    ],\n    \"bond_maturity\": [\n      {\n        \"bond_series\": \"Series D\",\n        \"maturity_date\": \"2026-08-01\",\n        \"principal_amount\": 16080000,\n        \"interest_rate\": 5,\n        \"yield\": 3.08,\n        \"price\": 102.23,\n        \"cusip\": \"TA9\"\n      },\n      {\n        \"bond_series\": \"Series D\",\n        \"maturity_date\": \"2027-08-01\",\n        \"principal_amount\": 8160000,\n        \"interest_rate\": 5,\n        \"yield\": 3.1,\n        \"price\": 103.996,\n        \"cusip\": \"TB7\"\n      },\n      {\n        \"bond_series\": \"Series D\",\n        \"maturity_date\": \"2028-08-01\",\n        \"principal_amount\": 8950000,\n        \"interest_rate\": 5,\n        \"yield\": 3.1,\n        \"price\": 105.731,\n        \"cusip\": \"TC5\"\n      },\n      {\n        \"bond_series\": \"Series D\",\n        \"maturity_date\": \"2029-08-01\",\n        \"principal_amount\": 4325000,\n        \"interest_rate\": 5,\n        \"yield\": 3.14,\n        \"price\": 107.251,\n        \"cusip\": \"TD3\"\n      },\n      {\n        \"bond_series\": \"Series D\",\n        \"maturity_date\": \"2030-08-01\",\n        \"principal_amount\": 4750000,\n        \"interest_rate\": 5,\n        \"yield\": 3.16,\n        \"price\": 108.746,\n        \"cusip\": \"TE1\"\n      },\n      {\n        \"bond_series\": \"Series D\",\n        \"maturity_date\": \"2031-08-01\",\n        \"principal_amount\": 5200000,\n        \"interest_rate\": 5,\n        \"yield\": 3.2,\n        \"price\": 110.037,\n        \"cusip\": \"TF8\"\n      },\n      {\n        \"bond_series\": \"Series D\",\n        \"maturity_date\": \"2032-08-01\",\n        \"principal_amount\": 4080000,\n        \"interest_rate\": 5,\n        \"yield\": 3.27,\n        \"price\": 111.006,\n        \"cusip\": \"TG6\"\n      },\n      {\n        \"bond_series\": \"Series D\",\n        \"maturity_date\": \"2033-08-01\",\n        \"principal_amount\": 4455000,\n        \"interest_rate\": 5,\n        \"yield\": 3.32,\n        \"price\": 111.961,\n        \"cusip\": \"TH4\"\n      },\n      {\n        \"bond_series\": \"Series A\",\n        \"maturity_date\": \"2028-08-01\",\n        \"principal_amount\": 1865000,\n        \"interest_rate\": 5,\n        \"yield\": 3.1,\n        \"price\": 105.731,\n        \"cusip\": \"SJ1\"\n      },\n      {\n        \"bond_series\": \"Series A\",\n        \"maturity_date\": \"2030-08-01\",\n        \"principal_amount\": 1385000,\n        \"interest_rate\": 5,\n        \"yield\": 3.16,\n        \"price\": 108.746,\n        \"cusip\": \"SK8\"\n      },\n      {\n        \"bond_series\": \"Series A\",\n        \"maturity_date\": \"2031-08-01\",\n        \"principal_amount\": 950000,\n        \"interest_rate\": 5,\n        \"yield\": 3.2,\n        \"price\": 110.037,\n        \"cusip\": \"SL6\"\n      },\n      {\n        \"bond_series\": \"Series A\",\n        \"maturity_date\": \"2032-08-01\",\n        \"principal_amount\": 1415000,\n        \"interest_rate\": 5,\n        \"yield\": 3.27,\n        \"price\": 111.006,\n        \"cusip\": \"SM4\"\n      },\n      {\n        \"bond_series\": \"Series A\",\n        \"maturity_date\": \"2033-08-01\",\n        \"principal_amount\": 805000,\n        \"interest_rate\": 5,\n        \"yield\": 3.32,\n        \"price\": 111.961,\n        \"cusip\": \"SN2\"\n      },\n      {\n        \"bond_series\": \"Series B\",\n        \"maturity_date\": \"2025-08-01\",\n        \"principal_amount\": 560000,\n        \"interest_rate\": 5,\n        \"yield\": 3.08,\n        \"price\": 100.362,\n        \"cusip\": \"SP7\"\n      },\n      {\n        \"bond_series\": \"Series B\",\n        \"maturity_date\": \"2026-08-01\",\n        \"principal_amount\": 4740000,\n        \"interest_rate\": 5,\n        \"yield\": 3.08,\n        \"price\": 102.23,\n        \"cusip\": \"SQ5\"\n      },\n      {\n        \"bond_series\": \"Series B\",\n        \"maturity_date\": \"2027-08-01\",\n        \"principal_amount\": 5195000,\n        \"interest_rate\": 5,\n        \"yield\": 3.1,\n        \"price\": 103.996,\n        \"cusip\": \"SR3\"\n      },\n      {\n        \"bond_series\": \"Series B\",\n        \"maturity_date\": \"2028-08-01\",\n        \"principal_amount\": 4680000,\n        \"interest_rate\": 5,\n        \"yield\": 3.1,\n        \"price\": 105.731,\n        \"cusip\": \"SS1\"\n      },\n      {\n        \"bond_series\": \"Series B\",\n        \"maturity_date\": \"2029-08-01\",\n        \"principal_amount\": 2070000,\n        \"interest_rate\": 5,\n        \"yield\": 3.14,\n        \"price\": 107.251,\n        \"cusip\": \"ST9\"\n      },\n      {\n        \"bond_series\": \"Series B\",\n        \"maturity_date\": \"2030-08-01\",\n        \"principal_amount\": 1450000,\n        \"interest_rate\": 5,\n        \"yield\": 3.16,\n        \"price\": 108.746,\n        \"cusip\": \"SU6\"\n      },\n      {\n        \"bond_series\": \"Series B\",\n        \"maturity_date\": \"2031-08-01\",\n        \"principal_amount\": 7310000,\n        \"interest_rate\": 5,\n        \"yield\": 3.2,\n        \"price\": 110.037,\n        \"cusip\": \"SV4\"\n      },\n      {\n        \"bond_series\": \"Series B\",\n        \"maturity_date\": \"2032-08-01\",\n        \"principal_amount\": 5320000,\n        \"interest_rate\": 5,\n        \"yield\": 3.27,\n        \"price\": 111.006,\n        \"cusip\": \"SW2\"\n      },\n      {\n        \"bond_series\": \"Series B\",\n        \"maturity_date\": \"2033-08-01\",\n        \"principal_amount\": 1930000,\n        \"interest_rate\": 5,\n        \"yield\": 3.32,\n        \"price\": 111.961,\n        \"cusip\": \"SX0\"\n      },\n      {\n        \"bond_series\": \"Series B\",\n        \"maturity_date\": \"2034-08-01\",\n        \"principal_amount\": 1020000,\n        \"interest_rate\": 5,\n        \"yield\": 3.42,\n        \"price\": 112.37,\n        \"cusip\": \"SY8\"\n      },\n      {\n        \"bond_series\": \"Series B\",\n        \"maturity_date\": \"2035-08-01\",\n        \"principal_amount\": 1270000,\n        \"interest_rate\": 5,\n        \"yield\": 3.54,\n        \"price\": 112.398,\n        \"cusip\": \"SZ5\"\n      }\n    ],\n    \"bond_issue_debt_service\": [\n      {\n        \"bond_series\": \"Series D\",\n        \"period_ending\": \"2025-08-01\",\n        \"principal\": 0,\n        \"interest\": 544444.44,\n        \"total_debt_service\": 544444.44\n      },\n      {\n        \"bond_series\": \"Series D\",\n        \"period_ending\": \"2026-08-01\",\n        \"principal\": 16080000,\n        \"interest\": 2800000,\n        \"total_debt_service\": 18880000\n      },\n      {\n        \"bond_series\": \"Series D\",\n        \"period_ending\": \"2027-08-01\",\n        \"principal\": 8160000,\n        \"interest\": 1996000,\n        \"total_debt_service\": 10156000\n      },\n      {\n        \"bond_series\": \"Series D\",\n        \"period_ending\": \"2028-08-01\",\n        \"principal\": 8950000,\n        \"interest\": 1588000,\n        \"total_debt_service\": 10538000\n      },\n      {\n        \"bond_series\": \"Series D\",\n        \"period_ending\": \"2029-08-01\",\n        \"principal\": 4325000,\n        \"interest\": 1140500,\n        \"total_debt_service\": 5465500\n      },\n      {\n        \"bond_series\": \"Series D\",\n        \"period_ending\": \"2030-08-01\",\n        \"principal\": 4750000,\n        \"interest\": 924250,\n        \"total_debt_service\": 5674250\n      },\n      {\n        \"bond_series\": \"Series D\",\n        \"period_ending\": \"2031-08-01\",\n        \"principal\": 5200000,\n        \"interest\": 686750,\n        \"total_debt_service\": 5886750\n      },\n      {\n        \"bond_series\": \"Series D\",\n        \"period_ending\": \"2032-08-01\",\n        \"principal\": 4080000,\n        \"interest\": 426750,\n        \"total_debt_service\": 4506750\n      },\n      {\n        \"bond_series\": \"Series D\",\n        \"period_ending\": \"2033-08-01\",\n        \"principal\": 4455000,\n        \"interest\": 222750,\n        \"total_debt_service\": 4677750\n      },\n      {\n        \"bond_series\": \"Series A\",\n        \"period_ending\": \"2025-08-01\",\n        \"principal\": 0,\n        \"interest\": 62416.67,\n        \"total_debt_service\": 62416.67\n      },\n      {\n        \"bond_series\": \"Series A\",\n        \"period_ending\": \"2026-08-01\",\n        \"principal\": 0,\n        \"interest\": 321000,\n        \"total_debt_service\": 321000\n      },\n      {\n        \"bond_series\": \"Series A\",\n        \"period_ending\": \"2027-08-01\",\n        \"principal\": 0,\n        \"interest\": 321000,\n        \"total_debt_service\": 321000\n      },\n      {\n        \"bond_series\": \"Series A\",\n        \"period_ending\": \"2028-08-01\",\n        \"principal\": 1865000,\n        \"interest\": 321000,\n        \"total_debt_service\": 2186000\n      },\n      {\n        \"bond_series\": \"Series A\",\n        \"period_ending\": \"2029-08-01\",\n        \"principal\": 0,\n        \"interest\": 227750,\n        \"total_debt_service\": 227750\n      },\n      {\n        \"bond_series\": \"Series A\",\n        \"period_ending\": \"2030-08-01\",\n        \"principal\": 1385000,\n        \"interest\": 227750,\n        \"total_debt_service\": 1612750\n      },\n      {\n        \"bond_series\": \"Series A\",\n        \"period_ending\": \"2031-08-01\",\n        \"principal\": 950000,\n        \"interest\": 158500,\n        \"total_debt_service\": 1108500\n      },\n      {\n        \"bond_series\": \"Series A\",\n        \"period_ending\": \"2032-08-01\",\n        \"principal\": 1415000,\n        \"interest\": 111000,\n        \"total_debt_service\": 1526000\n      },\n      {\n        \"bond_series\": \"Series A\",\n        \"period_ending\": \"2033-08-01\",\n        \"principal\": 805000,\n        \"interest\": 40250,\n        \"total_debt_service\": 845250\n      },\n      {\n        \"bond_series\": \"Series B\",\n        \"period_ending\": \"2025-08-01\",\n        \"principal\": 560000,\n        \"interest\": 345576.39,\n        \"total_debt_service\": 905576.39\n      },\n      {\n        \"bond_series\": \"Series B\",\n        \"period_ending\": \"2026-08-01\",\n        \"principal\": 4740000,\n        \"interest\": 1749250,\n        \"total_debt_service\": 6489250\n      },\n      {\n        \"bond_series\": \"Series B\",\n        \"period_ending\": \"2027-08-01\",\n        \"principal\": 5195000,\n        \"interest\": 1512250,\n        \"total_debt_service\": 6707250\n      },\n      {\n        \"bond_series\": \"Series B\",\n        \"period_ending\": \"2028-08-01\",\n        \"principal\": 4680000,\n        \"interest\": 1252500,\n        \"total_debt_service\": 5932500\n      },\n      {\n        \"bond_series\": \"Series B\",\n        \"period_ending\": \"2029-08-01\",\n        \"principal\": 2070000,\n        \"interest\": 1018500,\n        \"total_debt_service\": 3088500\n      },\n      {\n        \"bond_series\": \"Series B\",\n        \"period_ending\": \"2030-08-01\",\n        \"principal\": 1450000,\n        \"interest\": 915000,\n        \"total_debt_service\": 2365000\n      },\n      {\n        \"bond_series\": \"Series B\",\n        \"period_ending\": \"2031-08-01\",\n        \"principal\": 7310000,\n        \"interest\": 842500,\n        \"total_debt_service\": 8152500\n      },\n      {\n        \"bond_series\": \"Series B\",\n        \"period_ending\": \"2032-08-01\",\n        \"principal\": 5320000,\n        \"interest\": 477000,\n        \"total_debt_service\": 5797000\n      },\n      {\n        \"bond_series\": \"Series B\",\n        \"period_ending\": \"2033-08-01\",\n        \"principal\": 1930000,\n        \"interest\": 211000,\n        \"total_debt_service\": 2141000\n      },\n      {\n        \"bond_series\": \"Series B\",\n        \"period_ending\": \"2034-08-01\",\n        \"principal\": 1020000,\n        \"interest\": 114500,\n        \"total_debt_service\": 1134500\n      },\n      {\n        \"bond_series\": \"Series B\",\n        \"period_ending\": \"2035-08-01\",\n        \"principal\": 1270000,\n        \"interest\": 63500,\n        \"total_debt_service\": 1333500\n      }\n    ]\n  }\n}\n```"
      },
      "type": "n8n-nodes-base.stickyNote",
      "position": [
        -3360,
        4256
      ],
      "typeVersion": 1,
      "id": "dcfd313f-beb7-4f92-9576-99074fb0c51d",
      "name": "Sticky Note9"
    },
    {
      "parameters": {
        "jsCode": "\nfunction transformOfficialStatement(data, options = {}) {\n  const documentId = options.documentId || makeDocumentIdFromTitle(data.document_title);\n\n  const result = {};\n\n  // ---- Helpers ----\n\n  const toNumber = (v) => (v === null || v === undefined || v === \"\" ? null : Number(v));\n\n  const parsePercent = (v) => {\n    if (v === null || v === undefined || v === \"\") return null;\n    return Number(String(v).replace(\"%\", \"\"));\n  };\n\n  const parsePrice = (v) => {\n    if (v === null || v === undefined || v === \"\") return null;\n    // Drop trailing 'C' if present (callable)\n    return Number(String(v).replace(\"C\", \"\"));\n  };\n\n  function makeDocumentIdFromTitle(title) {\n    if (!title) return \"doc_\" + Date.now();\n    return title\n      .toUpperCase()\n      .replace(/[^A-Z0-9]+/g, \"_\")\n      .replace(/^_+|_+$/g, \"\")\n      .slice(0, 128);\n  }\n\n  // ---- bond_document ----\n\n  result.bond_document = {\n    document_id: documentId,\n    document_title: data.document_title || null,\n    school_district_name: data.school_district_name || null,\n    county: data.county || null,\n    state: data.state || null,\n    overall_rating: data.overall_rating || null,\n    overall_rating_agency: data.overall_rating_agency || null,\n    overall_due_date: data.overall_due_date || null,\n    date_bond_closes: data.date_bond_closes || null,\n    date_of_delivery: data.date_of_delivery || null,\n    interest_payment_description: data.interest_payment_dates || null,\n    interest_commencing_date: data.interest_commencing_date || null,\n    superintendent: data.superintendent || null\n    \n  };\n\n  // ---- professional_services ----\n\n  const ps = data.professional_services || {};\n  result.professional_services = {\n    document_id: documentId,\n    legal_counsel: ps.legal_counsel || null,\n    disclosure_counsel: ps.disclosure_counsel || null,\n    financial_advisor: ps.financial_advisor || null,\n    paying_agent: ps.paying_agent || null\n  };\n\n  // ---- financial_management_contact ----\n\n  const fmc = data.financial_management_contact || {};\n  result.financial_management_contact = {\n    document_id: documentId,\n    name: fmc.name || null,\n    title: fmc.title || null,\n    address: fmc.address || null,\n    phone: fmc.phone || null\n  };\n\n  // ---- assessed_valuation_summary ----\n\n  const avs = data.assessed_valuation_summary || {};\n  result.assessed_valuation_summary = {\n    document_id: documentId,\n    fiscal_year: avs.fiscal_year || null,\n    total_assessed_valuation: toNumber(avs.total_assessed_valuation),\n    valuation_source: avs.valuation_source || null,\n    is_county_teeter_plan_participant: Boolean(avs.is_county_teeter_plan_participant),\n    notes: avs.notes || null\n  };\n\n  // ---- estimated_sources_uses & children ----\n\n  const esu = data.estimated_sources_and_uses || {};\n  result.estimated_sources_uses = {\n    document_id: documentId,\n    total_sources: toNumber(esu.total_sources),\n    total_uses: toNumber(esu.total_uses)\n  };\n\n  result.estimated_source_issue = (esu.sources_by_issue || []).map((s) => ({\n    document_id: documentId,\n    issue: s.issue || null,\n    principal_amount: toNumber(s.principal_amount),\n    net_original_issue_premium: toNumber(s.net_original_issue_premium),\n    total: toNumber(s.total)\n  }));\n\n  result.estimated_use_category = (esu.uses_by_category || []).map((u) => ({\n    document_id: documentId,\n    category: u.category || null,\n    total_amount: toNumber(u.total_amount),\n    measure_vv_amount: toNumber(u.measure_vv_amount),\n    measure_m_amount: toNumber(u.measure_m_amount)\n  }));\n\n  // ---- redemption_date ----\n\n  result.redemption_date = (data.redemption_dates || []).map((d) => ({\n    document_id: documentId,\n    redemption_date: d || null\n  }));\n\n  // ---- underwriter ----\n\n  result.underwriter = (data.underwriters || []).map((u) => ({\n    document_id: documentId,\n    name: u.name || null\n  }));\n\n  // ---- board_member ----\n\n  result.board_member = (data.board_of_education || []).map((m) => ({\n    document_id: documentId,\n    name: m.name || null,\n    role: m.role || null\n  }));\n\n  // ---- debt_service_issue & debt_service_entry (top-level) ----\n\n  const dss = data.debt_service_schedule || [];\n\n  result.debt_service_issue = dss.map((issueObj) => ({\n    document_id: documentId,\n    issue_name: issueObj.issue || null\n  }));\n\n  // For entries, we keep issue_name; your loader can resolve to debt_service_issue_id\n  result.debt_service_entry = dss.flatMap((issueObj) => {\n    const issueName = issueObj.issue || null;\n    return (issueObj.schedule || []).map((row) => ({\n      // debt_service_issue_id will be filled in later, after inserting debt_service_issue\n      issue_name: issueName,\n      period_ending: row.period_ending || null,\n      principal: toNumber(row.principal),\n      interest: toNumber(row.interest),\n      total_debt_service: toNumber(row.total_debt_service)\n    }));\n  });\n\n  // ---- bond_issue ----\n\n  const bondIssues = data.bond_issues || [];\n\n  result.bond_issue = bondIssues.map((b) => ({\n    document_id: documentId,\n    bond_amount: toNumber(b.bond_amount),\n    election_year: b.election_year ? Number(b.election_year) : null,\n    bond_type: b.bond_type || null,\n    bond_series: b.bond_series || null,\n    rating: b.rating || null,\n    due_date: b.due_date || null,\n    interest_commencing_date: b.interest_commencing_date || null,\n    base_cusip: (b.maturity_schedule && b.maturity_schedule.base_cusip) || null,\n    optional_call_date: (b.redemption_policy && b.redemption_policy.optional_call_date) || null,\n    maturities_callable_after: (b.redemption_policy && b.redemption_policy.maturities_callable_after) || null,\n    redemption_price: (b.redemption_policy && b.redemption_policy.redemption_price) || null\n  }));\n\n  // ---- bond_maturity ----\n\n  // We keep bond_series to resolve to bond_issue_id later\n  result.bond_maturity = bondIssues.flatMap((b) => {\n    const bondSeries = b.bond_series || null;\n    const maturities = (b.maturity_schedule && b.maturity_schedule.maturities) || [];\n    return maturities.map((m) => ({\n      bond_series: bondSeries,\n      maturity_date: m.maturity_date || null,\n      principal_amount: toNumber(m.principal_amount),\n      interest_rate: parsePercent(m.interest_rate),\n      yield: parsePercent(m.yield),\n      price: parsePrice(m.price),\n      cusip: m.cusip || null\n    }));\n  });\n\n  // ---- bond_issue_debt_service (from nested schedules under bond_issues) ----\n\n  result.bond_issue_debt_service = bondIssues.flatMap((b) => {\n    const bondSeries = b.bond_series || null;\n    const sched = b.debt_service_schedule || [];\n    return sched.map((row) => ({\n      bond_series: bondSeries,\n      period_ending: row.period_ending || null,\n      principal: toNumber(row.principal),\n      interest: toNumber(row.interest),\n      total_debt_service: toNumber(row.total_debt_service)\n    }));\n  });\n\n  return result;\n}\n\nconst input = $(\"Extract Metadata with Gemini\").last().json.output;\nconst document_id = $('Download file').last().json.id;\n\nconst perTable = transformOfficialStatement(input, { documentId: document_id });\n\nconsole.log(perTable);\n\n// return [perTable];\nreturn [\n  {\n    \"document_id\": document_id,\n    \"output\": perTable\n  }\n]\n\n"
      },
      "type": "n8n-nodes-base.code",
      "typeVersion": 2,
      "position": [
        -3088,
        4496
      ],
      "id": "5642efa0-e88c-4067-9236-2fa9987c223f",
      "name": "Split by Tables"
    },
    {
      "parameters": {
        "tableId": "bond_raw",
        "dataToSend": "autoMapInputData"
      },
      "type": "n8n-nodes-base.supabase",
      "typeVersion": 1,
      "position": [
        -2672,
        4496
      ],
      "id": "a931356a-cc20-4536-b0e1-4c889c075e41",
      "name": "Add row to bond_raw",
      "credentials": {
        "supabaseApi": {
          "id": "V1uzndLMe2n07Mxy",
          "name": "Supabase Bonds"
        }
      },
      "onError": "continueErrorOutput"
    },
    {
      "parameters": {
        "operation": "update",
        "tableId": "bond_raw",
        "filters": {
          "conditions": [
            {
              "keyName": "document_id",
              "condition": "eq",
              "keyValue": "={{ $('Split by Tables').item.json.document_id }}"
            }
          ]
        },
        "dataToSend": "autoMapInputData",
        "inputsToIgnore": "error"
      },
      "type": "n8n-nodes-base.supabase",
      "typeVersion": 1,
      "position": [
        -2320,
        4640
      ],
      "id": "60f57665-bafc-4cf6-93e3-21a7fedab2ec",
      "name": "Update row in bond_raw",
      "credentials": {
        "supabaseApi": {
          "id": "V1uzndLMe2n07Mxy",
          "name": "Supabase Bonds"
        }
      }
    },
    {
      "parameters": {
        "model": "z-ai/glm-4.5-air:free",
        "options": {}
      },
      "type": "@n8n/n8n-nodes-langchain.lmChatOpenRouter",
      "typeVersion": 1,
      "position": [
        -3936,
        4912
      ],
      "id": "744c849e-c30c-495b-aadf-34fa7c13e554",
      "name": "OpenRouter Chat Model2",
      "credentials": {
        "openRouterApi": {
          "id": "g27vQJVFoD7lzE1t",
          "name": "openrouter_0"
        }
      },
      "disabled": true
    },
    {
      "parameters": {
        "model": "moonshotai/kimi-k2:free",
        "options": {}
      },
      "type": "@n8n/n8n-nodes-langchain.lmChatOpenRouter",
      "typeVersion": 1,
      "position": [
        -4096,
        4800
      ],
      "id": "589669b0-1cf2-4e1f-9d2f-e4958f612b71",
      "name": "OpenRouter Chat Model3",
      "credentials": {
        "openRouterApi": {
          "id": "GUP0mJDTjvklHHs7",
          "name": "openrouter"
        }
      },
      "disabled": true
    },
    {
      "parameters": {
        "jsonSchemaExample": "{\n  \"document_title\": \"Chula Vista Elementary School District Election of 2018 and 2020 General Obligation Bonds, Series A and Series B\",\n  \"school_district_name\": \"Chula Vista Elementary School District\",\n  \"county\": \"San Diego County, California\",\n  \"state\": \"CA\",\n  \"overall_rating\": \"AA-\",\n  \"overall_rating_agency\": \"S&P Global Ratings\",\n  \"overall_due_date\": \"2044-08-01\",\n  \"professional_services\": {\n    \"legal_counsel\": \"Stradling Yocca Carlson & Rauth, a Professional Corporation\",\n    \"disclosure_counsel\": \"Stradling Yocca Carlson & Rauth, a Professional Corporation\",\n    \"financial_advisor\": \"Dale Scott & Company, Inc.\",\n    \"paying_agent\": \"U.S. Bank Trust Company, National Association\"\n  },\n  \"date_bond_closes\": \"2023-07-13\",\n  \"date_of_delivery\": \"2023-07-13\",\n  \"interest_payment_dates\": \"February 1 and August 1 (semiannually)\",\n  \"interest_commencing_date\": \"2024-02-01\",\n  \"redemption_dates\": [\n    \"2033-08-01\"\n  ],\n  \"underwriters\": [\n    {\n      \"name\": \"Loop Capital Markets LLC\"\n    },\n    {\n      \"name\": \"UBS Financial Services, Inc.\"\n    }\n  ],\n  \"superintendent\": \"Eduardo Reyes\",\n  \"financial_management_contact\": {\n    \"name\": \"Oscar Esquivel\",\n    \"title\": \"Deputy Superintendent\",\n    \"address\": \"84 East J Street, Chula Vista, California 91910\",\n    \"phone\": \"(619) 425-9600\"\n  },\n  \"board_of_education\": [\n    {\n      \"name\": \"Lucy Ugarte\",\n      \"role\": \"President\"\n    },\n    {\n      \"name\": \"Francisco Tamayo\",\n      \"role\": \"Vice President\"\n    },\n    {\n      \"name\": \"Cesar T. Fernandez\",\n      \"role\": \"Clerk\"\n    },\n    {\n      \"name\": \"Kate Bishop\",\n      \"role\": \"Member\"\n    },\n    {\n      \"name\": \"Delia Dominguez Cervantes\",\n      \"role\": \"Member\"\n    }\n  ],\n  \"assessed_valuation_summary\": {\n    \"fiscal_year\": \"2022-23\",\n    \"total_assessed_valuation\": 41140207319,\n    \"valuation_source\": \"California Municipal Statistics, Inc.\",\n    \"is_county_teeter_plan_participant\": true,\n    \"notes\": \"The assessed valuation for fiscal year 2022-23 was $41,140,207,319, an increase of about 25.22% from fiscal year 2018-19; the County's adoption of the Teeter Plan ensures the District receives 100% of the secured tax levy and mitigates tax delinquencies.\"\n  },\n  \"estimated_sources_and_uses\": {\n    \"total_sources\": 176724293.3,\n    \"total_uses\": 176724293.3,\n    \"sources_by_issue\": [\n      {\n        \"issue\": \"Measure VV Bonds\",\n        \"principal_amount\": 100000000.0,\n        \"net_original_issue_premium\": 6386173.2,\n        \"total\": 106386173.2\n      },\n      {\n        \"issue\": \"Measure M Bonds\",\n        \"principal_amount\": 62500000.0,\n        \"net_original_issue_premium\": 7838120.1,\n        \"total\": 70338120.1\n      }\n    ],\n    \"uses_by_category\": [\n      {\n        \"category\": \"Building Fund(1)\",\n        \"total_amount\": 165663386.96,\n        \"measure_vv_amount\": 103450729.21,\n        \"measure_m_amount\": 62212657.75\n      },\n      {\n        \"category\": \"Interest Fund(2)\",\n        \"total_amount\": 10395082.69,\n        \"measure_vv_amount\": 2556962.59,\n        \"measure_m_amount\": 7838120.1\n      },\n      {\n        \"category\": \"Costs of Issuance(3)\",\n        \"total_amount\": 665823.65,\n        \"measure_vv_amount\": 378481.4,\n        \"measure_m_amount\": 287342.25\n      }\n    ]\n  },\n  \"debt_service_schedule\": [\n    {\n      \"issue\": \"Measure VV Bonds\",\n      \"schedule\": [\n        {\n          \"period_ending\": \"2024-08-01\",\n          \"principal\": 1165000.0,\n          \"interest\": 4721692.5,\n          \"total_debt_service\": 5886692.5\n        },\n        {\n          \"period_ending\": \"2025-08-01\",\n          \"principal\": 1285000.0,\n          \"interest\": 4438600.0,\n          \"total_debt_service\": 5723600.0\n        }\n      ]\n    },\n    {\n      \"issue\": \"Measure M Bonds\",\n      \"schedule\": [\n        {\n          \"period_ending\": \"2024-08-01\",\n          \"principal\": 7135000.0,\n          \"interest\": 3281250.0,\n          \"total_debt_service\": 10416250.0\n        },\n        {\n          \"period_ending\": \"2025-08-01\",\n          \"principal\": 7290000.0,\n          \"interest\": 2768250.0,\n          \"total_debt_service\": 10058250.0\n        }\n      ]\n    }\n  ],\n  \"bond_issues\": [\n    {\n      \"bond_amount\": 100000000,\n      \"election_year\": \"2018\",\n      \"bond_type\": \"General Obligation Bonds\",\n      \"bond_series\": \"Series A (Measure VV Bonds)\",\n      \"rating\": \"AA-\",\n      \"due_date\": \"2044-08-01\",\n      \"interest_commencing_date\": \"2024-02-01\",\n      \"redemption_policy\": {\n        \"optional_call_date\": \"2033-08-01\",\n        \"maturities_callable_after\": \"2034-08-01\",\n        \"redemption_price\": \"par (without premium)\"\n      },\n      \"maturity_schedule\": {\n        \"base_cusip\": \"171314\",\n        \"maturities\": [\n          {\n            \"maturity_date\": \"2024-08-01\",\n            \"principal_amount\": 1165000,\n            \"interest_rate\": \"5.00%\",\n            \"yield\": \"3.00%\",\n            \"price\": \"102.050\",\n            \"cusip\": \"KG1\"\n          },\n          {\n            \"maturity_date\": \"2025-08-01\",\n            \"principal_amount\": 1285000,\n            \"interest_rate\": \"5.00%\",\n            \"yield\": \"2.87%\",\n            \"price\": \"104.209\",\n            \"cusip\": \"KH9\"\n          }\n        ]\n      },\n      \"debt_service_schedule\": [\n        {\n          \"period_ending\": \"2024-08-01\",\n          \"principal\": 1165000.0,\n          \"interest\": 4721692.5,\n          \"total_debt_service\": 5886692.5\n        },\n        {\n          \"period_ending\": \"2025-08-01\",\n          \"principal\": 1285000.0,\n          \"interest\": 4438600.0,\n          \"total_debt_service\": 5723600.0\n        }\n      ]\n    },\n    {\n      \"bond_amount\": 62500000,\n      \"election_year\": \"2020\",\n      \"bond_type\": \"General Obligation Bonds\",\n      \"bond_series\": \"Series B (Measure M Bonds)\",\n      \"rating\": \"AA-\",\n      \"due_date\": \"2038-08-01\",\n      \"interest_commencing_date\": \"2024-02-01\",\n      \"redemption_policy\": {\n        \"optional_call_date\": \"2033-08-01\",\n        \"maturities_callable_after\": \"2034-08-01\",\n        \"redemption_price\": \"par (without premium)\"\n      },\n      \"maturity_schedule\": {\n        \"base_cusip\": \"171314\",\n        \"maturities\": [\n          {\n            \"maturity_date\": \"2024-08-01\",\n            \"principal_amount\": 7135000,\n            \"interest_rate\": \"5.00%\",\n            \"yield\": \"3.00%\",\n            \"price\": \"102.050\",\n            \"cusip\": \"LC9\"\n          },\n          {\n            \"maturity_date\": \"2025-08-01\",\n            \"principal_amount\": 7290000,\n            \"interest_rate\": \"5.00%\",\n            \"yield\": \"2.87%\",\n            \"price\": \"104.209\",\n            \"cusip\": \"LD7\"\n          }\n        ]\n      },\n      \"debt_service_schedule\": [\n        {\n          \"period_ending\": \"2024-08-01\",\n          \"principal\": 7135000.0,\n          \"interest\": 3281250.0,\n          \"total_debt_service\": 10416250.0\n        },\n        {\n          \"period_ending\": \"2025-08-01\",\n          \"principal\": 7290000.0,\n          \"interest\": 2768250.0,\n          \"total_debt_service\": 10058250.0\n        }\n      ]\n    }\n  ]\n}",
        "autoFix": true
      },
      "id": "f003a620-c888-499a-9c86-80a0126e8ccc",
      "name": "Extract Metadata Structured Output",
      "type": "@n8n/n8n-nodes-langchain.outputParserStructured",
      "typeVersion": 1.3,
      "position": [
        -3792,
        4720
      ],
      "disabled": true
    },
    {
      "parameters": {
        "promptType": "define",
        "text": "=Parse the following structued output json codeblock into a string:\n{{ $json.content.parts[0].text }}",
        "hasOutputParser": true,
        "batching": {}
      },
      "id": "f7638bc7-0ba4-490d-9b52-cc51b8ff3196",
      "name": "Extract Metadata with Gemini2",
      "type": "@n8n/n8n-nodes-langchain.chainLlm",
      "typeVersion": 1.7,
      "position": [
        -3920,
        3552
      ],
      "disabled": true
    },
    {
      "parameters": {
        "promptType": "define",
        "text": "=Parse the following structued output json codeblock into a string:\n{{ $json.content.parts[0].text }}\n\nOutput only the json string without any extra text and without a preamble.",
        "hasOutputParser": true,
        "batching": {}
      },
      "id": "aaa32838-a191-4c04-9d26-ade2f5b6547f",
      "name": "Extract Metadata with Gemini",
      "type": "@n8n/n8n-nodes-langchain.chainLlm",
      "typeVersion": 1.7,
      "position": [
        -3936,
        4496
      ],
      "disabled": true
    },
    {
      "parameters": {
        "resource": "document",
        "modelId": {
          "__rl": true,
          "value": "models/gemini-2.5-flash",
          "mode": "list",
          "cachedResultName": "models/gemini-2.5-flash"
        },
        "text": "=<role> \nYou are expert PDF parser, given the text of a municipal bond PDF. Your task is to extract specific fields and return ONLY a single valid JSON object that follows the schema below. \n</role> \n<task> 1. Find the title of the document. \n- The title will appear on the first page, but it may not be at the very top. \n- It usually contains the name of the school district, bond information, and the election year (with a possible series letter). \n- Use this text as the `document_title`.\n\nFrom the document, extract the following summary details (place these as top‑level fields in the JSON):\n\ndocument_title – the full title identified above.\n\nschool_district_name – usually part of the title.\n\ncounty – for example, “San Diego County, California”.\n\nstate – the two‑letter state abbreviation.\n\noverall_rating – the overall bond rating on the cover page.\n\noverall_rating_agency – the rating agency (e.g., S&P, Moody’s, Fitch) associated with the overall rating.\n\noverall_due_date – any final maturity date for the entire bond issue, formatted as YYYY-MM-DD if available.\n\nlegal_counsel – the law firm serving as bond counsel (should be a single firm).\n\ndisclosure_counsel – the firm serving as disclosure counsel; if not separately provided, use null.\n\nmunicipal_advisor - the firm serving as financial advisor for the municipal (should be a single firm).\n\npaying_agent - the financial institution, typically a bank, handling and distributing interest and principal payments on behalf of the bond issuer.\n\ndate_bond_closes – the expected closing date of the bonds (e.g., “on or about July 13, 2023”).\n\ndate_of_delivery – the date of delivery, if given separately.\n\ninterest_payment_dates – how often interest is paid (e.g., “February 1 and August 1 (semiannually)”).\n\ninterest_commencing_date – the first interest payment date, formatted as YYYY-MM-DD if possible.\n\nredemption_dates – a list of any optional or mandatory redemption dates mentioned; if none are provided, use null.\n\nunderwriters – a list of investment banks underwriting the bonds; each entry should have a name field.\n\nsuperintendent – the name of the district’s superintendent.\n\nfinancial_management_contact – an object containing the name, title, address and phone number for the district’s financial management contact (such as a deputy superintendent or chief business official).\n\nboard_of_education – a list of objects, each containing the board member’s name and role (President, Vice President, Clerk, Member, etc.).\n\nassessed_valuation_summary – an object containing:\n\nfiscal_year – the fiscal year of the most recent assessed valuation.\n\ntotal_assessed_valuation – the total assessed valuation (as a number, without commas).\n\nvaluation_source – the source of the data (e.g., “California Municipal Statistics, Inc.”).\n\nis_county_teeter_plan_participant – true if the county uses a Teeter Plan, false otherwise.\n\nnotes – any explanatory notes about changes in assessed valuation or related context.\n\nestimated_sources_and_uses – an object containing:\n\ntotal_sources – the total sources of funds across all issues.\n\ntotal_uses – the total uses of funds across all issues.\n\nsources_by_issue – a list of objects, each with issue (name of the bond issue), principal_amount, net_original_issue_premium (or discount), and total for that issue.\n\nuses_by_category – a list of objects, each with a category (e.g., “Deposit to Building Fund” or “Costs of Issuance”), the total_amount, and columns for each issue listing how much of that category is funded by each issue (use null for issues not contributing to that category).\n\ndebt_service_schedule – a list of schedules, one for each bond series; each schedule entry must include the issue name and a list of annual entries with period_ending (date in YYYY-MM-DD format), principal, interest, and total_debt_service amounts.\n\nIdentify each bond issue described in the document. For each bond issue, create an object containing:\n\nbond_amount – the principal amount of the bond issue.\n\nelection_year – the election year authorizing the issue (e.g., 2018, 2020).\n\nbond_type – a description such as “General Obligation Bonds” or “Refunding Bonds”.\n\nbond_series – the series letter or descriptor (e.g., “Series A”, “Series 2025 Refunding”).\n\nrating – the rating for that series, if provided.\n\ndue_date – the final maturity date for that series, in YYYY-MM-DD format if available.\n\ninterest_commencing_date – the first interest payment date for that series, in YYYY-MM-DD format.\n\nredemption_policy – an object with optional_call_date, maturities_callable_after, and redemption_price if the document describes call provisions; otherwise, use null.\n\nmaturity_schedule – an object with:\n\nbase_cusip – the base CUSIP number for the series.\n\nmaturities – a list of objects, each containing maturity_date (in YYYY-MM-DD), principal_amount, interest_rate, yield, price, and cusip.\n\ndebt_service_schedule – a list of objects with period_ending (in YYYY-MM-DD), principal, interest, and total_debt_service values for that series.\n\nIf any of the fields listed above are not present in the document, set their value to null. Do NOT guess or fabricate values.\n\nReturn exactly one JSON object that matches the structure shown below. Do not include any explanations or additional text outside the JSON.\n</task>\n\n<output_format>\nYour output MUST be valid JSON and match this exact structure:\n```\n{\n  \"document_title\": \"string\",\n  \"school_district_name\": \"string\",\n  \"county\": \"string\",\n  \"state\": \"string\",\n  \"overall_rating\": \"string\",\n  \"overall_rating_agency\": \"string\",\n  \"overall_due_date\": \"string (date, YYYY-MM-DD)\",\n\n  \"professional_services\": {\n    \"legal_counsel\": \"string\",\n    \"disclosure_counsel\": \"string\",\n    \"financial_advisor\": \"string | null\",\n    \"paying_agent\": \"string | null\"\n  },\n\n  \"date_bond_closes\": \"string (date, YYYY-MM-DD)\",\n  \"date_of_delivery\": \"string (date, YYYY-MM-DD)\",\n  \"interest_payment_dates\": \"string (description of payment schedule)\",\n  \"interest_commencing_date\": \"string (date, YYYY-MM-DD)\",\n\n  \"redemption_dates\": [\n    \"string (date, YYYY-MM-DD)\"\n  ],\n\n  \"underwriters\": [\n    {\n      \"name\": \"string\"\n    }\n  ],\n\n  \"superintendent\": \"string\",\n\n  \"financial_management_contact\": {\n    \"name\": \"string\",\n    \"title\": \"string\",\n    \"address\": \"string\",\n    \"phone\": \"string\"\n  },\n\n  \"board_of_education\": [\n    {\n      \"name\": \"string\",\n      \"role\": \"string\"\n    }\n  ],\n\n  \"assessed_valuation_summary\": {\n    \"fiscal_year\": \"string (fiscal year label, e.g. 'YYYY-YY')\",\n    \"total_assessed_valuation\": \"number\",\n    \"valuation_source\": \"string\",\n    \"is_county_teeter_plan_participant\": \"boolean\",\n    \"notes\": \"string\"\n  },\n\n  \"estimated_sources_and_uses\": {\n    \"total_sources\": \"number\",\n    \"total_uses\": \"number\",\n    \"sources_by_issue\": [\n      {\n        \"issue\": \"string\",\n        \"principal_amount\": \"number\",\n        \"net_original_issue_premium\": \"number\",\n        \"total\": \"number\"\n      }\n    ],\n    \"uses_by_category\": [\n      {\n        \"category\": \"string\",\n        \"total_amount\": \"number\",\n        \"measure_vv_amount\": \"number\",\n        \"measure_m_amount\": \"number\"\n      }\n    ]\n  },\n\n  \"debt_service_schedule\": [\n    {\n      \"issue\": \"string\",\n      \"schedule\": [\n        {\n          \"period_ending\": \"string (date, YYYY-MM-DD)\",\n          \"principal\": \"number\",\n          \"interest\": \"number\",\n          \"total_debt_service\": \"number\"\n        }\n      ]\n    }\n  ],\n\n  \"bond_issues\": [\n    {\n      \"bond_amount\": \"number\",\n      \"election_year\": \"string\",\n      \"bond_type\": \"string\",\n      \"bond_series\": \"string\",\n      \"rating\": \"string\",\n      \"due_date\": \"string (date, YYYY-MM-DD)\",\n      \"interest_commencing_date\": \"string (date, YYYY-MM-DD)\",\n\n      \"redemption_policy\": {\n        \"optional_call_date\": \"string (date, YYYY-MM-DD)\",\n        \"maturities_callable_after\": \"string (date, YYYY-MM-DD)\",\n        \"redemption_price\": \"string\"\n      },\n\n      \"maturity_schedule\": {\n        \"base_cusip\": \"string\",\n        \"maturities\": [\n          {\n            \"maturity_date\": \"string (date, YYYY-MM-DD)\",\n            \"principal_amount\": \"number\",\n            \"interest_rate\": \"string (percentage)\",\n            \"yield\": \"string (percentage)\",\n            \"price\": \"string (price, may include suffix like 'C')\",\n            \"cusip\": \"string\"\n          }\n        ]\n      },\n\n      \"debt_service_schedule\": [\n        {\n          \"period_ending\": \"string (date, YYYY-MM-DD)\",\n          \"principal\": \"number\",\n          \"interest\": \"number\",\n          \"total_debt_service\": \"number\"\n        }\n      ]\n    }\n  ]\n}\n```\n</output_format>\n\n<example_output_format>\n```\n{\n  \"document_title\": \"Chula Vista Elementary School District Election of 2018 and 2020 General Obligation Bonds, Series A and Series B\",\n  \"school_district_name\": \"Chula Vista Elementary School District\",\n  \"county\": \"San Diego County, California\",\n  \"state\": \"CA\",\n  \"overall_rating\": \"AA-\",\n  \"overall_rating_agency\": \"S&P Global Ratings\",\n  \"overall_due_date\": \"2044-08-01\",\n  \"professional_services\": {\n    \"legal_counsel\": \"Stradling Yocca Carlson & Rauth, a Professional Corporation\",\n    \"disclosure_counsel\": \"Stradling Yocca Carlson & Rauth, a Professional Corporation\",\n    \"financial_advisor\": \"Dale Scott & Company, Inc.\",\n    \"paying_agent\": \"U.S. Bank Trust Company, National Association\"\n  },\n  \"date_bond_closes\": \"2023-07-13\",\n  \"date_of_delivery\": \"2023-07-13\",\n  \"interest_payment_dates\": \"February 1 and August 1 (semiannually)\",\n  \"interest_commencing_date\": \"2024-02-01\",\n  \"redemption_dates\": [\n    \"2033-08-01\"\n  ],\n  \"underwriters\": [\n    {\n      \"name\": \"Loop Capital Markets LLC\"\n    },\n    {\n      \"name\": \"UBS Financial Services, Inc.\"\n    }\n  ],\n  \"superintendent\": \"Eduardo Reyes\",\n  \"financial_management_contact\": {\n    \"name\": \"Oscar Esquivel\",\n    \"title\": \"Deputy Superintendent\",\n    \"address\": \"84 East J Street, Chula Vista, California 91910\",\n    \"phone\": \"(619) 425-9600\"\n  },\n  \"board_of_education\": [\n    {\n      \"name\": \"Lucy Ugarte\",\n      \"role\": \"President\"\n    },\n    {\n      \"name\": \"Francisco Tamayo\",\n      \"role\": \"Vice President\"\n    },\n    {\n      \"name\": \"Cesar T. Fernandez\",\n      \"role\": \"Clerk\"\n    },\n    {\n      \"name\": \"Kate Bishop\",\n      \"role\": \"Member\"\n    },\n    {\n      \"name\": \"Delia Dominguez Cervantes\",\n      \"role\": \"Member\"\n    }\n  ],\n  \"assessed_valuation_summary\": {\n    \"fiscal_year\": \"2022-23\",\n    \"total_assessed_valuation\": 41140207319,\n    \"valuation_source\": \"California Municipal Statistics, Inc.\",\n    \"is_county_teeter_plan_participant\": true,\n    \"notes\": \"The assessed valuation for fiscal year 2022-23 was $41,140,207,319, an increase of about 25.22% from fiscal year 2018-19; the County's adoption of the Teeter Plan ensures the District receives 100% of the secured tax levy and mitigates tax delinquencies.\"\n  },\n  \"estimated_sources_and_uses\": {\n    \"total_sources\": 176724293.3,\n    \"total_uses\": 176724293.3,\n    \"sources_by_issue\": [\n      {\n        \"issue\": \"Measure VV Bonds\",\n        \"principal_amount\": 100000000.0,\n        \"net_original_issue_premium\": 6386173.2,\n        \"total\": 106386173.2\n      },\n      {\n        \"issue\": \"Measure M Bonds\",\n        \"principal_amount\": 62500000.0,\n        \"net_original_issue_premium\": 7838120.1,\n        \"total\": 70338120.1\n      }\n    ],\n    \"uses_by_category\": [\n      {\n        \"category\": \"Building Fund(1)\",\n        \"total_amount\": 165663386.96,\n        \"measure_vv_amount\": 103450729.21,\n        \"measure_m_amount\": 62212657.75\n      },\n      {\n        \"category\": \"Interest Fund(2)\",\n        \"total_amount\": 10395082.69,\n        \"measure_vv_amount\": 2556962.59,\n        \"measure_m_amount\": 7838120.1\n      },\n      {\n        \"category\": \"Costs of Issuance(3)\",\n        \"total_amount\": 665823.65,\n        \"measure_vv_amount\": 378481.4,\n        \"measure_m_amount\": 287342.25\n      }\n    ]\n  },\n  \"debt_service_schedule\": [\n    {\n      \"issue\": \"Measure VV Bonds\",\n      \"schedule\": [\n        {\n          \"period_ending\": \"2024-08-01\",\n          \"principal\": 1165000.0,\n          \"interest\": 4721692.5,\n          \"total_debt_service\": 5886692.5\n        },\n        {\n          \"period_ending\": \"2025-08-01\",\n          \"principal\": 1285000.0,\n          \"interest\": 4438600.0,\n          \"total_debt_service\": 5723600.0\n        },\n        ...\n      ]\n    },\n    {\n      \"issue\": \"Measure M Bonds\",\n      \"schedule\": [\n        {\n          \"period_ending\": \"2024-08-01\",\n          \"principal\": 7135000.0,\n          \"interest\": 3281250.0,\n          \"total_debt_service\": 10416250.0\n        },\n        {\n          \"period_ending\": \"2025-08-01\",\n          \"principal\": 7290000.0,\n          \"interest\": 2768250.0,\n          \"total_debt_service\": 10058250.0\n        },\n        ...\n      ]\n    }\n  ],\n  \"bond_issues\": [\n    {\n      \"bond_amount\": 100000000,\n      \"election_year\": \"2018\",\n      \"bond_type\": \"General Obligation Bonds\",\n      \"bond_series\": \"Series A (Measure VV Bonds)\",\n      \"rating\": \"AA-\",\n      \"due_date\": \"2044-08-01\",\n      \"interest_commencing_date\": \"2024-02-01\",\n      \"redemption_policy\": {\n        \"optional_call_date\": \"2033-08-01\",\n        \"maturities_callable_after\": \"2034-08-01\",\n        \"redemption_price\": \"par (without premium)\"\n      },\n      \"maturity_schedule\": {\n        \"base_cusip\": \"171314\",\n        \"maturities\": [\n          {\n            \"maturity_date\": \"2024-08-01\",\n            \"principal_amount\": 1165000,\n            \"interest_rate\": \"5.00%\",\n            \"yield\": \"3.00%\",\n            \"price\": \"102.050\",\n            \"cusip\": \"KG1\"\n          },\n          {\n            \"maturity_date\": \"2025-08-01\",\n            \"principal_amount\": 1285000,\n            \"interest_rate\": \"5.00%\",\n            \"yield\": \"2.87%\",\n            \"price\": \"104.209\",\n            \"cusip\": \"KH9\"\n          },\n          ...\n        ]\n      },\n      \"debt_service_schedule\": [\n        {\n          \"period_ending\": \"2024-08-01\",\n          \"principal\": 1165000.0,\n          \"interest\": 4721692.5,\n          \"total_debt_service\": 5886692.5\n        },\n        {\n          \"period_ending\": \"2025-08-01\",\n          \"principal\": 1285000.0,\n          \"interest\": 4438600.0,\n          \"total_debt_service\": 5723600.0\n        },\n        ...\n      ]\n    },\n    {\n      \"bond_amount\": 62500000,\n      \"election_year\": \"2020\",\n      \"bond_type\": \"General Obligation Bonds\",\n      \"bond_series\": \"Series B (Measure M Bonds)\",\n      \"rating\": \"AA-\",\n      \"due_date\": \"2038-08-01\",\n      \"interest_commencing_date\": \"2024-02-01\",\n      \"redemption_policy\": {\n        \"optional_call_date\": \"2033-08-01\",\n        \"maturities_callable_after\": \"2034-08-01\",\n        \"redemption_price\": \"par (without premium)\"\n      },\n      \"maturity_schedule\": {\n        \"base_cusip\": \"171314\",\n        \"maturities\": [\n          {\n            \"maturity_date\": \"2024-08-01\",\n            \"principal_amount\": 7135000,\n            \"interest_rate\": \"5.00%\",\n            \"yield\": \"3.00%\",\n            \"price\": \"102.050\",\n            \"cusip\": \"LC9\"\n          },\n          {\n            \"maturity_date\": \"2025-08-01\",\n            \"principal_amount\": 7290000,\n            \"interest_rate\": \"5.00%\",\n            \"yield\": \"2.87%\",\n            \"price\": \"104.209\",\n            \"cusip\": \"LD7\"\n          },\n          ...\n        ]\n      },\n      \"debt_service_schedule\": [\n        {\n          \"period_ending\": \"2024-08-01\",\n          \"principal\": 7135000.0,\n          \"interest\": 3281250.0,\n          \"total_debt_service\": 10416250.0\n        },\n        {\n          \"period_ending\": \"2025-08-01\",\n          \"principal\": 7290000.0,\n          \"interest\": 2768250.0,\n          \"total_debt_service\": 10058250.0\n        },\n        ...\n      ]\n    }\n  ]\n}\n```\n</example_output_format>\n\n\n<guidelines> \nRules: \n- Return ONLY the JSON. Do not include explanations, comments, or extra text outside of the JSON. \n- Do not include any fields that are not specified in the schema above. \n- Use numeric types for numbers (without commas or currency symbols) unless they are part of a string such as an interest rate. \n- If there are no bond issues found, return `\"bond_issues\"` as an empty array. \n- If there is more than one plausible value for a field, choose the value that best matches typical municipal bond cover‑page conventions. \n</guidelines>\n",
        "inputType": "binary",
        "options": {}
      },
      "type": "@n8n/n8n-nodes-langchain.googleGemini",
      "typeVersion": 1,
      "position": [
        -4128,
        4496
      ],
      "id": "463903a5-42d4-4ab4-ab68-2978707e9ea3",
      "name": "Analyze document",
      "credentials": {
        "googlePalmApi": {
          "id": "LKQbGwmroZKBfciU",
          "name": "Gemini - Cribl"
        }
      },
      "disabled": true
    },
    {
      "parameters": {
        "resource": "document",
        "modelId": {
          "__rl": true,
          "value": "models/gemini-2.5-flash",
          "mode": "list",
          "cachedResultName": "models/gemini-2.5-flash"
        },
        "text": "=<role>\nYou are given the text of a municipal bond PDF. Your task is to extract specific fields and return ONLY a single valid JSON object that follows the schema below.\n</role>\n\n<task>\n1. Find the title of the document.\n   - It should be on the first page.\n   - It may not be at the very top.\n   - The title usually contains: the name of the school district, bond information, and the election year (possibly with a series letter).\n\n2. From the document, extract:\n   - Document title\n   - School district name\n   - County\n   - State\n   - Any overall rating stated for the bonds\n   - Any rating agency for the overall rating\n   - Any overall due date or final maturity date\n\n3. Also identify each bond issue described in the document. For each bond issue, group the following fields together in one object (there may be multiple such objects):\n   - Bond dollar amount\n   - Election year\n   - Type of bond\n   - Bond series\n   - Rating for that bond or series, if available\n   - Due date or final maturity date for that bond or series, if available, in the format of YYYY-MM-DD\n\nIf a field cannot be found, return it as null rather than guessing. Do NOT make up or invent values if they cannot be found in the document.\n</task>\n\n<output_format>\nYour output MUST be valid JSON and match this exact structure:\n\n```\n{\n  \"document_title\": string or null,\n  \"school_district_name\": string or null,\n  \"county\": string or null,\n  \"state\": string or null,\n  \"overall_rating\": string or null,\n  \"overall_rating_agency\": string or null,\n  \"overall_due_date\": string or null,\n  \"bond_issues\": [\n    {\n      \"bond_amount\": integer or null,\n      \"election_year\": string or null,\n      \"bond_type\": string or null,\n      \"bond_series\": string or null,\n      \"due_date\": string or null\n    }\n  ]\n}\n```\n</output_format>\n\n<example>\n```\n{\n  \"document_title\": \"ABC Elementary School District General Obligation Bonds\",\n  \"school_district_name\": \"ABC Elementary School District\",\n  \"county\": \"San Diego County\",\n  \"state\": \"CA\",\n  \"overall_rating\": \"AA-\",\n  \"overall_rating_agency\": \"S&P\",\n  \"overall_due_date\": \"2045-08-01\",\n  \"bond_issues\": [\n    {\n      \"bond_amount\": 56000000,\n      \"election_year\": \"2024\",\n      \"bond_type\": \"General Obligation Bonds\",\n      \"bond_series\": \"A\",\n      \"due_date\": \"2045-08-01\"\n    },\n    {\n      \"bond_amount\": 22000000,\n      \"election_year\": \"2016\",\n      \"bond_type\": \"2025 Refunding General\",\n      \"bond_series\": \"D\",\n      \"due_date\": \"2045-08-01\"\n    }\n  ]\n}\n```\n</example>\n\n<guidelines>\nRules:\n- Return ONLY the JSON. No explanations, no comments, no extra text.\n- If there are no bond issues found, return \"bond_issues\" as an empty array.\n- If there is more than one plausible value for a field, choose the one that best matches typical municipal bond cover-page conventions.\n</guidelines>",
        "inputType": "binary",
        "options": {}
      },
      "type": "@n8n/n8n-nodes-langchain.googleGemini",
      "typeVersion": 1,
      "position": [
        -4128,
        3552
      ],
      "id": "63818a15-5600-45e6-88ab-4bee45834279",
      "name": "Analyze document2",
      "credentials": {
        "googlePalmApi": {
          "id": "LKQbGwmroZKBfciU",
          "name": "Gemini - Cribl"
        }
      },
      "disabled": true
    },
    {
      "parameters": {
        "tableId": "gemini_file_store",
        "fieldsUi": {
          "fieldValues": [
            {
              "fieldId": "gemini_file_search_store",
              "fieldValue": "={{ $('Global Vars').item.json.gemini_file_store_name }}"
            },
            {
              "fieldId": "document_headline",
              "fieldValue": "={{ $('Code in JavaScript1').item.json.document_title }}"
            },
            {
              "fieldId": "document_id",
              "fieldValue": "={{ $('Loop Over Items').item.json.id }}"
            },
            {
              "fieldId": "document_name",
              "fieldValue": "={{ $('Document Content Hash').item.json.name }}"
            },
            {
              "fieldId": "document_content_hash",
              "fieldValue": "={{ $('Document Content Hash').item.json.document_content_hash }}"
            },
            {
              "fieldId": "document_name_hash",
              "fieldValue": "={{ $('Document Name Hash').item.json.document_name_hash }}"
            }
          ]
        }
      },
      "type": "n8n-nodes-base.supabase",
      "typeVersion": 1,
      "position": [
        -1856,
        4480
      ],
      "id": "99a19894-78d2-4735-b4ef-06cccd737a5b",
      "name": "Add row to gemini_file_store",
      "alwaysOutputData": false,
      "credentials": {
        "supabaseApi": {
          "id": "V1uzndLMe2n07Mxy",
          "name": "Supabase Bonds"
        }
      },
      "onError": "continueErrorOutput",
      "notes": "Returns a row if previous file with same Google Drive file_id"
    },
    {
      "parameters": {
        "operation": "update",
        "tableId": "gemini_file_store",
        "filterType": "string",
        "filterString": "=document_id=eq.{{ $('Split by Tables').item.json.document_id }}",
        "dataToSend": "autoMapInputData",
        "inputsToIgnore": "error"
      },
      "type": "n8n-nodes-base.supabase",
      "typeVersion": 1,
      "position": [
        -1600,
        4912
      ],
      "id": "398b47de-13ca-4086-b04e-f074cc35727a",
      "name": "Update a row1",
      "credentials": {
        "supabaseApi": {
          "id": "V1uzndLMe2n07Mxy",
          "name": "Supabase Bonds"
        }
      }
    },
    {
      "parameters": {
        "resource": "document",
        "modelId": {
          "__rl": true,
          "value": "models/gemini-2.5-flash",
          "mode": "list",
          "cachedResultName": "models/gemini-2.5-flash"
        },
        "text": "=<role> \nYou are expert PDF parser, given the text of a municipal bond PDF. Your task is to extract specific fields and return ONLY a single valid JSON object that follows the schema below. \n</role> \n<task> 1. Find the title of the document. \n- The title will appear on the first page, but it may not be at the very top. \n- It usually contains the name of the school district, bond information, and the election year (with a possible series letter). \n- Use this text as the `document_title`.\n\nFrom the document, extract the following summary details (place these as top‑level fields in the JSON):\n\ndocument_title – the full title identified above.\n\nschool_district_name – usually part of the title.\n\ncounty – for example, “San Diego County, California”.\n\nstate – the two‑letter state abbreviation.\n\noverall_rating – the overall bond rating on the cover page.\n\noverall_rating_agency – the rating agency (e.g., S&P, Moody’s, Fitch) associated with the overall rating.\n\noverall_due_date – any final maturity date for the entire bond issue, formatted as YYYY-MM-DD if available.\n\nlegal_counsel – the law firm serving as bond counsel (should be a single firm).\n\ndisclosure_counsel – the firm serving as disclosure counsel; if not separately provided, use null.\n\nmunicipal_advisor - the firm serving as financial advisor for the municipal (should be a single firm).\n\npaying_agent - the financial institution, typically a bank, handling and distributing interest and principal payments on behalf of the bond issuer.\n\ndate_bond_closes – the expected closing date of the bonds (e.g., “on or about July 13, 2023”).\n\ndate_of_delivery – the date of delivery, if given separately.\n\ninterest_payment_dates – how often interest is paid (e.g., “February 1 and August 1 (semiannually)”).\n\ninterest_commencing_date – the first interest payment date, formatted as YYYY-MM-DD if possible.\n\nredemption_dates – a list of any optional or mandatory redemption dates mentioned; if none are provided, use null.\n\nunderwriters – a list of investment banks underwriting the bonds; each entry should have a name field.\n\nsuperintendent – the name of the district’s superintendent.\n\nfinancial_management_contact – an object containing the name, title, address and phone number for the district’s financial management contact (such as a deputy superintendent or chief business official).\n\nboard_of_education – a list of objects, each containing the board member’s name and role (President, Vice President, Clerk, Member, etc.).\n\nassessed_valuation_summary – an object containing:\n\nfiscal_year – the fiscal year of the most recent assessed valuation.\n\ntotal_assessed_valuation – the total assessed valuation (as a number, without commas).\n\nvaluation_source – the source of the data (e.g., “California Municipal Statistics, Inc.”).\n\nis_county_teeter_plan_participant – true if the county uses a Teeter Plan, false otherwise.\n\nnotes – any explanatory notes about changes in assessed valuation or related context.\n\nestimated_sources_and_uses – an object containing:\n\ntotal_sources – the total sources of funds across all issues.\n\ntotal_uses – the total uses of funds across all issues.\n\nsources_by_issue – a list of objects, each with issue (name of the bond issue), principal_amount, net_original_issue_premium (or discount), and total for that issue.\n\nuses_by_category – a list of objects, each with a category (e.g., “Deposit to Building Fund” or “Costs of Issuance”), the total_amount, and columns for each issue listing how much of that category is funded by each issue (use null for issues not contributing to that category).\n\ndebt_service_schedule – a list of schedules, one for each bond series; each schedule entry must include the issue name and a list of annual entries with period_ending (date in YYYY-MM-DD format), principal, interest, and total_debt_service amounts.\n\nIdentify each bond issue described in the document. For each bond issue, create an object containing:\n\nbond_amount – the principal amount of the bond issue.\n\nelection_year – the election year authorizing the issue (e.g., 2018, 2020).\n\nbond_type – a description such as “General Obligation Bonds” or “Refunding Bonds”.\n\nbond_series – the series letter or descriptor (e.g., “Series A”, “Series 2025 Refunding”).\n\nrating – the rating for that series, if provided.\n\ndue_date – the final maturity date for that series, in YYYY-MM-DD format if available.\n\ninterest_commencing_date – the first interest payment date for that series, in YYYY-MM-DD format.\n\nredemption_policy – an object with optional_call_date, maturities_callable_after, and redemption_price if the document describes call provisions; otherwise, use null.\n\nmaturity_schedule – an object with:\n\nbase_cusip – the base CUSIP number for the series.\n\nmaturities – a list of objects, each containing maturity_date (in YYYY-MM-DD), principal_amount, interest_rate, yield, price, and cusip.\n\ndebt_service_schedule – a list of objects with period_ending (in YYYY-MM-DD), principal, interest, and total_debt_service values for that series.\n\nIf any of the fields listed above are not present in the document, set their value to null. Do NOT guess or fabricate values.\n\nReturn exactly one JSON object that matches the structure shown below. Do not include any explanations or additional text outside the JSON.\n</task>\n\n<output_format>\nYour output MUST be valid JSON and match this exact structure:\n```\n{\n  \"document_title\": \"string\",\n  \"school_district_name\": \"string\",\n  \"county\": \"string\",\n  \"state\": \"string\",\n  \"overall_rating\": \"string\",\n  \"overall_rating_agency\": \"string\",\n  \"overall_due_date\": \"string (date, YYYY-MM-DD)\",\n\n  \"professional_services\": {\n    \"legal_counsel\": \"string\",\n    \"disclosure_counsel\": \"string\",\n    \"financial_advisor\": \"string | null\",\n    \"paying_agent\": \"string | null\"\n  },\n\n  \"date_bond_closes\": \"string (date, YYYY-MM-DD)\",\n  \"date_of_delivery\": \"string (date, YYYY-MM-DD)\",\n  \"interest_payment_dates\": \"string (description of payment schedule)\",\n  \"interest_commencing_date\": \"string (date, YYYY-MM-DD)\",\n\n  \"redemption_dates\": [\n    \"string (date, YYYY-MM-DD)\"\n  ],\n\n  \"underwriters\": [\n    {\n      \"name\": \"string\"\n    }\n  ],\n\n  \"superintendent\": \"string\",\n\n  \"financial_management_contact\": {\n    \"name\": \"string\",\n    \"title\": \"string\",\n    \"address\": \"string\",\n    \"phone\": \"string\"\n  },\n\n  \"board_of_education\": [\n    {\n      \"name\": \"string\",\n      \"role\": \"string\"\n    }\n  ],\n\n  \"assessed_valuation_summary\": {\n    \"fiscal_year\": \"string (fiscal year label, e.g. 'YYYY-YY')\",\n    \"total_assessed_valuation\": \"number\",\n    \"valuation_source\": \"string\",\n    \"is_county_teeter_plan_participant\": \"boolean\",\n    \"notes\": \"string\"\n  },\n\n  \"estimated_sources_and_uses\": {\n    \"total_sources\": \"number\",\n    \"total_uses\": \"number\",\n    \"sources_by_issue\": [\n      {\n        \"issue\": \"string\",\n        \"principal_amount\": \"number\",\n        \"net_original_issue_premium\": \"number\",\n        \"total\": \"number\"\n      }\n    ],\n    \"uses_by_category\": [\n      {\n        \"category\": \"string\",\n        \"total_amount\": \"number\",\n        \"measure_vv_amount\": \"number\",\n        \"measure_m_amount\": \"number\"\n      }\n    ]\n  },\n\n  \"debt_service_schedule\": [\n    {\n      \"issue\": \"string\",\n      \"schedule\": [\n        {\n          \"period_ending\": \"string (date, YYYY-MM-DD)\",\n          \"principal\": \"number\",\n          \"interest\": \"number\",\n          \"total_debt_service\": \"number\"\n        }\n      ]\n    }\n  ],\n\n  \"bond_issues\": [\n    {\n      \"bond_amount\": \"number\",\n      \"election_year\": \"string\",\n      \"bond_type\": \"string\",\n      \"bond_series\": \"string\",\n      \"rating\": \"string\",\n      \"due_date\": \"string (date, YYYY-MM-DD)\",\n      \"interest_commencing_date\": \"string (date, YYYY-MM-DD)\",\n\n      \"redemption_policy\": {\n        \"optional_call_date\": \"string (date, YYYY-MM-DD)\",\n        \"maturities_callable_after\": \"string (date, YYYY-MM-DD)\",\n        \"redemption_price\": \"string\"\n      },\n\n      \"maturity_schedule\": {\n        \"base_cusip\": \"string\",\n        \"maturities\": [\n          {\n            \"maturity_date\": \"string (date, YYYY-MM-DD)\",\n            \"principal_amount\": \"number\",\n            \"interest_rate\": \"string (percentage)\",\n            \"yield\": \"string (percentage)\",\n            \"price\": \"string (price, may include suffix like 'C')\",\n            \"cusip\": \"string\"\n          }\n        ]\n      },\n\n      \"debt_service_schedule\": [\n        {\n          \"period_ending\": \"string (date, YYYY-MM-DD)\",\n          \"principal\": \"number\",\n          \"interest\": \"number\",\n          \"total_debt_service\": \"number\"\n        }\n      ]\n    }\n  ]\n}\n```\n</output_format>\n\n<example_output_format>\n```\n{\n  \"document_title\": \"Chula Vista Elementary School District Election of 2018 and 2020 General Obligation Bonds, Series A and Series B\",\n  \"school_district_name\": \"Chula Vista Elementary School District\",\n  \"county\": \"San Diego County, California\",\n  \"state\": \"CA\",\n  \"overall_rating\": \"AA-\",\n  \"overall_rating_agency\": \"S&P Global Ratings\",\n  \"overall_due_date\": \"2044-08-01\",\n  \"professional_services\": {\n    \"legal_counsel\": \"Stradling Yocca Carlson & Rauth, a Professional Corporation\",\n    \"disclosure_counsel\": \"Stradling Yocca Carlson & Rauth, a Professional Corporation\",\n    \"financial_advisor\": \"Dale Scott & Company, Inc.\",\n    \"paying_agent\": \"U.S. Bank Trust Company, National Association\"\n  },\n  \"date_bond_closes\": \"2023-07-13\",\n  \"date_of_delivery\": \"2023-07-13\",\n  \"interest_payment_dates\": \"February 1 and August 1 (semiannually)\",\n  \"interest_commencing_date\": \"2024-02-01\",\n  \"redemption_dates\": [\n    \"2033-08-01\"\n  ],\n  \"underwriters\": [\n    {\n      \"name\": \"Loop Capital Markets LLC\"\n    },\n    {\n      \"name\": \"UBS Financial Services, Inc.\"\n    }\n  ],\n  \"superintendent\": \"Eduardo Reyes\",\n  \"financial_management_contact\": {\n    \"name\": \"Oscar Esquivel\",\n    \"title\": \"Deputy Superintendent\",\n    \"address\": \"84 East J Street, Chula Vista, California 91910\",\n    \"phone\": \"(619) 425-9600\"\n  },\n  \"board_of_education\": [\n    {\n      \"name\": \"Lucy Ugarte\",\n      \"role\": \"President\"\n    },\n    {\n      \"name\": \"Francisco Tamayo\",\n      \"role\": \"Vice President\"\n    },\n    {\n      \"name\": \"Cesar T. Fernandez\",\n      \"role\": \"Clerk\"\n    },\n    {\n      \"name\": \"Kate Bishop\",\n      \"role\": \"Member\"\n    },\n    {\n      \"name\": \"Delia Dominguez Cervantes\",\n      \"role\": \"Member\"\n    }\n  ],\n  \"assessed_valuation_summary\": {\n    \"fiscal_year\": \"2022-23\",\n    \"total_assessed_valuation\": 41140207319,\n    \"valuation_source\": \"California Municipal Statistics, Inc.\",\n    \"is_county_teeter_plan_participant\": true,\n    \"notes\": \"The assessed valuation for fiscal year 2022-23 was $41,140,207,319, an increase of about 25.22% from fiscal year 2018-19; the County's adoption of the Teeter Plan ensures the District receives 100% of the secured tax levy and mitigates tax delinquencies.\"\n  },\n  \"estimated_sources_and_uses\": {\n    \"total_sources\": 176724293.3,\n    \"total_uses\": 176724293.3,\n    \"sources_by_issue\": [\n      {\n        \"issue\": \"Measure VV Bonds\",\n        \"principal_amount\": 100000000.0,\n        \"net_original_issue_premium\": 6386173.2,\n        \"total\": 106386173.2\n      },\n      {\n        \"issue\": \"Measure M Bonds\",\n        \"principal_amount\": 62500000.0,\n        \"net_original_issue_premium\": 7838120.1,\n        \"total\": 70338120.1\n      }\n    ],\n    \"uses_by_category\": [\n      {\n        \"category\": \"Building Fund(1)\",\n        \"total_amount\": 165663386.96,\n        \"measure_vv_amount\": 103450729.21,\n        \"measure_m_amount\": 62212657.75\n      },\n      {\n        \"category\": \"Interest Fund(2)\",\n        \"total_amount\": 10395082.69,\n        \"measure_vv_amount\": 2556962.59,\n        \"measure_m_amount\": 7838120.1\n      },\n      {\n        \"category\": \"Costs of Issuance(3)\",\n        \"total_amount\": 665823.65,\n        \"measure_vv_amount\": 378481.4,\n        \"measure_m_amount\": 287342.25\n      }\n    ]\n  },\n  \"debt_service_schedule\": [\n    {\n      \"issue\": \"Measure VV Bonds\",\n      \"schedule\": [\n        {\n          \"period_ending\": \"2024-08-01\",\n          \"principal\": 1165000.0,\n          \"interest\": 4721692.5,\n          \"total_debt_service\": 5886692.5\n        },\n        {\n          \"period_ending\": \"2025-08-01\",\n          \"principal\": 1285000.0,\n          \"interest\": 4438600.0,\n          \"total_debt_service\": 5723600.0\n        },\n        ...\n      ]\n    },\n    {\n      \"issue\": \"Measure M Bonds\",\n      \"schedule\": [\n        {\n          \"period_ending\": \"2024-08-01\",\n          \"principal\": 7135000.0,\n          \"interest\": 3281250.0,\n          \"total_debt_service\": 10416250.0\n        },\n        {\n          \"period_ending\": \"2025-08-01\",\n          \"principal\": 7290000.0,\n          \"interest\": 2768250.0,\n          \"total_debt_service\": 10058250.0\n        },\n        ...\n      ]\n    }\n  ],\n  \"bond_issues\": [\n    {\n      \"bond_amount\": 100000000,\n      \"election_year\": \"2018\",\n      \"bond_type\": \"General Obligation Bonds\",\n      \"bond_series\": \"Series A (Measure VV Bonds)\",\n      \"rating\": \"AA-\",\n      \"due_date\": \"2044-08-01\",\n      \"interest_commencing_date\": \"2024-02-01\",\n      \"redemption_policy\": {\n        \"optional_call_date\": \"2033-08-01\",\n        \"maturities_callable_after\": \"2034-08-01\",\n        \"redemption_price\": \"par (without premium)\"\n      },\n      \"maturity_schedule\": {\n        \"base_cusip\": \"171314\",\n        \"maturities\": [\n          {\n            \"maturity_date\": \"2024-08-01\",\n            \"principal_amount\": 1165000,\n            \"interest_rate\": \"5.00%\",\n            \"yield\": \"3.00%\",\n            \"price\": \"102.050\",\n            \"cusip\": \"KG1\"\n          },\n          {\n            \"maturity_date\": \"2025-08-01\",\n            \"principal_amount\": 1285000,\n            \"interest_rate\": \"5.00%\",\n            \"yield\": \"2.87%\",\n            \"price\": \"104.209\",\n            \"cusip\": \"KH9\"\n          },\n          ...\n        ]\n      },\n      \"debt_service_schedule\": [\n        {\n          \"period_ending\": \"2024-08-01\",\n          \"principal\": 1165000.0,\n          \"interest\": 4721692.5,\n          \"total_debt_service\": 5886692.5\n        },\n        {\n          \"period_ending\": \"2025-08-01\",\n          \"principal\": 1285000.0,\n          \"interest\": 4438600.0,\n          \"total_debt_service\": 5723600.0\n        },\n        ...\n      ]\n    },\n    {\n      \"bond_amount\": 62500000,\n      \"election_year\": \"2020\",\n      \"bond_type\": \"General Obligation Bonds\",\n      \"bond_series\": \"Series B (Measure M Bonds)\",\n      \"rating\": \"AA-\",\n      \"due_date\": \"2038-08-01\",\n      \"interest_commencing_date\": \"2024-02-01\",\n      \"redemption_policy\": {\n        \"optional_call_date\": \"2033-08-01\",\n        \"maturities_callable_after\": \"2034-08-01\",\n        \"redemption_price\": \"par (without premium)\"\n      },\n      \"maturity_schedule\": {\n        \"base_cusip\": \"171314\",\n        \"maturities\": [\n          {\n            \"maturity_date\": \"2024-08-01\",\n            \"principal_amount\": 7135000,\n            \"interest_rate\": \"5.00%\",\n            \"yield\": \"3.00%\",\n            \"price\": \"102.050\",\n            \"cusip\": \"LC9\"\n          },\n          {\n            \"maturity_date\": \"2025-08-01\",\n            \"principal_amount\": 7290000,\n            \"interest_rate\": \"5.00%\",\n            \"yield\": \"2.87%\",\n            \"price\": \"104.209\",\n            \"cusip\": \"LD7\"\n          },\n          ...\n        ]\n      },\n      \"debt_service_schedule\": [\n        {\n          \"period_ending\": \"2024-08-01\",\n          \"principal\": 7135000.0,\n          \"interest\": 3281250.0,\n          \"total_debt_service\": 10416250.0\n        },\n        {\n          \"period_ending\": \"2025-08-01\",\n          \"principal\": 7290000.0,\n          \"interest\": 2768250.0,\n          \"total_debt_service\": 10058250.0\n        },\n        ...\n      ]\n    }\n  ]\n}\n```\n</example_output_format>\n\n\n<guidelines> \nRules: \n- Return ONLY the JSON. Do not include explanations, comments, or extra text outside of the JSON. \n- Do not include any fields that are not specified in the schema above. \n- Use numeric types for numbers (without commas or currency symbols) unless they are part of a string such as an interest rate. \n- If there are no bond issues found, return `\"bond_issues\"` as an empty array. \n- If there is more than one plausible value for a field, choose the value that best matches typical municipal bond cover‑page conventions. \n</guidelines>\n",
        "inputType": "binary",
        "options": {}
      },
      "type": "@n8n/n8n-nodes-langchain.googleGemini",
      "typeVersion": 1,
      "position": [
        -4272,
        5152
      ],
      "id": "43a7d57d-b19d-41cf-9967-5ef0a5ce147f",
      "name": "Analyze document1",
      "credentials": {
        "googlePalmApi": {
          "id": "z9ZJZSzT6uD25axI",
          "name": "Gemini n8n-gemini-1"
        }
      }
    },
    {
      "parameters": {
        "modelName": "models/gemini-2.0-flash",
        "options": {
          "temperature": 0.2
        }
      },
      "type": "@n8n/n8n-nodes-langchain.lmChatGoogleGemini",
      "typeVersion": 1,
      "position": [
        -3456,
        5584
      ],
      "id": "5a9fbfa4-a5e5-4753-97ad-e9647ad23da0",
      "name": "Google Gemini Chat Model4",
      "credentials": {
        "googlePalmApi": {
          "id": "z9ZJZSzT6uD25axI",
          "name": "Gemini n8n-gemini-1"
        }
      },
      "disabled": true
    },
    {
      "parameters": {
        "model": "z-ai/glm-4.5-air:free",
        "options": {}
      },
      "type": "@n8n/n8n-nodes-langchain.lmChatOpenRouter",
      "typeVersion": 1,
      "position": [
        -3600,
        5568
      ],
      "id": "d8362e4f-692b-4c1a-9066-b11f1d18e027",
      "name": "OpenRouter Chat Model4",
      "credentials": {
        "openRouterApi": {
          "id": "g27vQJVFoD7lzE1t",
          "name": "openrouter_0"
        }
      },
      "disabled": true
    },
    {
      "parameters": {
        "jsonSchemaExample": "{\n  \"document_title\": \"Chula Vista Elementary School District Election of 2018 and 2020 General Obligation Bonds, Series A and Series B\",\n  \"school_district_name\": \"Chula Vista Elementary School District\",\n  \"county\": \"San Diego County, California\",\n  \"state\": \"CA\",\n  \"overall_rating\": \"AA-\",\n  \"overall_rating_agency\": \"S&P Global Ratings\",\n  \"overall_due_date\": \"2044-08-01\",\n  \"professional_services\": {\n    \"legal_counsel\": \"Stradling Yocca Carlson & Rauth, a Professional Corporation\",\n    \"disclosure_counsel\": \"Stradling Yocca Carlson & Rauth, a Professional Corporation\",\n    \"financial_advisor\": \"Dale Scott & Company, Inc.\",\n    \"paying_agent\": \"U.S. Bank Trust Company, National Association\"\n  },\n  \"date_bond_closes\": \"2023-07-13\",\n  \"date_of_delivery\": \"2023-07-13\",\n  \"interest_payment_dates\": \"February 1 and August 1 (semiannually)\",\n  \"interest_commencing_date\": \"2024-02-01\",\n  \"redemption_dates\": [\n    \"2033-08-01\"\n  ],\n  \"underwriters\": [\n    {\n      \"name\": \"Loop Capital Markets LLC\"\n    },\n    {\n      \"name\": \"UBS Financial Services, Inc.\"\n    }\n  ],\n  \"superintendent\": \"Eduardo Reyes\",\n  \"financial_management_contact\": {\n    \"name\": \"Oscar Esquivel\",\n    \"title\": \"Deputy Superintendent\",\n    \"address\": \"84 East J Street, Chula Vista, California 91910\",\n    \"phone\": \"(619) 425-9600\"\n  },\n  \"board_of_education\": [\n    {\n      \"name\": \"Lucy Ugarte\",\n      \"role\": \"President\"\n    },\n    {\n      \"name\": \"Francisco Tamayo\",\n      \"role\": \"Vice President\"\n    },\n    {\n      \"name\": \"Cesar T. Fernandez\",\n      \"role\": \"Clerk\"\n    },\n    {\n      \"name\": \"Kate Bishop\",\n      \"role\": \"Member\"\n    },\n    {\n      \"name\": \"Delia Dominguez Cervantes\",\n      \"role\": \"Member\"\n    }\n  ],\n  \"assessed_valuation_summary\": {\n    \"fiscal_year\": \"2022-23\",\n    \"total_assessed_valuation\": 41140207319,\n    \"valuation_source\": \"California Municipal Statistics, Inc.\",\n    \"is_county_teeter_plan_participant\": true,\n    \"notes\": \"The assessed valuation for fiscal year 2022-23 was $41,140,207,319, an increase of about 25.22% from fiscal year 2018-19; the County's adoption of the Teeter Plan ensures the District receives 100% of the secured tax levy and mitigates tax delinquencies.\"\n  },\n  \"estimated_sources_and_uses\": {\n    \"total_sources\": 176724293.3,\n    \"total_uses\": 176724293.3,\n    \"sources_by_issue\": [\n      {\n        \"issue\": \"Measure VV Bonds\",\n        \"principal_amount\": 100000000.0,\n        \"net_original_issue_premium\": 6386173.2,\n        \"total\": 106386173.2\n      },\n      {\n        \"issue\": \"Measure M Bonds\",\n        \"principal_amount\": 62500000.0,\n        \"net_original_issue_premium\": 7838120.1,\n        \"total\": 70338120.1\n      }\n    ],\n    \"uses_by_category\": [\n      {\n        \"category\": \"Building Fund(1)\",\n        \"total_amount\": 165663386.96,\n        \"measure_vv_amount\": 103450729.21,\n        \"measure_m_amount\": 62212657.75\n      },\n      {\n        \"category\": \"Interest Fund(2)\",\n        \"total_amount\": 10395082.69,\n        \"measure_vv_amount\": 2556962.59,\n        \"measure_m_amount\": 7838120.1\n      },\n      {\n        \"category\": \"Costs of Issuance(3)\",\n        \"total_amount\": 665823.65,\n        \"measure_vv_amount\": 378481.4,\n        \"measure_m_amount\": 287342.25\n      }\n    ]\n  },\n  \"debt_service_schedule\": [\n    {\n      \"issue\": \"Measure VV Bonds\",\n      \"schedule\": [\n        {\n          \"period_ending\": \"2024-08-01\",\n          \"principal\": 1165000.0,\n          \"interest\": 4721692.5,\n          \"total_debt_service\": 5886692.5\n        },\n        {\n          \"period_ending\": \"2025-08-01\",\n          \"principal\": 1285000.0,\n          \"interest\": 4438600.0,\n          \"total_debt_service\": 5723600.0\n        }\n      ]\n    },\n    {\n      \"issue\": \"Measure M Bonds\",\n      \"schedule\": [\n        {\n          \"period_ending\": \"2024-08-01\",\n          \"principal\": 7135000.0,\n          \"interest\": 3281250.0,\n          \"total_debt_service\": 10416250.0\n        },\n        {\n          \"period_ending\": \"2025-08-01\",\n          \"principal\": 7290000.0,\n          \"interest\": 2768250.0,\n          \"total_debt_service\": 10058250.0\n        }\n      ]\n    }\n  ],\n  \"bond_issues\": [\n    {\n      \"bond_amount\": 100000000,\n      \"election_year\": \"2018\",\n      \"bond_type\": \"General Obligation Bonds\",\n      \"bond_series\": \"Series A (Measure VV Bonds)\",\n      \"rating\": \"AA-\",\n      \"due_date\": \"2044-08-01\",\n      \"interest_commencing_date\": \"2024-02-01\",\n      \"redemption_policy\": {\n        \"optional_call_date\": \"2033-08-01\",\n        \"maturities_callable_after\": \"2034-08-01\",\n        \"redemption_price\": \"par (without premium)\"\n      },\n      \"maturity_schedule\": {\n        \"base_cusip\": \"171314\",\n        \"maturities\": [\n          {\n            \"maturity_date\": \"2024-08-01\",\n            \"principal_amount\": 1165000,\n            \"interest_rate\": \"5.00%\",\n            \"yield\": \"3.00%\",\n            \"price\": \"102.050\",\n            \"cusip\": \"KG1\"\n          },\n          {\n            \"maturity_date\": \"2025-08-01\",\n            \"principal_amount\": 1285000,\n            \"interest_rate\": \"5.00%\",\n            \"yield\": \"2.87%\",\n            \"price\": \"104.209\",\n            \"cusip\": \"KH9\"\n          }\n        ]\n      },\n      \"debt_service_schedule\": [\n        {\n          \"period_ending\": \"2024-08-01\",\n          \"principal\": 1165000.0,\n          \"interest\": 4721692.5,\n          \"total_debt_service\": 5886692.5\n        },\n        {\n          \"period_ending\": \"2025-08-01\",\n          \"principal\": 1285000.0,\n          \"interest\": 4438600.0,\n          \"total_debt_service\": 5723600.0\n        }\n      ]\n    },\n    {\n      \"bond_amount\": 62500000,\n      \"election_year\": \"2020\",\n      \"bond_type\": \"General Obligation Bonds\",\n      \"bond_series\": \"Series B (Measure M Bonds)\",\n      \"rating\": \"AA-\",\n      \"due_date\": \"2038-08-01\",\n      \"interest_commencing_date\": \"2024-02-01\",\n      \"redemption_policy\": {\n        \"optional_call_date\": \"2033-08-01\",\n        \"maturities_callable_after\": \"2034-08-01\",\n        \"redemption_price\": \"par (without premium)\"\n      },\n      \"maturity_schedule\": {\n        \"base_cusip\": \"171314\",\n        \"maturities\": [\n          {\n            \"maturity_date\": \"2024-08-01\",\n            \"principal_amount\": 7135000,\n            \"interest_rate\": \"5.00%\",\n            \"yield\": \"3.00%\",\n            \"price\": \"102.050\",\n            \"cusip\": \"LC9\"\n          },\n          {\n            \"maturity_date\": \"2025-08-01\",\n            \"principal_amount\": 7290000,\n            \"interest_rate\": \"5.00%\",\n            \"yield\": \"2.87%\",\n            \"price\": \"104.209\",\n            \"cusip\": \"LD7\"\n          }\n        ]\n      },\n      \"debt_service_schedule\": [\n        {\n          \"period_ending\": \"2024-08-01\",\n          \"principal\": 7135000.0,\n          \"interest\": 3281250.0,\n          \"total_debt_service\": 10416250.0\n        },\n        {\n          \"period_ending\": \"2025-08-01\",\n          \"principal\": 7290000.0,\n          \"interest\": 2768250.0,\n          \"total_debt_service\": 10058250.0\n        }\n      ]\n    }\n  ]\n}",
        "autoFix": true
      },
      "id": "d49a6199-b9c0-4ca7-b24c-6f680f3601b8",
      "name": "Extract Metadata Structured Output1",
      "type": "@n8n/n8n-nodes-langchain.outputParserStructured",
      "typeVersion": 1.3,
      "position": [
        -3456,
        5376
      ],
      "disabled": true
    },
    {
      "parameters": {
        "promptType": "define",
        "text": "=Parse the following structued output json codeblock into a string:\n{{ $json.content.parts[0].text }}\n\nOutput only the json string without any extra text and without a preamble.",
        "hasOutputParser": true,
        "needsFallback": true,
        "batching": {}
      },
      "id": "74edbba0-60fe-4c46-ab7c-355eca0d4e08",
      "name": "Extract Metadata",
      "type": "@n8n/n8n-nodes-langchain.chainLlm",
      "typeVersion": 1.7,
      "position": [
        -3600,
        5152
      ],
      "disabled": true
    },
    {
      "parameters": {
        "modelName": "models/gemini-2.5-flash-lite",
        "options": {
          "temperature": 0.2
        }
      },
      "type": "@n8n/n8n-nodes-langchain.lmChatGoogleGemini",
      "typeVersion": 1,
      "position": [
        -3808,
        5488
      ],
      "id": "7da79ccd-c4ec-483f-8a04-0374dca1b912",
      "name": "Google Gemini Chat Model5",
      "credentials": {
        "googlePalmApi": {
          "id": "z9ZJZSzT6uD25axI",
          "name": "Gemini n8n-gemini-1"
        }
      },
      "disabled": true
    },
    {
      "parameters": {
        "jsCode": "function stripCodeFence(str) {\n  if (typeof str !== \"string\") return str;\n\n  return str\n    // remove opening ```json or ``` (with optional whitespace/newline)\n    .replace(/^\\s*```[a-zA-Z0-9]*\\s*\\n?/, \"\")\n    // remove closing ``` (with optional preceding newline/whitespace)\n    .replace(/\\n?\\s*```\\s*$/, \"\");\n}\n\n// Loop over input items and add a new field called 'myNewField' to the JSON of each one\nlet fdsa = \"\";\nfor (const item of $input.all()) {\n  const asdf = item.json.content.parts[0].text\n\n  fdsa = stripCodeFence(asdf);\n\n  console.log(fdsa)\n}\n\nreturn [JSON.parse(fdsa)];"
      },
      "type": "n8n-nodes-base.code",
      "typeVersion": 2,
      "position": [
        -4064,
        5152
      ],
      "id": "933ffd8d-fcad-494b-a188-ab463f2b83db",
      "name": "Code in JavaScript1"
    }
  ],
  "connections": {
    "Set Schedule": {
      "main": [
        [
          {
            "node": "Check if lock exists",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "IF": {
      "main": [
        [
          {
            "node": "Search files and folders",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Search files and folders": {
      "main": [
        [
          {
            "node": "Loop Over Items",
            "type": "main",
            "index": 0
          },
          {
            "node": "Obtain Lock",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Loop Over Items": {
      "main": [
        [
          {
            "node": "Clear Lock",
            "type": "main",
            "index": 0
          }
        ],
        [
          {
            "node": "Download file",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Download file": {
      "main": [
        [
          {
            "node": "Document Content Hash",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "New Doc?": {
      "main": [
        [
          {
            "node": "Get document content hash",
            "type": "main",
            "index": 0
          }
        ],
        [
          {
            "node": "Has it Changed?",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Archive Unchanged File": {
      "main": [
        [
          {
            "node": "Loop Over Items",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Identical Content Exists?": {
      "main": [
        [
          {
            "node": "Do Nothing",
            "type": "main",
            "index": 0
          }
        ],
        [
          {
            "node": "Reload Binary for PDF",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Delete Old from Gemini": {
      "main": [
        [
          {
            "node": "Delete Old Record",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Do Nothing": {
      "main": [
        [
          {
            "node": "Archive Unchanged File",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Has it Changed?": {
      "main": [
        [
          {
            "node": "Delete Old from Gemini",
            "type": "main",
            "index": 0
          }
        ],
        [
          {
            "node": "Do Nothing",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Delete Old Record": {
      "main": [
        [
          {
            "node": "Reload Binary for PDF",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Google Gemini Chat Model": {
      "ai_languageModel": [
        [
          {
            "node": "Extract Metadata with Gemini2",
            "type": "ai_languageModel",
            "index": 0
          }
        ]
      ]
    },
    "Structured Output Parser": {
      "ai_outputParser": [
        [
          {
            "node": "Extract Metadata with Gemini2",
            "type": "ai_outputParser",
            "index": 0
          }
        ]
      ]
    },
    "Reload Binary for PDF": {
      "main": [
        [
          {
            "node": "IF1",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "IF1": {
      "main": [
        [
          {
            "node": "Analyze document1",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Custom Metadata (Manual)": {
      "main": [
        [
          {
            "node": "Set File Parameters & Get Upload URL",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Set File Parameters & Get Upload URL": {
      "main": [
        [
          {
            "node": "Reload Binary for Upload",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Reload Binary for Upload": {
      "main": [
        [
          {
            "node": "Upload to File Search Store",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Upload to File Search Store": {
      "main": [
        [
          {
            "node": "Initial Wait",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Initial Wait": {
      "main": [
        [
          {
            "node": "Check if Processed",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Check if Processed": {
      "main": [
        []
      ]
    },
    "Archive Processed File": {
      "main": [
        [
          {
            "node": "Loop Over Items",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Global Vars": {
      "main": [
        [
          {
            "node": "IF",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Obtain Lock": {
      "main": [
        []
      ]
    },
    "Check if lock exists": {
      "main": [
        [
          {
            "node": "Global Vars",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Document Name Hash": {
      "main": [
        [
          {
            "node": "Find file by file_id",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Document Content Hash": {
      "main": [
        [
          {
            "node": "Document Name Hash",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Find file by file_id": {
      "main": [
        [
          {
            "node": "New Doc?",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Get document content hash": {
      "main": [
        [
          {
            "node": "Identical Content Exists?",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Google Gemini Chat Model2": {
      "ai_languageModel": [
        []
      ]
    },
    "Google Gemini Chat Model3": {
      "ai_languageModel": [
        [
          {
            "node": "Extract Metadata Structured Output",
            "type": "ai_languageModel",
            "index": 0
          }
        ]
      ]
    },
    "Create a row in Supabase": {
      "ai_tool": [
        [
          {
            "node": "Insert Bond Data into DB",
            "type": "ai_tool",
            "index": 0
          }
        ]
      ]
    },
    "OpenRouter Chat Model": {
      "ai_languageModel": [
        [
          {
            "node": "Insert Bond Data into DB",
            "type": "ai_languageModel",
            "index": 1
          }
        ]
      ]
    },
    "OpenRouter Chat Model1": {
      "ai_languageModel": [
        [
          {
            "node": "Insert Bond Data into DB",
            "type": "ai_languageModel",
            "index": 0
          }
        ]
      ]
    },
    "Update a row in Supabase": {
      "ai_tool": [
        [
          {
            "node": "Insert Bond Data into DB",
            "type": "ai_tool",
            "index": 0
          }
        ]
      ]
    },
    "Split by Tables": {
      "main": [
        [
          {
            "node": "Add row to bond_raw",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Add row to bond_raw": {
      "main": [
        [
          {
            "node": "Add row to gemini_file_store",
            "type": "main",
            "index": 0
          }
        ],
        [
          {
            "node": "Update row in bond_raw",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Update row in bond_raw": {
      "main": [
        [
          {
            "node": "Add row to gemini_file_store",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "OpenRouter Chat Model3": {
      "ai_languageModel": [
        [
          {
            "node": "Extract Metadata with Gemini",
            "type": "ai_languageModel",
            "index": 0
          }
        ]
      ]
    },
    "Extract Metadata Structured Output": {
      "ai_outputParser": [
        [
          {
            "node": "Extract Metadata with Gemini",
            "type": "ai_outputParser",
            "index": 0
          }
        ]
      ]
    },
    "Extract Metadata with Gemini2": {
      "main": [
        [
          {
            "node": "Custom Metadata (Manual)",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Extract Metadata with Gemini": {
      "main": [
        []
      ]
    },
    "Analyze document": {
      "main": [
        []
      ]
    },
    "Analyze document2": {
      "main": [
        [
          {
            "node": "Extract Metadata with Gemini2",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Add row to gemini_file_store": {
      "main": [
        [
          {
            "node": "Archive Processed File",
            "type": "main",
            "index": 0
          }
        ],
        [
          {
            "node": "Update a row1",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Update a row1": {
      "main": [
        [
          {
            "node": "Archive Processed File",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Analyze document1": {
      "main": [
        [
          {
            "node": "Code in JavaScript1",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Google Gemini Chat Model4": {
      "ai_languageModel": [
        [
          {
            "node": "Extract Metadata Structured Output1",
            "type": "ai_languageModel",
            "index": 0
          }
        ]
      ]
    },
    "Extract Metadata Structured Output1": {
      "ai_outputParser": [
        [
          {
            "node": "Extract Metadata",
            "type": "ai_outputParser",
            "index": 0
          }
        ]
      ]
    },
    "Extract Metadata": {
      "main": [
        [
          {
            "node": "Split by Tables",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "OpenRouter Chat Model4": {
      "ai_languageModel": [
        [
          {
            "node": "Extract Metadata",
            "type": "ai_languageModel",
            "index": 1
          }
        ]
      ]
    },
    "Google Gemini Chat Model5": {
      "ai_languageModel": [
        [
          {
            "node": "Extract Metadata",
            "type": "ai_languageModel",
            "index": 0
          }
        ]
      ]
    },
    "Code in JavaScript1": {
      "main": [
        [
          {
            "node": "Extract Metadata",
            "type": "main",
            "index": 0
          }
        ]
      ]
    }
  },
  "settings": {
    "executionOrder": "v1"
  },
  "staticData": null,
  "meta": null,
  "pinData": {
    "Extract Metadata with Gemini2": [
      {
        "json": {
          "output": {
            "document_title": "CAJON VALLEY UNION ELEMENTARY SCHOOL DISTRICT\n(SAN DIEGO COUNTY, CALIFORNIA)\nGENERAL OBLIGATION BONDS\n2000 ELECTION, SERIES C",
            "school_district_name": "CAJON VALLEY UNION ELEMENTARY SCHOOL DISTRICT",
            "county": "SAN DIEGO COUNTY",
            "state": "CALIFORNIA",
            "overall_rating": "AAA",
            "overall_rating_agency": "S&P",
            "overall_due_date": "2032-08-01",
            "bond_issues": [
              {
                "bond_amount": 16500000,
                "election_year": "2000",
                "bond_type": "GENERAL OBLIGATION BONDS",
                "bond_series": "C",
                "due_date": "2032-08-01"
              }
            ]
          }
        }
      }
    ],
    "Extract Metadata with Gemini": [
      {
        "json": {
          "output": {
            "document_title": "$56,000,000 EAST SIDE UNION HIGH SCHOOL DISTRICT (Santa Clara County, California) General Obligation Bonds 2016 Election, Series D; $6,420,000 EAST SIDE UNION HIGH SCHOOL DISTRICT (Santa Clara County, California) 2025 Refunding General Obligation Bonds, Series A; $35,545,000 EAST SIDE UNION HIGH SCHOOL DISTRICT (Santa Clara County, California) 2025 Refunding General Obligation Bonds, Series B",
            "school_district_name": "EAST SIDE UNION HIGH SCHOOL DISTRICT",
            "county": "Santa Clara County, California",
            "state": "CA",
            "overall_rating": "Aa3",
            "overall_rating_agency": "Moody’s",
            "overall_due_date": "2035-08-01",
            "professional_services": {
              "legal_counsel": "Jones Hall, A Professional Law Corporation",
              "disclosure_counsel": "Jones Hall, A Professional Law Corporation",
              "financial_advisor": "Dale Scott & Company Inc.",
              "paying_agent": "U.S. Bank Trust Company, National Association"
            },
            "date_bond_closes": "2025-05-21",
            "date_of_delivery": "2025-05-21",
            "interest_payment_dates": "semiannually on each February 1 and August 1",
            "interest_commencing_date": "2025-08-01",
            "redemption_dates": [],
            "underwriters": [
              {
                "name": "Loop Capital Markets LLC"
              }
            ],
            "superintendent": "Glenn Vander Zee",
            "financial_management_contact": {
              "name": "Tom Huynh",
              "title": "Associate Superintendent of Business Services",
              "address": "830 North Capitol Ave., San José, California 95133",
              "phone": "(408) 347-5050"
            },
            "board_of_education": [
              {
                "name": "Brian Do",
                "role": "President"
              },
              {
                "name": "Van T. Le",
                "role": "Vice President"
              },
              {
                "name": "Lorena Chavez",
                "role": "Clerk"
              },
              {
                "name": "Pattie Cortese",
                "role": "Member"
              },
              {
                "name": "J. Manuel Herrera",
                "role": "Member"
              }
            ],
            "assessed_valuation_summary": {
              "fiscal_year": "2024-25",
              "total_assessed_valuation": 112255546441,
              "valuation_source": "California Municipal Statistics, Inc.",
              "is_county_teeter_plan_participant": true,
              "notes": "Assessed valuations are subject to change due to general economic conditions, supply and demand for real property, government regulations, man-made or natural disasters (e.g., earthquakes, wildfires, floods, droughts, mudslides), and public health disasters (e.g., COVID-19 pandemic). The District cannot predict the future effects of these factors on assessed values or economic activity. The County's Teeter Plan participation ensures the District receives 100% of secured property taxes levied, mitigating delinquency risk."
            },
            "estimated_sources_and_uses": {
              "total_sources": 104664986.6,
              "total_uses": 104664986.6,
              "sources_by_issue": [
                {
                  "issue": "Series D Bonds",
                  "principal_amount": 56000000,
                  "net_original_issue_premium": 3430454.2,
                  "total": 59430454.2
                },
                {
                  "issue": "2025 Refunding General Obligation Bonds, Series A",
                  "principal_amount": 6420000,
                  "net_original_issue_premium": 575387.7,
                  "total": 6995387.7
                },
                {
                  "issue": "2025 Refunding General Obligation Bonds, Series B",
                  "principal_amount": 35545000,
                  "net_original_issue_premium": 2694144.7,
                  "total": 38239144.7
                }
              ],
              "uses_by_category": [
                {
                  "category": "Deposit to Building Fund",
                  "total_amount": 55754000,
                  "measure_vv_amount": 0,
                  "measure_m_amount": 0
                },
                {
                  "category": "Deposit to Escrow Fund",
                  "total_amount": 44741927.5,
                  "measure_vv_amount": 0,
                  "measure_m_amount": 0
                },
                {
                  "category": "Deposit to Debt Service Fund",
                  "total_amount": 3263551.73,
                  "measure_vv_amount": 0,
                  "measure_m_amount": 0
                },
                {
                  "category": "Costs of Issuance(1)",
                  "total_amount": 905507.37,
                  "measure_vv_amount": 0,
                  "measure_m_amount": 0
                }
              ]
            },
            "debt_service_schedule": [
              {
                "issue": "Series D Bonds",
                "schedule": [
                  {
                    "period_ending": "2025-08-01",
                    "principal": 0,
                    "interest": 544444.44,
                    "total_debt_service": 544444.44
                  },
                  {
                    "period_ending": "2026-08-01",
                    "principal": 16080000,
                    "interest": 2800000,
                    "total_debt_service": 18880000
                  },
                  {
                    "period_ending": "2027-08-01",
                    "principal": 8160000,
                    "interest": 1996000,
                    "total_debt_service": 10156000
                  },
                  {
                    "period_ending": "2028-08-01",
                    "principal": 8950000,
                    "interest": 1588000,
                    "total_debt_service": 10538000
                  },
                  {
                    "period_ending": "2029-08-01",
                    "principal": 4325000,
                    "interest": 1140500,
                    "total_debt_service": 5465500
                  },
                  {
                    "period_ending": "2030-08-01",
                    "principal": 4750000,
                    "interest": 924250,
                    "total_debt_service": 5674250
                  },
                  {
                    "period_ending": "2031-08-01",
                    "principal": 5200000,
                    "interest": 686750,
                    "total_debt_service": 5886750
                  },
                  {
                    "period_ending": "2032-08-01",
                    "principal": 4080000,
                    "interest": 426750,
                    "total_debt_service": 4506750
                  },
                  {
                    "period_ending": "2033-08-01",
                    "principal": 4455000,
                    "interest": 222750,
                    "total_debt_service": 4677750
                  }
                ]
              },
              {
                "issue": "Series A Refunding Bonds",
                "schedule": [
                  {
                    "period_ending": "2025-08-01",
                    "principal": 0,
                    "interest": 62416.67,
                    "total_debt_service": 62416.67
                  },
                  {
                    "period_ending": "2026-08-01",
                    "principal": 0,
                    "interest": 321000,
                    "total_debt_service": 321000
                  },
                  {
                    "period_ending": "2027-08-01",
                    "principal": 0,
                    "interest": 321000,
                    "total_debt_service": 321000
                  },
                  {
                    "period_ending": "2028-08-01",
                    "principal": 1865000,
                    "interest": 321000,
                    "total_debt_service": 2186000
                  },
                  {
                    "period_ending": "2029-08-01",
                    "principal": 0,
                    "interest": 227750,
                    "total_debt_service": 227750
                  },
                  {
                    "period_ending": "2030-08-01",
                    "principal": 1385000,
                    "interest": 227750,
                    "total_debt_service": 1612750
                  },
                  {
                    "period_ending": "2031-08-01",
                    "principal": 950000,
                    "interest": 158500,
                    "total_debt_service": 1108500
                  },
                  {
                    "period_ending": "2032-08-01",
                    "principal": 1415000,
                    "interest": 111000,
                    "total_debt_service": 1526000
                  },
                  {
                    "period_ending": "2033-08-01",
                    "principal": 805000,
                    "interest": 40250,
                    "total_debt_service": 845250
                  }
                ]
              },
              {
                "issue": "Series B Refunding Bonds",
                "schedule": [
                  {
                    "period_ending": "2025-08-01",
                    "principal": 560000,
                    "interest": 345576.39,
                    "total_debt_service": 905576.39
                  },
                  {
                    "period_ending": "2026-08-01",
                    "principal": 4740000,
                    "interest": 1749250,
                    "total_debt_service": 6489250
                  },
                  {
                    "period_ending": "2027-08-01",
                    "principal": 5195000,
                    "interest": 1512250,
                    "total_debt_service": 6707250
                  },
                  {
                    "period_ending": "2028-08-01",
                    "principal": 4680000,
                    "interest": 1252500,
                    "total_debt_service": 5932500
                  },
                  {
                    "period_ending": "2029-08-01",
                    "principal": 2070000,
                    "interest": 1018500,
                    "total_debt_service": 3088500
                  },
                  {
                    "period_ending": "2030-08-01",
                    "principal": 1450000,
                    "interest": 915000,
                    "total_debt_service": 2365000
                  },
                  {
                    "period_ending": "2031-08-01",
                    "principal": 7310000,
                    "interest": 842500,
                    "total_debt_service": 8152500
                  },
                  {
                    "period_ending": "2032-08-01",
                    "principal": 5320000,
                    "interest": 477000,
                    "total_debt_service": 5797000
                  },
                  {
                    "period_ending": "2033-08-01",
                    "principal": 1930000,
                    "interest": 211000,
                    "total_debt_service": 2141000
                  },
                  {
                    "period_ending": "2034-08-01",
                    "principal": 1020000,
                    "interest": 114500,
                    "total_debt_service": 1134500
                  },
                  {
                    "period_ending": "2035-08-01",
                    "principal": 1270000,
                    "interest": 63500,
                    "total_debt_service": 1333500
                  }
                ]
              }
            ],
            "bond_issues": [
              {
                "bond_amount": 56000000,
                "election_year": "2016",
                "bond_type": "General Obligation Bonds",
                "bond_series": "Series D",
                "rating": "Aa3",
                "due_date": "2033-08-01",
                "interest_commencing_date": "2025-08-01",
                "redemption_policy": {
                  "optional_call_date": "",
                  "maturities_callable_after": "",
                  "redemption_price": ""
                },
                "maturity_schedule": {
                  "base_cusip": "275282",
                  "maturities": [
                    {
                      "maturity_date": "2026-08-01",
                      "principal_amount": 16080000,
                      "interest_rate": "5.000%",
                      "yield": "3.080%",
                      "price": "102.230",
                      "cusip": "TA9"
                    },
                    {
                      "maturity_date": "2027-08-01",
                      "principal_amount": 8160000,
                      "interest_rate": "5.000%",
                      "yield": "3.100%",
                      "price": "103.996",
                      "cusip": "TB7"
                    },
                    {
                      "maturity_date": "2028-08-01",
                      "principal_amount": 8950000,
                      "interest_rate": "5.000%",
                      "yield": "3.100%",
                      "price": "105.731",
                      "cusip": "TC5"
                    },
                    {
                      "maturity_date": "2029-08-01",
                      "principal_amount": 4325000,
                      "interest_rate": "5.000%",
                      "yield": "3.140%",
                      "price": "107.251",
                      "cusip": "TD3"
                    },
                    {
                      "maturity_date": "2030-08-01",
                      "principal_amount": 4750000,
                      "interest_rate": "5.000%",
                      "yield": "3.160%",
                      "price": "108.746",
                      "cusip": "TE1"
                    },
                    {
                      "maturity_date": "2031-08-01",
                      "principal_amount": 5200000,
                      "interest_rate": "5.000%",
                      "yield": "3.200%",
                      "price": "110.037",
                      "cusip": "TF8"
                    },
                    {
                      "maturity_date": "2032-08-01",
                      "principal_amount": 4080000,
                      "interest_rate": "5.000%",
                      "yield": "3.270%",
                      "price": "111.006",
                      "cusip": "TG6"
                    },
                    {
                      "maturity_date": "2033-08-01",
                      "principal_amount": 4455000,
                      "interest_rate": "5.000%",
                      "yield": "3.320%",
                      "price": "111.961",
                      "cusip": "TH4"
                    }
                  ]
                },
                "debt_service_schedule": [
                  {
                    "period_ending": "2025-08-01",
                    "principal": 0,
                    "interest": 544444.44,
                    "total_debt_service": 544444.44
                  },
                  {
                    "period_ending": "2026-08-01",
                    "principal": 16080000,
                    "interest": 2800000,
                    "total_debt_service": 18880000
                  },
                  {
                    "period_ending": "2027-08-01",
                    "principal": 8160000,
                    "interest": 1996000,
                    "total_debt_service": 10156000
                  },
                  {
                    "period_ending": "2028-08-01",
                    "principal": 8950000,
                    "interest": 1588000,
                    "total_debt_service": 10538000
                  },
                  {
                    "period_ending": "2029-08-01",
                    "principal": 4325000,
                    "interest": 1140500,
                    "total_debt_service": 5465500
                  },
                  {
                    "period_ending": "2030-08-01",
                    "principal": 4750000,
                    "interest": 924250,
                    "total_debt_service": 5674250
                  },
                  {
                    "period_ending": "2031-08-01",
                    "principal": 5200000,
                    "interest": 686750,
                    "total_debt_service": 5886750
                  },
                  {
                    "period_ending": "2032-08-01",
                    "principal": 4080000,
                    "interest": 426750,
                    "total_debt_service": 4506750
                  },
                  {
                    "period_ending": "2033-08-01",
                    "principal": 4455000,
                    "interest": 222750,
                    "total_debt_service": 4677750
                  }
                ]
              },
              {
                "bond_amount": 6420000,
                "election_year": "2025",
                "bond_type": "Refunding General Obligation Bonds",
                "bond_series": "Series A",
                "rating": "Aa3",
                "due_date": "2033-08-01",
                "interest_commencing_date": "2025-08-01",
                "redemption_policy": {
                  "optional_call_date": "",
                  "maturities_callable_after": "",
                  "redemption_price": ""
                },
                "maturity_schedule": {
                  "base_cusip": "275282",
                  "maturities": [
                    {
                      "maturity_date": "2028-08-01",
                      "principal_amount": 1865000,
                      "interest_rate": "5.000%",
                      "yield": "3.100%",
                      "price": "105.731",
                      "cusip": "SJ1"
                    },
                    {
                      "maturity_date": "2030-08-01",
                      "principal_amount": 1385000,
                      "interest_rate": "5.000%",
                      "yield": "3.160%",
                      "price": "108.746",
                      "cusip": "SK8"
                    },
                    {
                      "maturity_date": "2031-08-01",
                      "principal_amount": 950000,
                      "interest_rate": "5.000%",
                      "yield": "3.200%",
                      "price": "110.037",
                      "cusip": "SL6"
                    },
                    {
                      "maturity_date": "2032-08-01",
                      "principal_amount": 1415000,
                      "interest_rate": "5.000%",
                      "yield": "3.270%",
                      "price": "111.006",
                      "cusip": "SM4"
                    },
                    {
                      "maturity_date": "2033-08-01",
                      "principal_amount": 805000,
                      "interest_rate": "5.000%",
                      "yield": "3.320%",
                      "price": "111.961",
                      "cusip": "SN2"
                    }
                  ]
                },
                "debt_service_schedule": [
                  {
                    "period_ending": "2025-08-01",
                    "principal": 0,
                    "interest": 62416.67,
                    "total_debt_service": 62416.67
                  },
                  {
                    "period_ending": "2026-08-01",
                    "principal": 0,
                    "interest": 321000,
                    "total_debt_service": 321000
                  },
                  {
                    "period_ending": "2027-08-01",
                    "principal": 0,
                    "interest": 321000,
                    "total_debt_service": 321000
                  },
                  {
                    "period_ending": "2028-08-01",
                    "principal": 1865000,
                    "interest": 321000,
                    "total_debt_service": 2186000
                  },
                  {
                    "period_ending": "2029-08-01",
                    "principal": 0,
                    "interest": 227750,
                    "total_debt_service": 227750
                  },
                  {
                    "period_ending": "2030-08-01",
                    "principal": 1385000,
                    "interest": 227750,
                    "total_debt_service": 1612750
                  },
                  {
                    "period_ending": "2031-08-01",
                    "principal": 950000,
                    "interest": 158500,
                    "total_debt_service": 1108500
                  },
                  {
                    "period_ending": "2032-08-01",
                    "principal": 1415000,
                    "interest": 111000,
                    "total_debt_service": 1526000
                  },
                  {
                    "period_ending": "2033-08-01",
                    "principal": 805000,
                    "interest": 40250,
                    "total_debt_service": 845250
                  }
                ]
              },
              {
                "bond_amount": 35545000,
                "election_year": "2025",
                "bond_type": "Refunding General Obligation Bonds",
                "bond_series": "Series B",
                "rating": "Aa3",
                "due_date": "2035-08-01",
                "interest_commencing_date": "2025-08-01",
                "redemption_policy": {
                  "optional_call_date": "",
                  "maturities_callable_after": "",
                  "redemption_price": ""
                },
                "maturity_schedule": {
                  "base_cusip": "275282",
                  "maturities": [
                    {
                      "maturity_date": "2025-08-01",
                      "principal_amount": 560000,
                      "interest_rate": "5.000%",
                      "yield": "3.080%",
                      "price": "100.362",
                      "cusip": "SP7"
                    },
                    {
                      "maturity_date": "2026-08-01",
                      "principal_amount": 4740000,
                      "interest_rate": "5.000%",
                      "yield": "3.080%",
                      "price": "102.230",
                      "cusip": "SQ5"
                    },
                    {
                      "maturity_date": "2027-08-01",
                      "principal_amount": 5195000,
                      "interest_rate": "5.000%",
                      "yield": "3.100%",
                      "price": "103.996",
                      "cusip": "SR3"
                    },
                    {
                      "maturity_date": "2028-08-01",
                      "principal_amount": 4680000,
                      "interest_rate": "5.000%",
                      "yield": "3.100%",
                      "price": "105.731",
                      "cusip": "SS1"
                    },
                    {
                      "maturity_date": "2029-08-01",
                      "principal_amount": 2070000,
                      "interest_rate": "5.000%",
                      "yield": "3.140%",
                      "price": "107.251",
                      "cusip": "ST9"
                    },
                    {
                      "maturity_date": "2030-08-01",
                      "principal_amount": 1450000,
                      "interest_rate": "5.000%",
                      "yield": "3.160%",
                      "price": "108.746",
                      "cusip": "SU6"
                    },
                    {
                      "maturity_date": "2031-08-01",
                      "principal_amount": 7310000,
                      "interest_rate": "5.000%",
                      "yield": "3.200%",
                      "price": "110.037",
                      "cusip": "SV4"
                    },
                    {
                      "maturity_date": "2032-08-01",
                      "principal_amount": 5320000,
                      "interest_rate": "5.000%",
                      "yield": "3.270%",
                      "price": "111.006",
                      "cusip": "SW2"
                    },
                    {
                      "maturity_date": "2033-08-01",
                      "principal_amount": 1930000,
                      "interest_rate": "5.000%",
                      "yield": "3.320%",
                      "price": "111.961",
                      "cusip": "SX0"
                    },
                    {
                      "maturity_date": "2034-08-01",
                      "principal_amount": 1020000,
                      "interest_rate": "5.000%",
                      "yield": "3.420%",
                      "price": "112.370",
                      "cusip": "SY8"
                    },
                    {
                      "maturity_date": "2035-08-01",
                      "principal_amount": 1270000,
                      "interest_rate": "5.000%",
                      "yield": "3.540%",
                      "price": "112.398",
                      "cusip": "SZ5"
                    }
                  ]
                },
                "debt_service_schedule": [
                  {
                    "period_ending": "2025-08-01",
                    "principal": 560000,
                    "interest": 345576.39,
                    "total_debt_service": 905576.39
                  },
                  {
                    "period_ending": "2026-08-01",
                    "principal": 4740000,
                    "interest": 1749250,
                    "total_debt_service": 6489250
                  },
                  {
                    "period_ending": "2027-08-01",
                    "principal": 5195000,
                    "interest": 1512250,
                    "total_debt_service": 6707250
                  },
                  {
                    "period_ending": "2028-08-01",
                    "principal": 4680000,
                    "interest": 1252500,
                    "total_debt_service": 5932500
                  },
                  {
                    "period_ending": "2029-08-01",
                    "principal": 2070000,
                    "interest": 1018500,
                    "total_debt_service": 3088500
                  },
                  {
                    "period_ending": "2030-08-01",
                    "principal": 1450000,
                    "interest": 915000,
                    "total_debt_service": 2365000
                  },
                  {
                    "period_ending": "2031-08-01",
                    "principal": 7310000,
                    "interest": 842500,
                    "total_debt_service": 8152500
                  },
                  {
                    "period_ending": "2032-08-01",
                    "principal": 5320000,
                    "interest": 477000,
                    "total_debt_service": 5797000
                  },
                  {
                    "period_ending": "2033-08-01",
                    "principal": 1930000,
                    "interest": 211000,
                    "total_debt_service": 2141000
                  },
                  {
                    "period_ending": "2034-08-01",
                    "principal": 1020000,
                    "interest": 114500,
                    "total_debt_service": 1134500
                  },
                  {
                    "period_ending": "2035-08-01",
                    "principal": 1270000,
                    "interest": 63500,
                    "total_debt_service": 1333500
                  }
                ]
              }
            ]
          }
        }
      }
    ],
    "Analyze document": [
      {
        "json": {
          "content": {
            "parts": [
              {
                "text": "```json\n{\n  \"document_title\": \"$56,000,000 EAST SIDE UNION HIGH SCHOOL DISTRICT (Santa Clara County, California) General Obligation Bonds 2016 Election, Series D; $6,420,000 EAST SIDE UNION HIGH SCHOOL DISTRICT (Santa Clara County, California) 2025 Refunding General Obligation Bonds, Series A; $35,545,000 EAST SIDE UNION HIGH SCHOOL DISTRICT (Santa Clara County, California) 2025 Refunding General Obligation Bonds, Series B\",\n  \"school_district_name\": \"EAST SIDE UNION HIGH SCHOOL DISTRICT\",\n  \"county\": \"Santa Clara County, California\",\n  \"state\": \"CA\",\n  \"overall_rating\": \"Aa3\",\n  \"overall_rating_agency\": \"Moody’s\",\n  \"overall_due_date\": \"2035-08-01\",\n  \"professional_services\": {\n    \"legal_counsel\": \"Jones Hall, A Professional Law Corporation\",\n    \"disclosure_counsel\": \"Jones Hall, A Professional Law Corporation\",\n    \"financial_advisor\": \"Dale Scott & Company Inc.\",\n    \"paying_agent\": \"U.S. Bank Trust Company, National Association\"\n  },\n  \"date_bond_closes\": \"2025-05-21\",\n  \"date_of_delivery\": \"2025-05-21\",\n  \"interest_payment_dates\": \"semiannually on each February 1 and August 1\",\n  \"interest_commencing_date\": \"2025-08-01\",\n  \"redemption_dates\": [],\n  \"underwriters\": [\n    {\n      \"name\": \"Loop Capital Markets LLC\"\n    }\n  ],\n  \"superintendent\": \"Glenn Vander Zee\",\n  \"financial_management_contact\": {\n    \"name\": \"Tom Huynh\",\n    \"title\": \"Associate Superintendent of Business Services\",\n    \"address\": \"830 North Capitol Ave., San José, California 95133\",\n    \"phone\": \"(408) 347-5050\"\n  },\n  \"board_of_education\": [\n    {\n      \"name\": \"Brian Do\",\n      \"role\": \"President\"\n    },\n    {\n      \"name\": \"Van T. Le\",\n      \"role\": \"Vice President\"\n    },\n    {\n      \"name\": \"Lorena Chavez\",\n      \"role\": \"Clerk\"\n    },\n    {\n      \"name\": \"Pattie Cortese\",\n      \"role\": \"Member\"\n    },\n    {\n      \"name\": \"J. Manuel Herrera\",\n      \"role\": \"Member\"\n    }\n  ],\n  \"assessed_valuation_summary\": {\n    \"fiscal_year\": \"2024-25\",\n    \"total_assessed_valuation\": 112255546441,\n    \"valuation_source\": \"California Municipal Statistics, Inc.\",\n    \"is_county_teeter_plan_participant\": true,\n    \"notes\": \"Assessed valuations are subject to change due to general economic conditions, supply and demand for real property, government regulations, man-made or natural disasters (e.g., earthquakes, wildfires, floods, droughts, mudslides), and public health disasters (e.g., COVID-19 pandemic). The District cannot predict the future effects of these factors on assessed values or economic activity. The County's Teeter Plan participation ensures the District receives 100% of secured property taxes levied, mitigating delinquency risk.\"\n  },\n  \"estimated_sources_and_uses\": {\n    \"total_sources\": 104664986.6,\n    \"total_uses\": 104664986.6,\n    \"sources_by_issue\": [\n      {\n        \"issue\": \"Series D Bonds\",\n        \"principal_amount\": 56000000.00,\n        \"net_original_issue_premium\": 3430454.20,\n        \"total\": 59430454.20\n      },\n      {\n        \"issue\": \"2025 Refunding General Obligation Bonds, Series A\",\n        \"principal_amount\": 6420000.00,\n        \"net_original_issue_premium\": 575387.70,\n        \"total\": 6995387.70\n      },\n      {\n        \"issue\": \"2025 Refunding General Obligation Bonds, Series B\",\n        \"principal_amount\": 35545000.00,\n        \"net_original_issue_premium\": 2694144.70,\n        \"total\": 38239144.70\n      }\n    ],\n    \"uses_by_category\": [\n      {\n        \"category\": \"Deposit to Building Fund\",\n        \"total_amount\": 55754000.00,\n        \"Series D Bonds\": 55754000.00,\n        \"Series A Refunding Bonds\": null,\n        \"Series B Refunding Bonds\": null\n      },\n      {\n        \"category\": \"Deposit to Escrow Fund\",\n        \"total_amount\": 44741927.50,\n        \"Series D Bonds\": null,\n        \"Series A Refunding Bonds\": 6809964.91,\n        \"Series B Refunding Bonds\": 37931962.59\n      },\n      {\n        \"category\": \"Deposit to Debt Service Fund\",\n        \"total_amount\": 3263551.73,\n        \"Series D Bonds\": 3263551.73,\n        \"Series A Refunding Bonds\": null,\n        \"Series B Refunding Bonds\": null\n      },\n      {\n        \"category\": \"Costs of Issuance(1)\",\n        \"total_amount\": 905507.37,\n        \"Series D Bonds\": 412902.47,\n        \"Series A Refunding Bonds\": 185422.79,\n        \"Series B Refunding Bonds\": 307182.11\n      }\n    ]\n  },\n  \"debt_service_schedule\": [\n    {\n      \"issue\": \"Series D Bonds\",\n      \"schedule\": [\n        {\n          \"period_ending\": \"2025-08-01\",\n          \"principal\": 0.00,\n          \"interest\": 544444.44,\n          \"total_debt_service\": 544444.44\n        },\n        {\n          \"period_ending\": \"2026-08-01\",\n          \"principal\": 16080000.00,\n          \"interest\": 2800000.00,\n          \"total_debt_service\": 18880000.00\n        },\n        {\n          \"period_ending\": \"2027-08-01\",\n          \"principal\": 8160000.00,\n          \"interest\": 1996000.00,\n          \"total_debt_service\": 10156000.00\n        },\n        {\n          \"period_ending\": \"2028-08-01\",\n          \"principal\": 8950000.00,\n          \"interest\": 1588000.00,\n          \"total_debt_service\": 10538000.00\n        },\n        {\n          \"period_ending\": \"2029-08-01\",\n          \"principal\": 4325000.00,\n          \"interest\": 1140500.00,\n          \"total_debt_service\": 5465500.00\n        },\n        {\n          \"period_ending\": \"2030-08-01\",\n          \"principal\": 4750000.00,\n          \"interest\": 924250.00,\n          \"total_debt_service\": 5674250.00\n        },\n        {\n          \"period_ending\": \"2031-08-01\",\n          \"principal\": 5200000.00,\n          \"interest\": 686750.00,\n          \"total_debt_service\": 5886750.00\n        },\n        {\n          \"period_ending\": \"2032-08-01\",\n          \"principal\": 4080000.00,\n          \"interest\": 426750.00,\n          \"total_debt_service\": 4506750.00\n        },\n        {\n          \"period_ending\": \"2033-08-01\",\n          \"principal\": 4455000.00,\n          \"interest\": 222750.00,\n          \"total_debt_service\": 4677750.00\n        }\n      ]\n    },\n    {\n      \"issue\": \"Series A Refunding Bonds\",\n      \"schedule\": [\n        {\n          \"period_ending\": \"2025-08-01\",\n          \"principal\": 0.00,\n          \"interest\": 62416.67,\n          \"total_debt_service\": 62416.67\n        },\n        {\n          \"period_ending\": \"2026-08-01\",\n          \"principal\": 0.00,\n          \"interest\": 321000.00,\n          \"total_debt_service\": 321000.00\n        },\n        {\n          \"period_ending\": \"2027-08-01\",\n          \"principal\": 0.00,\n          \"interest\": 321000.00,\n          \"total_debt_service\": 321000.00\n        },\n        {\n          \"period_ending\": \"2028-08-01\",\n          \"principal\": 1865000.00,\n          \"interest\": 321000.00,\n          \"total_debt_service\": 2186000.00\n        },\n        {\n          \"period_ending\": \"2029-08-01\",\n          \"principal\": 0.00,\n          \"interest\": 227750.00,\n          \"total_debt_service\": 227750.00\n        },\n        {\n          \"period_ending\": \"2030-08-01\",\n          \"principal\": 1385000.00,\n          \"interest\": 227750.00,\n          \"total_debt_service\": 1612750.00\n        },\n        {\n          \"period_ending\": \"2031-08-01\",\n          \"principal\": 950000.00,\n          \"interest\": 158500.00,\n          \"total_debt_service\": 1108500.00\n        },\n        {\n          \"period_ending\": \"2032-08-01\",\n          \"principal\": 1415000.00,\n          \"interest\": 111000.00,\n          \"total_debt_service\": 1526000.00\n        },\n        {\n          \"period_ending\": \"2033-08-01\",\n          \"principal\": 805000.00,\n          \"interest\": 40250.00,\n          \"total_debt_service\": 845250.00\n        }\n      ]\n    },\n    {\n      \"issue\": \"Series B Refunding Bonds\",\n      \"schedule\": [\n        {\n          \"period_ending\": \"2025-08-01\",\n          \"principal\": 560000.00,\n          \"interest\": 345576.39,\n          \"total_debt_service\": 905576.39\n        },\n        {\n          \"period_ending\": \"2026-08-01\",\n          \"principal\": 4740000.00,\n          \"interest\": 1749250.00,\n          \"total_debt_service\": 6489250.00\n        },\n        {\n          \"period_ending\": \"2027-08-01\",\n          \"principal\": 5195000.00,\n          \"interest\": 1512250.00,\n          \"total_debt_service\": 6707250.00\n        },\n        {\n          \"period_ending\": \"2028-08-01\",\n          \"principal\": 4680000.00,\n          \"interest\": 1252500.00,\n          \"total_debt_service\": 5932500.00\n        },\n        {\n          \"period_ending\": \"2029-08-01\",\n          \"principal\": 2070000.00,\n          \"interest\": 1018500.00,\n          \"total_debt_service\": 3088500.00\n        },\n        {\n          \"period_ending\": \"2030-08-01\",\n          \"principal\": 1450000.00,\n          \"interest\": 915000.00,\n          \"total_debt_service\": 2365000.00\n        },\n        {\n          \"period_ending\": \"2031-08-01\",\n          \"principal\": 7310000.00,\n          \"interest\": 842500.00,\n          \"total_debt_service\": 8152500.00\n        },\n        {\n          \"period_ending\": \"2032-08-01\",\n          \"principal\": 5320000.00,\n          \"interest\": 477000.00,\n          \"total_debt_service\": 5797000.00\n        },\n        {\n          \"period_ending\": \"2033-08-01\",\n          \"principal\": 1930000.00,\n          \"interest\": 211000.00,\n          \"total_debt_service\": 2141000.00\n        },\n        {\n          \"period_ending\": \"2034-08-01\",\n          \"principal\": 1020000.00,\n          \"interest\": 114500.00,\n          \"total_debt_service\": 1134500.00\n        },\n        {\n          \"period_ending\": \"2035-08-01\",\n          \"principal\": 1270000.00,\n          \"interest\": 63500.00,\n          \"total_debt_service\": 1333500.00\n        }\n      ]\n    }\n  ],\n  \"bond_issues\": [\n    {\n      \"bond_amount\": 56000000,\n      \"election_year\": \"2016\",\n      \"bond_type\": \"General Obligation Bonds\",\n      \"bond_series\": \"Series D\",\n      \"rating\": \"Aa3\",\n      \"due_date\": \"2033-08-01\",\n      \"interest_commencing_date\": \"2025-08-01\",\n      \"redemption_policy\": null,\n      \"maturity_schedule\": {\n        \"base_cusip\": \"275282\",\n        \"maturities\": [\n          {\n            \"maturity_date\": \"2026-08-01\",\n            \"principal_amount\": 16080000,\n            \"interest_rate\": \"5.000%\",\n            \"yield\": \"3.080%\",\n            \"price\": \"102.230\",\n            \"cusip\": \"TA9\"\n          },\n          {\n            \"maturity_date\": \"2027-08-01\",\n            \"principal_amount\": 8160000,\n            \"interest_rate\": \"5.000%\",\n            \"yield\": \"3.100%\",\n            \"price\": \"103.996\",\n            \"cusip\": \"TB7\"\n          },\n          {\n            \"maturity_date\": \"2028-08-01\",\n            \"principal_amount\": 8950000,\n            \"interest_rate\": \"5.000%\",\n            \"yield\": \"3.100%\",\n            \"price\": \"105.731\",\n            \"cusip\": \"TC5\"\n          },\n          {\n            \"maturity_date\": \"2029-08-01\",\n            \"principal_amount\": 4325000,\n            \"interest_rate\": \"5.000%\",\n            \"yield\": \"3.140%\",\n            \"price\": \"107.251\",\n            \"cusip\": \"TD3\"\n          },\n          {\n            \"maturity_date\": \"2030-08-01\",\n            \"principal_amount\": 4750000,\n            \"interest_rate\": \"5.000%\",\n            \"yield\": \"3.160%\",\n            \"price\": \"108.746\",\n            \"cusip\": \"TE1\"\n          },\n          {\n            \"maturity_date\": \"2031-08-01\",\n            \"principal_amount\": 5200000,\n            \"interest_rate\": \"5.000%\",\n            \"yield\": \"3.200%\",\n            \"price\": \"110.037\",\n            \"cusip\": \"TF8\"\n          },\n          {\n            \"maturity_date\": \"2032-08-01\",\n            \"principal_amount\": 4080000,\n            \"interest_rate\": \"5.000%\",\n            \"yield\": \"3.270%\",\n            \"price\": \"111.006\",\n            \"cusip\": \"TG6\"\n          },\n          {\n            \"maturity_date\": \"2033-08-01\",\n            \"principal_amount\": 4455000,\n            \"interest_rate\": \"5.000%\",\n            \"yield\": \"3.320%\",\n            \"price\": \"111.961\",\n            \"cusip\": \"TH4\"\n          }\n        ]\n      },\n      \"debt_service_schedule\": [\n        {\n          \"period_ending\": \"2025-08-01\",\n          \"principal\": 0.00,\n          \"interest\": 544444.44,\n          \"total_debt_service\": 544444.44\n        },\n        {\n          \"period_ending\": \"2026-08-01\",\n          \"principal\": 16080000.00,\n          \"interest\": 2800000.00,\n          \"total_debt_service\": 18880000.00\n        },\n        {\n          \"period_ending\": \"2027-08-01\",\n          \"principal\": 8160000.00,\n          \"interest\": 1996000.00,\n          \"total_debt_service\": 10156000.00\n        },\n        {\n          \"period_ending\": \"2028-08-01\",\n          \"principal\": 8950000.00,\n          \"interest\": 1588000.00,\n          \"total_debt_service\": 10538000.00\n        },\n        {\n          \"period_ending\": \"2029-08-01\",\n          \"principal\": 4325000.00,\n          \"interest\": 1140500.00,\n          \"total_debt_service\": 5465500.00\n        },\n        {\n          \"period_ending\": \"2030-08-01\",\n          \"principal\": 4750000.00,\n          \"interest\": 924250.00,\n          \"total_debt_service\": 5674250.00\n        },\n        {\n          \"period_ending\": \"2031-08-01\",\n          \"principal\": 5200000.00,\n          \"interest\": 686750.00,\n          \"total_debt_service\": 5886750.00\n        },\n        {\n          \"period_ending\": \"2032-08-01\",\n          \"principal\": 4080000.00,\n          \"interest\": 426750.00,\n          \"total_debt_service\": 4506750.00\n        },\n        {\n          \"period_ending\": \"2033-08-01\",\n          \"principal\": 4455000.00,\n          \"interest\": 222750.00,\n          \"total_debt_service\": 4677750.00\n        }\n      ]\n    },\n    {\n      \"bond_amount\": 6420000,\n      \"election_year\": \"2025\",\n      \"bond_type\": \"Refunding General Obligation Bonds\",\n      \"bond_series\": \"Series A\",\n      \"rating\": \"Aa3\",\n      \"due_date\": \"2033-08-01\",\n      \"interest_commencing_date\": \"2025-08-01\",\n      \"redemption_policy\": null,\n      \"maturity_schedule\": {\n        \"base_cusip\": \"275282\",\n        \"maturities\": [\n          {\n            \"maturity_date\": \"2028-08-01\",\n            \"principal_amount\": 1865000,\n            \"interest_rate\": \"5.000%\",\n            \"yield\": \"3.100%\",\n            \"price\": \"105.731\",\n            \"cusip\": \"SJ1\"\n          },\n          {\n            \"maturity_date\": \"2030-08-01\",\n            \"principal_amount\": 1385000,\n            \"interest_rate\": \"5.000%\",\n            \"yield\": \"3.160%\",\n            \"price\": \"108.746\",\n            \"cusip\": \"SK8\"\n          },\n          {\n            \"maturity_date\": \"2031-08-01\",\n            \"principal_amount\": 950000,\n            \"interest_rate\": \"5.000%\",\n            \"yield\": \"3.200%\",\n            \"price\": \"110.037\",\n            \"cusip\": \"SL6\"\n          },\n          {\n            \"maturity_date\": \"2032-08-01\",\n            \"principal_amount\": 1415000,\n            \"interest_rate\": \"5.000%\",\n            \"yield\": \"3.270%\",\n            \"price\": \"111.006\",\n            \"cusip\": \"SM4\"\n          },\n          {\n            \"maturity_date\": \"2033-08-01\",\n            \"principal_amount\": 805000,\n            \"interest_rate\": \"5.000%\",\n            \"yield\": \"3.320%\",\n            \"price\": \"111.961\",\n            \"cusip\": \"SN2\"\n          }\n        ]\n      },\n      \"debt_service_schedule\": [\n        {\n          \"period_ending\": \"2025-08-01\",\n          \"principal\": 0.00,\n          \"interest\": 62416.67,\n          \"total_debt_service\": 62416.67\n        },\n        {\n          \"period_ending\": \"2026-08-01\",\n          \"principal\": 0.00,\n          \"interest\": 321000.00,\n          \"total_debt_service\": 321000.00\n        },\n        {\n          \"period_ending\": \"2027-08-01\",\n          \"principal\": 0.00,\n          \"interest\": 321000.00,\n          \"total_debt_service\": 321000.00\n        },\n        {\n          \"period_ending\": \"2028-08-01\",\n          \"principal\": 1865000.00,\n          \"interest\": 321000.00,\n          \"total_debt_service\": 2186000.00\n        },\n        {\n          \"period_ending\": \"2029-08-01\",\n          \"principal\": 0.00,\n          \"interest\": 227750.00,\n          \"total_debt_service\": 227750.00\n        },\n        {\n          \"period_ending\": \"2030-08-01\",\n          \"principal\": 1385000.00,\n          \"interest\": 227750.00,\n          \"total_debt_service\": 1612750.00\n        },\n        {\n          \"period_ending\": \"2031-08-01\",\n          \"principal\": 950000.00,\n          \"interest\": 158500.00,\n          \"total_debt_service\": 1108500.00\n        },\n        {\n          \"period_ending\": \"2032-08-01\",\n          \"principal\": 1415000.00,\n          \"interest\": 111000.00,\n          \"total_debt_service\": 1526000.00\n        },\n        {\n          \"period_ending\": \"2033-08-01\",\n          \"principal\": 805000.00,\n          \"interest\": 40250.00,\n          \"total_debt_service\": 845250.00\n        }\n      ]\n    },\n    {\n      \"bond_amount\": 35545000,\n      \"election_year\": \"2025\",\n      \"bond_type\": \"Refunding General Obligation Bonds\",\n      \"bond_series\": \"Series B\",\n      \"rating\": \"Aa3\",\n      \"due_date\": \"2035-08-01\",\n      \"interest_commencing_date\": \"2025-08-01\",\n      \"redemption_policy\": null,\n      \"maturity_schedule\": {\n        \"base_cusip\": \"275282\",\n        \"maturities\": [\n          {\n            \"maturity_date\": \"2025-08-01\",\n            \"principal_amount\": 560000,\n            \"interest_rate\": \"5.000%\",\n            \"yield\": \"3.080%\",\n            \"price\": \"100.362\",\n            \"cusip\": \"SP7\"\n          },\n          {\n            \"maturity_date\": \"2026-08-01\",\n            \"principal_amount\": 4740000,\n            \"interest_rate\": \"5.000%\",\n            \"yield\": \"3.080%\",\n            \"price\": \"102.230\",\n            \"cusip\": \"SQ5\"\n          },\n          {\n            \"maturity_date\": \"2027-08-01\",\n            \"principal_amount\": 5195000,\n            \"interest_rate\": \"5.000%\",\n            \"yield\": \"3.100%\",\n            \"price\": \"103.996\",\n            \"cusip\": \"SR3\"\n          },\n          {\n            \"maturity_date\": \"2028-08-01\",\n            \"principal_amount\": 4680000,\n            \"interest_rate\": \"5.000%\",\n            \"yield\": \"3.100%\",\n            \"price\": \"105.731\",\n            \"cusip\": \"SS1\"\n          },\n          {\n            \"maturity_date\": \"2029-08-01\",\n            \"principal_amount\": 2070000,\n            \"interest_rate\": \"5.000%\",\n            \"yield\": \"3.140%\",\n            \"price\": \"107.251\",\n            \"cusip\": \"ST9\"\n          },\n          {\n            \"maturity_date\": \"2030-08-01\",\n            \"principal_amount\": 1450000,\n            \"interest_rate\": \"5.000%\",\n            \"yield\": \"3.160%\",\n            \"price\": \"108.746\",\n            \"cusip\": \"SU6\"\n          },\n          {\n            \"maturity_date\": \"2031-08-01\",\n            \"principal_amount\": 7310000,\n            \"interest_rate\": \"5.000%\",\n            \"yield\": \"3.200%\",\n            \"price\": \"110.037\",\n            \"cusip\": \"SV4\"\n          },\n          {\n            \"maturity_date\": \"2032-08-01\",\n            \"principal_amount\": 5320000,\n            \"interest_rate\": \"5.000%\",\n            \"yield\": \"3.270%\",\n            \"price\": \"111.006\",\n            \"cusip\": \"SW2\"\n          },\n          {\n            \"maturity_date\": \"2033-08-01\",\n            \"principal_amount\": 1930000,\n            \"interest_rate\": \"5.000%\",\n            \"yield\": \"3.320%\",\n            \"price\": \"111.961\",\n            \"cusip\": \"SX0\"\n          },\n          {\n            \"maturity_date\": \"2034-08-01\",\n            \"principal_amount\": 1020000,\n            \"interest_rate\": \"5.000%\",\n            \"yield\": \"3.420%\",\n            \"price\": \"112.370\",\n            \"cusip\": \"SY8\"\n          },\n          {\n            \"maturity_date\": \"2035-08-01\",\n            \"principal_amount\": 1270000,\n            \"interest_rate\": \"5.000%\",\n            \"yield\": \"3.540%\",\n            \"price\": \"112.398\",\n            \"cusip\": \"SZ5\"\n          }\n        ]\n      },\n      \"debt_service_schedule\": [\n        {\n          \"period_ending\": \"2025-08-01\",\n          \"principal\": 560000.00,\n          \"interest\": 345576.39,\n          \"total_debt_service\": 905576.39\n        },\n        {\n          \"period_ending\": \"2026-08-01\",\n          \"principal\": 4740000.00,\n          \"interest\": 1749250.00,\n          \"total_debt_service\": 6489250.00\n        },\n        {\n          \"period_ending\": \"2027-08-01\",\n          \"principal\": 5195000.00,\n          \"interest\": 1512250.00,\n          \"total_debt_service\": 6707250.00\n        },\n        {\n          \"period_ending\": \"2028-08-01\",\n          \"principal\": 4680000.00,\n          \"interest\": 1252500.00,\n          \"total_debt_service\": 5932500.00\n        },\n        {\n          \"period_ending\": \"2029-08-01\",\n          \"principal\": 2070000.00,\n          \"interest\": 1018500.00,\n          \"total_debt_service\": 3088500.00\n        },\n        {\n          \"period_ending\": \"2030-08-01\",\n          \"principal\": 1450000.00,\n          \"interest\": 915000.00,\n          \"total_debt_service\": 2365000.00\n        },\n        {\n          \"period_ending\": \"2031-08-01\",\n          \"principal\": 7310000.00,\n          \"interest\": 842500.00,\n          \"total_debt_service\": 8152500.00\n        },\n        {\n          \"period_ending\": \"2032-08-01\",\n          \"principal\": 5320000.00,\n          \"interest\": 477000.00,\n          \"total_debt_service\": 5797000.00\n        },\n        {\n          \"period_ending\": \"2033-08-01\",\n          \"principal\": 1930000.00,\n          \"interest\": 211000.00,\n          \"total_debt_service\": 2141000.00\n        },\n        {\n          \"period_ending\": \"2034-08-01\",\n          \"principal\": 1020000.00,\n          \"interest\": 114500.00,\n          \"total_debt_service\": 1134500.00\n        },\n        {\n          \"period_ending\": \"2035-08-01\",\n          \"principal\": 1270000.00,\n          \"interest\": 63500.00,\n          \"total_debt_service\": 1333500.00\n        }\n      ]\n    }\n  ]\n}\n```"
              }
            ],
            "role": "model"
          },
          "finishReason": "STOP",
          "index": 0
        }
      }
    ],
    "Analyze document2": [
      {
        "json": {
          "content": {
            "parts": [
              {
                "text": "```json\n{\n  \"document_title\": \"CAJON VALLEY UNION ELEMENTARY SCHOOL DISTRICT\\n(SAN DIEGO COUNTY, CALIFORNIA)\\nGENERAL OBLIGATION BONDS\\n2000 ELECTION, SERIES C\",\n  \"school_district_name\": \"CAJON VALLEY UNION ELEMENTARY SCHOOL DISTRICT\",\n  \"county\": \"SAN DIEGO COUNTY\",\n  \"state\": \"CALIFORNIA\",\n  \"overall_rating\": \"AAA\",\n  \"overall_rating_agency\": \"S&P\",\n  \"overall_due_date\": \"2032-08-01\",\n  \"bond_issues\": [\n    {\n      \"bond_amount\": 16500000,\n      \"election_year\": \"2000\",\n      \"bond_type\": \"GENERAL OBLIGATION BONDS\",\n      \"bond_series\": \"C\",\n      \"due_date\": \"2032-08-01\"\n    }\n  ]\n}\n```"
              }
            ],
            "role": "model"
          },
          "finishReason": "STOP",
          "avgLogprobs": -0.004397247825656926
        }
      }
    ],
    "Analyze document1": [
      {
        "json": {
          "content": {
            "parts": [
              {
                "text": "```json\n{\n  \"document_title\": \"EAST SIDE UNION HIGH SCHOOL DISTRICT General Obligation Bonds 2016 Election, Series D, 2025 Refunding General Obligation Bonds, Series A and 2025 Refunding General Obligation Bonds, Series B\",\n  \"school_district_name\": \"EAST SIDE UNION HIGH SCHOOL DISTRICT\",\n  \"county\": \"Santa Clara County, California\",\n  \"state\": \"CA\",\n  \"overall_rating\": \"Aa3\",\n  \"overall_rating_agency\": \"Moody’s\",\n  \"overall_due_date\": \"2035-08-01\",\n  \"professional_services\": {\n    \"legal_counsel\": \"Jones Hall, A Professional Law Corporation\",\n    \"disclosure_counsel\": \"Jones Hall, A Professional Law Corporation\",\n    \"financial_advisor\": \"Dale Scott & Company Inc.\",\n    \"paying_agent\": \"U.S. Bank Trust Company, National Association\"\n  },\n  \"date_bond_closes\": \"2025-05-21\",\n  \"date_of_delivery\": \"2025-05-21\",\n  \"interest_payment_dates\": \"February 1 and August 1 (semiannually)\",\n  \"interest_commencing_date\": \"2025-08-01\",\n  \"redemption_dates\": null,\n  \"underwriters\": [\n    {\n      \"name\": \"Loop Capital Markets LLC\"\n    }\n  ],\n  \"superintendent\": \"Glenn Vander Zee\",\n  \"financial_management_contact\": {\n    \"name\": \"Tom Huynh\",\n    \"title\": \"Associate Superintendent of Business Services\",\n    \"address\": \"830 North Capitol Avenue, San Jose, California 95133\",\n    \"phone\": \"(408) 347-5050\"\n  },\n  \"board_of_education\": [\n    {\n      \"name\": \"Brian Do\",\n      \"role\": \"President\"\n    },\n    {\n      \"name\": \"Van T. Le\",\n      \"role\": \"Vice President\"\n    },\n    {\n      \"name\": \"Lorena Chavez\",\n      \"role\": \"Clerk\"\n    },\n    {\n      \"name\": \"Pattie Cortese\",\n      \"role\": \"Member\"\n    },\n    {\n      \"name\": \"J. Manuel Herrera\",\n      \"role\": \"Member\"\n    }\n  ],\n  \"assessed_valuation_summary\": {\n    \"fiscal_year\": \"2024-25\",\n    \"total_assessed_valuation\": 112255546441,\n    \"valuation_source\": \"California Municipal Statistics, Inc.\",\n    \"is_county_teeter_plan_participant\": true,\n    \"notes\": \"Assessed valuations are subject to change due to general economic conditions, supply and demand for real property, government regulations, and natural disasters. Appeals may also be based on Proposition 8, allowing for reductions in taxable value based on market conditions or new construction. The District cannot predict the effects of future appeals or disasters on assessed values.\"\n  },\n  \"estimated_sources_and_uses\": {\n    \"total_sources\": 104664986.60,\n    \"total_uses\": 104664986.60,\n    \"sources_by_issue\": [\n      {\n        \"issue\": \"Series D Bonds\",\n        \"principal_amount\": 56000000.00,\n        \"net_original_issue_premium\": 3430454.20,\n        \"total\": 59430454.20\n      },\n      {\n        \"issue\": \"2025 Refunding General Obligation Bonds, Series A\",\n        \"principal_amount\": 6420000.00,\n        \"net_original_issue_premium\": 575387.70,\n        \"total\": 6995387.70\n      },\n      {\n        \"issue\": \"2025 Refunding General Obligation Bonds, Series B\",\n        \"principal_amount\": 35545000.00,\n        \"net_original_issue_premium\": 2694144.70,\n        \"total\": 38239144.70\n      }\n    ],\n    \"uses_by_category\": [\n      {\n        \"category\": \"Deposit to Building Fund\",\n        \"total_amount\": 55754000.00,\n        \"measure_vv_amount\": null,\n        \"measure_m_amount\": null\n      },\n      {\n        \"category\": \"Deposit to Escrow Fund\",\n        \"total_amount\": 44741927.50,\n        \"measure_vv_amount\": null,\n        \"measure_m_amount\": null\n      },\n      {\n        \"category\": \"Deposit to Debt Service Fund\",\n        \"total_amount\": 3263551.73,\n        \"measure_vv_amount\": null,\n        \"measure_m_amount\": null\n      },\n      {\n        \"category\": \"Costs of Issuance(1)\",\n        \"total_amount\": 905507.37,\n        \"measure_vv_amount\": null,\n        \"measure_m_amount\": null\n      }\n    ]\n  },\n  \"debt_service_schedule\": [\n    {\n      \"issue\": \"Series D Bonds\",\n      \"schedule\": [\n        {\n          \"period_ending\": \"2025-08-01\",\n          \"principal\": 0.00,\n          \"interest\": 544444.44,\n          \"total_debt_service\": 544444.44\n        },\n        {\n          \"period_ending\": \"2026-08-01\",\n          \"principal\": 16080000.00,\n          \"interest\": 2800000.00,\n          \"total_debt_service\": 18880000.00\n        },\n        {\n          \"period_ending\": \"2027-08-01\",\n          \"principal\": 8160000.00,\n          \"interest\": 1996000.00,\n          \"total_debt_service\": 10156000.00\n        },\n        {\n          \"period_ending\": \"2028-08-01\",\n          \"principal\": 8950000.00,\n          \"interest\": 1588000.00,\n          \"total_debt_service\": 10538000.00\n        },\n        {\n          \"period_ending\": \"2029-08-01\",\n          \"principal\": 4325000.00,\n          \"interest\": 1140500.00,\n          \"total_debt_service\": 5465500.00\n        },\n        {\n          \"period_ending\": \"2030-08-01\",\n          \"principal\": 4750000.00,\n          \"interest\": 924250.00,\n          \"total_debt_service\": 5674250.00\n        },\n        {\n          \"period_ending\": \"2031-08-01\",\n          \"principal\": 5200000.00,\n          \"interest\": 686750.00,\n          \"total_debt_service\": 5886750.00\n        },\n        {\n          \"period_ending\": \"2032-08-01\",\n          \"principal\": 4080000.00,\n          \"interest\": 426750.00,\n          \"total_debt_service\": 4506750.00\n        },\n        {\n          \"period_ending\": \"2033-08-01\",\n          \"principal\": 4455000.00,\n          \"interest\": 222750.00,\n          \"total_debt_service\": 4677750.00\n        }\n      ]\n    },\n    {\n      \"issue\": \"Series A Refunding Bonds\",\n      \"schedule\": [\n        {\n          \"period_ending\": \"2025-08-01\",\n          \"principal\": 0.00,\n          \"interest\": 62416.67,\n          \"total_debt_service\": 62416.67\n        },\n        {\n          \"period_ending\": \"2026-08-01\",\n          \"principal\": 0.00,\n          \"interest\": 321000.00,\n          \"total_debt_service\": 321000.00\n        },\n        {\n          \"period_ending\": \"2027-08-01\",\n          \"principal\": 0.00,\n          \"interest\": 321000.00,\n          \"total_debt_service\": 321000.00\n        },\n        {\n          \"period_ending\": \"2028-08-01\",\n          \"principal\": 1865000.00,\n          \"interest\": 321000.00,\n          \"total_debt_service\": 2186000.00\n        },\n        {\n          \"period_ending\": \"2029-08-01\",\n          \"principal\": 0.00,\n          \"interest\": 227750.00,\n          \"total_debt_service\": 227750.00\n        },\n        {\n          \"period_ending\": \"2030-08-01\",\n          \"principal\": 1385000.00,\n          \"interest\": 227750.00,\n          \"total_debt_service\": 1612750.00\n        },\n        {\n          \"period_ending\": \"2031-08-01\",\n          \"principal\": 950000.00,\n          \"interest\": 158500.00,\n          \"total_debt_service\": 1108500.00\n        },\n        {\n          \"period_ending\": \"2032-08-01\",\n          \"principal\": 1415000.00,\n          \"interest\": 111000.00,\n          \"total_debt_service\": 1526000.00\n        },\n        {\n          \"period_ending\": \"2033-08-01\",\n          \"principal\": 805000.00,\n          \"interest\": 40250.00,\n          \"total_debt_service\": 845250.00\n        }\n      ]\n    },\n    {\n      \"issue\": \"Series B Refunding Bonds\",\n      \"schedule\": [\n        {\n          \"period_ending\": \"2025-08-01\",\n          \"principal\": 560000.00,\n          \"interest\": 345576.39,\n          \"total_debt_service\": 905576.39\n        },\n        {\n          \"period_ending\": \"2026-08-01\",\n          \"principal\": 4740000.00,\n          \"interest\": 1749250.00,\n          \"total_debt_service\": 6489250.00\n        },\n        {\n          \"period_ending\": \"2027-08-01\",\n          \"principal\": 5195000.00,\n          \"interest\": 1512250.00,\n          \"total_debt_service\": 6707250.00\n        },\n        {\n          \"period_ending\": \"2028-08-01\",\n          \"principal\": 4680000.00,\n          \"interest\": 1252500.00,\n          \"total_debt_service\": 5932500.00\n        },\n        {\n          \"period_ending\": \"2029-08-01\",\n          \"principal\": 2070000.00,\n          \"interest\": 1018500.00,\n          \"total_debt_service\": 3088500.00\n        },\n        {\n          \"period_ending\": \"2030-08-01\",\n          \"principal\": 1450000.00,\n          \"interest\": 915000.00,\n          \"total_debt_service\": 2365000.00\n        },\n        {\n          \"period_ending\": \"2031-08-01\",\n          \"principal\": 7310000.00,\n          \"interest\": 842500.00,\n          \"total_debt_service\": 8152500.00\n        },\n        {\n          \"period_ending\": \"2032-08-01\",\n          \"principal\": 5320000.00,\n          \"interest\": 477000.00,\n          \"total_debt_service\": 5797000.00\n        },\n        {\n          \"period_ending\": \"2033-08-01\",\n          \"principal\": 1930000.00,\n          \"interest\": 211000.00,\n          \"total_debt_service\": 2141000.00\n        },\n        {\n          \"period_ending\": \"2034-08-01\",\n          \"principal\": 1020000.00,\n          \"interest\": 114500.00,\n          \"total_debt_service\": 1134500.00\n        },\n        {\n          \"period_ending\": \"2035-08-01\",\n          \"principal\": 1270000.00,\n          \"interest\": 63500.00,\n          \"total_debt_service\": 1333500.00\n        }\n      ]\n    }\n  ],\n  \"bond_issues\": [\n    {\n      \"bond_amount\": 56000000.00,\n      \"election_year\": \"2016\",\n      \"bond_type\": \"General Obligation Bonds\",\n      \"bond_series\": \"Series D\",\n      \"rating\": \"Aa3\",\n      \"due_date\": \"2033-08-01\",\n      \"interest_commencing_date\": \"2025-08-01\",\n      \"redemption_policy\": null,\n      \"maturity_schedule\": {\n        \"base_cusip\": \"275282\",\n        \"maturities\": [\n          {\n            \"maturity_date\": \"2026-08-01\",\n            \"principal_amount\": 16080000,\n            \"interest_rate\": \"5.000%\",\n            \"yield\": \"3.080%\",\n            \"price\": \"102.230\",\n            \"cusip\": \"TA9\"\n          },\n          {\n            \"maturity_date\": \"2027-08-01\",\n            \"principal_amount\": 8160000,\n            \"interest_rate\": \"5.000%\",\n            \"yield\": \"3.100%\",\n            \"price\": \"103.996\",\n            \"cusip\": \"TB7\"\n          },\n          {\n            \"maturity_date\": \"2028-08-01\",\n            \"principal_amount\": 8950000,\n            \"interest_rate\": \"5.000%\",\n            \"yield\": \"3.100%\",\n            \"price\": \"105.731\",\n            \"cusip\": \"TC5\"\n          },\n          {\n            \"maturity_date\": \"2029-08-01\",\n            \"principal_amount\": 4325000,\n            \"interest_rate\": \"5.000%\",\n            \"yield\": \"3.140%\",\n            \"price\": \"107.251\",\n            \"cusip\": \"TD3\"\n          },\n          {\n            \"maturity_date\": \"2030-08-01\",\n            \"principal_amount\": 4750000,\n            \"interest_rate\": \"5.000%\",\n            \"yield\": \"3.160%\",\n            \"price\": \"108.746\",\n            \"cusip\": \"TE1\"\n          },\n          {\n            \"maturity_date\": \"2031-08-01\",\n            \"principal_amount\": 5200000,\n            \"interest_rate\": \"5.000%\",\n            \"yield\": \"3.200%\",\n            \"price\": \"110.037\",\n            \"cusip\": \"TF8\"\n          },\n          {\n            \"maturity_date\": \"2032-08-01\",\n            \"principal_amount\": 4080000,\n            \"interest_rate\": \"5.000%\",\n            \"yield\": \"3.270%\",\n            \"price\": \"111.006\",\n            \"cusip\": \"TG6\"\n          },\n          {\n            \"maturity_date\": \"2033-08-01\",\n            \"principal_amount\": 4455000,\n            \"interest_rate\": \"5.000%\",\n            \"yield\": \"3.320%\",\n            \"price\": \"111.961\",\n            \"cusip\": \"TH4\"\n          }\n        ]\n      },\n      \"debt_service_schedule\": [\n        {\n          \"period_ending\": \"2025-08-01\",\n          \"principal\": 0.00,\n          \"interest\": 544444.44,\n          \"total_debt_service\": 544444.44\n        },\n        {\n          \"period_ending\": \"2026-08-01\",\n          \"principal\": 16080000.00,\n          \"interest\": 2800000.00,\n          \"total_debt_service\": 18880000.00\n        },\n        {\n          \"period_ending\": \"2027-08-01\",\n          \"principal\": 8160000.00,\n          \"interest\": 1996000.00,\n          \"total_debt_service\": 10156000.00\n        },\n        {\n          \"period_ending\": \"2028-08-01\",\n          \"principal\": 8950000.00,\n          \"interest\": 1588000.00,\n          \"total_debt_service\": 10538000.00\n        },\n        {\n          \"period_ending\": \"2029-08-01\",\n          \"principal\": 4325000.00,\n          \"interest\": 1140500.00,\n          \"total_debt_service\": 5465500.00\n        },\n        {\n          \"period_ending\": \"2030-08-01\",\n          \"principal\": 4750000.00,\n          \"interest\": 924250.00,\n          \"total_debt_service\": 5674250.00\n        },\n        {\n          \"period_ending\": \"2031-08-01\",\n          \"principal\": 5200000.00,\n          \"interest\": 686750.00,\n          \"total_debt_service\": 5886750.00\n        },\n        {\n          \"period_ending\": \"2032-08-01\",\n          \"principal\": 4080000.00,\n          \"interest\": 426750.00,\n          \"total_debt_service\": 4506750.00\n        },\n        {\n          \"period_ending\": \"2033-08-01\",\n          \"principal\": 4455000.00,\n          \"interest\": 222750.00,\n          \"total_debt_service\": 4677750.00\n        }\n      ]\n    },\n    {\n      \"bond_amount\": 6420000.00,\n      \"election_year\": null,\n      \"bond_type\": \"2025 Refunding General Obligation Bonds\",\n      \"bond_series\": \"Series A\",\n      \"rating\": \"Aa3\",\n      \"due_date\": \"2033-08-01\",\n      \"interest_commencing_date\": \"2025-08-01\",\n      \"redemption_policy\": null,\n      \"maturity_schedule\": {\n        \"base_cusip\": \"275282\",\n        \"maturities\": [\n          {\n            \"maturity_date\": \"2028-08-01\",\n            \"principal_amount\": 1865000,\n            \"interest_rate\": \"5.000%\",\n            \"yield\": \"3.100%\",\n            \"price\": \"105.731\",\n            \"cusip\": \"SJ1\"\n          },\n          {\n            \"maturity_date\": \"2030-08-01\",\n            \"principal_amount\": 1385000,\n            \"interest_rate\": \"5.000%\",\n            \"yield\": \"3.160%\",\n            \"price\": \"108.746\",\n            \"cusip\": \"SK8\"\n          },\n          {\n            \"maturity_date\": \"2031-08-01\",\n            \"principal_amount\": 950000,\n            \"interest_rate\": \"5.000%\",\n            \"yield\": \"3.200%\",\n            \"price\": \"110.037\",\n            \"cusip\": \"SL6\"\n          },\n          {\n            \"maturity_date\": \"2032-08-01\",\n            \"principal_amount\": 1415000,\n            \"interest_rate\": \"5.000%\",\n            \"yield\": \"3.270%\",\n            \"price\": \"111.006\",\n            \"cusip\": \"SM4\"\n          },\n          {\n            \"maturity_date\": \"2033-08-01\",\n            \"principal_amount\": 805000,\n            \"interest_rate\": \"5.000%\",\n            \"yield\": \"3.320%\",\n            \"price\": \"111.961\",\n            \"cusip\": \"SN2\"\n          }\n        ]\n      },\n      \"debt_service_schedule\": [\n        {\n          \"period_ending\": \"2025-08-01\",\n          \"principal\": 0.00,\n          \"interest\": 62416.67,\n          \"total_debt_service\": 62416.67\n        },\n        {\n          \"period_ending\": \"2026-08-01\",\n          \"principal\": 0.00,\n          \"interest\": 321000.00,\n          \"total_debt_service\": 321000.00\n        },\n        {\n          \"period_ending\": \"2027-08-01\",\n          \"principal\": 0.00,\n          \"interest\": 321000.00,\n          \"total_debt_service\": 321000.00\n        },\n        {\n          \"period_ending\": \"2028-08-01\",\n          \"principal\": 1865000.00,\n          \"interest\": 321000.00,\n          \"total_debt_service\": 2186000.00\n        },\n        {\n          \"period_ending\": \"2029-08-01\",\n          \"principal\": 0.00,\n          \"interest\": 227750.00,\n          \"total_debt_service\": 227750.00\n        },\n        {\n          \"period_ending\": \"2030-08-01\",\n          \"principal\": 1385000.00,\n          \"interest\": 227750.00,\n          \"total_debt_service\": 1612750.00\n        },\n        {\n          \"period_ending\": \"2031-08-01\",\n          \"principal\": 950000.00,\n          \"interest\": 158500.00,\n          \"total_debt_service\": 1108500.00\n        },\n        {\n          \"period_ending\": \"2032-08-01\",\n          \"principal\": 1415000.00,\n          \"interest\": 111000.00,\n          \"total_debt_service\": 1526000.00\n        },\n        {\n          \"period_ending\": \"2033-08-01\",\n          \"principal\": 805000.00,\n          \"interest\": 40250.00,\n          \"total_debt_service\": 845250.00\n        }\n      ]\n    },\n    {\n      \"bond_amount\": 35545000.00,\n      \"election_year\": null,\n      \"bond_type\": \"2025 Refunding General Obligation Bonds\",\n      \"bond_series\": \"Series B\",\n      \"rating\": \"Aa3\",\n      \"due_date\": \"2035-08-01\",\n      \"interest_commencing_date\": \"2025-08-01\",\n      \"redemption_policy\": null,\n      \"maturity_schedule\": {\n        \"base_cusip\": \"275282\",\n        \"maturities\": [\n          {\n            \"maturity_date\": \"2025-08-01\",\n            \"principal_amount\": 560000,\n            \"interest_rate\": \"5.000%\",\n            \"yield\": \"3.080%\",\n            \"price\": \"100.362\",\n            \"cusip\": \"SP7\"\n          },\n          {\n            \"maturity_date\": \"2026-08-01\",\n            \"principal_amount\": 4740000,\n            \"interest_rate\": \"5.000%\",\n            \"yield\": \"3.080%\",\n            \"price\": \"102.230\",\n            \"cusip\": \"SQ5\"\n          },\n          {\n            \"maturity_date\": \"2027-08-01\",\n            \"principal_amount\": 5195000,\n            \"interest_rate\": \"5.000%\",\n            \"yield\": \"3.100%\",\n            \"price\": \"103.996\",\n            \"cusip\": \"SR3\"\n          },\n          {\n            \"maturity_date\": \"2028-08-01\",\n            \"principal_amount\": 4680000,\n            \"interest_rate\": \"5.000%\",\n            \"yield\": \"3.100%\",\n            \"price\": \"105.731\",\n            \"cusip\": \"SS1\"\n          },\n          {\n            \"maturity_date\": \"2029-08-01\",\n            \"principal_amount\": 2070000,\n            \"interest_rate\": \"5.000%\",\n            \"yield\": \"3.140%\",\n            \"price\": \"107.251\",\n            \"cusip\": \"ST9\"\n          },\n          {\n            \"maturity_date\": \"2030-08-01\",\n            \"principal_amount\": 1450000,\n            \"interest_rate\": \"5.000%\",\n            \"yield\": \"3.160%\",\n            \"price\": \"108.746\",\n            \"cusip\": \"SU6\"\n          },\n          {\n            \"maturity_date\": \"2031-08-01\",\n            \"principal_amount\": 7310000,\n            \"interest_rate\": \"5.000%\",\n            \"yield\": \"3.200%\",\n            \"price\": \"110.037\",\n            \"cusip\": \"SV4\"\n          },\n          {\n            \"maturity_date\": \"2032-08-01\",\n            \"principal_amount\": 5320000,\n            \"interest_rate\": \"5.000%\",\n            \"yield\": \"3.270%\",\n            \"price\": \"111.006\",\n            \"cusip\": \"SW2\"\n          },\n          {\n            \"maturity_date\": \"2033-08-01\",\n            \"principal_amount\": 1930000,\n            \"interest_rate\": \"5.000%\",\n            \"yield\": \"3.320%\",\n            \"price\": \"111.961\",\n            \"cusip\": \"SX0\"\n          },\n          {\n            \"maturity_date\": \"2034-08-01\",\n            \"principal_amount\": 1020000,\n            \"interest_rate\": \"5.000%\",\n            \"yield\": \"3.420%\",\n            \"price\": \"112.370\",\n            \"cusip\": \"SY8\"\n          },\n          {\n            \"maturity_date\": \"2035-08-01\",\n            \"principal_amount\": 1270000,\n            \"interest_rate\": \"5.000%\",\n            \"yield\": \"3.540%\",\n            \"price\": \"112.398\",\n            \"cusip\": \"SZ5\"\n          }\n        ]\n      },\n      \"debt_service_schedule\": [\n        {\n          \"period_ending\": \"2025-08-01\",\n          \"principal\": 560000.00,\n          \"interest\": 345576.39,\n          \"total_debt_service\": 905576.39\n        },\n        {\n          \"period_ending\": \"2026-08-01\",\n          \"principal\": 4740000.00,\n          \"interest\": 1749250.00,\n          \"total_debt_service\": 6489250.00\n        },\n        {\n          \"period_ending\": \"2027-08-01\",\n          \"principal\": 5195000.00,\n          \"interest\": 1512250.00,\n          \"total_debt_service\": 6707250.00\n        },\n        {\n          \"period_ending\": \"2028-08-01\",\n          \"principal\": 4680000.00,\n          \"interest\": 1252500.00,\n          \"total_debt_service\": 5932500.00\n        },\n        {\n          \"period_ending\": \"2029-08-01\",\n          \"principal\": 2070000.00,\n          \"interest\": 1018500.00,\n          \"total_debt_service\": 3088500.00\n        },\n        {\n          \"period_ending\": \"2030-08-01\",\n          \"principal\": 1450000.00,\n          \"interest\": 915000.00,\n          \"total_debt_service\": 2365000.00\n        },\n        {\n          \"period_ending\": \"2031-08-01\",\n          \"principal\": 7310000.00,\n          \"interest\": 842500.00,\n          \"total_debt_service\": 8152500.00\n        },\n        {\n          \"period_ending\": \"2032-08-01\",\n          \"principal\": 5320000.00,\n          \"interest\": 477000.00,\n          \"total_debt_service\": 5797000.00\n        },\n        {\n          \"period_ending\": \"2033-08-01\",\n          \"principal\": 1930000.00,\n          \"interest\": 211000.00,\n          \"total_debt_service\": 2141000.00\n        },\n        {\n          \"period_ending\": \"2034-08-01\",\n          \"principal\": 1020000.00,\n          \"interest\": 114500.00,\n          \"total_debt_service\": 1134500.00\n        },\n        {\n          \"period_ending\": \"2035-08-01\",\n          \"principal\": 1270000.00,\n          \"interest\": 63500.00,\n          \"total_debt_service\": 1333500.00\n        }\n      ]\n    }\n  ]\n}\n```"
              }
            ],
            "role": "model"
          },
          "finishReason": "STOP",
          "index": 0
        }
      }
    ]
  },
  "versionId": "1ee12373-744e-46d2-9e32-801e17b78b6c",
  "triggerCount": 0,
  "shared": [
    {
      "updatedAt": "2025-11-15T23:39:49.144Z",
      "createdAt": "2025-11-15T23:39:49.144Z",
      "role": "workflow:owner",
      "workflowId": "biW8aKwAI78Eo4Gw",
      "projectId": "2vHf2VxAoKk0WgJE"
    }
  ],
  "tags": []
}