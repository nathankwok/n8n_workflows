{
  "createdAt": "2025-09-26T08:40:31.056Z",
  "updatedAt": "2025-10-01T01:22:35.077Z",
  "id": "4bqYeLDmprfUiEna",
  "name": "ask-data Omni Dashboard Search HTTP",
  "active": true,
  "isArchived": false,
  "nodes": [
    {
      "parameters": {
        "httpMethod": "POST",
        "path": "8394a134-6af3-4ec0-b605-3270129037cc",
        "authentication": "basicAuth",
        "options": {
          "responseHeaders": {
            "entries": [
              {
                "name": "Content-Type",
                "value": "application/json"
              }
            ]
          }
        }
      },
      "type": "n8n-nodes-base.webhook",
      "typeVersion": 2.1,
      "position": [
        784,
        1440
      ],
      "id": "f50f04d1-d85d-47dd-bcc2-1771d22ecdb6",
      "name": "Webhook",
      "webhookId": "1298ec1c-5d6c-4010-9b21-b40fada0aa39",
      "alwaysOutputData": true
    },
    {
      "parameters": {
        "promptType": "define",
        "text": "=<task>\n1. Go through the inptu list of documents to filter out ones that have a false boolean value for `has_dashboard` . \n2. Extract out the fields from each output.\n  - Use the document_id to craft a dashboard_url `https://cribl.omniapp.co/dashboards/{document_id}` \n  - Use the folder_path to craft a folder_url like `https://cribl.omniapp.co/f/{folder_path}`\n3. Then craft a well formatted slack_message in the tone of a helpful data analyst, using each output document, keeping in mind everything in the slack_message_format .\n4. Finally, output in a structured JSON output format with the following keys:\n- message\n- document_ids (in descending order by document count)\n- folder_urls\n</task>\n\n<input>\n```json\n{{ $('Map Reduce Document Count').item.json.output.toJsonString() }}\n```\n</input>\n\n<guidelines>\n\n<slack_message_format>\nThe message should:\n  - tag the user's username, which is `{{ $('Global Vars').item.json.body.message_user_name }}`. \n  - address their original request, which was `{{ $('Global Vars').item.json.body.message_text }}`\n  - should not write word-for-word their original request but instead should extract key words from their request to use to summarize what their original request might be related to \n  - say that these dashboards might contain what they need.\n  - should list out documents after addressing them.\n  - Each document in the slack message should include the {document_name} that is linked to the respective {dashboard_url} and that the document exists in the {folder_name}, which is also linked to the respective {folder_url}.\n  - should not include any notes about helping further.\n  - **CRITICAL**: should order the list of documents in descending order by the count value, but the count should not be in the message itself.\n  - should limit the number of documents to the top 3 documents by count.\n</slack_message_format>\n\n</guidelines>\n\n\n<output_format>\nThe resulting output JSON should be something like this:\n```json\n{\n  \"message\": \"formatted slack message\",\n  \"document_ids\": [\n    \"document_id_1\",\n    \"document_id_2\"\n  ],\n  \"folder_urls\": [\n    \"folder_url_1\",\n    \"folder_url_2\"\n  ]\n}\n</output_format>",
        "hasOutputParser": true,
        "needsFallback": true,
        "options": {
          "systemMessage": "You are an expert data analyst who is well versed with the dashboards you have built in Omni Analytics Business Intelligence tool. You triage requests from company stakeholders who want to find relevant dashboards in the Omni BI tool."
        }
      },
      "type": "@n8n/n8n-nodes-langchain.agent",
      "typeVersion": 2.2,
      "position": [
        7984,
        2496
      ],
      "id": "4b76c447-df91-49af-a16b-4a352f2c60c6",
      "name": "Response Agent",
      "alwaysOutputData": true,
      "onError": "continueErrorOutput"
    },
    {
      "parameters": {
        "model": "o4-mini",
        "options": {
          "responseFormat": "json_object"
        }
      },
      "type": "@n8n/n8n-nodes-langchain.lmChatAzureOpenAi",
      "typeVersion": 1,
      "position": [
        7856,
        2720
      ],
      "id": "ff3f7a13-2633-43fd-9bf4-fb3f2d866de4",
      "name": "Response Agent o4-mini"
    },
    {
      "parameters": {
        "modelName": "models/gemini-2.5-pro",
        "options": {}
      },
      "type": "@n8n/n8n-nodes-langchain.lmChatGoogleGemini",
      "typeVersion": 1,
      "position": [
        8032,
        2768
      ],
      "id": "fdf8b9c7-cd70-4cce-a2e9-26254675e99d",
      "name": "Response Agent Gemini 2.5 Pro"
    },
    {
      "parameters": {
        "schemaType": "manual",
        "inputSchema": "{\n\t\"type\": \"object\",\n\t\"properties\": {\n      \"message\": {\n        \"type\": \"string\"\n      },\n      \"document_ids\": {\n        \"type\": \"array\",\n        \"items\": {\n          \"type\": \"string\"\n        }\n      },\n      \"folder_urls\": {\n        \"type\": \"array\",\n        \"items\": {\n          \"type\": \"string\"\n        }\n      }\n\t}\n}"
      },
      "type": "@n8n/n8n-nodes-langchain.outputParserStructured",
      "typeVersion": 1.3,
      "position": [
        8240,
        2736
      ],
      "id": "4b5fa885-3b63-42b0-87ab-186c373ae672",
      "name": "Response Agent Structured Output Parser",
      "notesInFlow": true,
      "notes": "Success path"
    },
    {
      "parameters": {
        "schemaType": "manual",
        "inputSchema": "{\n\t\"type\": \"array\"\t\n}"
      },
      "type": "@n8n/n8n-nodes-langchain.outputParserStructured",
      "typeVersion": 1.3,
      "position": [
        8032,
        2944
      ],
      "id": "63a8ab38-1b0f-46ed-82a8-2fecb571dedf",
      "name": "Response Agent Structured Output Parser1",
      "notesInFlow": true,
      "notes": "Error path"
    },
    {
      "parameters": {
        "content": "## Respond with recommendations via Slack\n",
        "height": 656,
        "width": 720,
        "color": 5
      },
      "type": "n8n-nodes-base.stickyNote",
      "position": [
        7760,
        2304
      ],
      "typeVersion": 1,
      "id": "08726850-4998-419e-af1c-ac316cd0d9dd",
      "name": "Sticky Note"
    },
    {
      "parameters": {
        "method": "POST",
        "url": "={{ $('Global Vars').item.json.zapier_slack_response_webhook.webhook_url }}",
        "sendHeaders": true,
        "headerParameters": {
          "parameters": [
            {
              "name": "Content-Type",
              "value": "application/json"
            }
          ]
        },
        "sendBody": true,
        "specifyBody": "json",
        "jsonBody": "={\n  \"output\": {{ $json.output.toJsonString() }},\n  \"body\": {{ $('Global Vars').item.json.body.toJsonString() }},\n  \"message\": {{ $('Global Vars').item.json.slack.error_message.toJsonString() }}\n}",
        "options": {}
      },
      "type": "n8n-nodes-base.httpRequest",
      "typeVersion": 4.2,
      "position": [
        8736,
        1936
      ],
      "id": "8756ca75-e708-43f4-bc94-a07e23e40831",
      "name": "Send Slack Error Message",
      "alwaysOutputData": false
    },
    {
      "parameters": {
        "method": "POST",
        "url": "={{ $('Global Vars').item.json.zapier_slack_response_webhook.webhook_url }}",
        "sendHeaders": true,
        "headerParameters": {
          "parameters": [
            {
              "name": "Content-Type",
              "value": "application/json"
            }
          ]
        },
        "sendBody": true,
        "specifyBody": "json",
        "jsonBody": "={\n  \"output\": {{ $('Response Agent').item.json.output.toJsonString() }},\n  \"body\": {{ $('Global Vars').item.json.body.toJsonString() }},\n  \"message\": {{ $('Response Agent').item.json.output.message.toJsonString() }}\n}",
        "options": {}
      },
      "type": "n8n-nodes-base.httpRequest",
      "typeVersion": 4.2,
      "position": [
        8736,
        1744
      ],
      "id": "9dee11ea-d07f-4d0a-9602-7df6c3176051",
      "name": "Send Slack Success Message",
      "alwaysOutputData": false,
      "onError": "continueRegularOutput"
    },
    {
      "parameters": {
        "content": "# Top down\n- extract key words from message\n- use key words to search similarly named document names\n- using document_ids, find their associated document query names\n  - validate that the query names are similar to key words and to the message\n\n- using document_ids, find their associated document query filters\n  - validate that list of document query filters are similar to key words and to the message\n\n- do for every document \n",
        "height": 368,
        "width": 656
      },
      "type": "n8n-nodes-base.stickyNote",
      "position": [
        -320,
        384
      ],
      "typeVersion": 1,
      "id": "edbcb496-e58c-454a-91b1-80c9ce5469b6",
      "name": "Sticky Note2"
    },
    {
      "parameters": {
        "content": "# Bottoms Up\n- extract key words from message\n- use key words to search similarly named document query filters\n- get the list of document query filters and find the document queries associated with them\n  - validate that the query names are similar to key words and to the message\n\n- from the list of document query filters, get their associated documents\n  - validate that list of document names are similar to key words and to the message\n\n\n",
        "height": 368,
        "width": 656
      },
      "type": "n8n-nodes-base.stickyNote",
      "position": [
        400,
        384
      ],
      "typeVersion": 1,
      "id": "3157de81-dd1f-4b22-bf53-ef024d61a695",
      "name": "Sticky Note3"
    },
    {
      "parameters": {
        "content": "# ask-data questions\nhttps://cribl.slack.com/archives/C02GRDZS7QF/p1758010156612549\n\nhttps://cribl.slack.com/archives/C02GRDZS7QF/p1758008040422269\n\nhttps://cribl.slack.com/archives/C02GRDZS7QF/p1757955122490669\n\nhttps://cribl.slack.com/archives/C02GRDZS7QF/p1758039148424459\n\nhttps://cribl.slack.com/archives/C02GRDZS7QF/p1758036683995729\n\n",
        "height": 352,
        "width": 784
      },
      "type": "n8n-nodes-base.stickyNote",
      "position": [
        -160,
        -48
      ],
      "typeVersion": 1,
      "id": "b2ddefab-fdea-4b78-a4b7-d7cac46e4af7",
      "name": "Sticky Note4"
    },
    {
      "parameters": {
        "content": "## Features\n- filter by user who emoji'ed?\nalec U050E77CEQP\nnathan U06PVBEK9T6\npriya U02CBV3GSM9\nlaura U0544ACG6SV\nmatt U073M1QH10R\nrebecca U099VNZAC3D\njerome U07KD0478CQ\n\nhttps://www.productcompass.pm/p/n8n-mcp-servers-uv\n\n\n\n- filter dashboards by what dashboards person has access to\n",
        "height": 240,
        "width": 304
      },
      "type": "n8n-nodes-base.stickyNote",
      "position": [
        752,
        -32
      ],
      "typeVersion": 1,
      "id": "5818a36b-d231-4d72-a662-cfa327d9b58a",
      "name": "Sticky Note5"
    },
    {
      "parameters": {
        "content": "# Infra Cleanup\n\n/home/nathankwok/n8n_deployment contains the working dir of n8n\n\nget rid of /home/nathankwok/n8n_deployment/temp_deployment_copy . its just a copy of the working dir\n\n/home/nathankwok/n8n_deployment/temp_deploy.sh tries to deploy with references to the temp_deployment_copy dir\n\ncheck is deploy-n8n-supabase.sh also references temp dir\n\n\n",
        "height": 432,
        "width": 640
      },
      "type": "n8n-nodes-base.stickyNote",
      "position": [
        416,
        848
      ],
      "typeVersion": 1,
      "id": "109174e9-4cba-4d81-8302-d19ce091f444",
      "name": "Sticky Note6"
    },
    {
      "parameters": {
        "method": "POST",
        "url": "={{ $('Global Vars').item.json.omni_api.omni_base_url }}/api/v1/ai/pick-topic",
        "authentication": "genericCredentialType",
        "genericAuthType": "httpBearerAuth",
        "sendHeaders": true,
        "headerParameters": {
          "parameters": [
            {
              "name": "Content-Type",
              "value": "application/json"
            }
          ]
        },
        "sendBody": true,
        "specifyBody": "json",
        "jsonBody": "={\n  \"modelId\": {{ $json.omni_api.model_id.toJsonString() }},\n  \"prompt\": {{ $json.body.message_text.toJsonString() }}\n}",
        "options": {}
      },
      "type": "n8n-nodes-base.httpRequest",
      "typeVersion": 4.2,
      "position": [
        2048,
        3248
      ],
      "id": "dd914c10-c46f-40c5-bf34-752af34e2da5",
      "name": "Omni PickTopic API Request 0",
      "alwaysOutputData": false,
      "onError": "continueErrorOutput"
    },
    {
      "parameters": {
        "method": "POST",
        "url": "={{ $('Global Vars').item.json.omni_api.omni_base_url }}/api/v1/ai/pick-topic",
        "authentication": "genericCredentialType",
        "genericAuthType": "httpBearerAuth",
        "sendHeaders": true,
        "headerParameters": {
          "parameters": [
            {
              "name": "Content-Type",
              "value": "application/json"
            }
          ]
        },
        "sendBody": true,
        "specifyBody": "json",
        "jsonBody": "={\n  \"modelId\": {{ $json.omni_api.model_id.toJsonString() }},\n  \"prompt\": {{ $json.body.message_text.toJsonString() }}\n}",
        "options": {}
      },
      "type": "n8n-nodes-base.httpRequest",
      "typeVersion": 4.2,
      "position": [
        2048,
        3456
      ],
      "id": "732dfce6-abc1-4ee1-912c-a467ba0e5345",
      "name": "Omni PickTopic API Request 1",
      "executeOnce": false,
      "alwaysOutputData": false,
      "onError": "continueErrorOutput"
    },
    {
      "parameters": {
        "method": "POST",
        "url": "={{ $('Global Vars').item.json.omni_api.omni_base_url }}/api/v1/ai/pick-topic",
        "authentication": "genericCredentialType",
        "genericAuthType": "httpBearerAuth",
        "sendHeaders": true,
        "headerParameters": {
          "parameters": [
            {
              "name": "Content-Type",
              "value": "application/json"
            }
          ]
        },
        "sendBody": true,
        "specifyBody": "json",
        "jsonBody": "={\n  \"modelId\": {{ $json.omni_api.model_id.toJsonString() }},\n  \"prompt\": {{ $json.body.message_text.toJsonString() }}\n}",
        "options": {}
      },
      "type": "n8n-nodes-base.httpRequest",
      "typeVersion": 4.2,
      "position": [
        2048,
        3680
      ],
      "id": "07112d29-3d14-4de6-b24e-460efa456d24",
      "name": "Omni PickTopic API Request 2",
      "alwaysOutputData": false,
      "onError": "continueErrorOutput"
    },
    {
      "parameters": {
        "modelName": "models/gemini-2.5-pro",
        "options": {}
      },
      "type": "@n8n/n8n-nodes-langchain.lmChatGoogleGemini",
      "typeVersion": 1,
      "position": [
        3184,
        3760
      ],
      "id": "78a6f7dc-4551-4013-b563-65b625feaf90",
      "name": "Cortex Agent Gemini 2.5 Pro1"
    },
    {
      "parameters": {
        "toolDescription": "Semantic search for documents queries with the query name similar to a given topic",
        "method": "POST",
        "url": "={{ $('Global Vars').item.json.snowflake_base_url }}/api/v2/databases/{{ $('Global Vars').item.json.omni_document_queries_query_name_search_service.snowflake_database }}/schemas/{{ $('Global Vars').item.json.omni_document_queries_query_name_search_service.snowflake_schema }}/cortex-search-services/{{ $('Global Vars').item.json.omni_document_queries_query_name_search_service.agent_name }}:query",
        "authentication": "genericCredentialType",
        "genericAuthType": "httpBearerAuth",
        "sendHeaders": true,
        "specifyHeaders": "json",
        "jsonHeaders": "{\n  \"Content-Type\": \"application/json\"\n}",
        "sendBody": true,
        "specifyBody": "json",
        "jsonBody": "={\n    \"query\": \"{{ $fromAI('topic', 'topic name', 'string') }}\",\n    \"columns\": [\n        \"query_name\",\n        \"query_id\",\n        \"document_id\",\n        \"document_scope\",\n        \"query_table\"\n    ],\n    \"filter\": {\n        \"@not\": {\n            \"@eq\": {\n                \"document_scope\": \"restricted\"\n            }\n        }\n    },\n    \"limit\": 4\n}",
        "options": {},
        "optimizeResponse": true,
        "dataField": "results"
      },
      "type": "n8n-nodes-base.httpRequestTool",
      "typeVersion": 4.2,
      "position": [
        3520,
        3744
      ],
      "id": "47d31bac-8dfb-41e8-9fee-9ebe2837d716",
      "name": "Cortex Search Query Name"
    },
    {
      "parameters": {
        "toolDescription": "Semantic search for documents queries with the query table similar to a given topic",
        "method": "POST",
        "url": "={{ $('Global Vars').item.json.snowflake_base_url }}/api/v2/databases/{{ $('Global Vars').item.json.omni_document_queries_query_table_search_service.snowflake_database }}/schemas/{{ $('Global Vars').item.json.omni_document_queries_query_table_search_service.snowflake_schema }}/cortex-search-services/{{ $('Global Vars').item.json.omni_document_queries_query_table_search_service.agent_name }}:query",
        "authentication": "genericCredentialType",
        "genericAuthType": "httpBearerAuth",
        "sendHeaders": true,
        "specifyHeaders": "json",
        "jsonHeaders": "{\n  \"Content-Type\": \"application/json\"\n}",
        "sendBody": true,
        "specifyBody": "json",
        "jsonBody": "={\n    \"query\": \"{{ $fromAI('topic', 'topic name', 'string') }}\",\n    \"columns\": [\n        \"query_name\",\n        \"query_id\",\n        \"document_id\",\n        \"document_scope\",\n        \"query_table\"\n    ],\n    \"filter\": {\n        \"@not\": {\n            \"@eq\": {\n                \"document_scope\": \"restricted\"\n            }\n        }\n    },\n    \"limit\": 6\n}",
        "options": {},
        "optimizeResponse": true,
        "dataField": "results"
      },
      "type": "n8n-nodes-base.httpRequestTool",
      "typeVersion": 4.2,
      "position": [
        3360,
        3808
      ],
      "id": "08c2a722-f945-406a-b3d8-a5f918f51e54",
      "name": "Cortex Search Query Table"
    },
    {
      "parameters": {
        "modelName": "models/gemini-2.5-pro",
        "options": {}
      },
      "type": "@n8n/n8n-nodes-langchain.lmChatGoogleGemini",
      "typeVersion": 1,
      "position": [
        3200,
        4432
      ],
      "id": "6c2d1b75-e1cc-41f9-ab75-2ee56750409b",
      "name": "Cortex Agent Gemini 2.5 Pro2"
    },
    {
      "parameters": {
        "promptType": "define",
        "text": "=You must use the following core text search services to find documents With names that are similar to the topics:\n- Cortex Search Document Name\n\nYour input is a list of Omni Analytic topics, which are high level objects that describe the underlying dbt model being used to query for business data and analytics. \n\n<task>\n1. **CRITICAL**: Make sure to deduplicate the input topics list so that you have a unique set of topic names .\n2. For each topic in the unique set of topic names, give the topic as a string parameter to the tool. This will return a list of results, each object being a document object in the format of tool_call_response_document_structure .\n3. Then aggregate the responses from each tool call into a single list of document objects.\n</task>\n\n<topics>\n{{ $json.topic_name }}\n</topics>\n\n\nThe Cortex Search Document Name tool will return a list of results, which represents documents. Each document object is in the following json structure.\n\n<tool_call_result_document_structure>\n```json\n{\n\"identifier\": \"959cb1c9\",\n\"owner_name\": \"John McGuire\",\n\"owner_id\": \"86a545a6-5958-43e5-8f16-68eb9f148744\",\n\"scope\": \"organization\",\n\"name\": \"Team: SDR Manager\",\n\"folder_name\": \"Marketing\",\n\"folder_id\": \"3089bcee-baea-45af-8613-63077f0e9417\",\n\"has_dashboard\": true,\n\"folder_path\": \"marketing\"\n}\n```\n</tool_call_result_document_structure>\n\n<output>\nOutput a structured JSON **list** of documents, with each document object in the same schema as tool_call_result_document_structure .\n</output>",
        "hasOutputParser": true,
        "needsFallback": true,
        "options": {
          "systemMessage": "You are an expert data analyst who has built many dashboards in the Omni Analytics tool, which is a business intelligence tool, that sits on top of Snowflake data through dbt. You triage natural language queries from Stakeholders within the company in order to find the best dashboard (otherwise known as document) to answer the question. Documents, also known as dashboards, are parents of document queries, which are individual queries that run against the data within the parent document. Metadata on the documents and document queries and document query filters are stored in Snowflake and can be accessed through the Cortex Search Service and the Cortex Analyst tools."
        }
      },
      "type": "@n8n/n8n-nodes-langchain.agent",
      "typeVersion": 2.2,
      "position": [
        3216,
        4080
      ],
      "id": "af8061e3-bb08-4ccf-b642-d0cb297a9ee4",
      "name": "Cortex Search Document by Topic",
      "onError": "continueErrorOutput"
    },
    {
      "parameters": {
        "model": "o4-mini",
        "options": {
          "responseFormat": "json_object"
        }
      },
      "type": "@n8n/n8n-nodes-langchain.lmChatAzureOpenAi",
      "typeVersion": 1,
      "position": [
        3008,
        4352
      ],
      "id": "f4912eba-23fa-436a-9ed7-e2d2e2212ab9",
      "name": "Search Document Agent"
    },
    {
      "parameters": {
        "model": "o4-mini",
        "options": {
          "responseFormat": "json_object"
        }
      },
      "type": "@n8n/n8n-nodes-langchain.lmChatAzureOpenAi",
      "typeVersion": 1,
      "position": [
        3040,
        3696
      ],
      "id": "cae28e6f-1926-47d8-b5fe-db76b40149b3",
      "name": "Search Document Query by Topic Agent"
    },
    {
      "parameters": {
        "toolDescription": "Semantic search for documents (dashboards) using the document's name field",
        "method": "POST",
        "url": "={{ $('Global Vars').item.json.snowflake_base_url }}/api/v2/databases/{{ $('Global Vars').item.json.omni_documents_search_service.snowflake_database }}/schemas/{{ $('Global Vars').item.json.omni_documents_search_service.snowflake_schema }}/cortex-search-services/{{ $('Global Vars').item.json.omni_documents_search_service.service_name }}:query",
        "authentication": "genericCredentialType",
        "genericAuthType": "httpBearerAuth",
        "sendHeaders": true,
        "specifyHeaders": "json",
        "jsonHeaders": "{\n  \"Content-Type\": \"application/json\"\n}",
        "sendBody": true,
        "specifyBody": "json",
        "jsonBody": "={\n    \"query\": \"{{ $fromAI('topic', 'topic name', 'string') }}\",\n    \"columns\": [\n        \"name\",\n        \"identifier\",\n        \"scope\",\n        \"has_dashboard\",\n        \"owner_name\",\n        \"owner_id\",\n        \"folder_name\",\n        \"folder_id\",\n        \"folder_path\"\n    ],\n    \"filter\": {\n      \"@and\": [\n        { \n          \"@not\": {\n            \"@eq\": {\n                \"scope\": \"restricted\"\n            }\n          }\n        },\n        { \n          \"@eq\": {\n              \"has_dashboard\": \"true\"\n          }\n        }\n      ]\n    },\n    \"limit\": 3\n}",
        "options": {},
        "optimizeResponse": true,
        "dataField": "results"
      },
      "type": "n8n-nodes-base.httpRequestTool",
      "typeVersion": 4.2,
      "position": [
        3424,
        4432
      ],
      "id": "a6a322e2-55a4-44fe-b840-ced15d44555f",
      "name": "Cortex Search Document Name"
    },
    {
      "parameters": {
        "promptType": "define",
        "text": "=You are given lists of objects with objects representing:\n- documents\n\n\n<task>\n1. Extract out only the document data into a list, with all keys only from the document_structure schema. There will potentially be duplicate document objects in this list.\n2. Map-reduce the resulting documents by deduplicating the same documents (by document_id) but keeping count of documents with the same id before deduplicating. The count should be an additional key in each document object with each document being unique by the document_id\n3. Output the list of document objects with counts with each object in the schema like map_reduce_count_document_structure .\n</task>\n\n\n<document_structure>\n```json\n{\n\"document_id\": \"959cb1c9\",\n\"owner_name\": \"John McGuire\",\n\"owner_id\": \"86a545a6-5958-43e5-8f16-68eb9f148744\",\n\"document_scope\": \"organization\",\n\"document_name\": \"Team: SDR Manager\",\n\"folder_name\": \"Marketing\",\n\"folder_id\": \"3089bcee-baea-45af-8613-63077f0e9417\",\n\"has_dashboard\": true,\n\"folder_path\": \"marketing\"\n}\n```\n</document_structure>\n\n\n<map_reduce_count_document_structure>\n```json\n{\n\"document_id\": \"959cb1c9\",\n\"owner_name\": \"John McGuire\",\n\"owner_id\": \"86a545a6-5958-43e5-8f16-68eb9f148744\",\n\"document_scope\": \"organization\",\n\"document_name\": \"Team: SDR Manager\",\n\"folder_name\": \"Marketing\",\n\"folder_id\": \"3089bcee-baea-45af-8613-63077f0e9417\",\n\"has_dashboard\": true,\n\"folder_path\": \"marketing\",\n\"count\": 3\n}\n```\n</map_reduce_count_document_structure>\n\n\n<input_documents>\n{{ $('Aggregate Documents').item.json.output.toJsonString() }}\n</input_documents>\n\n\n<output_format>\nThe output must be a list of map_reduce_count_document_structure.\nExample:\n```json\n[\n  {\n    \"document_id\": \"959cb1c9\",\n    \"owner_name\": \"John McGuire\",\n    \"owner_id\": \"86a545a6-5958-43e5-8f16-68eb9f148744\",\n    \"document_scope\": \"organization\",\n    \"document_name\": \"Team: SDR Manager\",\n    \"folder_name\": \"Marketing\",\n    \"folder_id\": \"3089bcee-baea-45af-8613-63077f0e9417\",\n    \"has_dashboard\": true,\n    \"folder_path\": \"marketing\",\n    \"count\": 3\n  }\n]\n```\n</output_format>",
        "hasOutputParser": true,
        "needsFallback": true,
        "options": {
          "systemMessage": "<role>\nYou are an expert data analyst, well versed in working with data and common data analysis algorithms, particularly with Map Reduce algorithm.\n</role>"
        }
      },
      "type": "@n8n/n8n-nodes-langchain.agent",
      "typeVersion": 2.2,
      "position": [
        7312,
        2496
      ],
      "id": "f064a9ba-727f-4ab8-aa90-8ea5426b96ea",
      "name": "Map Reduce Document Count",
      "alwaysOutputData": true,
      "notesInFlow": true,
      "onError": "continueRegularOutput",
      "notes": "Documents with more counts are weighted higher"
    },
    {
      "parameters": {
        "content": "Documents with more counts are weighted higher",
        "height": 96,
        "width": 150,
        "color": 4
      },
      "type": "n8n-nodes-base.stickyNote",
      "position": [
        6368,
        2672
      ],
      "typeVersion": 1,
      "id": "1c32e67d-ae7f-4fb0-a41c-dd262bef9bb7",
      "name": "Sticky Note8"
    },
    {
      "parameters": {
        "numberInputs": 7
      },
      "type": "n8n-nodes-base.merge",
      "typeVersion": 3.2,
      "position": [
        5184,
        2416
      ],
      "id": "2fd97b72-01af-42f1-b320-2a5e2d263d7c",
      "name": "Merge1",
      "onError": "continueRegularOutput"
    },
    {
      "parameters": {
        "jsonSchemaExample": "[\n  {\n  \"identifier\": \"959cb1c9\",\n  \"owner_name\": \"John McGuire\",\n  \"owner_id\": \"86a545a6-5958-43e5-8f16-68eb9f148744\",\n  \"scope\": \"organization\",\n  \"name\": \"Team: SDR Manager\",\n  \"folder_name\": \"Marketing\",\n  \"folder_id\": \"3089bcee-baea-45af-8613-63077f0e9417\",\n  \"has_dashboard\": true,\n  \"folder_path\": \"marketing\"\n}\n]"
      },
      "type": "@n8n/n8n-nodes-langchain.outputParserStructured",
      "typeVersion": 1.3,
      "position": [
        3600,
        4352
      ],
      "id": "c134bae7-f3d9-468c-882c-d5b85e8e236a",
      "name": "Cortex Search Document by Topic Structured Output"
    },
    {
      "parameters": {
        "schemaType": "manual",
        "inputSchema": "{\n  \"type\": \"array\",\n  \"items\": {\n    \"type\": \"object\",\n    \"properties\": {\n      \"query_table\": {\n          \"type\": \"string\"\n      },\n      \"document_scope\": {\n          \"type\": \"string\"\n      },\n      \"query_name\": {\n          \"type\": \"string\"\n      },\n      \"document_id\": {\n          \"type\": \"string\"\n      },\n      \"query_id\": {\n          \"type\": \"string\"\n      }\n    }\n  }\n}\n"
      },
      "type": "@n8n/n8n-nodes-langchain.outputParserStructured",
      "typeVersion": 1.3,
      "position": [
        3664,
        3696
      ],
      "id": "de9c62bb-241b-4973-be7b-8e1910466f32",
      "name": "Cortex Search Query by Topic Structured Output"
    },
    {
      "parameters": {
        "jsonSchemaExample": "[\n  {\n    \"document_id\": \"959cb1c9\",\n    \"owner_name\": \"John McGuire\",\n    \"owner_id\": \"86a545a6-5958-43e5-8f16-68eb9f148744\",\n    \"document_scope\": \"organization\",\n    \"document_name\": \"Team: SDR Manager\",\n    \"folder_name\": \"Marketing\",\n    \"folder_id\": \"3089bcee-baea-45af-8613-63077f0e9417\",\n    \"has_dashboard\": true,\n    \"folder_path\": \"marketing\",\n    \"count\": 3\n  }\n]"
      },
      "type": "@n8n/n8n-nodes-langchain.outputParserStructured",
      "typeVersion": 1.3,
      "position": [
        7520,
        2720
      ],
      "id": "53516036-8c81-4e83-8d1b-ae4c11799789",
      "name": "Structured Output Parser1"
    },
    {
      "parameters": {
        "content": "## Semantic Search by Message",
        "height": 720,
        "width": 1376,
        "color": 4
      },
      "type": "n8n-nodes-base.stickyNote",
      "position": [
        2496,
        1216
      ],
      "typeVersion": 1,
      "id": "ae09dcdb-ac99-4985-a381-e3fdb9bd2059",
      "name": "Sticky Note7"
    },
    {
      "parameters": {
        "content": "### Cortex Search Query by Topic\n- searches For document queries\n- uses query_name and query_table that are similar to the topic"
      },
      "type": "n8n-nodes-base.stickyNote",
      "position": [
        2800,
        3232
      ],
      "typeVersion": 1,
      "id": "e3789fe9-ab91-4d84-85c4-1ba09284c251",
      "name": "Sticky Note9"
    },
    {
      "parameters": {
        "content": "### Cortex Search Document by Topic\n- searches For documents\n- uses document name that is similar to the topic"
      },
      "type": "n8n-nodes-base.stickyNote",
      "position": [
        2432,
        4048
      ],
      "typeVersion": 1,
      "id": "ccd76d7c-9966-4d2d-ae1c-7c3699745497",
      "name": "Sticky Note10"
    },
    {
      "parameters": {
        "content": "### Cortex Search Document by Keyword\n- searches For documents\n- uses document name that is similar to keywords or key concepts extracted from the message"
      },
      "type": "n8n-nodes-base.stickyNote",
      "position": [
        2752,
        2144
      ],
      "typeVersion": 1,
      "id": "70ea28c6-ed2a-46c6-b87c-382329727f59",
      "name": "Sticky Note11"
    },
    {
      "parameters": {
        "content": "You are given lists of objects with objects representing:\n- documents\n- enriched document queries\n\n\n<task>\n1. Aggregate the list of documents and document_queries\n2. Extract out only the document data into a list, with all keys only from the document_structure schema. There will potentially be duplicate document objects in this list.\n3. Map-reduce the resulting documents by deduplicating the same documents (by document_id) but keeping count of documents with the same id before deduplicating. The count should be an additional key in each document object with each document being unique by the document_id\n3. Output the list of document objects with counts with each object in the schema like map_reduce_count_document_structure .\n</task>\n\n\n<enriched_document_query_structure>\n```json\n{\n  \"document_id\": \"45d06a29\",\n  \"query_id\": \"b3fe0946-15c0-4ea5-a6ff-fd8f23ac5964\",\n  \"query_table\": \"engineering__azure_cloud_cost\",\n  \"document_scope\": \"organization\",\n  \"query_name\": \"Monthly Costs by Usage\",\n  \"owner_name\": \"John McGuire\",\n  \"owner_id\": \"86a545a6-5958-43e5-8f16-68eb9f148744\",\n  \"document_name\": \"Team: Infrastructure Costs\",\n  \"folder_name\": \"Engineering\",\n  \"folder_id\": \"3089bcee-baea-45af-8613-63077f0e9417\",\n  \"has_dashboard\": true,\n  \"folder_path\": \"engineering\"\n}\n```\n</enriched_document_query_structure>\n\n\n<document_structure>\n```json\n{\n\"document_id\": \"959cb1c9\",\n\"owner_name\": \"John McGuire\",\n\"owner_id\": \"86a545a6-5958-43e5-8f16-68eb9f148744\",\n\"document_scope\": \"organization\",\n\"document_name\": \"Team: SDR Manager\",\n\"folder_name\": \"Marketing\",\n\"folder_id\": \"3089bcee-baea-45af-8613-63077f0e9417\",\n\"has_dashboard\": true,\n\"folder_path\": \"marketing\"\n}\n```\n</document_structure>\n\n\n<map_reduce_count_document_structure>\n```json\n{\n\"document_id\": \"959cb1c9\",\n\"owner_name\": \"John McGuire\",\n\"owner_id\": \"86a545a6-5958-43e5-8f16-68eb9f148744\",\n\"document_scope\": \"organization\",\n\"document_name\": \"Team: SDR Manager\",\n\"folder_name\": \"Marketing\",\n\"folder_id\": \"3089bcee-baea-45af-8613-63077f0e9417\",\n\"has_dashboard\": true,\n\"folder_path\": \"marketing\",\n\"count\": 3\n}\n```\n</map_reduce_count_document_structure>\n\n\n<input_enriched_document_queries>\n{{ $('Enrich Document Queries').item.json.output.toJsonString() }}\n</input_enriched_document_queries>\n\n\n<input_documents>\n{{ $('Cortex Search Document by Topic').item.json.output.toJsonString() }}\n</input_documents>\n\n\n<output_format>\nThe output must be a list of map_reduce_count_document_structure.\nExample:\n```json\n[\n  {\n    \"document_id\": \"959cb1c9\",\n    \"owner_name\": \"John McGuire\",\n    \"owner_id\": \"86a545a6-5958-43e5-8f16-68eb9f148744\",\n    \"document_scope\": \"organization\",\n    \"document_name\": \"Team: SDR Manager\",\n    \"folder_name\": \"Marketing\",\n    \"folder_id\": \"3089bcee-baea-45af-8613-63077f0e9417\",\n    \"has_dashboard\": true,\n    \"folder_path\": \"marketing\",\n    \"count\": 3\n  }\n]\n```\n</output_format>"
      },
      "type": "n8n-nodes-base.stickyNote",
      "position": [
        7136,
        2304
      ],
      "typeVersion": 1,
      "id": "dd99327d-349c-461a-989c-d1f2b5ab5745",
      "name": "Sticky Note12"
    },
    {
      "parameters": {
        "mode": "raw",
        "jsonOutput": "={\n  \"output\": {{ $json.results.toJsonString() }}\n}\n",
        "options": {}
      },
      "type": "n8n-nodes-base.set",
      "typeVersion": 3.4,
      "position": [
        3472,
        1344
      ],
      "id": "5d068881-558f-4ae9-96a1-8dd3d4c21374",
      "name": "Extract only results",
      "disabled": true
    },
    {
      "parameters": {
        "workflowId": {
          "__rl": true,
          "value": "0ZK5dvO3WYtsza47",
          "mode": "list",
          "cachedResultUrl": "/workflow/0ZK5dvO3WYtsza47",
          "cachedResultName": "Rename Document Keys"
        },
        "workflowInputs": {
          "mappingMode": "defineBelow",
          "value": {
            "documents": "={{ $json.output }}"
          },
          "matchingColumns": [
            "documents"
          ],
          "schema": [
            {
              "id": "documents",
              "displayName": "documents",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "canBeUsedToMatch": true,
              "type": "array",
              "removed": false
            }
          ],
          "attemptToConvertTypes": false,
          "convertFieldsToString": true
        },
        "options": {}
      },
      "type": "n8n-nodes-base.executeWorkflow",
      "typeVersion": 1.3,
      "position": [
        3728,
        1344
      ],
      "id": "a6179600-a821-4340-8cf4-ca5510c8e3df",
      "name": "Rename Document Keys",
      "disabled": true
    },
    {
      "parameters": {
        "method": "POST",
        "url": "={{ $('Global Vars').item.json.snowflake_base_url }}/api/v2/databases/{{ $('Global Vars').item.json.omni_documents_search_service.snowflake_database }}/schemas/{{ $('Global Vars').item.json.omni_documents_search_service.snowflake_schema }}/cortex-search-services/{{ $('Global Vars').item.json.omni_documents_search_service.service_name }}:query",
        "authentication": "genericCredentialType",
        "genericAuthType": "httpBearerAuth",
        "sendHeaders": true,
        "specifyHeaders": "json",
        "jsonHeaders": "{\n  \"Content-Type\": \"application/json\"\n}",
        "sendBody": true,
        "specifyBody": "json",
        "jsonBody": "={\n    \"query\": \"{{ $json.body.message_text }}\",\n    \"columns\": [\n        \"name\",\n        \"identifier\",\n        \"scope\",\n        \"has_dashboard\",\n        \"owner_name\",\n        \"owner_id\",\n        \"folder_name\",\n        \"folder_id\",\n        \"folder_path\"\n    ],\n    \"filter\": {\n      \"@and\": [\n        { \n          \"@not\": {\n            \"@eq\": {\n                \"scope\": \"restricted\"\n            }\n          }\n        },\n        { \n          \"@eq\": {\n              \"has_dashboard\": \"true\"\n          }\n        }\n      ]\n    },\n    \"limit\": 3\n}",
        "options": {}
      },
      "type": "n8n-nodes-base.httpRequest",
      "typeVersion": 4.2,
      "position": [
        3216,
        1344
      ],
      "id": "97295a01-12a1-40f9-8955-5f727e60324d",
      "name": "Cortex Document Name Search",
      "disabled": true
    },
    {
      "parameters": {
        "model": "o4-mini",
        "options": {
          "responseFormat": "text"
        }
      },
      "type": "@n8n/n8n-nodes-langchain.lmChatAzureOpenAi",
      "typeVersion": 1,
      "position": [
        3024,
        2640
      ],
      "id": "bf02d7b8-af0b-4e6e-a76e-9c3decca7365",
      "name": "Cortex Agent o4-mini2"
    },
    {
      "parameters": {
        "modelName": "models/gemini-2.5-pro",
        "options": {}
      },
      "type": "@n8n/n8n-nodes-langchain.lmChatGoogleGemini",
      "typeVersion": 1,
      "position": [
        3200,
        2704
      ],
      "id": "1131316f-f6e3-4357-8115-2408f5f85c39",
      "name": "Cortex Agent Gemini 2.5 Pro4"
    },
    {
      "parameters": {
        "schemaType": "manual",
        "inputSchema": "{\n  \"type\": \"array\",\n  \"items\": {\n    \"type\": \"string\"\n  }\n}\n"
      },
      "type": "@n8n/n8n-nodes-langchain.outputParserStructured",
      "typeVersion": 1.3,
      "position": [
        3376,
        2640
      ],
      "id": "bf5dcb1f-7529-45a1-9dd1-f52f82d934ff",
      "name": "Cortex Agent Structured Output Parser2"
    },
    {
      "parameters": {
        "mode": "raw",
        "jsonOutput": "={\n  \"output\": {{ $json.results.toJsonString() }}\n}\n",
        "options": {}
      },
      "type": "n8n-nodes-base.set",
      "typeVersion": 3.4,
      "position": [
        3840,
        2336
      ],
      "id": "1146fcbb-d991-4bb2-9a2f-ee317a3778c7",
      "name": "Extract only results1",
      "onError": "continueErrorOutput"
    },
    {
      "parameters": {
        "method": "POST",
        "url": "={{ $('Global Vars').item.json.snowflake_base_url }}/api/v2/databases/{{ $('Global Vars').item.json.omni_documents_search_service.snowflake_database }}/schemas/{{ $('Global Vars').item.json.omni_documents_search_service.snowflake_schema }}/cortex-search-services/{{ $('Global Vars').item.json.omni_documents_search_service.service_name }}:query",
        "authentication": "genericCredentialType",
        "genericAuthType": "httpBearerAuth",
        "sendHeaders": true,
        "specifyHeaders": "json",
        "jsonHeaders": "{\n  \"Content-Type\": \"application/json\"\n}",
        "sendBody": true,
        "specifyBody": "json",
        "jsonBody": "={\n    \"query\": {{ $('Extract Key Words Agent').item.json.output.join(', ').toJsonString() }},\n    \"columns\": [\n        \"name\",\n        \"identifier\",\n        \"scope\",\n        \"has_dashboard\",\n        \"owner_name\",\n        \"owner_id\",\n        \"folder_name\",\n        \"folder_id\",\n        \"folder_path\"\n    ],\n    \"filter\": {\n      \"@and\": [\n        { \n          \"@not\": {\n            \"@eq\": {\n                \"scope\": \"restricted\"\n            }\n          }\n        },\n        { \n          \"@eq\": {\n              \"has_dashboard\": \"true\"\n          }\n        }\n      ]\n    },\n    \"limit\": 3\n}",
        "options": {}
      },
      "type": "n8n-nodes-base.httpRequest",
      "typeVersion": 4.2,
      "position": [
        3632,
        2336
      ],
      "id": "1c18d947-8a05-430d-ae89-565b776b622f",
      "name": "Cortex Document Name Search1",
      "onError": "continueErrorOutput"
    },
    {
      "parameters": {
        "workflowId": {
          "__rl": true,
          "value": "0ZK5dvO3WYtsza47",
          "mode": "list",
          "cachedResultUrl": "/workflow/0ZK5dvO3WYtsza47",
          "cachedResultName": "Rename Document Keys"
        },
        "workflowInputs": {
          "mappingMode": "defineBelow",
          "value": {
            "documents": "={{ $json.output }}"
          },
          "matchingColumns": [
            "documents"
          ],
          "schema": [
            {
              "id": "documents",
              "displayName": "documents",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "canBeUsedToMatch": true,
              "type": "array",
              "removed": false
            }
          ],
          "attemptToConvertTypes": false,
          "convertFieldsToString": true
        },
        "options": {}
      },
      "type": "n8n-nodes-base.executeWorkflow",
      "typeVersion": 1.3,
      "position": [
        4048,
        2336
      ],
      "id": "735098ae-0711-43d9-b94e-28d541746103",
      "name": "Rename Document Keys_1",
      "onError": "continueErrorOutput"
    },
    {
      "parameters": {
        "content": "### Cortex Search Document Query by Message\n- searches for document queries\n- uses document name that is similar to the message"
      },
      "type": "n8n-nodes-base.stickyNote",
      "position": [
        2512,
        1664
      ],
      "typeVersion": 1,
      "id": "3094f4a2-4c6c-4fc5-b54f-418b58a7c28c",
      "name": "Sticky Note13",
      "disabled": true
    },
    {
      "parameters": {
        "method": "POST",
        "url": "={{ $('Global Vars').item.json.snowflake_base_url }}/api/v2/databases/{{ $('Global Vars').item.json.omni_documents_search_service.snowflake_database }}/schemas/{{ $('Global Vars').item.json.omni_documents_search_service.snowflake_schema }}/cortex-search-services/{{ $('Global Vars').item.json.omni_document_queries_query_name_search_service.agent_name }}:query",
        "authentication": "genericCredentialType",
        "genericAuthType": "httpBearerAuth",
        "sendHeaders": true,
        "specifyHeaders": "json",
        "jsonHeaders": "{\n  \"Content-Type\": \"application/json\"\n}",
        "sendBody": true,
        "specifyBody": "json",
        "jsonBody": "={\n    \"query\": \"{{ $json.body.message_text }}\",\n    \"columns\": [\n        \"query_name\",\n        \"query_id\",\n        \"document_id\",\n        \"document_scope\",\n        \"query_table\"\n    ],\n    \"filter\": {\n        \"@not\": {\n            \"@eq\": {\n                \"document_scope\": \"restricted\"\n            }\n        }\n    },\n    \"limit\": 4\n}",
        "options": {}
      },
      "type": "n8n-nodes-base.httpRequest",
      "typeVersion": 4.2,
      "position": [
        3232,
        1696
      ],
      "id": "c79cb22a-8078-4bc8-8688-01a514f1d33e",
      "name": "Cortex Document Query Name Search",
      "disabled": true
    },
    {
      "parameters": {
        "mode": "raw",
        "jsonOutput": "={\n  \"output\": {{ $json.results.toJsonString() }}\n}\n",
        "options": {}
      },
      "type": "n8n-nodes-base.set",
      "typeVersion": 3.4,
      "position": [
        3488,
        1696
      ],
      "id": "03983b32-6886-4ae5-b69f-d0f422aa1815",
      "name": "Extract only results2",
      "disabled": true
    },
    {
      "parameters": {
        "promptType": "define",
        "text": "=\n<task>\n1. Analyze, understand, and infer the goal of the message.\n2. Extract key words and phrases from the message and the intent/goal of the message. The output of this step should be a JSON list of strings.\n</task>\n\n<message>\n{{ $('Global Vars').item.json.body.message_text }}\n</message>\n\n<list_of_banned_words>\nYou should *NOT* include any of these words as a key word or part of any key phrases:\n- Omni\n- Looker\n- Dashboard\n\n<guidelines>\n## Keyword Extraction\n- should not have any words from the list_of_banned_words as a key word or use any of the banned words in any key phrases\n- should not have names of specific persons\n- should relate to business metrics, analytics, and types of business data\n- should expand out abbreviations that relate to data and business concepts (e.g. gigabyte instead of GB or terabyte instead of TB)\n</guidelines>\n\n<output_format>\nOutput should be a JSON list of strings\nExample:\n```json\n[\"keyword_1\", \"keyword_2\", \"keyword_3\"]\n```\n</output_format>",
        "hasOutputParser": true,
        "needsFallback": true,
        "options": {
          "systemMessage": "You are an expert data analyst who has built many dashboards in the Omni Analytics tool, which is a business intelligence tool, that sits on top of Snowflake data through dbt. You triage natural language queries from Stakeholders within the company in order to find the best dashboard (otherwise known as document) to answer the question. Documents, also known as dashboards, are parents of document queries, which are individual queries that run against the data within the parent document. Metadata on the documents and document queries and document query filters are stored in Snowflake and can be accessed through the Cortex Search Service and the Cortex Analyst tools."
        }
      },
      "type": "@n8n/n8n-nodes-langchain.agent",
      "typeVersion": 2.2,
      "position": [
        3152,
        2352
      ],
      "id": "67d7b2bb-2932-4157-bb22-c920ce7d7347",
      "name": "Extract Key Words Agent",
      "onError": "continueErrorOutput"
    },
    {
      "parameters": {
        "content": "### Cortex Search Document by Message\n- searches for documents\n- uses document name that is similar to the message"
      },
      "type": "n8n-nodes-base.stickyNote",
      "position": [
        2512,
        1312
      ],
      "typeVersion": 1,
      "id": "817c74a2-eb80-4bed-975d-7a220c74b43a",
      "name": "Sticky Note14",
      "disabled": true
    },
    {
      "parameters": {
        "content": "## Semantic Search by Key Words/Phrases",
        "height": 992,
        "width": 2080,
        "color": 6
      },
      "type": "n8n-nodes-base.stickyNote",
      "position": [
        2496,
        2016
      ],
      "typeVersion": 1,
      "id": "7a98e9cb-2032-4bc3-a487-4e1c852d2ec5",
      "name": "Sticky Note15"
    },
    {
      "parameters": {
        "content": "## Semantic Search by Omni Picked Topic",
        "height": 1536,
        "width": 1376,
        "color": 5
      },
      "type": "n8n-nodes-base.stickyNote",
      "position": [
        2512,
        3088
      ],
      "typeVersion": 1,
      "id": "d9873aad-bc77-4ae6-940c-b13d3c0bd719",
      "name": "Sticky Note16"
    },
    {
      "parameters": {
        "method": "POST",
        "url": "={{ $('Global Vars').item.json.snowflake_base_url }}/api/v2/databases/{{ $('Global Vars').item.json.omni_documents_search_service.snowflake_database }}/schemas/{{ $('Global Vars').item.json.omni_documents_search_service.snowflake_schema }}/cortex-search-services/{{ $('Global Vars').item.json.omni_document_queries_query_name_search_service.agent_name }}:query",
        "authentication": "genericCredentialType",
        "genericAuthType": "httpBearerAuth",
        "sendHeaders": true,
        "specifyHeaders": "json",
        "jsonHeaders": "{\n  \"Content-Type\": \"application/json\"\n}",
        "sendBody": true,
        "specifyBody": "json",
        "jsonBody": "={\n    \"query\": {{ $('Extract Key Words Agent').item.json.output.join(', ').toJsonString() }},\n    \"columns\": [\n        \"query_name\",\n        \"query_id\",\n        \"document_id\",\n        \"document_scope\",\n        \"query_table\"\n    ],\n    \"filter\": {\n        \"@not\": {\n            \"@eq\": {\n                \"document_scope\": \"restricted\"\n            }\n        }\n    },\n    \"limit\": 4\n}",
        "options": {}
      },
      "type": "n8n-nodes-base.httpRequest",
      "typeVersion": 4.2,
      "position": [
        3632,
        2576
      ],
      "id": "c131de5d-c949-4196-abe4-a935576f0b38",
      "name": "Cortex Document Query Name Search1",
      "retryOnFail": false,
      "alwaysOutputData": true,
      "onError": "continueErrorOutput"
    },
    {
      "parameters": {
        "mode": "raw",
        "jsonOutput": "={\n  \"output\": {{ $json.results.toJsonString() }}\n}\n",
        "options": {}
      },
      "type": "n8n-nodes-base.set",
      "typeVersion": 3.4,
      "position": [
        3888,
        2576
      ],
      "id": "94426b26-e36c-4f5e-b1b1-fce616f9527b",
      "name": "Extract only results3",
      "alwaysOutputData": true,
      "onError": "continueErrorOutput"
    },
    {
      "parameters": {
        "mode": "raw",
        "jsonOutput": "={\n  \"output\": {{ $json.results.toJsonString() }}\n}\n",
        "options": {}
      },
      "type": "n8n-nodes-base.set",
      "typeVersion": 3.4,
      "position": [
        3888,
        2800
      ],
      "id": "6175c3fe-857d-4d40-b643-dc9c53fb39e6",
      "name": "Extract only results4",
      "alwaysOutputData": true,
      "onError": "continueErrorOutput"
    },
    {
      "parameters": {
        "method": "POST",
        "url": "={{ $('Global Vars').item.json.snowflake_base_url }}/api/v2/databases/{{ $('Global Vars').item.json.omni_document_queries_query_table_search_service.snowflake_database }}/schemas/{{ $('Global Vars').item.json.omni_document_queries_query_table_search_service.snowflake_schema }}/cortex-search-services/{{ $('Global Vars').item.json.omni_document_queries_query_table_search_service.agent_name }}:query",
        "authentication": "genericCredentialType",
        "genericAuthType": "httpBearerAuth",
        "sendHeaders": true,
        "specifyHeaders": "json",
        "jsonHeaders": "{\n  \"Content-Type\": \"application/json\"\n}",
        "sendBody": true,
        "specifyBody": "json",
        "jsonBody": "={\n    \"query\": {{ $('Extract Key Words Agent').item.json.output.join(', ').toJsonString() }},\n    \"columns\": [\n        \"query_name\",\n        \"query_id\",\n        \"document_id\",\n        \"document_scope\",\n        \"query_table\"\n    ],\n    \"filter\": {\n        \"@not\": {\n            \"@eq\": {\n                \"document_scope\": \"restricted\"\n            }\n        }\n    },\n    \"limit\": 4\n}",
        "options": {}
      },
      "type": "n8n-nodes-base.httpRequest",
      "typeVersion": 4.2,
      "position": [
        3632,
        2800
      ],
      "id": "b3dc74e9-1a43-48cd-a640-450c27164cca",
      "name": "Cortex Document Query Table Search",
      "alwaysOutputData": true,
      "onError": "continueErrorOutput"
    },
    {
      "parameters": {
        "workflowId": {
          "__rl": true,
          "value": "0ZK5dvO3WYtsza47",
          "mode": "list",
          "cachedResultUrl": "/workflow/0ZK5dvO3WYtsza47",
          "cachedResultName": "Rename Document Keys"
        },
        "workflowInputs": {
          "mappingMode": "defineBelow",
          "value": {
            "documents": "={{ $json.output }}"
          },
          "matchingColumns": [
            "documents"
          ],
          "schema": [
            {
              "id": "documents",
              "displayName": "documents",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "canBeUsedToMatch": true,
              "type": "array",
              "removed": false
            }
          ],
          "attemptToConvertTypes": false,
          "convertFieldsToString": true
        },
        "options": {}
      },
      "type": "n8n-nodes-base.executeWorkflow",
      "typeVersion": 1.3,
      "position": [
        3776,
        4064
      ],
      "id": "466b949c-b18c-4330-8229-12222213f8e9",
      "name": "Rename Document Keys_",
      "onError": "continueErrorOutput"
    },
    {
      "parameters": {
        "operation": "executeQuery",
        "query": "WITH ids AS (\n  SELECT\n    f.index AS ord,\n    f.value::VARCHAR AS doc_id\n  FROM LATERAL FLATTEN(\n    input => ARRAY_CONSTRUCT({{ $json.document_ids.map(item => `'${item}'`).join(', ') }})  -- duplicates allowed\n  ) f\n)\nSELECT \n\n  identifier as document_id,\n  name as document_name,\n  folder_id,\n  folder_name,\n  scope as document_scope,\n  owner_name,\n  owner_id,\n  has_dashboard\nfrom ids i\nJOIN DOCUMENTS d\n  ON d.identifier = i.doc_id"
      },
      "type": "n8n-nodes-base.snowflake",
      "typeVersion": 1,
      "position": [
        6592,
        2496
      ],
      "id": "a6711124-954e-4cf4-a3ed-c15989329c70",
      "name": "Get Documents with Duplicates (multiple output)"
    },
    {
      "parameters": {
        "mode": "raw",
        "jsonOutput": "={\n  \"document_id\": \"{{ $json.DOCUMENT_ID }}\",\n  \"document_name\": \"{{ $json.DOCUMENT_NAME }}\",\n  \"folder_id\": \"{{ $json.FOLDER_ID }}\",\n  \"folder_name\": \"{{ $json.FOLDER_NAME }}\",\n  \"document_scope\": \"{{ $json.DOCUMENT_SCOPE }}\",\n  \"owner_name\": \"{{ $json.OWNER_NAME }}\",\n  \"owner_id\": \"{{ $json.OWNER_ID }}\",\n  \"has_dashboard\": \"{{ $json.HAS_DASHBOARD }}\"\n}\n",
        "options": {}
      },
      "type": "n8n-nodes-base.set",
      "typeVersion": 3.4,
      "position": [
        6832,
        2496
      ],
      "id": "2ee37df7-c18a-4562-96ed-9e84b73a6d2c",
      "name": "Keys to Lowercase"
    },
    {
      "parameters": {
        "aggregate": "aggregateAllItemData",
        "destinationFieldName": "output",
        "options": {}
      },
      "type": "n8n-nodes-base.aggregate",
      "typeVersion": 1,
      "position": [
        7072,
        2496
      ],
      "id": "0b2280ba-be9d-4db1-aea8-f893cf13f257",
      "name": "Aggregate Documents"
    },
    {
      "parameters": {
        "model": "o4-mini",
        "options": {
          "responseFormat": "json_object"
        }
      },
      "type": "@n8n/n8n-nodes-langchain.lmChatAzureOpenAi",
      "typeVersion": 1,
      "position": [
        7344,
        2784
      ],
      "id": "20bbdb5d-c6e6-40b7-a694-169421fdfd34",
      "name": "Cortex Agent o4-mini4"
    },
    {
      "parameters": {
        "modelName": "models/gemini-2.5-pro",
        "options": {}
      },
      "type": "@n8n/n8n-nodes-langchain.lmChatGoogleGemini",
      "typeVersion": 1,
      "position": [
        7200,
        2720
      ],
      "id": "e143e3c6-64d5-443c-b902-e8cdec863eb3",
      "name": "Map Reduce Agent Gemini 2.5 Pro"
    },
    {
      "parameters": {
        "content": "```\n[\n  {\n    \"body\": {\n      \"channel_id\": \"C08AVACNUER\",\n      \"channel_name\": \"data-eng-test-channel\",\n      \"conversation_id\": \"C08AVACNUER\",\n      \"event_id\": \"1758674436.000760\",\n      \"event_timestamp\": \"2025-09-24T00:40:36.000Z\",\n      \"is_message_user_bot\": \"False\",\n      \"message_text\": \"customer breakdown\",\n      \"message_timestamp\": \"2025-09-24T00:39:00.400Z\",\n      \"message_ts\": \"1758674340.400329\",\n      \"message_user_email\": \"ataggart@cribl.io\",\n      \"message_user_first_name\": \"Alec\",\n      \"message_user_id\": \"U050E77CEQP\",\n      \"message_user_last_name\": \"Taggart\",\n      \"message_user_name\": \"alec_taggart\",\n      \"reaction\": \"eyes\",\n      \"reaction_user_email\": \"nkwok@cribl.io\",\n      \"reaction_user_id\": \"U06PVBEK9T6\",\n      \"team_domain\": \"cribl\",\n      \"team_id\": \"T3XQYAF26\"\n    },\n    \"snowflake_base_url\": \"https://ml16699-hya89079.snowflakecomputing.com\",\n    \"omni_documents_search_service\": {\n      \"snowflake_database\": \"ANALYTICS\",\n      \"snowflake_schema\": \"OMNI\",\n      \"service_name\": \"omni_documents_search_service\"\n    },\n    \"omni_document_queries_query_table_search_service\": {\n      \"snowflake_database\": \"ANALYTICS\",\n      \"snowflake_schema\": \"OMNI\",\n      \"agent_name\": \"omni_document_queries_query_table_search_service\"\n    },\n    \"omni_document_queries_query_name_search_service\": {\n      \"snowflake_database\": \"ANALYTICS\",\n      \"snowflake_schema\": \"OMNI\",\n      \"agent_name\": \"omni_document_queries_query_name_search_service\"\n    },\n    \"omni_documents_analyst_agent\": {\n      \"snowflake_database\": \"SNOWFLAKE_INTELLIGENCE\",\n      \"snowflake_schema\": \"AGENTS\",\n      \"agent_name\": \"OMNI_DOCUMENTS_ANALYST_AGENT\"\n    },\n    \"zapier_slack_response_webhook\": {\n      \"webhook_url\": \"https://hooks.zapier.com/hooks/catch/23046078/u1mp0gx/\"\n    },\n    \"slack\": {\n      \"error_message\": \"The Omni agent could not find relevant dashboards :cry:\"\n    },\n    \"omni\": {\n      \"omni_base_url\": \"https://cribl.omniapp.co\",\n      \"model_id\": \"4345b118-cbbe-4f7c-a705-ea0aa8da57c0\"\n    }\n  }\n]\n```",
        "height": 448,
        "width": 576
      },
      "type": "n8n-nodes-base.stickyNote",
      "position": [
        1168,
        1280
      ],
      "typeVersion": 1,
      "id": "48fd16b2-8fe8-465e-910f-f6dd2418d810",
      "name": "Sticky Note17"
    },
    {
      "parameters": {
        "content": "## Alec message \n\n```\n[\n  {\n    \"headers\": {\n      \"host\": \"n8n-relayer-1.app.n8n.cloud\",\n      \"user-agent\": \"Zapier\",\n      \"content-length\": \"631\",\n      \"accept\": \"*/*\",\n      \"accept-encoding\": \"gzip, br\",\n      \"authorization\": \"Basic emFwaWVyOldNRXY4NDlmcGZGVlpYNkdoQjM2MGFmT3JmMWtfRFF2TlhfOFRSSjEzS1U=\",\n      \"cdn-loop\": \"cloudflare; loops=1; subreqs=1\",\n      \"cf-connecting-ip\": \"44.220.253.91\",\n      \"cf-ew-via\": \"15\",\n      \"cf-ipcountry\": \"US\",\n      \"cf-ray\": \"986f820887040616-IAD\",\n      \"cf-visitor\": \"{\\\"scheme\\\":\\\"https\\\"}\",\n      \"cf-worker\": \"n8n.cloud\",\n      \"content-type\": \"application/json; charset=utf-8\",\n      \"x-forwarded-for\": \"44.220.253.91, 172.70.42.195\",\n      \"x-forwarded-host\": \"n8n-relayer-1.app.n8n.cloud\",\n      \"x-forwarded-port\": \"443\",\n      \"x-forwarded-proto\": \"https\",\n      \"x-forwarded-server\": \"traefik-prod-users-gwc-72-585f59b6c7-ndz7z\",\n      \"x-is-trusted\": \"yes\",\n      \"x-real-ip\": \"44.220.253.91\"\n    },\n    \"params\": {},\n    \"query\": {},\n    \"body\": {\n      \"channel_id\": \"C08AVACNUER\",\n      \"channel_name\": \"data-eng-test-channel\",\n      \"conversation_id\": \"C08AVACNUER\",\n      \"event_id\": \"1758674436.000760\",\n      \"event_timestamp\": \"2025-09-24T00:40:36.000Z\",\n      \"is_message_user_bot\": \"False\",\n      \"message_text\": \"customer breakdown\",\n      \"message_timestamp\": \"2025-09-24T00:39:00.400Z\",\n      \"message_ts\": \"1758674340.400329\",\n      \"message_user_email\": \"ataggart@cribl.io\",\n      \"message_user_first_name\": \"Alec\",\n      \"message_user_id\": \"U050E77CEQP\",\n      \"message_user_last_name\": \"Taggart\",\n      \"message_user_name\": \"alec_taggart\",\n      \"reaction\": \"eyes\",\n      \"reaction_user_email\": \"nkwok@cribl.io\",\n      \"reaction_user_id\": \"U06PVBEK9T6\",\n      \"team_domain\": \"cribl\",\n      \"team_id\": \"T3XQYAF26\"\n    },\n    \"webhookUrl\": \"https://n8n-relayer-1.app.n8n.cloud/webhook-test/8394a134-6af3-4ec0-b605-3270129037cc\",\n    \"executionMode\": \"test\"\n  }\n]\n```",
        "height": 752,
        "width": 576
      },
      "type": "n8n-nodes-base.stickyNote",
      "position": [
        -64,
        2320
      ],
      "typeVersion": 1,
      "id": "8850ed95-c5ed-4152-9a11-e2432a5304ac",
      "name": "Sticky Note19"
    },
    {
      "parameters": {
        "operation": "executeQuery",
        "query": "SELECT count(*) as \"count\" FROM \"{{ $('Global Vars').first().json.snowflake_tables.dashboard_recommendations.snowflake_database }}\".\"{{ $('Global Vars').first().json.snowflake_tables.dashboard_recommendations.snowflake_schema }}\".\"{{ $('Global Vars').first().json.snowflake_tables.dashboard_recommendations.table_name }}\" WHERE event_id = '{{ $json.event_id }}'"
      },
      "type": "n8n-nodes-base.snowflake",
      "typeVersion": 1,
      "position": [
        9872,
        2496
      ],
      "id": "466cc540-c3f9-4bab-98e6-2c07635112d6",
      "name": "Find Count for Event ID"
    },
    {
      "parameters": {
        "conditions": {
          "options": {
            "caseSensitive": true,
            "leftValue": "",
            "typeValidation": "strict",
            "version": 2
          },
          "conditions": [
            {
              "id": "c806ba43-d60d-4a2e-8d62-281726ec7bf6",
              "leftValue": "={{ $json.count }}",
              "rightValue": 0,
              "operator": {
                "type": "number",
                "operation": "equals"
              }
            }
          ],
          "combinator": "and"
        },
        "options": {}
      },
      "type": "n8n-nodes-base.if",
      "typeVersion": 2.2,
      "position": [
        10112,
        2496
      ],
      "id": "fab91ddc-afd2-42b5-9a26-0aa2b019fd60",
      "name": "If"
    },
    {
      "parameters": {
        "table": "={{ $('Global Vars').first().json.snowflake_tables.dashboard_recommendations.table_name }}",
        "columns": "={{ $('Retrieve Mapped Object').item.json.keys().join(\",\") }}"
      },
      "type": "n8n-nodes-base.snowflake",
      "typeVersion": 1,
      "position": [
        10640,
        2480
      ],
      "id": "704c11b1-f897-4b21-8e6b-889343dd65d8",
      "name": "Insert Feedback into Snowflake"
    },
    {
      "parameters": {
        "mode": "raw",
        "jsonOutput": "={{ $('Map Feedback to Snowflake Schema').item.json }}\n",
        "options": {}
      },
      "type": "n8n-nodes-base.set",
      "typeVersion": 3.4,
      "position": [
        10400,
        2480
      ],
      "id": "e85b945f-9a49-46fd-bfa5-5cb870012b36",
      "name": "Retrieve Mapped Object"
    },
    {
      "parameters": {
        "jsCode": "const input = $input.first().json;\n\nconst mapping = input.table_schema_mapping;\nconst body = input.body;\n\nconst result = {};\n\n// 1) Map fields from body per table_schema_mapping\nfor (const [outKey, bodyKey] of Object.entries(mapping)) {\n  result[outKey] = body?.[bodyKey];\n}\n\n// 2) Copy every other top-level key except \"body\" and \"table_schema_mapping\"\n//    Don't overwrite keys already set from the mapping.\nfor (const [key, value] of Object.entries(input)) {\n  if (key === 'body' || key === 'table_schema_mapping') continue;\n  if (key in mapping) continue; // avoid clobbering mapped fields\n  result[key] = value.trim();\n}\n\nreturn result;\n"
      },
      "type": "n8n-nodes-base.code",
      "typeVersion": 2,
      "position": [
        9600,
        2496
      ],
      "id": "96d3cd39-7773-4a95-8b48-2c6e538efd47",
      "name": "Map Feedback to Snowflake Schema"
    },
    {
      "parameters": {
        "mode": "raw",
        "jsonOutput": "={\n  \"body\": {{ $('Global Vars').first().json.body.toJsonString() }},\n  \"table_schema_mapping\": {\n    \"event_id\": \"event_id\",\n    \"event_timestamp\": \"event_timestamp\",\n    \"message_ts\": \"message_ts\",\n    \"message_timestamp\": \"message_timestamp\",\n    \"message_text\": \"message_text\",\n    \"message_user_name\": \"message_user_name\",\n    \"message_user_email\": \"message_user_email\",\n    \"message_user_id\": \"message_user_id\",\n    \"reaction\": \"reaction\",\n    \"reaction_user_id\": \"reaction_user_id\",\n    \"reaction_user_email\": \"reaction_user_email\",\n    \"channel_id\": \"channel_id\",\n    \"channel_name\": \"channel_name\",\n    \"conversation_id\": \"conversation_id\",\n    \"team_id\": \"team_id\",\n    \"team_domain\": \"team_domain\"\n  },\n  \"retrieved_document_ids\": {{ JSON.stringify($('Aggregate Document Ids').first().json.document_ids.toJsonString())\n  }},\n\n  \"retrieved_document_id_counts\": {{ \n    JSON.stringify(\n      Object.fromEntries($('Map Reduce Document Count').first().json.output.map(\n            item => [item.document_id, item.count]\n          )).toJsonString()\n    )\n  }},\n\n  {{ $json.toJsonString().slice(1, -1) }}\n  \n  \n}",
        "options": {}
      },
      "type": "n8n-nodes-base.set",
      "typeVersion": 3.4,
      "position": [
        9328,
        2496
      ],
      "id": "57a1edf5-73d0-48ee-a7a6-bac456b85f2f",
      "name": "Insert Table Schema Mapping",
      "alwaysOutputData": true
    },
    {
      "parameters": {
        "content": "## Save recommendation to Snowflake `omni_dashboard_recommendations`",
        "height": 656,
        "width": 1008,
        "color": 6
      },
      "type": "n8n-nodes-base.stickyNote",
      "position": [
        9792,
        2304
      ],
      "typeVersion": 1,
      "id": "f52d0740-722f-4db3-808b-4a2ab750f634",
      "name": "Sticky Note20"
    },
    {
      "parameters": {
        "content": "## Map-Reduce to rank suggested docs\n1. Aggregate all document ids (has duplicates)\n2. Get document id with count\n3. Rank by count desc",
        "height": 656,
        "width": 1440,
        "color": 3
      },
      "type": "n8n-nodes-base.stickyNote",
      "position": [
        6240,
        2304
      ],
      "typeVersion": 1,
      "id": "9b225290-21d7-48f3-a0ee-55ea81d0d983",
      "name": "Sticky Note21"
    },
    {
      "parameters": {
        "content": "filter for if has error? \nrest of output might still be good? \nerror message send to slack at all? \n"
      },
      "type": "n8n-nodes-base.stickyNote",
      "position": [
        6688,
        1952
      ],
      "typeVersion": 1,
      "id": "f887f9eb-6dfb-4a20-99a4-2db99a244aec",
      "name": "Sticky Note22"
    },
    {
      "parameters": {
        "content": "```\nCREATE TABLE IF NOT EXISTS dashboard_recommendations (\n    -- Event identifiers\n    event_id VARCHAR(17) PRIMARY KEY,                    -- \"1758674436.000760\"\n    event_timestamp TIMESTAMP_TZ NOT NULL,               -- \"2025-09-24T00:40:36.000Z\"\n\n    -- Message information\n    message_ts VARCHAR(17) NOT NULL,                     -- \"1758674340.400329\"\n    message_timestamp TIMESTAMP_TZ NOT NULL,             -- \"2025-09-24T00:39:00.400Z\"\n    message_text TEXT NOT NULL,                                   -- \"customer breakdown\"\n\n    -- Message user information\n    message_user_name VARCHAR(100),                      -- \"alec_taggart\"\n    message_user_email VARCHAR(75) NOT NULL,                     -- \"ataggart@cribl.io\"\n    message_user_id VARCHAR(11) NOT NULL,               -- \"U050E77CEQP\"\n\n    -- Reaction information\n    reaction VARCHAR(50) NOT NULL,                       -- \"eyes\"\n    reaction_user_id VARCHAR(11) NOT NULL,               -- \"U06PVBEK9T6\"\n    reaction_user_email VARCHAR(75) NOT NULL,                    -- \"nkwok@cribl.io\"\n\n    -- Channel and conversation context\n    channel_id VARCHAR(11) NOT NULL,                     -- \"C08AVACNUER\"\n    channel_name VARCHAR(255),                           -- \"data-eng-test-channel\"\n    conversation_id VARCHAR(11),                         -- \"C08AVACNUER\"\n\n    -- Team/workspace information\n    team_id VARCHAR(9) NOT NULL,                        -- \"T3XQYAF26\"\n    team_domain VARCHAR(100),                            -- \"cribl\"\n\n    -- Metadata timestamps\n    created_at TIMESTAMP_TZ DEFAULT CURRENT_TIMESTAMP(),\n    updated_at TIMESTAMP_TZ DEFAULT CURRENT_TIMESTAMP()\n);\n```",
        "height": 144,
        "width": 640
      },
      "type": "n8n-nodes-base.stickyNote",
      "position": [
        9872,
        2032
      ],
      "typeVersion": 1,
      "id": "68a68bb9-bf1a-4309-8686-9b85b8099bc6",
      "name": "Sticky Note23"
    },
    {
      "parameters": {
        "content": "```\n[\n  {\n    \"headers\": {\n      \"host\": \"n8n-relayer-1.app.n8n.cloud\",\n      \"user-agent\": \"PostmanRuntime/7.47.1\",\n      \"content-length\": \"948\",\n      \"accept\": \"*/*\",\n      \"accept-encoding\": \"gzip, br\",\n      \"authorization\": \"Basic emFwaWVyOldNRXY4NDlmcGZGVlpYNkdoQjM2MGFmT3JmMWtfRFF2TlhfOFRSSjEzS1U=\",\n      \"cdn-loop\": \"cloudflare; loops=1; subreqs=1\",\n      \"cf-connecting-ip\": \"172.56.42.92\",\n      \"cf-ew-via\": \"15\",\n      \"cf-ipcountry\": \"US\",\n      \"cf-ray\": \"986fe3e933d24b1f-LAX\",\n      \"cf-visitor\": \"{\\\"scheme\\\":\\\"https\\\"}\",\n      \"cf-worker\": \"n8n.cloud\",\n      \"content-type\": \"application/json\",\n      \"x-forwarded-for\": \"172.56.42.92, 104.23.251.97\",\n      \"x-forwarded-host\": \"n8n-relayer-1.app.n8n.cloud\",\n      \"x-forwarded-port\": \"443\",\n      \"x-forwarded-proto\": \"https\",\n      \"x-forwarded-server\": \"traefik-prod-users-gwc-72-585f59b6c7-ndz7z\",\n      \"x-is-trusted\": \"yes\",\n      \"x-real-ip\": \"172.56.42.92\"\n    },\n    \"params\": {},\n    \"query\": {},\n    \"body\": {\n      \"channel_id\": \"C0912AANW1L\",\n      \"channel_name\": \"data-eng-test-ai-channel\",\n      \"conversation_id\": \"C0912AANW1L\",\n      \"event_id\": \"1759194864.008200\",\n      \"event_timestamp\": \"2025-09-30T01:14:24.008Z\",\n      \"is_message_user_bot\": \"False\",\n      \"message_text\": \"Hi team - Is there a dashboard in Omni to see free cribl cloud users, and associated email addresses within accounts I own similar to https://cribl.cloud.looker.com/explore/Product/cloud_orgs?qid=6AczKnvfgAdLscURN8AKDq&amp;toggle=filthis one> I used in looker?\",\n      \"message_timestamp\": \"2025-09-30T01:14:21.395Z\",\n      \"message_ts\": \"1759194861.395459\",\n      \"message_user_email\": \"nkwok@cribl.io\",\n      \"message_user_first_name\": \"Nathan\",\n      \"message_user_id\": \"U06PVBEK9T6\",\n      \"message_user_last_name\": \"Kwok\",\n      \"message_user_name\": \"nathan_kwok\",\n      \"reaction\": \"omni\",\n      \"reaction_user_email\": \"nkwok@cribl.io\",\n      \"reaction_user_id\": \"U06PVBEK9T6\",\n      \"team_domain\": \"cribl\",\n      \"team_id\": \"T3XQYAF26\"\n    },\n    \"webhookUrl\": \"https://n8n-relayer-1.app.n8n.cloud/webhook-test/8394a134-6af3-4ec0-b605-3270129037cc\",\n    \"executionMode\": \"test\"\n  }\n]\n```",
        "height": 640,
        "width": 704
      },
      "type": "n8n-nodes-base.stickyNote",
      "position": [
        -112,
        1424
      ],
      "typeVersion": 1,
      "id": "f3f970e1-9b46-4f9e-a4ff-e220a0c605bb",
      "name": "Sticky Note1"
    },
    {
      "parameters": {
        "workflowId": {
          "__rl": true,
          "value": "OFpD7aepKHcHCvqz",
          "mode": "list",
          "cachedResultUrl": "/workflow/OFpD7aepKHcHCvqz",
          "cachedResultName": "Global Vars"
        },
        "workflowInputs": {
          "mappingMode": "defineBelow",
          "value": {}
        },
        "options": {}
      },
      "type": "n8n-nodes-base.executeWorkflow",
      "typeVersion": 1.3,
      "position": [
        1104,
        1440
      ],
      "id": "eb315f13-90cb-4c23-857b-259ab5029429",
      "name": "Global Vars"
    },
    {
      "parameters": {
        "fieldToSplitOut": "document_ids",
        "options": {}
      },
      "type": "n8n-nodes-base.splitOut",
      "typeVersion": 1,
      "position": [
        5392,
        2496
      ],
      "id": "69d58f98-f386-4c59-9809-a277344048ed",
      "name": "For each document id"
    },
    {
      "parameters": {
        "url": "={{ $('Global Vars').item.json.omni_api.omni_base_url }}/api/v1/documents/{{ $json.document_ids }}/permissions?userId={{ $('Global Vars').item.json.omni_api.omni_user_id }}",
        "authentication": "genericCredentialType",
        "genericAuthType": "httpBearerAuth",
        "options": {
          "response": {
            "response": {
              "fullResponse": true,
              "neverError": true,
              "responseFormat": "json"
            }
          }
        }
      },
      "type": "n8n-nodes-base.httpRequest",
      "typeVersion": 4.2,
      "position": [
        5600,
        2496
      ],
      "id": "336becaf-00e7-4242-b18d-012925f9bc72",
      "name": "Get Document Permissions for User Id",
      "alwaysOutputData": false,
      "onError": "continueRegularOutput"
    },
    {
      "parameters": {
        "assignments": {
          "assignments": [
            {
              "id": "baa27ca0-bd33-4e8c-86ed-b03bbff2d2c5",
              "name": "permits",
              "value": "={{ $json.body.permits }}",
              "type": "array"
            },
            {
              "id": "6cae7aae-fc2e-422a-b27b-5fe3bdd0608e",
              "name": "document_id",
              "value": "={{ $('For each document id').item.json.document_ids }}",
              "type": "string"
            },
            {
              "id": "00e5f5fc-236c-4f14-ad14-3ec592aa149a",
              "name": "status_code",
              "value": "={{ $json.statusCode }}",
              "type": "number"
            }
          ]
        },
        "options": {}
      },
      "type": "n8n-nodes-base.set",
      "typeVersion": 3.4,
      "position": [
        5808,
        2496
      ],
      "id": "94b1eac0-cead-4b42-bbdf-aa2a2d07c182",
      "name": "Merge Permits and Document Ids",
      "onError": "continueRegularOutput"
    },
    {
      "parameters": {
        "conditions": {
          "options": {
            "caseSensitive": true,
            "leftValue": "",
            "typeValidation": "strict",
            "version": 2
          },
          "conditions": [
            {
              "id": "497bc14a-115b-428f-99f6-1c32b5489e04",
              "leftValue": "={{ $json.status_code }}",
              "rightValue": 200,
              "operator": {
                "type": "number",
                "operation": "equals"
              }
            },
            {
              "id": "e71ab3c2-013c-47e4-8088-5dfab923abc4",
              "leftValue": "={{ $json.permits }}",
              "rightValue": 0,
              "operator": {
                "type": "array",
                "operation": "lengthGt",
                "rightType": "number"
              }
            }
          ],
          "combinator": "and"
        },
        "options": {}
      },
      "type": "n8n-nodes-base.filter",
      "typeVersion": 2.2,
      "position": [
        6016,
        2496
      ],
      "id": "ca2f751b-cd7f-42c7-98ab-4a3b506020de",
      "name": "Filter out no permissions documents",
      "onError": "continueRegularOutput"
    },
    {
      "parameters": {
        "fieldsToAggregate": {
          "fieldToAggregate": [
            {
              "fieldToAggregate": "document_ids"
            }
          ]
        },
        "options": {
          "mergeLists": true
        }
      },
      "type": "n8n-nodes-base.aggregate",
      "typeVersion": 1,
      "position": [
        5264,
        2816
      ],
      "id": "e0182287-c1bb-4679-b9d2-efffa073ad7b",
      "name": "Aggregate Document Ids (Not needed for now)",
      "disabled": true,
      "onError": "continueRegularOutput"
    },
    {
      "parameters": {
        "fieldsToAggregate": {
          "fieldToAggregate": [
            {
              "fieldToAggregate": "document_id",
              "renameField": true,
              "outputFieldName": "document_ids"
            }
          ]
        },
        "options": {}
      },
      "type": "n8n-nodes-base.aggregate",
      "typeVersion": 1,
      "position": [
        6352,
        2496
      ],
      "id": "c3d323ab-5043-4ed4-85c5-ad05dc97f588",
      "name": "Aggregate Document Ids",
      "onError": "continueRegularOutput"
    },
    {
      "parameters": {
        "content": "## Filter out documents that user doesn't have permissions to\n- for each document, check the document permissions object for that user",
        "height": 464,
        "width": 912,
        "color": 7
      },
      "type": "n8n-nodes-base.stickyNote",
      "position": [
        5248,
        2320
      ],
      "typeVersion": 1,
      "id": "4bfa2f1a-b474-4ea7-a7d4-e0e6f3995b64",
      "name": "Sticky Note25"
    },
    {
      "parameters": {
        "fieldsToAggregate": {
          "fieldToAggregate": [
            {
              "fieldToAggregate": "topicName",
              "renameField": true,
              "outputFieldName": "topic_name"
            }
          ]
        },
        "options": {}
      },
      "type": "n8n-nodes-base.aggregate",
      "typeVersion": 1,
      "position": [
        2688,
        3456
      ],
      "id": "8c374449-14d3-4340-8537-e658586560b3",
      "name": "Aggregate Topic Names",
      "alwaysOutputData": true,
      "notesInFlow": true,
      "onError": "continueRegularOutput",
      "notes": "Combine into one list (not unique)"
    },
    {
      "parameters": {
        "numberInputs": 3
      },
      "type": "n8n-nodes-base.merge",
      "typeVersion": 3.2,
      "position": [
        2464,
        3440
      ],
      "id": "35612656-a3db-44c8-bad2-22aba5062f2c",
      "name": "Merge Topic Names",
      "alwaysOutputData": true,
      "onError": "continueRegularOutput"
    },
    {
      "parameters": {
        "promptType": "define",
        "text": "=You must use the Cortex Search Query Name and the Cortex Search Query Nameto find document query filters that are similar to the topics:\n- Cortex Search Query Name\n- Cortex Search Query Table\n\nYour input is a list of Omni Analytic topics, which are high level objects that describe the underlying dbt model being used to query for business data and analytics. \n\n<task>\n1. **CRITICAL**: Make sure to deduplicate the input topics list so that you have a unique set of topic names\n2. For each topic in the unique set of topic names, give the topic as a string parameter to the tool.\n3. Then aggregate the responses from each tool call into a single list of document query objects.\n</task>\n\n<topics>\n{{ $json.topic_name }}\n</topics>\n\n\nThe Cortex Search Query Name and Cortex Search Query Table tools will return a list of results, which represents document queries. Each document query object is in this structure.\n\n<document_query_structure>\n```json\n{\n\"query_table\": \"engineering__azure_cloud_cost\",\n\"document_scope\": \"organization\",\n\"query_name\": \"Monthly Costs by Usage\",\n\"document_id\": \"45d06a29\",\n\"query_id\": \"b3fe0946-15c0-4ea5-a6ff-fd8f23ac5964\"\n}\n```\n</document_query_structure>\n\n\n\n<output_format>\nOutput the aggregated output as a structured JSON **list** of documents queries, with each document query object in the same structure as document_query_structure.\n</output_format>",
        "hasOutputParser": true,
        "needsFallback": true,
        "options": {
          "systemMessage": "You are an expert data analyst who has built many dashboards in the Omni Analytics tool, which is a business intelligence tool, that sits on top of Snowflake data through dbt. You triage natural language queries from Stakeholders within the company in order to find the best dashboard (otherwise known as document) to answer the question. Documents, also known as dashboards, are parents of document queries, which are individual queries that run against the data within the parent document. Metadata on the documents and document queries and document query filters are stored in Snowflake and can be accessed through the Cortex Search Service and the Cortex Analyst tools."
        }
      },
      "type": "@n8n/n8n-nodes-langchain.agent",
      "typeVersion": 2.2,
      "position": [
        3216,
        3456
      ],
      "id": "c3d9a7c2-26ca-4065-872f-70c6fef92634",
      "name": "Cortex Search Document Query by Topic",
      "onError": "continueErrorOutput"
    },
    {
      "parameters": {
        "workflowId": {
          "__rl": true,
          "value": "1AP3Bf5ELqJvYARR",
          "mode": "list",
          "cachedResultUrl": "/workflow/1AP3Bf5ELqJvYARR",
          "cachedResultName": "Extract document_ids"
        },
        "workflowInputs": {
          "mappingMode": "defineBelow",
          "value": {
            "objects": "={{ $json.output }}"
          },
          "matchingColumns": [
            "objects"
          ],
          "schema": [
            {
              "id": "objects",
              "displayName": "objects",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "canBeUsedToMatch": true,
              "type": "array",
              "removed": false
            }
          ],
          "attemptToConvertTypes": false,
          "convertFieldsToString": true
        },
        "options": {}
      },
      "type": "n8n-nodes-base.executeWorkflow",
      "typeVersion": 1.3,
      "position": [
        4128,
        2800
      ],
      "id": "8fa137d5-8701-4b17-bb10-e05f4995b557",
      "name": "Keyword Document Query Table Search Results",
      "alwaysOutputData": true,
      "onError": "continueErrorOutput"
    },
    {
      "parameters": {
        "workflowId": {
          "__rl": true,
          "value": "1AP3Bf5ELqJvYARR",
          "mode": "list",
          "cachedResultUrl": "/workflow/1AP3Bf5ELqJvYARR",
          "cachedResultName": "Extract document_ids"
        },
        "workflowInputs": {
          "mappingMode": "defineBelow",
          "value": {
            "objects": "={{ $json.output }}"
          },
          "matchingColumns": [
            "objects"
          ],
          "schema": [
            {
              "id": "objects",
              "displayName": "objects",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "canBeUsedToMatch": true,
              "type": "array",
              "removed": false
            }
          ],
          "attemptToConvertTypes": false,
          "convertFieldsToString": true
        },
        "options": {}
      },
      "type": "n8n-nodes-base.executeWorkflow",
      "typeVersion": 1.3,
      "position": [
        3760,
        3440
      ],
      "id": "94423927-edbd-41d0-acef-0db51275f6c1",
      "name": "Topic Document Query Search Results",
      "onError": "continueErrorOutput"
    },
    {
      "parameters": {
        "workflowId": {
          "__rl": true,
          "value": "1AP3Bf5ELqJvYARR",
          "mode": "list",
          "cachedResultUrl": "/workflow/1AP3Bf5ELqJvYARR",
          "cachedResultName": "Extract document_ids"
        },
        "workflowInputs": {
          "mappingMode": "defineBelow",
          "value": {
            "objects": "={{ $json.output }}"
          },
          "matchingColumns": [
            "objects"
          ],
          "schema": [
            {
              "id": "objects",
              "displayName": "objects",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "canBeUsedToMatch": true,
              "type": "array",
              "removed": false
            }
          ],
          "attemptToConvertTypes": false,
          "convertFieldsToString": true
        },
        "options": {}
      },
      "type": "n8n-nodes-base.executeWorkflow",
      "typeVersion": 1.3,
      "position": [
        4016,
        4048
      ],
      "id": "cd59d1fa-c8c5-45be-aad0-090aa4e9b274",
      "name": "Topic Document Search Results",
      "onError": "continueErrorOutput"
    },
    {
      "parameters": {
        "workflowId": {
          "__rl": true,
          "value": "1AP3Bf5ELqJvYARR",
          "mode": "list",
          "cachedResultUrl": "/workflow/1AP3Bf5ELqJvYARR",
          "cachedResultName": "Extract document_ids"
        },
        "workflowInputs": {
          "mappingMode": "defineBelow",
          "value": {
            "objects": "={{ $json.output }}"
          },
          "matchingColumns": [
            "objects"
          ],
          "schema": [
            {
              "id": "objects",
              "displayName": "objects",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "canBeUsedToMatch": true,
              "type": "array",
              "removed": false
            }
          ],
          "attemptToConvertTypes": false,
          "convertFieldsToString": true
        },
        "options": {}
      },
      "type": "n8n-nodes-base.executeWorkflow",
      "typeVersion": 1.3,
      "position": [
        4128,
        2576
      ],
      "id": "f55083c3-9798-4209-bc4b-79f1d10ac7fd",
      "name": "Keyword Document Query Name Search Results",
      "alwaysOutputData": true,
      "onError": "continueErrorOutput"
    },
    {
      "parameters": {
        "workflowId": {
          "__rl": true,
          "value": "1AP3Bf5ELqJvYARR",
          "mode": "list",
          "cachedResultUrl": "/workflow/1AP3Bf5ELqJvYARR",
          "cachedResultName": "Extract document_ids"
        },
        "workflowInputs": {
          "mappingMode": "defineBelow",
          "value": {
            "objects": "={{ $json.output }}"
          },
          "matchingColumns": [
            "objects"
          ],
          "schema": [
            {
              "id": "objects",
              "displayName": "objects",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "canBeUsedToMatch": true,
              "type": "array",
              "removed": false
            }
          ],
          "attemptToConvertTypes": false,
          "convertFieldsToString": true
        },
        "options": {}
      },
      "type": "n8n-nodes-base.executeWorkflow",
      "typeVersion": 1.3,
      "position": [
        4352,
        2336
      ],
      "id": "9d9dfb79-305c-4289-8151-22b871eccc56",
      "name": "Keyword Document Name Search Results",
      "alwaysOutputData": true,
      "onError": "continueErrorOutput"
    },
    {
      "parameters": {
        "workflowId": {
          "__rl": true,
          "value": "1AP3Bf5ELqJvYARR",
          "mode": "list",
          "cachedResultUrl": "/workflow/1AP3Bf5ELqJvYARR",
          "cachedResultName": "Extract document_ids"
        },
        "workflowInputs": {
          "mappingMode": "defineBelow",
          "value": {
            "objects": "={{ $json.output }}"
          },
          "matchingColumns": [
            "objects"
          ],
          "schema": [
            {
              "id": "objects",
              "displayName": "objects",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "canBeUsedToMatch": true,
              "type": "array",
              "removed": false
            }
          ],
          "attemptToConvertTypes": false,
          "convertFieldsToString": true
        },
        "options": {}
      },
      "type": "n8n-nodes-base.executeWorkflow",
      "typeVersion": 1.3,
      "position": [
        3728,
        1696
      ],
      "id": "b7e26604-96cb-4a72-8c2a-3c4cb646ddcf",
      "name": "Message Document Query Name Search Results",
      "disabled": true
    },
    {
      "parameters": {
        "workflowId": {
          "__rl": true,
          "value": "1AP3Bf5ELqJvYARR",
          "mode": "list",
          "cachedResultUrl": "/workflow/1AP3Bf5ELqJvYARR",
          "cachedResultName": "Extract document_ids"
        },
        "workflowInputs": {
          "mappingMode": "defineBelow",
          "value": {
            "objects": "={{ $json.output }}"
          },
          "matchingColumns": [
            "objects"
          ],
          "schema": [
            {
              "id": "objects",
              "displayName": "objects",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "canBeUsedToMatch": true,
              "type": "array",
              "removed": false
            }
          ],
          "attemptToConvertTypes": false,
          "convertFieldsToString": true
        },
        "options": {}
      },
      "type": "n8n-nodes-base.executeWorkflow",
      "typeVersion": 1.3,
      "position": [
        3968,
        1344
      ],
      "id": "ce9c0751-ccd6-47a0-b0be-fba06768f0d1",
      "name": "Message Document Name Search Results",
      "disabled": true
    },
    {
      "parameters": {
        "mode": "raw",
        "jsonOutput": "={\n  \"output\": {\n    \"process_name\": \"keyword_document_name_search_results\",\n    \"document_ids\": {{ $json.document_ids }}\n  }\n}\n",
        "options": {}
      },
      "type": "n8n-nodes-base.set",
      "typeVersion": 3.4,
      "position": [
        5264,
        3280
      ],
      "id": "44ea4d34-2bc3-4346-8ee2-0bf2ffa1699e",
      "name": "Keyword Document Name Search Results JSON"
    },
    {
      "parameters": {
        "mode": "raw",
        "jsonOutput": "={\n  \"output\": {\n    \"process_name\": \"keyword_document_query_name_search_results\",\n    \"document_ids\": {{ $json.document_ids }}\n  }\n}\n",
        "options": {}
      },
      "type": "n8n-nodes-base.set",
      "typeVersion": 3.4,
      "position": [
        5264,
        3520
      ],
      "id": "40799e0d-3472-4712-9988-a5dd70f051ae",
      "name": "Keyword Document Query Name Search Results JSON"
    },
    {
      "parameters": {
        "mode": "raw",
        "jsonOutput": "={\n  \"output\": {\n    \"process_name\": \"keyword_document_query_table_search_results\",\n    \"document_ids\": {{ $json.document_ids }}\n  }\n}\n",
        "options": {}
      },
      "type": "n8n-nodes-base.set",
      "typeVersion": 3.4,
      "position": [
        5264,
        3744
      ],
      "id": "1a653b43-d43f-4f8b-bf80-803c4b1f4e2f",
      "name": "Keyword Document Query Table Search Results JSON"
    },
    {
      "parameters": {
        "mode": "raw",
        "jsonOutput": "={\n  \"output\": {\n    \"process_name\": \"topic_document_query_search_results\",\n    \"document_ids\": {{ $json.document_ids }}\n  }\n}\n",
        "options": {}
      },
      "type": "n8n-nodes-base.set",
      "typeVersion": 3.4,
      "position": [
        5264,
        3984
      ],
      "id": "3bc64c2b-efcf-4bc4-964e-e7126cbeef99",
      "name": "Topic Document Query Search Results JSON"
    },
    {
      "parameters": {
        "mode": "raw",
        "jsonOutput": "={\n  \"output\": {\n    \"process_name\": \"topic_document_search_results\",\n    \"document_ids\": {{ $json.document_ids }}\n  }\n}",
        "options": {}
      },
      "type": "n8n-nodes-base.set",
      "typeVersion": 3.4,
      "position": [
        5264,
        4224
      ],
      "id": "12c65539-ebbe-4999-ad12-c668708cff37",
      "name": "Topic Document Search Results JSON"
    },
    {
      "parameters": {
        "numberInputs": 5
      },
      "type": "n8n-nodes-base.merge",
      "typeVersion": 3.2,
      "position": [
        5776,
        3584
      ],
      "id": "afadc176-4b24-4fa2-8140-cfdd046eaea5",
      "name": "Merge"
    },
    {
      "parameters": {
        "content": "\n<task>\n1. Analyze, understand, and infer the goal of the message.\n2. Extract key words and phrases from the message and the intent/goal of the message. The output of this step should be a single comma sepeparated string of words and phrases.\n</task>\n\n<message>\n{{ $('Global Vars').item.json.body.message_text }}\n</message>\n\n<list_of_banned_words>\nYou should *NOT* include any of these words as a key word or part of any key phrases:\n- Omni\n- Looker\n- Dashboard\n\n<guidelines>\n## Keyword Extraction\n- should not have any words from the list_of_banned_words as a key word or use any of the banned words in any key phrases\n- should not have names of specific persons\n- should relate to business metrics, analytics, and types of business data\n- should expand out abbreviations that relate to data and business concepts (e.g. gigabyte instead of GB or terabyte instead of TB)\n</guidelines>\n\n<output_format>\nOutput should only be a string, and not a string representation of a JSON.\nExample:\nkeyword_0, keyword_1, key_word_2, key_word_3, key_phrase_4, key_phrase_5\n</output_format>"
      },
      "type": "n8n-nodes-base.stickyNote",
      "position": [
        3104,
        2128
      ],
      "typeVersion": 1,
      "id": "6a002f6b-3754-400c-b3e1-6afd0638e429",
      "name": "Sticky Note18"
    },
    {
      "parameters": {
        "fieldsToAggregate": {
          "fieldToAggregate": [
            {
              "fieldToAggregate": "output"
            }
          ]
        },
        "options": {}
      },
      "type": "n8n-nodes-base.aggregate",
      "typeVersion": 1,
      "position": [
        6032,
        3632
      ],
      "id": "6c8f9268-35c5-41f9-90e4-cd89cbafdc8d",
      "name": "Aggregate"
    },
    {
      "parameters": {
        "mode": "raw",
        "jsonOutput": "={\"output\": {\n  \"extracted_keywords\": {{ $('Extract Key Words Agent').first().json.output }},\n  \"omni_picked_topics\": {{ $('Aggregate Topic Names').first().json.topic_name }},\n  {{ Object.fromEntries(\n      $json.output.map(({ process_name, document_ids }) => [process_name, document_ids])\n    ).toJsonString().slice(1, -1)\n  }}\n}\n}",
        "options": {}
      },
      "type": "n8n-nodes-base.set",
      "typeVersion": 3.4,
      "position": [
        8288,
        3632
      ],
      "id": "ebcaedce-0961-4c93-bf84-9e808a0a9adb",
      "name": "Process Metadata",
      "alwaysOutputData": true
    },
    {
      "parameters": {
        "content": "## Data Transformation for Insertion\n- store list of document ids that were rec'ed\n- store list of keywords\n- store list of topics",
        "height": 656,
        "width": 1200,
        "color": 4
      },
      "type": "n8n-nodes-base.stickyNote",
      "position": [
        8544,
        2304
      ],
      "typeVersion": 1,
      "id": "14bb7d1b-cf24-4a88-b7b9-5d4a436a56e6",
      "name": "Sticky Note26"
    },
    {
      "parameters": {
        "jsCode": "const input = $input.first().json;\n\nconst stringifiedSecond = Object.fromEntries(\n  Object.entries(input.output[1] ?? {}).map(([k, v]) => [k, JSON.stringify(v)])\n);\n\n\nconst mergedSecond = {\n  ...stringifiedSecond,\n  recommended_document_ids: JSON.stringify([...($input.first().json.output[0]?.document_ids ?? [])]),\n  recommendation_text: $input.first().json.output[0]?.message ?? \"\"\n};\n\nreturn mergedSecond;\n\n\n"
      },
      "type": "n8n-nodes-base.code",
      "typeVersion": 2,
      "position": [
        9072,
        2496
      ],
      "id": "1f31944c-20fa-491c-9faa-7fac836cb32e",
      "name": "Insert recommended_document_ids with Process Results"
    },
    {
      "parameters": {},
      "type": "n8n-nodes-base.merge",
      "typeVersion": 3.2,
      "position": [
        8608,
        2496
      ],
      "id": "ff3254e9-6874-4ca5-a627-5249f39ea2bd",
      "name": "Merge Recommendation Agent with Process Results",
      "onError": "continueRegularOutput"
    },
    {
      "parameters": {
        "fieldsToAggregate": {
          "fieldToAggregate": [
            {
              "fieldToAggregate": "output"
            }
          ]
        },
        "options": {}
      },
      "type": "n8n-nodes-base.aggregate",
      "typeVersion": 1,
      "position": [
        8832,
        2496
      ],
      "id": "f543e6b5-ff42-4f0b-ac86-5426bfbcf3d0",
      "name": "Aggregate to Single Object"
    },
    {
      "parameters": {
        "content": "```\n{\n  \"body\": {{ $('Global Vars').first().json.body.toJsonString() }},\n  \"table_schema_mapping\": {\n    \"event_id\": \"event_id\",\n    \"event_timestamp\": \"event_timestamp\",\n    \"message_ts\": \"message_ts\",\n    \"message_timestamp\": \"message_timestamp\",\n    \"message_text\": \"message_text\",\n    \"message_user_name\": \"message_user_name\",\n    \"message_user_email\": \"message_user_email\",\n    \"message_user_id\": \"message_user_id\",\n    \"reaction\": \"reaction\",\n    \"reaction_user_id\": \"reaction_user_id\",\n    \"reaction_user_email\": \"reaction_user_email\",\n    \"channel_id\": \"channel_id\",\n    \"channel_name\": \"channel_name\",\n    \"conversation_id\": \"conversation_id\",\n    \"team_id\": \"team_id\",\n    \"team_domain\": \"team_domain\"\n  },\n  \"retrieved_document_ids\": {{ JSON.stringify($('Aggregate Document Ids').first().json.document_ids.toJsonString())\n  }},\n\n  \"retrieved_document_id_counts\": {{ \n    JSON.stringify(\n      Object.fromEntries($('Map Reduce Document Count').first().json.output.map(\n            item => [item.document_id, item.count]\n          )).toJsonString()\n    )\n  }},\n\n  {{ $json.toJsonString().slice(1, -1) }}\n  \n  \n}\n```",
        "height": 416,
        "width": 528
      },
      "type": "n8n-nodes-base.stickyNote",
      "position": [
        9168,
        2848
      ],
      "typeVersion": 1,
      "id": "d1418844-1a29-4f75-a3c2-190162b2f117",
      "name": "Sticky Note27"
    }
  ],
  "connections": {
    "Webhook": {
      "main": [
        [
          {
            "node": "Global Vars",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Response Agent": {
      "main": [
        [
          {
            "node": "Send Slack Success Message",
            "type": "main",
            "index": 0
          },
          {
            "node": "Merge Recommendation Agent with Process Results",
            "type": "main",
            "index": 0
          }
        ],
        [
          {
            "node": "Send Slack Error Message",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Response Agent o4-mini": {
      "ai_languageModel": [
        [
          {
            "node": "Response Agent",
            "type": "ai_languageModel",
            "index": 0
          }
        ]
      ]
    },
    "Response Agent Gemini 2.5 Pro": {
      "ai_languageModel": [
        [
          {
            "node": "Response Agent",
            "type": "ai_languageModel",
            "index": 1
          }
        ]
      ]
    },
    "Response Agent Structured Output Parser": {
      "ai_outputParser": [
        [
          {
            "node": "Response Agent",
            "type": "ai_outputParser",
            "index": 0
          }
        ]
      ]
    },
    "Omni PickTopic API Request 0": {
      "main": [
        [
          {
            "node": "Merge Topic Names",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Omni PickTopic API Request 1": {
      "main": [
        [
          {
            "node": "Merge Topic Names",
            "type": "main",
            "index": 1
          }
        ]
      ]
    },
    "Omni PickTopic API Request 2": {
      "main": [
        [
          {
            "node": "Merge Topic Names",
            "type": "main",
            "index": 2
          }
        ]
      ]
    },
    "Cortex Agent Gemini 2.5 Pro1": {
      "ai_languageModel": [
        [
          {
            "node": "Cortex Search Document Query by Topic",
            "type": "ai_languageModel",
            "index": 1
          }
        ]
      ]
    },
    "Cortex Search Query Name": {
      "ai_tool": [
        [
          {
            "node": "Cortex Search Document Query by Topic",
            "type": "ai_tool",
            "index": 0
          }
        ]
      ]
    },
    "Cortex Search Query Table": {
      "ai_tool": [
        [
          {
            "node": "Cortex Search Document Query by Topic",
            "type": "ai_tool",
            "index": 0
          }
        ]
      ]
    },
    "Cortex Agent Gemini 2.5 Pro2": {
      "ai_languageModel": [
        [
          {
            "node": "Cortex Search Document by Topic",
            "type": "ai_languageModel",
            "index": 1
          }
        ]
      ]
    },
    "Cortex Search Document by Topic": {
      "main": [
        [
          {
            "node": "Rename Document Keys_",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Search Document Agent": {
      "ai_languageModel": [
        [
          {
            "node": "Cortex Search Document by Topic",
            "type": "ai_languageModel",
            "index": 0
          }
        ]
      ]
    },
    "Search Document Query by Topic Agent": {
      "ai_languageModel": [
        [
          {
            "node": "Cortex Search Document Query by Topic",
            "type": "ai_languageModel",
            "index": 0
          }
        ]
      ]
    },
    "Cortex Search Document Name": {
      "ai_tool": [
        [
          {
            "node": "Cortex Search Document by Topic",
            "type": "ai_tool",
            "index": 0
          }
        ]
      ]
    },
    "Map Reduce Document Count": {
      "main": [
        [
          {
            "node": "Response Agent",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Merge1": {
      "main": [
        [
          {
            "node": "For each document id",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Cortex Search Document by Topic Structured Output": {
      "ai_outputParser": [
        [
          {
            "node": "Cortex Search Document by Topic",
            "type": "ai_outputParser",
            "index": 0
          }
        ]
      ]
    },
    "Cortex Search Query by Topic Structured Output": {
      "ai_outputParser": [
        [
          {
            "node": "Cortex Search Document Query by Topic",
            "type": "ai_outputParser",
            "index": 0
          }
        ]
      ]
    },
    "Structured Output Parser1": {
      "ai_outputParser": [
        [
          {
            "node": "Map Reduce Document Count",
            "type": "ai_outputParser",
            "index": 0
          }
        ]
      ]
    },
    "Extract only results": {
      "main": [
        [
          {
            "node": "Rename Document Keys",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Rename Document Keys": {
      "main": [
        [
          {
            "node": "Message Document Name Search Results",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Cortex Document Name Search": {
      "main": [
        [
          {
            "node": "Extract only results",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Cortex Agent o4-mini2": {
      "ai_languageModel": [
        [
          {
            "node": "Extract Key Words Agent",
            "type": "ai_languageModel",
            "index": 0
          }
        ]
      ]
    },
    "Cortex Agent Gemini 2.5 Pro4": {
      "ai_languageModel": [
        [
          {
            "node": "Extract Key Words Agent",
            "type": "ai_languageModel",
            "index": 1
          }
        ]
      ]
    },
    "Cortex Agent Structured Output Parser2": {
      "ai_outputParser": [
        [
          {
            "node": "Extract Key Words Agent",
            "type": "ai_outputParser",
            "index": 0
          }
        ]
      ]
    },
    "Extract only results1": {
      "main": [
        [
          {
            "node": "Rename Document Keys_1",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Cortex Document Name Search1": {
      "main": [
        [
          {
            "node": "Extract only results1",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Rename Document Keys_1": {
      "main": [
        [
          {
            "node": "Keyword Document Name Search Results",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Cortex Document Query Name Search": {
      "main": [
        [
          {
            "node": "Extract only results2",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Extract only results2": {
      "main": [
        [
          {
            "node": "Message Document Query Name Search Results",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Extract Key Words Agent": {
      "main": [
        [
          {
            "node": "Cortex Document Name Search1",
            "type": "main",
            "index": 0
          },
          {
            "node": "Cortex Document Query Name Search1",
            "type": "main",
            "index": 0
          },
          {
            "node": "Cortex Document Query Table Search",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Cortex Document Query Name Search1": {
      "main": [
        [
          {
            "node": "Extract only results3",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Extract only results3": {
      "main": [
        [
          {
            "node": "Keyword Document Query Name Search Results",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Extract only results4": {
      "main": [
        [
          {
            "node": "Keyword Document Query Table Search Results",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Cortex Document Query Table Search": {
      "main": [
        [
          {
            "node": "Extract only results4",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Rename Document Keys_": {
      "main": [
        [
          {
            "node": "Topic Document Search Results",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Get Documents with Duplicates (multiple output)": {
      "main": [
        [
          {
            "node": "Keys to Lowercase",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Keys to Lowercase": {
      "main": [
        [
          {
            "node": "Aggregate Documents",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Aggregate Documents": {
      "main": [
        [
          {
            "node": "Map Reduce Document Count",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Cortex Agent o4-mini4": {
      "ai_languageModel": [
        [
          {
            "node": "Map Reduce Document Count",
            "type": "ai_languageModel",
            "index": 1
          }
        ]
      ]
    },
    "Map Reduce Agent Gemini 2.5 Pro": {
      "ai_languageModel": [
        [
          {
            "node": "Map Reduce Document Count",
            "type": "ai_languageModel",
            "index": 0
          }
        ]
      ]
    },
    "Find Count for Event ID": {
      "main": [
        [
          {
            "node": "If",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "If": {
      "main": [
        [
          {
            "node": "Retrieve Mapped Object",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Retrieve Mapped Object": {
      "main": [
        [
          {
            "node": "Insert Feedback into Snowflake",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Map Feedback to Snowflake Schema": {
      "main": [
        [
          {
            "node": "Find Count for Event ID",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Insert Table Schema Mapping": {
      "main": [
        [
          {
            "node": "Map Feedback to Snowflake Schema",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Global Vars": {
      "main": [
        [
          {
            "node": "Omni PickTopic API Request 0",
            "type": "main",
            "index": 0
          },
          {
            "node": "Omni PickTopic API Request 1",
            "type": "main",
            "index": 0
          },
          {
            "node": "Omni PickTopic API Request 2",
            "type": "main",
            "index": 0
          },
          {
            "node": "Extract Key Words Agent",
            "type": "main",
            "index": 0
          },
          {
            "node": "Cortex Document Query Name Search",
            "type": "main",
            "index": 0
          },
          {
            "node": "Cortex Document Name Search",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "For each document id": {
      "main": [
        [
          {
            "node": "Get Document Permissions for User Id",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Get Document Permissions for User Id": {
      "main": [
        [
          {
            "node": "Merge Permits and Document Ids",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Merge Permits and Document Ids": {
      "main": [
        [
          {
            "node": "Filter out no permissions documents",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Filter out no permissions documents": {
      "main": [
        [
          {
            "node": "Aggregate Document Ids",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Aggregate Document Ids": {
      "main": [
        [
          {
            "node": "Get Documents with Duplicates (multiple output)",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Aggregate Topic Names": {
      "main": [
        [
          {
            "node": "Cortex Search Document Query by Topic",
            "type": "main",
            "index": 0
          },
          {
            "node": "Cortex Search Document by Topic",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Merge Topic Names": {
      "main": [
        [
          {
            "node": "Aggregate Topic Names",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Cortex Search Document Query by Topic": {
      "main": [
        [
          {
            "node": "Topic Document Query Search Results",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Keyword Document Query Table Search Results": {
      "main": [
        [
          {
            "node": "Merge1",
            "type": "main",
            "index": 4
          },
          {
            "node": "Keyword Document Query Table Search Results JSON",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Topic Document Query Search Results": {
      "main": [
        [
          {
            "node": "Merge1",
            "type": "main",
            "index": 5
          },
          {
            "node": "Topic Document Query Search Results JSON",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Topic Document Search Results": {
      "main": [
        [
          {
            "node": "Merge1",
            "type": "main",
            "index": 6
          },
          {
            "node": "Topic Document Search Results JSON",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Keyword Document Query Name Search Results": {
      "main": [
        [
          {
            "node": "Merge1",
            "type": "main",
            "index": 3
          },
          {
            "node": "Keyword Document Query Name Search Results JSON",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Keyword Document Name Search Results": {
      "main": [
        [
          {
            "node": "Keyword Document Name Search Results JSON",
            "type": "main",
            "index": 0
          },
          {
            "node": "Merge1",
            "type": "main",
            "index": 2
          }
        ]
      ]
    },
    "Message Document Query Name Search Results": {
      "main": [
        [
          {
            "node": "Merge1",
            "type": "main",
            "index": 1
          }
        ]
      ]
    },
    "Message Document Name Search Results": {
      "main": [
        [
          {
            "node": "Merge1",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Keyword Document Name Search Results JSON": {
      "main": [
        [
          {
            "node": "Merge",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Keyword Document Query Name Search Results JSON": {
      "main": [
        [
          {
            "node": "Merge",
            "type": "main",
            "index": 1
          }
        ]
      ]
    },
    "Keyword Document Query Table Search Results JSON": {
      "main": [
        [
          {
            "node": "Merge",
            "type": "main",
            "index": 2
          }
        ]
      ]
    },
    "Topic Document Query Search Results JSON": {
      "main": [
        [
          {
            "node": "Merge",
            "type": "main",
            "index": 3
          }
        ]
      ]
    },
    "Topic Document Search Results JSON": {
      "main": [
        [
          {
            "node": "Merge",
            "type": "main",
            "index": 4
          }
        ]
      ]
    },
    "Merge": {
      "main": [
        [
          {
            "node": "Aggregate",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Aggregate": {
      "main": [
        [
          {
            "node": "Process Metadata",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Process Metadata": {
      "main": [
        [
          {
            "node": "Merge Recommendation Agent with Process Results",
            "type": "main",
            "index": 1
          }
        ]
      ]
    },
    "Insert recommended_document_ids with Process Results": {
      "main": [
        [
          {
            "node": "Insert Table Schema Mapping",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Merge Recommendation Agent with Process Results": {
      "main": [
        [
          {
            "node": "Aggregate to Single Object",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Aggregate to Single Object": {
      "main": [
        [
          {
            "node": "Insert recommended_document_ids with Process Results",
            "type": "main",
            "index": 0
          }
        ]
      ]
    }
  },
  "settings": {
    "executionOrder": "v1"
  },
  "staticData": null,
  "meta": {
    "templateCredsSetupCompleted": true
  },
  "pinData": {
    "Webhook": [
      {
        "json": {
          "headers": {
            "host": "n8n-relayer-1.app.n8n.cloud",
            "user-agent": "PostmanRuntime/7.47.1",
            "content-length": "948",
            "accept": "*/*",
            "accept-encoding": "gzip, br",
            "authorization": "Basic emFwaWVyOldNRXY4NDlmcGZGVlpYNkdoQjM2MGFmT3JmMWtfRFF2TlhfOFRSSjEzS1U=",
            "cdn-loop": "cloudflare; loops=1; subreqs=1",
            "cf-connecting-ip": "172.56.42.92",
            "cf-ew-via": "15",
            "cf-ipcountry": "US",
            "cf-ray": "986fe3e933d24b1f-LAX",
            "cf-visitor": "{\"scheme\":\"https\"}",
            "cf-worker": "n8n.cloud",
            "content-type": "application/json",
            "x-forwarded-for": "172.56.42.92, 104.23.251.97",
            "x-forwarded-host": "n8n-relayer-1.app.n8n.cloud",
            "x-forwarded-port": "443",
            "x-forwarded-proto": "https",
            "x-forwarded-server": "traefik-prod-users-gwc-72-585f59b6c7-ndz7z",
            "x-is-trusted": "yes",
            "x-real-ip": "172.56.42.92"
          },
          "params": {},
          "query": {},
          "body": {
            "channel_id": "C0912AANW1L",
            "channel_name": "data-eng-test-ai-channel",
            "conversation_id": "C0912AANW1L",
            "event_id": "1759194864.008200",
            "event_timestamp": "2025-09-30T01:14:24.008Z",
            "is_message_user_bot": "False",
            "message_text": "Hi team - Is there a dashboard in Omni to see free cribl cloud users, and associated email addresses within accounts I own similar to https://cribl.cloud.looker.com/explore/Product/cloud_orgs?qid=6AczKnvfgAdLscURN8AKDq&amp;toggle=filthis one> I used in looker?",
            "message_timestamp": "2025-09-30T01:14:21.395Z",
            "message_ts": "1759194861.395459",
            "message_user_email": "nkwok@cribl.io",
            "message_user_first_name": "Nathan",
            "message_user_id": "U06PVBEK9T6",
            "message_user_last_name": "Kwok",
            "message_user_name": "nathan_kwok",
            "reaction": "omni",
            "reaction_user_email": "nkwok@cribl.io",
            "reaction_user_id": "U06PVBEK9T6",
            "team_domain": "cribl",
            "team_id": "T3XQYAF26"
          },
          "webhookUrl": "https://n8n-relayer-1.app.n8n.cloud/webhook-test/8394a134-6af3-4ec0-b605-3270129037cc",
          "executionMode": "test"
        }
      }
    ],
    "Response Agent": [
      {
        "json": {
          "output": {
            "message": "Hey @nathan_kwok, based on your interest in free Cribl Cloud users and associated email addresses across your cloud orgs, here are some dashboards that might contain what you need:\n <https://cribl.omniapp.co/dashboards/2fb66a67|Product: Copilot Trend Metrics> in <https://cribl.omniapp.co/f/product|Product>\n <https://cribl.omniapp.co/dashboards/47d94e3c|Overview: OEM Metrics> in <https://cribl.omniapp.co/f/revenue|Revenue>\n <https://cribl.omniapp.co/dashboards/credit-consumption|Customer: Cloud Credit Consumption> in <https://cribl.omniapp.co/f/product|Product>",
            "document_ids": [
              "2fb66a67",
              "47d94e3c",
              "credit-consumption"
            ],
            "folder_urls": [
              "https://cribl.omniapp.co/f/product",
              "https://cribl.omniapp.co/f/revenue",
              "https://cribl.omniapp.co/f/product"
            ]
          }
        }
      }
    ],
    "Omni PickTopic API Request 0": [
      {
        "json": {
          "topicName": "cloud_orgs_and_billing"
        }
      }
    ],
    "Omni PickTopic API Request 1": [
      {
        "json": {
          "topicName": "cloud_orgs_and_billing"
        }
      }
    ],
    "Omni PickTopic API Request 2": [
      {
        "json": {
          "topicName": "cloud_orgs_and_billing"
        }
      }
    ],
    "Cortex Search Document by Topic": [
      {
        "json": {
          "output": [
            {
              "identifier": "credit-consumption",
              "owner_name": "Matthew Lim",
              "owner_id": "86a545a6-5958-43e5-8f16-68eb9f148744",
              "scope": "organization",
              "name": "Customer: Cloud Credit Consumption",
              "folder_name": "Product",
              "folder_id": "b69a8af3-5d04-4a3e-b610-9a74f4807de0",
              "has_dashboard": true,
              "folder_path": "product"
            },
            {
              "identifier": "70d5b283",
              "owner_name": "Fatima Albar",
              "owner_id": "d71da6f5-891f-4d2c-a30d-6b272703bd58",
              "scope": "organization",
              "name": "Stream & Edge Org Cost",
              "folder_name": "Stream",
              "folder_id": "47df23e7-a9e3-4a0f-87bf-81fa3e06f809",
              "has_dashboard": true,
              "folder_path": "engineering/stream"
            },
            {
              "identifier": "04ae7dfa",
              "owner_name": "Laura Knipe",
              "owner_id": "ebf8342f-9b5f-4efc-92b7-b1210c34cfaf",
              "scope": "organization",
              "name": "Overview: Cloud Waterfall",
              "folder_name": "Finance",
              "folder_id": "c617db8b-6b22-4fdf-a7a8-8026926e4ace",
              "has_dashboard": true,
              "folder_path": "finance"
            }
          ]
        }
      }
    ],
    "Map Reduce Document Count": [
      {
        "json": {
          "output": [
            {
              "document_id": "c20218dd",
              "owner_name": "Jerome Duepner",
              "owner_id": "6d16a844-b692-4203-9d0c-c9ab24aa16df",
              "document_scope": "organization",
              "document_name": "Overview: CriblU Overview",
              "folder_name": "Marketing",
              "folder_id": "3089bcee-baea-45af-8613-63077f0e9417",
              "has_dashboard": true,
              "folder_path": "marketing",
              "count": 1
            },
            {
              "document_id": "credit-consumption",
              "owner_name": "Matthew Lim",
              "owner_id": "86a545a6-5958-43e5-8f16-68eb9f148744",
              "document_scope": "organization",
              "document_name": "Customer: Cloud Credit Consumption",
              "folder_name": "Product",
              "folder_id": "b69a8af3-5d04-4a3e-b610-9a74f4807de0",
              "has_dashboard": true,
              "folder_path": "product",
              "count": 2
            },
            {
              "document_id": "04ae7dfa",
              "owner_name": "Laura Knipe",
              "owner_id": "ebf8342f-9b5f-4efc-92b7-b1210c34cfaf",
              "document_scope": "organization",
              "document_name": "Overview: Cloud Waterfall",
              "folder_name": "Finance",
              "folder_id": "c617db8b-6b22-4fdf-a7a8-8026926e4ace",
              "has_dashboard": true,
              "folder_path": "finance",
              "count": 1
            },
            {
              "document_id": "de229002",
              "owner_name": "Chuck Morris",
              "owner_id": "113ba39e-d2f3-44ff-9225-da17783348a3",
              "document_scope": "organization",
              "document_name": "Customer: Customer Breakdown",
              "folder_name": "Customer Experience",
              "folder_id": "3d5676c9-be8d-47fd-b268-8beae0430608",
              "has_dashboard": true,
              "folder_path": "customer experience",
              "count": 2
            },
            {
              "document_id": "70d5b283",
              "owner_name": "Fatima Albar",
              "owner_id": "d71da6f5-891f-4d2c-a30d-6b272703bd58",
              "document_scope": "organization",
              "document_name": "Stream & Edge Org Cost",
              "folder_name": "Stream",
              "folder_id": "47df23e7-a9e3-4a0f-87bf-81fa3e06f809",
              "has_dashboard": true,
              "folder_path": "stream",
              "count": 1
            },
            {
              "document_id": "2fb66a67",
              "owner_name": "Matthew Lim",
              "owner_id": "86a545a6-5958-43e5-8f16-68eb9f148744",
              "document_scope": "organization",
              "document_name": "Product: Copilot Trend Metrics",
              "folder_name": "Product",
              "folder_id": "b69a8af3-5d04-4a3e-b610-9a74f4807de0",
              "has_dashboard": true,
              "folder_path": "product",
              "count": 4
            },
            {
              "document_id": "f7e9dc87",
              "owner_name": "Matthew Lim",
              "owner_id": "86a545a6-5958-43e5-8f16-68eb9f148744",
              "document_scope": "organization",
              "document_name": "Product: Lake",
              "folder_name": "Product",
              "folder_id": "b69a8af3-5d04-4a3e-b610-9a74f4807de0",
              "has_dashboard": true,
              "folder_path": "product",
              "count": 2
            },
            {
              "document_id": "f69718ea",
              "owner_name": "Adam Armagost",
              "owner_id": "433b1608-177f-4449-b7bd-470e9283efcd",
              "document_scope": "organization",
              "document_name": "Product: Cribl Suite - Cloud",
              "folder_name": "Product",
              "folder_id": "b69a8af3-5d04-4a3e-b610-9a74f4807de0",
              "has_dashboard": true,
              "folder_path": "product",
              "count": 2
            },
            {
              "document_id": "dadcdf3e",
              "owner_name": "Matthew Lim",
              "owner_id": "86a545a6-5958-43e5-8f16-68eb9f148744",
              "document_scope": "organization",
              "document_name": "Overview: Authentication Metrics",
              "folder_name": "Engineering",
              "folder_id": "101dfb9d-da13-470b-8726-d17ca5adb53f",
              "has_dashboard": true,
              "folder_path": "engineering",
              "count": 2
            },
            {
              "document_id": "47d94e3c",
              "owner_name": "Laura Knipe",
              "owner_id": "ebf8342f-9b5f-4efc-92b7-b1210c34cfaf",
              "document_scope": "organization",
              "document_name": "Overview: OEM Metrics",
              "folder_name": "Revenue",
              "folder_id": "d20366ff-ebb8-42b0-b2ab-9665f0dc4390",
              "has_dashboard": true,
              "folder_path": "revenue",
              "count": 3
            },
            {
              "document_id": "3bd15a19",
              "owner_name": "Laura Knipe",
              "owner_id": "ebf8342f-9b5f-4efc-92b7-b1210c34cfaf",
              "document_scope": "organization",
              "document_name": "Overview: Customer Account Engagement ",
              "folder_name": "Marketing",
              "folder_id": "3089bcee-baea-45af-8613-63077f0e9417",
              "has_dashboard": true,
              "folder_path": "marketing",
              "count": 1
            },
            {
              "document_id": "e445af06",
              "owner_name": "Chuck Morris",
              "owner_id": "113ba39e-d2f3-44ff-9225-da17783348a3",
              "document_scope": "organization",
              "document_name": "Product: Cribl Suite - Software",
              "folder_name": "Product",
              "folder_id": "b69a8af3-5d04-4a3e-b610-9a74f4807de0",
              "has_dashboard": true,
              "folder_path": "product",
              "count": 1
            },
            {
              "document_id": "7e2736f9",
              "owner_name": "Jona Molla",
              "owner_id": "71441d6e-c3e4-41e7-83d7-c3837ac2d52b",
              "document_scope": "organization",
              "document_name": "[WIP] ProdOps Weekly",
              "folder_name": "ProdOps",
              "folder_id": "83601e73-a00e-4c35-80a1-66918cb85ac6",
              "has_dashboard": true,
              "folder_path": "prodops",
              "count": 2
            }
          ]
        }
      }
    ],
    "Merge1": [
      {
        "json": {
          "body": {
            "channel_id": "C0912AANW1L",
            "channel_name": "data-eng-test-ai-channel",
            "conversation_id": "C0912AANW1L",
            "event_id": "1759194864.008200",
            "event_timestamp": "2025-09-30T01:14:24.008Z",
            "is_message_user_bot": "False",
            "message_text": "Hi team - Is there a dashboard in Omni to see free cribl cloud users, and associated email addresses within accounts I own similar to https://cribl.cloud.looker.com/explore/Product/cloud_orgs?qid=6AczKnvfgAdLscURN8AKDq&amp;toggle=filthis one> I used in looker?",
            "message_timestamp": "2025-09-30T01:14:21.395Z",
            "message_ts": "1759194861.395459",
            "message_user_email": "nkwok@cribl.io",
            "message_user_first_name": "Nathan",
            "message_user_id": "U06PVBEK9T6",
            "message_user_last_name": "Kwok",
            "message_user_name": "nathan_kwok",
            "reaction": "omni",
            "reaction_user_email": "nkwok@cribl.io",
            "reaction_user_id": "U06PVBEK9T6",
            "team_domain": "cribl",
            "team_id": "T3XQYAF26"
          },
          "snowflake_base_url": "https://ml16699-hya89079.snowflakecomputing.com",
          "omni_documents_search_service": {
            "snowflake_database": "ANALYTICS",
            "snowflake_schema": "OMNI",
            "service_name": "omni_documents_search_service"
          },
          "omni_document_queries_query_table_search_service": {
            "snowflake_database": "ANALYTICS",
            "snowflake_schema": "OMNI",
            "agent_name": "omni_document_queries_query_table_search_service"
          },
          "omni_document_queries_query_name_search_service": {
            "snowflake_database": "ANALYTICS",
            "snowflake_schema": "OMNI",
            "agent_name": "omni_document_queries_query_name_search_service"
          },
          "omni_documents_analyst_agent": {
            "snowflake_database": "SNOWFLAKE_INTELLIGENCE",
            "snowflake_schema": "AGENTS",
            "agent_name": "OMNI_DOCUMENTS_ANALYST_AGENT"
          },
          "zapier_slack_response_webhook": {
            "webhook_url": "https://hooks.zapier.com/hooks/catch/23046078/u1mp0gx/"
          },
          "slack": {
            "error_message": "The Omni agent could not find relevant dashboards :cry:"
          },
          "omni_api": {
            "omni_base_url": "https://cribl.omniapp.co",
            "model_id": "4345b118-cbbe-4f7c-a705-ea0aa8da57c0",
            "omni_user_id": "893ce348-0fb2-44ac-b0f8-06521a341580"
          },
          "snowflake_tables": {
            "omni_users": {
              "snowflake_database": "ANALYTICS",
              "snowflake_schema": "OMNI",
              "table_name": "OMNI_USERS"
            },
            "omni_documents": {
              "snowflake_database": "ANALYTICS",
              "snowflake_schema": "OMNI",
              "table_name": "DOCUMENTS"
            },
            "omni_document_queries": {
              "snowflake_database": "ANALYTICS",
              "snowflake_schema": "OMNI",
              "table_name": "DOCUMENT_QUERIES"
            },
            "dashboard_recommendations": {
              "snowflake_database": "ANALYTICS",
              "snowflake_schema": "OMNI",
              "table_name": "DASHBOARD_RECOMMENDATIONS"
            },
            "dashboard_recommendations_feedback": {
              "snowflake_database": "ANALYTICS",
              "snowflake_schema": "OMNI",
              "table_name": "DASHBOARD_RECOMMENDATIONS_FEEDBACK"
            }
          }
        }
      },
      {
        "json": {
          "body": {
            "channel_id": "C0912AANW1L",
            "channel_name": "data-eng-test-ai-channel",
            "conversation_id": "C0912AANW1L",
            "event_id": "1759194864.008200",
            "event_timestamp": "2025-09-30T01:14:24.008Z",
            "is_message_user_bot": "False",
            "message_text": "Hi team - Is there a dashboard in Omni to see free cribl cloud users, and associated email addresses within accounts I own similar to https://cribl.cloud.looker.com/explore/Product/cloud_orgs?qid=6AczKnvfgAdLscURN8AKDq&amp;toggle=filthis one> I used in looker?",
            "message_timestamp": "2025-09-30T01:14:21.395Z",
            "message_ts": "1759194861.395459",
            "message_user_email": "nkwok@cribl.io",
            "message_user_first_name": "Nathan",
            "message_user_id": "U06PVBEK9T6",
            "message_user_last_name": "Kwok",
            "message_user_name": "nathan_kwok",
            "reaction": "omni",
            "reaction_user_email": "nkwok@cribl.io",
            "reaction_user_id": "U06PVBEK9T6",
            "team_domain": "cribl",
            "team_id": "T3XQYAF26"
          },
          "snowflake_base_url": "https://ml16699-hya89079.snowflakecomputing.com",
          "omni_documents_search_service": {
            "snowflake_database": "ANALYTICS",
            "snowflake_schema": "OMNI",
            "service_name": "omni_documents_search_service"
          },
          "omni_document_queries_query_table_search_service": {
            "snowflake_database": "ANALYTICS",
            "snowflake_schema": "OMNI",
            "agent_name": "omni_document_queries_query_table_search_service"
          },
          "omni_document_queries_query_name_search_service": {
            "snowflake_database": "ANALYTICS",
            "snowflake_schema": "OMNI",
            "agent_name": "omni_document_queries_query_name_search_service"
          },
          "omni_documents_analyst_agent": {
            "snowflake_database": "SNOWFLAKE_INTELLIGENCE",
            "snowflake_schema": "AGENTS",
            "agent_name": "OMNI_DOCUMENTS_ANALYST_AGENT"
          },
          "zapier_slack_response_webhook": {
            "webhook_url": "https://hooks.zapier.com/hooks/catch/23046078/u1mp0gx/"
          },
          "slack": {
            "error_message": "The Omni agent could not find relevant dashboards :cry:"
          },
          "omni_api": {
            "omni_base_url": "https://cribl.omniapp.co",
            "model_id": "4345b118-cbbe-4f7c-a705-ea0aa8da57c0",
            "omni_user_id": "893ce348-0fb2-44ac-b0f8-06521a341580"
          },
          "snowflake_tables": {
            "omni_users": {
              "snowflake_database": "ANALYTICS",
              "snowflake_schema": "OMNI",
              "table_name": "OMNI_USERS"
            },
            "omni_documents": {
              "snowflake_database": "ANALYTICS",
              "snowflake_schema": "OMNI",
              "table_name": "DOCUMENTS"
            },
            "omni_document_queries": {
              "snowflake_database": "ANALYTICS",
              "snowflake_schema": "OMNI",
              "table_name": "DOCUMENT_QUERIES"
            },
            "dashboard_recommendations": {
              "snowflake_database": "ANALYTICS",
              "snowflake_schema": "OMNI",
              "table_name": "DASHBOARD_RECOMMENDATIONS"
            },
            "dashboard_recommendations_feedback": {
              "snowflake_database": "ANALYTICS",
              "snowflake_schema": "OMNI",
              "table_name": "DASHBOARD_RECOMMENDATIONS_FEEDBACK"
            }
          }
        }
      },
      {
        "json": {
          "document_ids": [
            "f69718ea",
            "e445af06",
            "c20218dd"
          ]
        }
      },
      {
        "json": {
          "document_ids": [
            "7e2736f9",
            "f69718ea",
            "7e2736f9",
            "3bd15a19"
          ]
        }
      },
      {
        "json": {
          "document_ids": [
            "2fb66a67",
            "2fb66a67",
            "2fb66a67",
            "2fb66a67"
          ]
        }
      },
      {
        "json": {
          "document_ids": [
            "47d94e3c",
            "47d94e3c",
            "dadcdf3e",
            "dadcdf3e",
            "f7e9dc87",
            "de229002",
            "credit-consumption",
            "de229002",
            "f7e9dc87",
            "47d94e3c"
          ]
        }
      },
      {
        "json": {
          "document_ids": [
            "credit-consumption",
            "70d5b283",
            "04ae7dfa"
          ]
        }
      }
    ],
    "Extract only results1": [
      {
        "json": {
          "output": [
            {
              "identifier": "f69718ea",
              "@scores": {
                "text_match": 0.018119788,
                "cosine_similarity": 0.6317613
              },
              "owner_name": "Adam Armagost",
              "owner_id": "433b1608-177f-4449-b7bd-470e9283efcd",
              "scope": "organization",
              "name": "Product: Cribl Suite - Cloud",
              "folder_name": "Product",
              "folder_id": "b69a8af3-5d04-4a3e-b610-9a74f4807de0",
              "has_dashboard": "true",
              "folder_path": "product"
            },
            {
              "identifier": "e445af06",
              "@scores": {
                "text_match": 0.018119747,
                "cosine_similarity": 0.60842574
              },
              "owner_name": "Chuck Morris",
              "owner_id": "113ba39e-d2f3-44ff-9225-da17783348a3",
              "scope": "organization",
              "name": "Product: Cribl Suite - Software",
              "folder_name": "Product",
              "folder_id": "b69a8af3-5d04-4a3e-b610-9a74f4807de0",
              "has_dashboard": "true",
              "folder_path": "product"
            },
            {
              "identifier": "c20218dd",
              "@scores": {
                "text_match": 0,
                "cosine_similarity": 0.51955193
              },
              "owner_name": "Jerome Duepner",
              "owner_id": "6d16a844-b692-4203-9d0c-c9ab24aa16df",
              "scope": "organization",
              "name": "Overview: CriblU Overview",
              "folder_name": "Marketing",
              "folder_id": "3089bcee-baea-45af-8613-63077f0e9417",
              "has_dashboard": "true",
              "folder_path": "marketing"
            }
          ]
        }
      }
    ],
    "Cortex Document Name Search1": [
      {
        "json": {
          "results": [
            {
              "identifier": "f69718ea",
              "@scores": {
                "text_match": 0.018119788,
                "cosine_similarity": 0.6317613
              },
              "owner_name": "Adam Armagost",
              "owner_id": "433b1608-177f-4449-b7bd-470e9283efcd",
              "scope": "organization",
              "name": "Product: Cribl Suite - Cloud",
              "folder_name": "Product",
              "folder_id": "b69a8af3-5d04-4a3e-b610-9a74f4807de0",
              "has_dashboard": "true",
              "folder_path": "product"
            },
            {
              "identifier": "e445af06",
              "@scores": {
                "text_match": 0.018119747,
                "cosine_similarity": 0.60842574
              },
              "owner_name": "Chuck Morris",
              "owner_id": "113ba39e-d2f3-44ff-9225-da17783348a3",
              "scope": "organization",
              "name": "Product: Cribl Suite - Software",
              "folder_name": "Product",
              "folder_id": "b69a8af3-5d04-4a3e-b610-9a74f4807de0",
              "has_dashboard": "true",
              "folder_path": "product"
            },
            {
              "identifier": "c20218dd",
              "@scores": {
                "text_match": 0,
                "cosine_similarity": 0.51955193
              },
              "owner_name": "Jerome Duepner",
              "owner_id": "6d16a844-b692-4203-9d0c-c9ab24aa16df",
              "scope": "organization",
              "name": "Overview: CriblU Overview",
              "folder_name": "Marketing",
              "folder_id": "3089bcee-baea-45af-8613-63077f0e9417",
              "has_dashboard": "true",
              "folder_path": "marketing"
            }
          ],
          "request_id": "1f802107-42ec-40ff-965e-85680d1f1020"
        }
      }
    ],
    "Rename Document Keys_1": [
      {
        "json": {
          "output": [
            {
              "document_id": "f69718ea",
              "@scores": {
                "text_match": 0.018119788,
                "cosine_similarity": 0.6317613
              },
              "owner_name": "Adam Armagost",
              "owner_id": "433b1608-177f-4449-b7bd-470e9283efcd",
              "document_scope": "organization",
              "document_name": "Product: Cribl Suite - Cloud",
              "folder_name": "Product",
              "folder_id": "b69a8af3-5d04-4a3e-b610-9a74f4807de0",
              "has_dashboard": "true",
              "folder_path": "product"
            },
            {
              "document_id": "e445af06",
              "@scores": {
                "text_match": 0.018119747,
                "cosine_similarity": 0.60842574
              },
              "owner_name": "Chuck Morris",
              "owner_id": "113ba39e-d2f3-44ff-9225-da17783348a3",
              "document_scope": "organization",
              "document_name": "Product: Cribl Suite - Software",
              "folder_name": "Product",
              "folder_id": "b69a8af3-5d04-4a3e-b610-9a74f4807de0",
              "has_dashboard": "true",
              "folder_path": "product"
            },
            {
              "document_id": "c20218dd",
              "@scores": {
                "text_match": 0,
                "cosine_similarity": 0.51955193
              },
              "owner_name": "Jerome Duepner",
              "owner_id": "6d16a844-b692-4203-9d0c-c9ab24aa16df",
              "document_scope": "organization",
              "document_name": "Overview: CriblU Overview",
              "folder_name": "Marketing",
              "folder_id": "3089bcee-baea-45af-8613-63077f0e9417",
              "has_dashboard": "true",
              "folder_path": "marketing"
            }
          ]
        }
      }
    ],
    "Extract Key Words Agent": [
      {
        "json": {
          "output": [
            "free cribl cloud users",
            "associated email addresses",
            "accounts owned",
            "cloud organization data",
            "user account reporting"
          ]
        }
      }
    ],
    "Cortex Document Query Name Search1": [
      {
        "json": {
          "results": [
            {
              "@scores": {
                "text_match": 0.065525845,
                "cosine_similarity": 0.6755538
              },
              "document_scope": "organization",
              "query_id": "be08df73-5731-4f25-9e3b-718914d3e2bc",
              "query_name": "Cribl Cloud Registered & Active Orgs",
              "document_id": "7e2736f9",
              "query_table": "product__cloud_telemetry_daily"
            },
            {
              "@scores": {
                "text_match": 0.065525845,
                "cosine_similarity": 0.6755538
              },
              "document_scope": "organization",
              "query_id": "bc1404d5-075d-48be-b0bc-1e8bd176d279",
              "query_name": "Cribl Cloud Registered & Active Orgs",
              "document_id": "f69718ea",
              "query_table": "product__cloud_telemetry_daily"
            },
            {
              "@scores": {
                "text_match": 0.065525845,
                "cosine_similarity": 0.6737438
              },
              "document_scope": "organization",
              "query_id": "1147c3cc-2988-487e-b740-6a1bbbe3bcdf",
              "query_name": "Cribl Cloud Registered & Active Orgs | Insights",
              "document_id": "7e2736f9",
              "query_table": "product__cloud_telemetry_daily"
            },
            {
              "@scores": {
                "text_match": 0.0044781244,
                "cosine_similarity": 0.6425209
              },
              "document_scope": "organization",
              "query_id": "262d042d-7695-41bb-8afe-dc6e6f262211",
              "query_name": "Cribl U Accounts",
              "document_id": "3bd15a19",
              "query_table": "marketing__criblu_courses"
            }
          ],
          "request_id": "10b67f8d-e5fb-43d8-842d-bd3e09f53687"
        }
      }
    ],
    "Extract only results3": [
      {
        "json": {
          "output": [
            {
              "@scores": {
                "text_match": 0.065525845,
                "cosine_similarity": 0.6755538
              },
              "document_scope": "organization",
              "query_id": "be08df73-5731-4f25-9e3b-718914d3e2bc",
              "query_name": "Cribl Cloud Registered & Active Orgs",
              "document_id": "7e2736f9",
              "query_table": "product__cloud_telemetry_daily"
            },
            {
              "@scores": {
                "text_match": 0.065525845,
                "cosine_similarity": 0.6755538
              },
              "document_scope": "organization",
              "query_id": "bc1404d5-075d-48be-b0bc-1e8bd176d279",
              "query_name": "Cribl Cloud Registered & Active Orgs",
              "document_id": "f69718ea",
              "query_table": "product__cloud_telemetry_daily"
            },
            {
              "@scores": {
                "text_match": 0.065525845,
                "cosine_similarity": 0.6737438
              },
              "document_scope": "organization",
              "query_id": "1147c3cc-2988-487e-b740-6a1bbbe3bcdf",
              "query_name": "Cribl Cloud Registered & Active Orgs | Insights",
              "document_id": "7e2736f9",
              "query_table": "product__cloud_telemetry_daily"
            },
            {
              "@scores": {
                "text_match": 0.0044781244,
                "cosine_similarity": 0.6425209
              },
              "document_scope": "organization",
              "query_id": "262d042d-7695-41bb-8afe-dc6e6f262211",
              "query_name": "Cribl U Accounts",
              "document_id": "3bd15a19",
              "query_table": "marketing__criblu_courses"
            }
          ]
        }
      }
    ],
    "Extract only results4": [
      {
        "json": {
          "output": [
            {
              "@scores": {
                "text_match": 0,
                "cosine_similarity": 0.5437584
              },
              "document_scope": "organization",
              "query_id": "9ff2065f-9ec8-4e50-bf30-c090047c1874",
              "query_name": "Avg User Queries",
              "document_id": "2fb66a67",
              "query_table": "product__cribl_ai_events_prod"
            },
            {
              "@scores": {
                "text_match": 0,
                "cosine_similarity": 0.5437584
              },
              "document_scope": "organization",
              "query_id": "ae2a44a0-30da-4bdc-83a3-f83ecfafd1a9",
              "query_name": "Editor User Queries",
              "document_id": "2fb66a67",
              "query_table": "product__cribl_ai_events_prod"
            },
            {
              "@scores": {
                "text_match": 0,
                "cosine_similarity": 0.5437584
              },
              "document_scope": "organization",
              "query_id": "16bd2719-723d-4573-8bcc-426f7e2cc06d",
              "query_name": "Distribution of CPE Events per Conversation",
              "document_id": "2fb66a67",
              "query_table": "product__cribl_ai_events_prod"
            },
            {
              "@scores": {
                "text_match": 0,
                "cosine_similarity": 0.5437584
              },
              "document_scope": "organization",
              "query_id": "6d6c0b8f-5aea-432e-a890-e4949d30aa80",
              "query_name": "Target Schema Selections",
              "document_id": "2fb66a67",
              "query_table": "product__cribl_ai_events_prod"
            }
          ]
        }
      }
    ],
    "Cortex Document Query Table Search": [
      {
        "json": {
          "results": [
            {
              "@scores": {
                "text_match": 0,
                "cosine_similarity": 0.5437584
              },
              "document_scope": "organization",
              "query_id": "9ff2065f-9ec8-4e50-bf30-c090047c1874",
              "query_name": "Avg User Queries",
              "document_id": "2fb66a67",
              "query_table": "product__cribl_ai_events_prod"
            },
            {
              "@scores": {
                "text_match": 0,
                "cosine_similarity": 0.5437584
              },
              "document_scope": "organization",
              "query_id": "ae2a44a0-30da-4bdc-83a3-f83ecfafd1a9",
              "query_name": "Editor User Queries",
              "document_id": "2fb66a67",
              "query_table": "product__cribl_ai_events_prod"
            },
            {
              "@scores": {
                "text_match": 0,
                "cosine_similarity": 0.5437584
              },
              "document_scope": "organization",
              "query_id": "16bd2719-723d-4573-8bcc-426f7e2cc06d",
              "query_name": "Distribution of CPE Events per Conversation",
              "document_id": "2fb66a67",
              "query_table": "product__cribl_ai_events_prod"
            },
            {
              "@scores": {
                "text_match": 0,
                "cosine_similarity": 0.5437584
              },
              "document_scope": "organization",
              "query_id": "6d6c0b8f-5aea-432e-a890-e4949d30aa80",
              "query_name": "Target Schema Selections",
              "document_id": "2fb66a67",
              "query_table": "product__cribl_ai_events_prod"
            }
          ],
          "request_id": "27b1ee0d-06d7-4252-9e4f-709b1574650c"
        }
      }
    ],
    "Rename Document Keys_": [
      {
        "json": {
          "output": [
            {
              "document_id": "credit-consumption",
              "owner_name": "Matthew Lim",
              "owner_id": "86a545a6-5958-43e5-8f16-68eb9f148744",
              "document_scope": "organization",
              "document_name": "Customer: Cloud Credit Consumption",
              "folder_name": "Product",
              "folder_id": "b69a8af3-5d04-4a3e-b610-9a74f4807de0",
              "has_dashboard": true,
              "folder_path": "product"
            },
            {
              "document_id": "70d5b283",
              "owner_name": "Fatima Albar",
              "owner_id": "d71da6f5-891f-4d2c-a30d-6b272703bd58",
              "document_scope": "organization",
              "document_name": "Stream & Edge Org Cost",
              "folder_name": "Stream",
              "folder_id": "47df23e7-a9e3-4a0f-87bf-81fa3e06f809",
              "has_dashboard": true,
              "folder_path": "engineering/stream"
            },
            {
              "document_id": "04ae7dfa",
              "owner_name": "Laura Knipe",
              "owner_id": "ebf8342f-9b5f-4efc-92b7-b1210c34cfaf",
              "document_scope": "organization",
              "document_name": "Overview: Cloud Waterfall",
              "folder_name": "Finance",
              "folder_id": "c617db8b-6b22-4fdf-a7a8-8026926e4ace",
              "has_dashboard": true,
              "folder_path": "finance"
            }
          ]
        }
      }
    ],
    "Get Documents with Duplicates (multiple output)": [
      {
        "json": {
          "DOCUMENT_ID": "c20218dd",
          "DOCUMENT_NAME": "Overview: CriblU Overview",
          "FOLDER_ID": "3089bcee-baea-45af-8613-63077f0e9417",
          "FOLDER_NAME": "Marketing",
          "DOCUMENT_SCOPE": "organization",
          "OWNER_NAME": "Jerome Duepner",
          "OWNER_ID": "6d16a844-b692-4203-9d0c-c9ab24aa16df",
          "HAS_DASHBOARD": "true"
        }
      },
      {
        "json": {
          "DOCUMENT_ID": "credit-consumption",
          "DOCUMENT_NAME": "Customer: Cloud Credit Consumption",
          "FOLDER_ID": "b69a8af3-5d04-4a3e-b610-9a74f4807de0",
          "FOLDER_NAME": "Product",
          "DOCUMENT_SCOPE": "organization",
          "OWNER_NAME": "Matthew Lim",
          "OWNER_ID": "86a545a6-5958-43e5-8f16-68eb9f148744",
          "HAS_DASHBOARD": "true"
        }
      },
      {
        "json": {
          "DOCUMENT_ID": "credit-consumption",
          "DOCUMENT_NAME": "Customer: Cloud Credit Consumption",
          "FOLDER_ID": "b69a8af3-5d04-4a3e-b610-9a74f4807de0",
          "FOLDER_NAME": "Product",
          "DOCUMENT_SCOPE": "organization",
          "OWNER_NAME": "Matthew Lim",
          "OWNER_ID": "86a545a6-5958-43e5-8f16-68eb9f148744",
          "HAS_DASHBOARD": "true"
        }
      },
      {
        "json": {
          "DOCUMENT_ID": "04ae7dfa",
          "DOCUMENT_NAME": "Overview: Cloud Waterfall",
          "FOLDER_ID": "c617db8b-6b22-4fdf-a7a8-8026926e4ace",
          "FOLDER_NAME": "Finance",
          "DOCUMENT_SCOPE": "organization",
          "OWNER_NAME": "Laura Knipe",
          "OWNER_ID": "ebf8342f-9b5f-4efc-92b7-b1210c34cfaf",
          "HAS_DASHBOARD": "true"
        }
      },
      {
        "json": {
          "DOCUMENT_ID": "de229002",
          "DOCUMENT_NAME": "Customer: Customer Breakdown",
          "FOLDER_ID": "3d5676c9-be8d-47fd-b268-8beae0430608",
          "FOLDER_NAME": "Customer Experience",
          "DOCUMENT_SCOPE": "organization",
          "OWNER_NAME": "Chuck Morris",
          "OWNER_ID": "113ba39e-d2f3-44ff-9225-da17783348a3",
          "HAS_DASHBOARD": "true"
        }
      },
      {
        "json": {
          "DOCUMENT_ID": "de229002",
          "DOCUMENT_NAME": "Customer: Customer Breakdown",
          "FOLDER_ID": "3d5676c9-be8d-47fd-b268-8beae0430608",
          "FOLDER_NAME": "Customer Experience",
          "DOCUMENT_SCOPE": "organization",
          "OWNER_NAME": "Chuck Morris",
          "OWNER_ID": "113ba39e-d2f3-44ff-9225-da17783348a3",
          "HAS_DASHBOARD": "true"
        }
      },
      {
        "json": {
          "DOCUMENT_ID": "70d5b283",
          "DOCUMENT_NAME": "Stream & Edge Org Cost",
          "FOLDER_ID": "47df23e7-a9e3-4a0f-87bf-81fa3e06f809",
          "FOLDER_NAME": "Stream",
          "DOCUMENT_SCOPE": "organization",
          "OWNER_NAME": "Fatima Albar",
          "OWNER_ID": "d71da6f5-891f-4d2c-a30d-6b272703bd58",
          "HAS_DASHBOARD": "true"
        }
      },
      {
        "json": {
          "DOCUMENT_ID": "2fb66a67",
          "DOCUMENT_NAME": "Product: Copilot Trend Metrics",
          "FOLDER_ID": "b69a8af3-5d04-4a3e-b610-9a74f4807de0",
          "FOLDER_NAME": "Product",
          "DOCUMENT_SCOPE": "organization",
          "OWNER_NAME": "Matthew Lim",
          "OWNER_ID": "86a545a6-5958-43e5-8f16-68eb9f148744",
          "HAS_DASHBOARD": "true"
        }
      },
      {
        "json": {
          "DOCUMENT_ID": "2fb66a67",
          "DOCUMENT_NAME": "Product: Copilot Trend Metrics",
          "FOLDER_ID": "b69a8af3-5d04-4a3e-b610-9a74f4807de0",
          "FOLDER_NAME": "Product",
          "DOCUMENT_SCOPE": "organization",
          "OWNER_NAME": "Matthew Lim",
          "OWNER_ID": "86a545a6-5958-43e5-8f16-68eb9f148744",
          "HAS_DASHBOARD": "true"
        }
      },
      {
        "json": {
          "DOCUMENT_ID": "2fb66a67",
          "DOCUMENT_NAME": "Product: Copilot Trend Metrics",
          "FOLDER_ID": "b69a8af3-5d04-4a3e-b610-9a74f4807de0",
          "FOLDER_NAME": "Product",
          "DOCUMENT_SCOPE": "organization",
          "OWNER_NAME": "Matthew Lim",
          "OWNER_ID": "86a545a6-5958-43e5-8f16-68eb9f148744",
          "HAS_DASHBOARD": "true"
        }
      },
      {
        "json": {
          "DOCUMENT_ID": "2fb66a67",
          "DOCUMENT_NAME": "Product: Copilot Trend Metrics",
          "FOLDER_ID": "b69a8af3-5d04-4a3e-b610-9a74f4807de0",
          "FOLDER_NAME": "Product",
          "DOCUMENT_SCOPE": "organization",
          "OWNER_NAME": "Matthew Lim",
          "OWNER_ID": "86a545a6-5958-43e5-8f16-68eb9f148744",
          "HAS_DASHBOARD": "true"
        }
      },
      {
        "json": {
          "DOCUMENT_ID": "f7e9dc87",
          "DOCUMENT_NAME": "Product: Lake",
          "FOLDER_ID": "b69a8af3-5d04-4a3e-b610-9a74f4807de0",
          "FOLDER_NAME": "Product",
          "DOCUMENT_SCOPE": "organization",
          "OWNER_NAME": "Matthew Lim",
          "OWNER_ID": "86a545a6-5958-43e5-8f16-68eb9f148744",
          "HAS_DASHBOARD": "true"
        }
      },
      {
        "json": {
          "DOCUMENT_ID": "f7e9dc87",
          "DOCUMENT_NAME": "Product: Lake",
          "FOLDER_ID": "b69a8af3-5d04-4a3e-b610-9a74f4807de0",
          "FOLDER_NAME": "Product",
          "DOCUMENT_SCOPE": "organization",
          "OWNER_NAME": "Matthew Lim",
          "OWNER_ID": "86a545a6-5958-43e5-8f16-68eb9f148744",
          "HAS_DASHBOARD": "true"
        }
      },
      {
        "json": {
          "DOCUMENT_ID": "f69718ea",
          "DOCUMENT_NAME": "Product: Cribl Suite - Cloud",
          "FOLDER_ID": "b69a8af3-5d04-4a3e-b610-9a74f4807de0",
          "FOLDER_NAME": "Product",
          "DOCUMENT_SCOPE": "organization",
          "OWNER_NAME": "Adam Armagost",
          "OWNER_ID": "433b1608-177f-4449-b7bd-470e9283efcd",
          "HAS_DASHBOARD": "true"
        }
      },
      {
        "json": {
          "DOCUMENT_ID": "f69718ea",
          "DOCUMENT_NAME": "Product: Cribl Suite - Cloud",
          "FOLDER_ID": "b69a8af3-5d04-4a3e-b610-9a74f4807de0",
          "FOLDER_NAME": "Product",
          "DOCUMENT_SCOPE": "organization",
          "OWNER_NAME": "Adam Armagost",
          "OWNER_ID": "433b1608-177f-4449-b7bd-470e9283efcd",
          "HAS_DASHBOARD": "true"
        }
      },
      {
        "json": {
          "DOCUMENT_ID": "dadcdf3e",
          "DOCUMENT_NAME": "Overview: Authentication Metrics",
          "FOLDER_ID": "101dfb9d-da13-470b-8726-d17ca5adb53f",
          "FOLDER_NAME": "Engineering",
          "DOCUMENT_SCOPE": "organization",
          "OWNER_NAME": "Matthew Lim",
          "OWNER_ID": "86a545a6-5958-43e5-8f16-68eb9f148744",
          "HAS_DASHBOARD": "true"
        }
      },
      {
        "json": {
          "DOCUMENT_ID": "dadcdf3e",
          "DOCUMENT_NAME": "Overview: Authentication Metrics",
          "FOLDER_ID": "101dfb9d-da13-470b-8726-d17ca5adb53f",
          "FOLDER_NAME": "Engineering",
          "DOCUMENT_SCOPE": "organization",
          "OWNER_NAME": "Matthew Lim",
          "OWNER_ID": "86a545a6-5958-43e5-8f16-68eb9f148744",
          "HAS_DASHBOARD": "true"
        }
      },
      {
        "json": {
          "DOCUMENT_ID": "47d94e3c",
          "DOCUMENT_NAME": "Overview: OEM Metrics",
          "FOLDER_ID": "d20366ff-ebb8-42b0-b2ab-9665f0dc4390",
          "FOLDER_NAME": "Revenue",
          "DOCUMENT_SCOPE": "organization",
          "OWNER_NAME": "Laura Knipe",
          "OWNER_ID": "ebf8342f-9b5f-4efc-92b7-b1210c34cfaf",
          "HAS_DASHBOARD": "true"
        }
      },
      {
        "json": {
          "DOCUMENT_ID": "47d94e3c",
          "DOCUMENT_NAME": "Overview: OEM Metrics",
          "FOLDER_ID": "d20366ff-ebb8-42b0-b2ab-9665f0dc4390",
          "FOLDER_NAME": "Revenue",
          "DOCUMENT_SCOPE": "organization",
          "OWNER_NAME": "Laura Knipe",
          "OWNER_ID": "ebf8342f-9b5f-4efc-92b7-b1210c34cfaf",
          "HAS_DASHBOARD": "true"
        }
      },
      {
        "json": {
          "DOCUMENT_ID": "47d94e3c",
          "DOCUMENT_NAME": "Overview: OEM Metrics",
          "FOLDER_ID": "d20366ff-ebb8-42b0-b2ab-9665f0dc4390",
          "FOLDER_NAME": "Revenue",
          "DOCUMENT_SCOPE": "organization",
          "OWNER_NAME": "Laura Knipe",
          "OWNER_ID": "ebf8342f-9b5f-4efc-92b7-b1210c34cfaf",
          "HAS_DASHBOARD": "true"
        }
      },
      {
        "json": {
          "DOCUMENT_ID": "3bd15a19",
          "DOCUMENT_NAME": "Overview: Customer Account Engagement ",
          "FOLDER_ID": "3089bcee-baea-45af-8613-63077f0e9417",
          "FOLDER_NAME": "Marketing",
          "DOCUMENT_SCOPE": "organization",
          "OWNER_NAME": "Laura Knipe",
          "OWNER_ID": "ebf8342f-9b5f-4efc-92b7-b1210c34cfaf",
          "HAS_DASHBOARD": "true"
        }
      },
      {
        "json": {
          "DOCUMENT_ID": "e445af06",
          "DOCUMENT_NAME": "Product: Cribl Suite - Software",
          "FOLDER_ID": "b69a8af3-5d04-4a3e-b610-9a74f4807de0",
          "FOLDER_NAME": "Product",
          "DOCUMENT_SCOPE": "organization",
          "OWNER_NAME": "Chuck Morris",
          "OWNER_ID": "113ba39e-d2f3-44ff-9225-da17783348a3",
          "HAS_DASHBOARD": "true"
        }
      },
      {
        "json": {
          "DOCUMENT_ID": "7e2736f9",
          "DOCUMENT_NAME": "[WIP] ProdOps Weekly",
          "FOLDER_ID": "83601e73-a00e-4c35-80a1-66918cb85ac6",
          "FOLDER_NAME": "ProdOps",
          "DOCUMENT_SCOPE": "organization",
          "OWNER_NAME": "Jona Molla",
          "OWNER_ID": "71441d6e-c3e4-41e7-83d7-c3837ac2d52b",
          "HAS_DASHBOARD": "true"
        }
      },
      {
        "json": {
          "DOCUMENT_ID": "7e2736f9",
          "DOCUMENT_NAME": "[WIP] ProdOps Weekly",
          "FOLDER_ID": "83601e73-a00e-4c35-80a1-66918cb85ac6",
          "FOLDER_NAME": "ProdOps",
          "DOCUMENT_SCOPE": "organization",
          "OWNER_NAME": "Jona Molla",
          "OWNER_ID": "71441d6e-c3e4-41e7-83d7-c3837ac2d52b",
          "HAS_DASHBOARD": "true"
        }
      }
    ],
    "Keys to Lowercase": [
      {
        "json": {
          "document_id": "c20218dd",
          "document_name": "Overview: CriblU Overview",
          "folder_id": "3089bcee-baea-45af-8613-63077f0e9417",
          "folder_name": "Marketing",
          "document_scope": "organization",
          "owner_name": "Jerome Duepner",
          "owner_id": "6d16a844-b692-4203-9d0c-c9ab24aa16df",
          "has_dashboard": "true"
        }
      },
      {
        "json": {
          "document_id": "credit-consumption",
          "document_name": "Customer: Cloud Credit Consumption",
          "folder_id": "b69a8af3-5d04-4a3e-b610-9a74f4807de0",
          "folder_name": "Product",
          "document_scope": "organization",
          "owner_name": "Matthew Lim",
          "owner_id": "86a545a6-5958-43e5-8f16-68eb9f148744",
          "has_dashboard": "true"
        }
      },
      {
        "json": {
          "document_id": "credit-consumption",
          "document_name": "Customer: Cloud Credit Consumption",
          "folder_id": "b69a8af3-5d04-4a3e-b610-9a74f4807de0",
          "folder_name": "Product",
          "document_scope": "organization",
          "owner_name": "Matthew Lim",
          "owner_id": "86a545a6-5958-43e5-8f16-68eb9f148744",
          "has_dashboard": "true"
        }
      },
      {
        "json": {
          "document_id": "04ae7dfa",
          "document_name": "Overview: Cloud Waterfall",
          "folder_id": "c617db8b-6b22-4fdf-a7a8-8026926e4ace",
          "folder_name": "Finance",
          "document_scope": "organization",
          "owner_name": "Laura Knipe",
          "owner_id": "ebf8342f-9b5f-4efc-92b7-b1210c34cfaf",
          "has_dashboard": "true"
        }
      },
      {
        "json": {
          "document_id": "de229002",
          "document_name": "Customer: Customer Breakdown",
          "folder_id": "3d5676c9-be8d-47fd-b268-8beae0430608",
          "folder_name": "Customer Experience",
          "document_scope": "organization",
          "owner_name": "Chuck Morris",
          "owner_id": "113ba39e-d2f3-44ff-9225-da17783348a3",
          "has_dashboard": "true"
        }
      },
      {
        "json": {
          "document_id": "de229002",
          "document_name": "Customer: Customer Breakdown",
          "folder_id": "3d5676c9-be8d-47fd-b268-8beae0430608",
          "folder_name": "Customer Experience",
          "document_scope": "organization",
          "owner_name": "Chuck Morris",
          "owner_id": "113ba39e-d2f3-44ff-9225-da17783348a3",
          "has_dashboard": "true"
        }
      },
      {
        "json": {
          "document_id": "70d5b283",
          "document_name": "Stream & Edge Org Cost",
          "folder_id": "47df23e7-a9e3-4a0f-87bf-81fa3e06f809",
          "folder_name": "Stream",
          "document_scope": "organization",
          "owner_name": "Fatima Albar",
          "owner_id": "d71da6f5-891f-4d2c-a30d-6b272703bd58",
          "has_dashboard": "true"
        }
      },
      {
        "json": {
          "document_id": "2fb66a67",
          "document_name": "Product: Copilot Trend Metrics",
          "folder_id": "b69a8af3-5d04-4a3e-b610-9a74f4807de0",
          "folder_name": "Product",
          "document_scope": "organization",
          "owner_name": "Matthew Lim",
          "owner_id": "86a545a6-5958-43e5-8f16-68eb9f148744",
          "has_dashboard": "true"
        }
      },
      {
        "json": {
          "document_id": "2fb66a67",
          "document_name": "Product: Copilot Trend Metrics",
          "folder_id": "b69a8af3-5d04-4a3e-b610-9a74f4807de0",
          "folder_name": "Product",
          "document_scope": "organization",
          "owner_name": "Matthew Lim",
          "owner_id": "86a545a6-5958-43e5-8f16-68eb9f148744",
          "has_dashboard": "true"
        }
      },
      {
        "json": {
          "document_id": "2fb66a67",
          "document_name": "Product: Copilot Trend Metrics",
          "folder_id": "b69a8af3-5d04-4a3e-b610-9a74f4807de0",
          "folder_name": "Product",
          "document_scope": "organization",
          "owner_name": "Matthew Lim",
          "owner_id": "86a545a6-5958-43e5-8f16-68eb9f148744",
          "has_dashboard": "true"
        }
      },
      {
        "json": {
          "document_id": "2fb66a67",
          "document_name": "Product: Copilot Trend Metrics",
          "folder_id": "b69a8af3-5d04-4a3e-b610-9a74f4807de0",
          "folder_name": "Product",
          "document_scope": "organization",
          "owner_name": "Matthew Lim",
          "owner_id": "86a545a6-5958-43e5-8f16-68eb9f148744",
          "has_dashboard": "true"
        }
      },
      {
        "json": {
          "document_id": "f7e9dc87",
          "document_name": "Product: Lake",
          "folder_id": "b69a8af3-5d04-4a3e-b610-9a74f4807de0",
          "folder_name": "Product",
          "document_scope": "organization",
          "owner_name": "Matthew Lim",
          "owner_id": "86a545a6-5958-43e5-8f16-68eb9f148744",
          "has_dashboard": "true"
        }
      },
      {
        "json": {
          "document_id": "f7e9dc87",
          "document_name": "Product: Lake",
          "folder_id": "b69a8af3-5d04-4a3e-b610-9a74f4807de0",
          "folder_name": "Product",
          "document_scope": "organization",
          "owner_name": "Matthew Lim",
          "owner_id": "86a545a6-5958-43e5-8f16-68eb9f148744",
          "has_dashboard": "true"
        }
      },
      {
        "json": {
          "document_id": "f69718ea",
          "document_name": "Product: Cribl Suite - Cloud",
          "folder_id": "b69a8af3-5d04-4a3e-b610-9a74f4807de0",
          "folder_name": "Product",
          "document_scope": "organization",
          "owner_name": "Adam Armagost",
          "owner_id": "433b1608-177f-4449-b7bd-470e9283efcd",
          "has_dashboard": "true"
        }
      },
      {
        "json": {
          "document_id": "f69718ea",
          "document_name": "Product: Cribl Suite - Cloud",
          "folder_id": "b69a8af3-5d04-4a3e-b610-9a74f4807de0",
          "folder_name": "Product",
          "document_scope": "organization",
          "owner_name": "Adam Armagost",
          "owner_id": "433b1608-177f-4449-b7bd-470e9283efcd",
          "has_dashboard": "true"
        }
      },
      {
        "json": {
          "document_id": "dadcdf3e",
          "document_name": "Overview: Authentication Metrics",
          "folder_id": "101dfb9d-da13-470b-8726-d17ca5adb53f",
          "folder_name": "Engineering",
          "document_scope": "organization",
          "owner_name": "Matthew Lim",
          "owner_id": "86a545a6-5958-43e5-8f16-68eb9f148744",
          "has_dashboard": "true"
        }
      },
      {
        "json": {
          "document_id": "dadcdf3e",
          "document_name": "Overview: Authentication Metrics",
          "folder_id": "101dfb9d-da13-470b-8726-d17ca5adb53f",
          "folder_name": "Engineering",
          "document_scope": "organization",
          "owner_name": "Matthew Lim",
          "owner_id": "86a545a6-5958-43e5-8f16-68eb9f148744",
          "has_dashboard": "true"
        }
      },
      {
        "json": {
          "document_id": "47d94e3c",
          "document_name": "Overview: OEM Metrics",
          "folder_id": "d20366ff-ebb8-42b0-b2ab-9665f0dc4390",
          "folder_name": "Revenue",
          "document_scope": "organization",
          "owner_name": "Laura Knipe",
          "owner_id": "ebf8342f-9b5f-4efc-92b7-b1210c34cfaf",
          "has_dashboard": "true"
        }
      },
      {
        "json": {
          "document_id": "47d94e3c",
          "document_name": "Overview: OEM Metrics",
          "folder_id": "d20366ff-ebb8-42b0-b2ab-9665f0dc4390",
          "folder_name": "Revenue",
          "document_scope": "organization",
          "owner_name": "Laura Knipe",
          "owner_id": "ebf8342f-9b5f-4efc-92b7-b1210c34cfaf",
          "has_dashboard": "true"
        }
      },
      {
        "json": {
          "document_id": "47d94e3c",
          "document_name": "Overview: OEM Metrics",
          "folder_id": "d20366ff-ebb8-42b0-b2ab-9665f0dc4390",
          "folder_name": "Revenue",
          "document_scope": "organization",
          "owner_name": "Laura Knipe",
          "owner_id": "ebf8342f-9b5f-4efc-92b7-b1210c34cfaf",
          "has_dashboard": "true"
        }
      },
      {
        "json": {
          "document_id": "3bd15a19",
          "document_name": "Overview: Customer Account Engagement ",
          "folder_id": "3089bcee-baea-45af-8613-63077f0e9417",
          "folder_name": "Marketing",
          "document_scope": "organization",
          "owner_name": "Laura Knipe",
          "owner_id": "ebf8342f-9b5f-4efc-92b7-b1210c34cfaf",
          "has_dashboard": "true"
        }
      },
      {
        "json": {
          "document_id": "e445af06",
          "document_name": "Product: Cribl Suite - Software",
          "folder_id": "b69a8af3-5d04-4a3e-b610-9a74f4807de0",
          "folder_name": "Product",
          "document_scope": "organization",
          "owner_name": "Chuck Morris",
          "owner_id": "113ba39e-d2f3-44ff-9225-da17783348a3",
          "has_dashboard": "true"
        }
      },
      {
        "json": {
          "document_id": "7e2736f9",
          "document_name": "[WIP] ProdOps Weekly",
          "folder_id": "83601e73-a00e-4c35-80a1-66918cb85ac6",
          "folder_name": "ProdOps",
          "document_scope": "organization",
          "owner_name": "Jona Molla",
          "owner_id": "71441d6e-c3e4-41e7-83d7-c3837ac2d52b",
          "has_dashboard": "true"
        }
      },
      {
        "json": {
          "document_id": "7e2736f9",
          "document_name": "[WIP] ProdOps Weekly",
          "folder_id": "83601e73-a00e-4c35-80a1-66918cb85ac6",
          "folder_name": "ProdOps",
          "document_scope": "organization",
          "owner_name": "Jona Molla",
          "owner_id": "71441d6e-c3e4-41e7-83d7-c3837ac2d52b",
          "has_dashboard": "true"
        }
      }
    ],
    "Aggregate Documents": [
      {
        "json": {
          "output": [
            {
              "document_id": "c20218dd",
              "document_name": "Overview: CriblU Overview",
              "folder_id": "3089bcee-baea-45af-8613-63077f0e9417",
              "folder_name": "Marketing",
              "document_scope": "organization",
              "owner_name": "Jerome Duepner",
              "owner_id": "6d16a844-b692-4203-9d0c-c9ab24aa16df",
              "has_dashboard": "true"
            },
            {
              "document_id": "credit-consumption",
              "document_name": "Customer: Cloud Credit Consumption",
              "folder_id": "b69a8af3-5d04-4a3e-b610-9a74f4807de0",
              "folder_name": "Product",
              "document_scope": "organization",
              "owner_name": "Matthew Lim",
              "owner_id": "86a545a6-5958-43e5-8f16-68eb9f148744",
              "has_dashboard": "true"
            },
            {
              "document_id": "credit-consumption",
              "document_name": "Customer: Cloud Credit Consumption",
              "folder_id": "b69a8af3-5d04-4a3e-b610-9a74f4807de0",
              "folder_name": "Product",
              "document_scope": "organization",
              "owner_name": "Matthew Lim",
              "owner_id": "86a545a6-5958-43e5-8f16-68eb9f148744",
              "has_dashboard": "true"
            },
            {
              "document_id": "04ae7dfa",
              "document_name": "Overview: Cloud Waterfall",
              "folder_id": "c617db8b-6b22-4fdf-a7a8-8026926e4ace",
              "folder_name": "Finance",
              "document_scope": "organization",
              "owner_name": "Laura Knipe",
              "owner_id": "ebf8342f-9b5f-4efc-92b7-b1210c34cfaf",
              "has_dashboard": "true"
            },
            {
              "document_id": "de229002",
              "document_name": "Customer: Customer Breakdown",
              "folder_id": "3d5676c9-be8d-47fd-b268-8beae0430608",
              "folder_name": "Customer Experience",
              "document_scope": "organization",
              "owner_name": "Chuck Morris",
              "owner_id": "113ba39e-d2f3-44ff-9225-da17783348a3",
              "has_dashboard": "true"
            },
            {
              "document_id": "de229002",
              "document_name": "Customer: Customer Breakdown",
              "folder_id": "3d5676c9-be8d-47fd-b268-8beae0430608",
              "folder_name": "Customer Experience",
              "document_scope": "organization",
              "owner_name": "Chuck Morris",
              "owner_id": "113ba39e-d2f3-44ff-9225-da17783348a3",
              "has_dashboard": "true"
            },
            {
              "document_id": "70d5b283",
              "document_name": "Stream & Edge Org Cost",
              "folder_id": "47df23e7-a9e3-4a0f-87bf-81fa3e06f809",
              "folder_name": "Stream",
              "document_scope": "organization",
              "owner_name": "Fatima Albar",
              "owner_id": "d71da6f5-891f-4d2c-a30d-6b272703bd58",
              "has_dashboard": "true"
            },
            {
              "document_id": "2fb66a67",
              "document_name": "Product: Copilot Trend Metrics",
              "folder_id": "b69a8af3-5d04-4a3e-b610-9a74f4807de0",
              "folder_name": "Product",
              "document_scope": "organization",
              "owner_name": "Matthew Lim",
              "owner_id": "86a545a6-5958-43e5-8f16-68eb9f148744",
              "has_dashboard": "true"
            },
            {
              "document_id": "2fb66a67",
              "document_name": "Product: Copilot Trend Metrics",
              "folder_id": "b69a8af3-5d04-4a3e-b610-9a74f4807de0",
              "folder_name": "Product",
              "document_scope": "organization",
              "owner_name": "Matthew Lim",
              "owner_id": "86a545a6-5958-43e5-8f16-68eb9f148744",
              "has_dashboard": "true"
            },
            {
              "document_id": "2fb66a67",
              "document_name": "Product: Copilot Trend Metrics",
              "folder_id": "b69a8af3-5d04-4a3e-b610-9a74f4807de0",
              "folder_name": "Product",
              "document_scope": "organization",
              "owner_name": "Matthew Lim",
              "owner_id": "86a545a6-5958-43e5-8f16-68eb9f148744",
              "has_dashboard": "true"
            },
            {
              "document_id": "2fb66a67",
              "document_name": "Product: Copilot Trend Metrics",
              "folder_id": "b69a8af3-5d04-4a3e-b610-9a74f4807de0",
              "folder_name": "Product",
              "document_scope": "organization",
              "owner_name": "Matthew Lim",
              "owner_id": "86a545a6-5958-43e5-8f16-68eb9f148744",
              "has_dashboard": "true"
            },
            {
              "document_id": "f7e9dc87",
              "document_name": "Product: Lake",
              "folder_id": "b69a8af3-5d04-4a3e-b610-9a74f4807de0",
              "folder_name": "Product",
              "document_scope": "organization",
              "owner_name": "Matthew Lim",
              "owner_id": "86a545a6-5958-43e5-8f16-68eb9f148744",
              "has_dashboard": "true"
            },
            {
              "document_id": "f7e9dc87",
              "document_name": "Product: Lake",
              "folder_id": "b69a8af3-5d04-4a3e-b610-9a74f4807de0",
              "folder_name": "Product",
              "document_scope": "organization",
              "owner_name": "Matthew Lim",
              "owner_id": "86a545a6-5958-43e5-8f16-68eb9f148744",
              "has_dashboard": "true"
            },
            {
              "document_id": "f69718ea",
              "document_name": "Product: Cribl Suite - Cloud",
              "folder_id": "b69a8af3-5d04-4a3e-b610-9a74f4807de0",
              "folder_name": "Product",
              "document_scope": "organization",
              "owner_name": "Adam Armagost",
              "owner_id": "433b1608-177f-4449-b7bd-470e9283efcd",
              "has_dashboard": "true"
            },
            {
              "document_id": "f69718ea",
              "document_name": "Product: Cribl Suite - Cloud",
              "folder_id": "b69a8af3-5d04-4a3e-b610-9a74f4807de0",
              "folder_name": "Product",
              "document_scope": "organization",
              "owner_name": "Adam Armagost",
              "owner_id": "433b1608-177f-4449-b7bd-470e9283efcd",
              "has_dashboard": "true"
            },
            {
              "document_id": "dadcdf3e",
              "document_name": "Overview: Authentication Metrics",
              "folder_id": "101dfb9d-da13-470b-8726-d17ca5adb53f",
              "folder_name": "Engineering",
              "document_scope": "organization",
              "owner_name": "Matthew Lim",
              "owner_id": "86a545a6-5958-43e5-8f16-68eb9f148744",
              "has_dashboard": "true"
            },
            {
              "document_id": "dadcdf3e",
              "document_name": "Overview: Authentication Metrics",
              "folder_id": "101dfb9d-da13-470b-8726-d17ca5adb53f",
              "folder_name": "Engineering",
              "document_scope": "organization",
              "owner_name": "Matthew Lim",
              "owner_id": "86a545a6-5958-43e5-8f16-68eb9f148744",
              "has_dashboard": "true"
            },
            {
              "document_id": "47d94e3c",
              "document_name": "Overview: OEM Metrics",
              "folder_id": "d20366ff-ebb8-42b0-b2ab-9665f0dc4390",
              "folder_name": "Revenue",
              "document_scope": "organization",
              "owner_name": "Laura Knipe",
              "owner_id": "ebf8342f-9b5f-4efc-92b7-b1210c34cfaf",
              "has_dashboard": "true"
            },
            {
              "document_id": "47d94e3c",
              "document_name": "Overview: OEM Metrics",
              "folder_id": "d20366ff-ebb8-42b0-b2ab-9665f0dc4390",
              "folder_name": "Revenue",
              "document_scope": "organization",
              "owner_name": "Laura Knipe",
              "owner_id": "ebf8342f-9b5f-4efc-92b7-b1210c34cfaf",
              "has_dashboard": "true"
            },
            {
              "document_id": "47d94e3c",
              "document_name": "Overview: OEM Metrics",
              "folder_id": "d20366ff-ebb8-42b0-b2ab-9665f0dc4390",
              "folder_name": "Revenue",
              "document_scope": "organization",
              "owner_name": "Laura Knipe",
              "owner_id": "ebf8342f-9b5f-4efc-92b7-b1210c34cfaf",
              "has_dashboard": "true"
            },
            {
              "document_id": "3bd15a19",
              "document_name": "Overview: Customer Account Engagement ",
              "folder_id": "3089bcee-baea-45af-8613-63077f0e9417",
              "folder_name": "Marketing",
              "document_scope": "organization",
              "owner_name": "Laura Knipe",
              "owner_id": "ebf8342f-9b5f-4efc-92b7-b1210c34cfaf",
              "has_dashboard": "true"
            },
            {
              "document_id": "e445af06",
              "document_name": "Product: Cribl Suite - Software",
              "folder_id": "b69a8af3-5d04-4a3e-b610-9a74f4807de0",
              "folder_name": "Product",
              "document_scope": "organization",
              "owner_name": "Chuck Morris",
              "owner_id": "113ba39e-d2f3-44ff-9225-da17783348a3",
              "has_dashboard": "true"
            },
            {
              "document_id": "7e2736f9",
              "document_name": "[WIP] ProdOps Weekly",
              "folder_id": "83601e73-a00e-4c35-80a1-66918cb85ac6",
              "folder_name": "ProdOps",
              "document_scope": "organization",
              "owner_name": "Jona Molla",
              "owner_id": "71441d6e-c3e4-41e7-83d7-c3837ac2d52b",
              "has_dashboard": "true"
            },
            {
              "document_id": "7e2736f9",
              "document_name": "[WIP] ProdOps Weekly",
              "folder_id": "83601e73-a00e-4c35-80a1-66918cb85ac6",
              "folder_name": "ProdOps",
              "document_scope": "organization",
              "owner_name": "Jona Molla",
              "owner_id": "71441d6e-c3e4-41e7-83d7-c3837ac2d52b",
              "has_dashboard": "true"
            }
          ]
        }
      }
    ],
    "Map Feedback to Snowflake Schema": [
      {
        "json": {
          "event_id": "1759194864.008200",
          "event_timestamp": "2025-09-30T01:14:24.008Z",
          "message_ts": "1759194861.395459",
          "message_timestamp": "2025-09-30T01:14:21.395Z",
          "message_text": "Hi team - Is there a dashboard in Omni to see free cribl cloud users, and associated email addresses within accounts I own similar to https://cribl.cloud.looker.com/explore/Product/cloud_orgs?qid=6AczKnvfgAdLscURN8AKDq&amp;toggle=filthis one> I used in looker?",
          "message_user_name": "nathan_kwok",
          "message_user_email": "nkwok@cribl.io",
          "message_user_id": "U06PVBEK9T6",
          "reaction": "omni",
          "reaction_user_id": "U06PVBEK9T6",
          "reaction_user_email": "nkwok@cribl.io",
          "channel_id": "C0912AANW1L",
          "channel_name": "data-eng-test-ai-channel",
          "conversation_id": "C0912AANW1L",
          "team_id": "T3XQYAF26",
          "team_domain": "cribl",
          "retrieved_document_ids": "[\"f69718ea\",\"e445af06\",\"c20218dd\",\"7e2736f9\",\"f69718ea\",\"7e2736f9\",\"3bd15a19\",\"2fb66a67\",\"2fb66a67\",\"2fb66a67\",\"2fb66a67\",\"47d94e3c\",\"47d94e3c\",\"dadcdf3e\",\"dadcdf3e\",\"f7e9dc87\",\"de229002\",\"credit-consumption\",\"de229002\",\"f7e9dc87\",\"47d94e3c\",\"credit-consumption\",\"70d5b283\",\"04ae7dfa\"]",
          "retrieved_document_id_counts": "{\"c20218dd\":1,\"credit-consumption\":2,\"04ae7dfa\":1,\"de229002\":2,\"70d5b283\":1,\"2fb66a67\":4,\"f7e9dc87\":2,\"f69718ea\":2,\"dadcdf3e\":2,\"47d94e3c\":3,\"3bd15a19\":1,\"e445af06\":1,\"7e2736f9\":2}",
          "extracted_keywords": "[\"free cribl cloud users\",\"associated email addresses\",\"accounts owned\",\"cloud organization data\",\"user account reporting\"]",
          "omni_picked_topics": "[\"cloud_orgs_and_billing\",\"cloud_orgs_and_billing\",\"cloud_orgs_and_billing\"]",
          "keyword_document_name_search_results": "[\"f69718ea\",\"e445af06\",\"c20218dd\"]",
          "keyword_document_query_name_search_results": "[\"7e2736f9\",\"f69718ea\",\"7e2736f9\",\"3bd15a19\"]",
          "keyword_document_query_table_search_results": "[\"2fb66a67\",\"2fb66a67\",\"2fb66a67\",\"2fb66a67\"]",
          "topic_document_query_search_results": "[\"47d94e3c\",\"47d94e3c\",\"dadcdf3e\",\"dadcdf3e\",\"f7e9dc87\",\"de229002\",\"credit-consumption\",\"de229002\",\"f7e9dc87\",\"47d94e3c\"]",
          "topic_document_search_results": "[\"credit-consumption\",\"70d5b283\",\"04ae7dfa\"]",
          "recommended_document_ids": "[\"2fb66a67\",\"47d94e3c\",\"credit-consumption\"]",
          "recommendation_text": "Hey @nathan_kwok, based on your interest in free Cribl Cloud users and associated email addresses across your cloud orgs, here are some dashboards that might contain what you need:\n <https://cribl.omniapp.co/dashboards/2fb66a67|Product: Copilot Trend Metrics> in <https://cribl.omniapp.co/f/product|Product>\n <https://cribl.omniapp.co/dashboards/47d94e3c|Overview: OEM Metrics> in <https://cribl.omniapp.co/f/revenue|Revenue>\n <https://cribl.omniapp.co/dashboards/credit-consumption|Customer: Cloud Credit Consumption> in <https://cribl.omniapp.co/f/product|Product>"
        }
      }
    ],
    "Insert Table Schema Mapping": [
      {
        "json": {
          "body": {
            "channel_id": "C0912AANW1L",
            "channel_name": "data-eng-test-ai-channel",
            "conversation_id": "C0912AANW1L",
            "event_id": "1759194864.008200",
            "event_timestamp": "2025-09-30T01:14:24.008Z",
            "is_message_user_bot": "False",
            "message_text": "Hi team - Is there a dashboard in Omni to see free cribl cloud users, and associated email addresses within accounts I own similar to https://cribl.cloud.looker.com/explore/Product/cloud_orgs?qid=6AczKnvfgAdLscURN8AKDq&amp;toggle=filthis one> I used in looker?",
            "message_timestamp": "2025-09-30T01:14:21.395Z",
            "message_ts": "1759194861.395459",
            "message_user_email": "nkwok@cribl.io",
            "message_user_first_name": "Nathan",
            "message_user_id": "U06PVBEK9T6",
            "message_user_last_name": "Kwok",
            "message_user_name": "nathan_kwok",
            "reaction": "omni",
            "reaction_user_email": "nkwok@cribl.io",
            "reaction_user_id": "U06PVBEK9T6",
            "team_domain": "cribl",
            "team_id": "T3XQYAF26"
          },
          "table_schema_mapping": {
            "event_id": "event_id",
            "event_timestamp": "event_timestamp",
            "message_ts": "message_ts",
            "message_timestamp": "message_timestamp",
            "message_text": "message_text",
            "message_user_name": "message_user_name",
            "message_user_email": "message_user_email",
            "message_user_id": "message_user_id",
            "reaction": "reaction",
            "reaction_user_id": "reaction_user_id",
            "reaction_user_email": "reaction_user_email",
            "channel_id": "channel_id",
            "channel_name": "channel_name",
            "conversation_id": "conversation_id",
            "team_id": "team_id",
            "team_domain": "team_domain"
          },
          "retrieved_document_ids": "[\"f69718ea\",\"e445af06\",\"c20218dd\",\"7e2736f9\",\"f69718ea\",\"7e2736f9\",\"3bd15a19\",\"2fb66a67\",\"2fb66a67\",\"2fb66a67\",\"2fb66a67\",\"47d94e3c\",\"47d94e3c\",\"dadcdf3e\",\"dadcdf3e\",\"f7e9dc87\",\"de229002\",\"credit-consumption\",\"de229002\",\"f7e9dc87\",\"47d94e3c\",\"credit-consumption\",\"70d5b283\",\"04ae7dfa\"]",
          "retrieved_document_id_counts": "{\"c20218dd\":1,\"credit-consumption\":2,\"04ae7dfa\":1,\"de229002\":2,\"70d5b283\":1,\"2fb66a67\":4,\"f7e9dc87\":2,\"f69718ea\":2,\"dadcdf3e\":2,\"47d94e3c\":3,\"3bd15a19\":1,\"e445af06\":1,\"7e2736f9\":2}",
          "extracted_keywords": "[\"free cribl cloud users\",\"associated email addresses\",\"accounts owned\",\"cloud organization data\",\"user account reporting\"]",
          "omni_picked_topics": "[\"cloud_orgs_and_billing\",\"cloud_orgs_and_billing\",\"cloud_orgs_and_billing\"]",
          "keyword_document_name_search_results": "[\"f69718ea\",\"e445af06\",\"c20218dd\"]",
          "keyword_document_query_name_search_results": "[\"7e2736f9\",\"f69718ea\",\"7e2736f9\",\"3bd15a19\"]",
          "keyword_document_query_table_search_results": "[\"2fb66a67\",\"2fb66a67\",\"2fb66a67\",\"2fb66a67\"]",
          "topic_document_query_search_results": "[\"47d94e3c\",\"47d94e3c\",\"dadcdf3e\",\"dadcdf3e\",\"f7e9dc87\",\"de229002\",\"credit-consumption\",\"de229002\",\"f7e9dc87\",\"47d94e3c\"]",
          "topic_document_search_results": "[\"credit-consumption\",\"70d5b283\",\"04ae7dfa\"]",
          "recommended_document_ids": "[\"2fb66a67\",\"47d94e3c\",\"credit-consumption\"]",
          "recommendation_text": "Hey @nathan_kwok, based on your interest in free Cribl Cloud users and associated email addresses across your cloud orgs, here are some dashboards that might contain what you need:\n <https://cribl.omniapp.co/dashboards/2fb66a67|Product: Copilot Trend Metrics> in <https://cribl.omniapp.co/f/product|Product>\n <https://cribl.omniapp.co/dashboards/47d94e3c|Overview: OEM Metrics> in <https://cribl.omniapp.co/f/revenue|Revenue>\n <https://cribl.omniapp.co/dashboards/credit-consumption|Customer: Cloud Credit Consumption> in <https://cribl.omniapp.co/f/product|Product>"
        }
      }
    ],
    "Global Vars": [
      {
        "json": {
          "body": {
            "channel_id": "C0912AANW1L",
            "channel_name": "data-eng-test-ai-channel",
            "conversation_id": "C0912AANW1L",
            "event_id": "1759194864.008200",
            "event_timestamp": "2025-09-30T01:14:24.008Z",
            "is_message_user_bot": "False",
            "message_text": "Hi team - Is there a dashboard in Omni to see free cribl cloud users, and associated email addresses within accounts I own similar to https://cribl.cloud.looker.com/explore/Product/cloud_orgs?qid=6AczKnvfgAdLscURN8AKDq&amp;toggle=filthis one> I used in looker?",
            "message_timestamp": "2025-09-30T01:14:21.395Z",
            "message_ts": "1759194861.395459",
            "message_user_email": "nkwok@cribl.io",
            "message_user_first_name": "Nathan",
            "message_user_id": "U06PVBEK9T6",
            "message_user_last_name": "Kwok",
            "message_user_name": "nathan_kwok",
            "reaction": "omni",
            "reaction_user_email": "nkwok@cribl.io",
            "reaction_user_id": "U06PVBEK9T6",
            "team_domain": "cribl",
            "team_id": "T3XQYAF26"
          },
          "snowflake_base_url": "https://ml16699-hya89079.snowflakecomputing.com",
          "omni_documents_search_service": {
            "snowflake_database": "ANALYTICS",
            "snowflake_schema": "OMNI",
            "service_name": "omni_documents_search_service"
          },
          "omni_document_queries_query_table_search_service": {
            "snowflake_database": "ANALYTICS",
            "snowflake_schema": "OMNI",
            "agent_name": "omni_document_queries_query_table_search_service"
          },
          "omni_document_queries_query_name_search_service": {
            "snowflake_database": "ANALYTICS",
            "snowflake_schema": "OMNI",
            "agent_name": "omni_document_queries_query_name_search_service"
          },
          "omni_documents_analyst_agent": {
            "snowflake_database": "SNOWFLAKE_INTELLIGENCE",
            "snowflake_schema": "AGENTS",
            "agent_name": "OMNI_DOCUMENTS_ANALYST_AGENT"
          },
          "zapier_slack_response_webhook": {
            "webhook_url": "https://hooks.zapier.com/hooks/catch/23046078/u1mp0gx/"
          },
          "slack": {
            "error_message": "The Omni agent could not find relevant dashboards :cry:"
          },
          "omni_api": {
            "omni_base_url": "https://cribl.omniapp.co",
            "model_id": "4345b118-cbbe-4f7c-a705-ea0aa8da57c0",
            "omni_user_id": "893ce348-0fb2-44ac-b0f8-06521a341580"
          },
          "snowflake_tables": {
            "omni_users": {
              "snowflake_database": "ANALYTICS",
              "snowflake_schema": "OMNI",
              "table_name": "OMNI_USERS"
            },
            "omni_documents": {
              "snowflake_database": "ANALYTICS",
              "snowflake_schema": "OMNI",
              "table_name": "DOCUMENTS"
            },
            "omni_document_queries": {
              "snowflake_database": "ANALYTICS",
              "snowflake_schema": "OMNI",
              "table_name": "DOCUMENT_QUERIES"
            },
            "dashboard_recommendations": {
              "snowflake_database": "RAW",
              "snowflake_schema": "OMNI",
              "table_name": "DASHBOARD_RECOMMENDATIONS"
            },
            "dashboard_recommendations_feedback": {
              "snowflake_database": "RAW",
              "snowflake_schema": "OMNI",
              "table_name": "DASHBOARD_RECOMMENDATIONS_FEEDBACK"
            }
          }
        }
      }
    ],
    "For each document id": [
      {
        "json": {
          "document_ids": "f69718ea"
        }
      },
      {
        "json": {
          "document_ids": "e445af06"
        }
      },
      {
        "json": {
          "document_ids": "c20218dd"
        }
      },
      {
        "json": {
          "document_ids": "7e2736f9"
        }
      },
      {
        "json": {
          "document_ids": "f69718ea"
        }
      },
      {
        "json": {
          "document_ids": "7e2736f9"
        }
      },
      {
        "json": {
          "document_ids": "3bd15a19"
        }
      },
      {
        "json": {
          "document_ids": "2fb66a67"
        }
      },
      {
        "json": {
          "document_ids": "2fb66a67"
        }
      },
      {
        "json": {
          "document_ids": "2fb66a67"
        }
      },
      {
        "json": {
          "document_ids": "2fb66a67"
        }
      },
      {
        "json": {
          "document_ids": "47d94e3c"
        }
      },
      {
        "json": {
          "document_ids": "47d94e3c"
        }
      },
      {
        "json": {
          "document_ids": "dadcdf3e"
        }
      },
      {
        "json": {
          "document_ids": "dadcdf3e"
        }
      },
      {
        "json": {
          "document_ids": "f7e9dc87"
        }
      },
      {
        "json": {
          "document_ids": "de229002"
        }
      },
      {
        "json": {
          "document_ids": "credit-consumption"
        }
      },
      {
        "json": {
          "document_ids": "de229002"
        }
      },
      {
        "json": {
          "document_ids": "f7e9dc87"
        }
      },
      {
        "json": {
          "document_ids": "47d94e3c"
        }
      },
      {
        "json": {
          "document_ids": "credit-consumption"
        }
      },
      {
        "json": {
          "document_ids": "70d5b283"
        }
      },
      {
        "json": {
          "document_ids": "04ae7dfa"
        }
      }
    ],
    "Get Document Permissions for User Id": [
      {
        "json": {
          "body": {
            "permits": [
              {
                "description": "Organization",
                "direct": {
                  "accessBoost": false,
                  "isOwner": false,
                  "role": "VIEWER"
                },
                "id": "21975a9b-336e-40e3-a168-6324ee57c1a4",
                "name": "Organization",
                "type": "user"
              },
              {
                "description": "Organization",
                "folder": {
                  "accessBoost": false,
                  "isOwner": false,
                  "role": "VIEWER"
                },
                "id": "21975a9b-336e-40e3-a168-6324ee57c1a4",
                "name": "Organization",
                "type": "user"
              },
              {
                "description": "Organization - via Folder",
                "direct": {
                  "accessBoost": false,
                  "role": "VIEWER"
                },
                "id": "ORG-MEMBERSHIP",
                "name": "Nathan Kwok",
                "type": "user"
              }
            ]
          },
          "headers": {
            "date": "Tue, 30 Sep 2025 23:23:47 GMT",
            "content-type": "application/json; charset=utf-8",
            "transfer-encoding": "chunked",
            "connection": "close",
            "x-trace-id": "Root=1-68dc6683-53e2cf9b32471ce54822bc71",
            "cache-control": "no-cache, no-store",
            "expires": "0",
            "pragma": "no-cache",
            "document-policy": "js-profiling",
            "permissions-policy": "microphone=(), camera=(), geolocation=()",
            "referrer-policy": "strict-origin-when-cross-origin",
            "strict-transport-security": "max-age=31536000; includeSubDomains",
            "x-content-type-options": "nosniff",
            "x-xss-protection": "1; mode=block",
            "vary": "Accept-Encoding"
          },
          "statusCode": 200,
          "statusMessage": "OK"
        }
      },
      {
        "json": {
          "body": {
            "permits": [
              {
                "description": "Organization",
                "direct": {
                  "accessBoost": false,
                  "isOwner": false,
                  "role": "VIEWER"
                },
                "id": "21975a9b-336e-40e3-a168-6324ee57c1a4",
                "name": "Organization",
                "type": "user"
              },
              {
                "description": "Organization",
                "folder": {
                  "accessBoost": false,
                  "isOwner": false,
                  "role": "VIEWER"
                },
                "id": "21975a9b-336e-40e3-a168-6324ee57c1a4",
                "name": "Organization",
                "type": "user"
              },
              {
                "description": "Organization - via Folder",
                "direct": {
                  "accessBoost": false,
                  "role": "VIEWER"
                },
                "id": "ORG-MEMBERSHIP",
                "name": "Nathan Kwok",
                "type": "user"
              }
            ]
          },
          "headers": {
            "date": "Tue, 30 Sep 2025 23:23:48 GMT",
            "content-type": "application/json; charset=utf-8",
            "transfer-encoding": "chunked",
            "connection": "close",
            "x-trace-id": "Root=1-68dc6683-05e0bac6669f4b293524be14",
            "cache-control": "no-cache, no-store",
            "expires": "0",
            "pragma": "no-cache",
            "document-policy": "js-profiling",
            "permissions-policy": "microphone=(), camera=(), geolocation=()",
            "referrer-policy": "strict-origin-when-cross-origin",
            "strict-transport-security": "max-age=31536000; includeSubDomains",
            "x-content-type-options": "nosniff",
            "x-xss-protection": "1; mode=block",
            "vary": "Accept-Encoding"
          },
          "statusCode": 200,
          "statusMessage": "OK"
        }
      },
      {
        "json": {
          "body": {
            "permits": [
              {
                "description": "Organization",
                "direct": {
                  "accessBoost": false,
                  "isOwner": false,
                  "role": "VIEWER"
                },
                "id": "21975a9b-336e-40e3-a168-6324ee57c1a4",
                "name": "Organization",
                "type": "user"
              },
              {
                "description": "Organization",
                "folder": {
                  "accessBoost": false,
                  "isOwner": false,
                  "role": "VIEWER"
                },
                "id": "21975a9b-336e-40e3-a168-6324ee57c1a4",
                "name": "Organization",
                "type": "user"
              },
              {
                "description": "Organization - via Folder",
                "direct": {
                  "accessBoost": false,
                  "role": "VIEWER"
                },
                "id": "ORG-MEMBERSHIP",
                "name": "Nathan Kwok",
                "type": "user"
              }
            ]
          },
          "headers": {
            "date": "Tue, 30 Sep 2025 23:23:48 GMT",
            "content-type": "application/json; charset=utf-8",
            "transfer-encoding": "chunked",
            "connection": "close",
            "x-trace-id": "Root=1-68dc6683-13a7cd400aa450015088f427",
            "cache-control": "no-cache, no-store",
            "expires": "0",
            "pragma": "no-cache",
            "document-policy": "js-profiling",
            "permissions-policy": "microphone=(), camera=(), geolocation=()",
            "referrer-policy": "strict-origin-when-cross-origin",
            "strict-transport-security": "max-age=31536000; includeSubDomains",
            "x-content-type-options": "nosniff",
            "x-xss-protection": "1; mode=block",
            "vary": "Accept-Encoding"
          },
          "statusCode": 200,
          "statusMessage": "OK"
        }
      },
      {
        "json": {
          "body": {
            "permits": [
              {
                "description": "Organization",
                "direct": {
                  "accessBoost": false,
                  "isOwner": false,
                  "role": "VIEWER"
                },
                "id": "21975a9b-336e-40e3-a168-6324ee57c1a4",
                "name": "Organization",
                "type": "user"
              },
              {
                "description": "Organization",
                "folder": {
                  "accessBoost": false,
                  "isOwner": false,
                  "role": "VIEWER"
                },
                "id": "21975a9b-336e-40e3-a168-6324ee57c1a4",
                "name": "Organization",
                "type": "user"
              },
              {
                "description": "Organization - via Folder",
                "direct": {
                  "accessBoost": false,
                  "role": "VIEWER"
                },
                "id": "ORG-MEMBERSHIP",
                "name": "Nathan Kwok",
                "type": "user"
              }
            ]
          },
          "headers": {
            "date": "Tue, 30 Sep 2025 23:23:48 GMT",
            "content-type": "application/json; charset=utf-8",
            "transfer-encoding": "chunked",
            "connection": "close",
            "x-trace-id": "Root=1-68dc6683-00752725360cd0c33e709b43",
            "cache-control": "no-cache, no-store",
            "expires": "0",
            "pragma": "no-cache",
            "document-policy": "js-profiling",
            "permissions-policy": "microphone=(), camera=(), geolocation=()",
            "referrer-policy": "strict-origin-when-cross-origin",
            "strict-transport-security": "max-age=31536000; includeSubDomains",
            "x-content-type-options": "nosniff",
            "x-xss-protection": "1; mode=block",
            "vary": "Accept-Encoding"
          },
          "statusCode": 200,
          "statusMessage": "OK"
        }
      },
      {
        "json": {
          "body": {
            "permits": [
              {
                "description": "Organization",
                "direct": {
                  "accessBoost": false,
                  "isOwner": false,
                  "role": "VIEWER"
                },
                "id": "21975a9b-336e-40e3-a168-6324ee57c1a4",
                "name": "Organization",
                "type": "user"
              },
              {
                "description": "Organization",
                "folder": {
                  "accessBoost": false,
                  "isOwner": false,
                  "role": "VIEWER"
                },
                "id": "21975a9b-336e-40e3-a168-6324ee57c1a4",
                "name": "Organization",
                "type": "user"
              },
              {
                "description": "Organization - via Folder",
                "direct": {
                  "accessBoost": false,
                  "role": "VIEWER"
                },
                "id": "ORG-MEMBERSHIP",
                "name": "Nathan Kwok",
                "type": "user"
              }
            ]
          },
          "headers": {
            "date": "Tue, 30 Sep 2025 23:23:48 GMT",
            "content-type": "application/json; charset=utf-8",
            "transfer-encoding": "chunked",
            "connection": "close",
            "x-trace-id": "Root=1-68dc6683-3377cee14ffb19496593ec68",
            "cache-control": "no-cache, no-store",
            "expires": "0",
            "pragma": "no-cache",
            "document-policy": "js-profiling",
            "permissions-policy": "microphone=(), camera=(), geolocation=()",
            "referrer-policy": "strict-origin-when-cross-origin",
            "strict-transport-security": "max-age=31536000; includeSubDomains",
            "x-content-type-options": "nosniff",
            "x-xss-protection": "1; mode=block",
            "vary": "Accept-Encoding"
          },
          "statusCode": 200,
          "statusMessage": "OK"
        }
      },
      {
        "json": {
          "body": {
            "permits": [
              {
                "description": "Organization",
                "direct": {
                  "accessBoost": false,
                  "isOwner": false,
                  "role": "VIEWER"
                },
                "id": "21975a9b-336e-40e3-a168-6324ee57c1a4",
                "name": "Organization",
                "type": "user"
              },
              {
                "description": "Organization",
                "folder": {
                  "accessBoost": false,
                  "isOwner": false,
                  "role": "VIEWER"
                },
                "id": "21975a9b-336e-40e3-a168-6324ee57c1a4",
                "name": "Organization",
                "type": "user"
              },
              {
                "description": "Organization - via Folder",
                "direct": {
                  "accessBoost": false,
                  "role": "VIEWER"
                },
                "id": "ORG-MEMBERSHIP",
                "name": "Nathan Kwok",
                "type": "user"
              }
            ]
          },
          "headers": {
            "date": "Tue, 30 Sep 2025 23:23:47 GMT",
            "content-type": "application/json; charset=utf-8",
            "transfer-encoding": "chunked",
            "connection": "close",
            "x-trace-id": "Root=1-68dc6683-352e6bac2d8a60985d84d207",
            "cache-control": "no-cache, no-store",
            "expires": "0",
            "pragma": "no-cache",
            "document-policy": "js-profiling",
            "permissions-policy": "microphone=(), camera=(), geolocation=()",
            "referrer-policy": "strict-origin-when-cross-origin",
            "strict-transport-security": "max-age=31536000; includeSubDomains",
            "x-content-type-options": "nosniff",
            "x-xss-protection": "1; mode=block",
            "vary": "Accept-Encoding"
          },
          "statusCode": 200,
          "statusMessage": "OK"
        }
      },
      {
        "json": {
          "body": {
            "permits": [
              {
                "description": "Organization",
                "direct": {
                  "accessBoost": false,
                  "isOwner": false,
                  "role": "VIEWER"
                },
                "id": "21975a9b-336e-40e3-a168-6324ee57c1a4",
                "name": "Organization",
                "type": "user"
              },
              {
                "description": "Organization",
                "folder": {
                  "accessBoost": false,
                  "isOwner": false,
                  "role": "VIEWER"
                },
                "id": "21975a9b-336e-40e3-a168-6324ee57c1a4",
                "name": "Organization",
                "type": "user"
              },
              {
                "description": "Organization - via Folder",
                "direct": {
                  "accessBoost": false,
                  "role": "VIEWER"
                },
                "id": "ORG-MEMBERSHIP",
                "name": "Nathan Kwok",
                "type": "user"
              }
            ]
          },
          "headers": {
            "date": "Tue, 30 Sep 2025 23:23:48 GMT",
            "content-type": "application/json; charset=utf-8",
            "transfer-encoding": "chunked",
            "connection": "close",
            "x-trace-id": "Root=1-68dc6683-1a9b676218ce08c637d6703e",
            "cache-control": "no-cache, no-store",
            "expires": "0",
            "pragma": "no-cache",
            "document-policy": "js-profiling",
            "permissions-policy": "microphone=(), camera=(), geolocation=()",
            "referrer-policy": "strict-origin-when-cross-origin",
            "strict-transport-security": "max-age=31536000; includeSubDomains",
            "x-content-type-options": "nosniff",
            "x-xss-protection": "1; mode=block",
            "vary": "Accept-Encoding"
          },
          "statusCode": 200,
          "statusMessage": "OK"
        }
      },
      {
        "json": {
          "body": {
            "permits": [
              {
                "description": "Organization",
                "direct": {
                  "accessBoost": false,
                  "isOwner": false,
                  "role": "VIEWER"
                },
                "id": "21975a9b-336e-40e3-a168-6324ee57c1a4",
                "name": "Organization",
                "type": "user"
              },
              {
                "description": "Organization",
                "folder": {
                  "accessBoost": false,
                  "isOwner": false,
                  "role": "VIEWER"
                },
                "id": "21975a9b-336e-40e3-a168-6324ee57c1a4",
                "name": "Organization",
                "type": "user"
              },
              {
                "description": "Organization - via Folder",
                "direct": {
                  "accessBoost": false,
                  "role": "VIEWER"
                },
                "id": "ORG-MEMBERSHIP",
                "name": "Nathan Kwok",
                "type": "user"
              }
            ]
          },
          "headers": {
            "date": "Tue, 30 Sep 2025 23:23:48 GMT",
            "content-type": "application/json; charset=utf-8",
            "transfer-encoding": "chunked",
            "connection": "close",
            "x-trace-id": "Root=1-68dc6683-6d570ba27591f2740a77dc82",
            "cache-control": "no-cache, no-store",
            "expires": "0",
            "pragma": "no-cache",
            "document-policy": "js-profiling",
            "permissions-policy": "microphone=(), camera=(), geolocation=()",
            "referrer-policy": "strict-origin-when-cross-origin",
            "strict-transport-security": "max-age=31536000; includeSubDomains",
            "x-content-type-options": "nosniff",
            "x-xss-protection": "1; mode=block",
            "vary": "Accept-Encoding"
          },
          "statusCode": 200,
          "statusMessage": "OK"
        }
      },
      {
        "json": {
          "body": {
            "permits": [
              {
                "description": "Organization",
                "direct": {
                  "accessBoost": false,
                  "isOwner": false,
                  "role": "VIEWER"
                },
                "id": "21975a9b-336e-40e3-a168-6324ee57c1a4",
                "name": "Organization",
                "type": "user"
              },
              {
                "description": "Organization",
                "folder": {
                  "accessBoost": false,
                  "isOwner": false,
                  "role": "VIEWER"
                },
                "id": "21975a9b-336e-40e3-a168-6324ee57c1a4",
                "name": "Organization",
                "type": "user"
              },
              {
                "description": "Organization - via Folder",
                "direct": {
                  "accessBoost": false,
                  "role": "VIEWER"
                },
                "id": "ORG-MEMBERSHIP",
                "name": "Nathan Kwok",
                "type": "user"
              }
            ]
          },
          "headers": {
            "date": "Tue, 30 Sep 2025 23:23:48 GMT",
            "content-type": "application/json; charset=utf-8",
            "transfer-encoding": "chunked",
            "connection": "close",
            "x-trace-id": "Root=1-68dc6683-11a04a3a2a574b7261c81475",
            "cache-control": "no-cache, no-store",
            "expires": "0",
            "pragma": "no-cache",
            "document-policy": "js-profiling",
            "permissions-policy": "microphone=(), camera=(), geolocation=()",
            "referrer-policy": "strict-origin-when-cross-origin",
            "strict-transport-security": "max-age=31536000; includeSubDomains",
            "x-content-type-options": "nosniff",
            "x-xss-protection": "1; mode=block",
            "vary": "Accept-Encoding"
          },
          "statusCode": 200,
          "statusMessage": "OK"
        }
      },
      {
        "json": {
          "body": {
            "permits": [
              {
                "description": "Organization",
                "direct": {
                  "accessBoost": false,
                  "isOwner": false,
                  "role": "VIEWER"
                },
                "id": "21975a9b-336e-40e3-a168-6324ee57c1a4",
                "name": "Organization",
                "type": "user"
              },
              {
                "description": "Organization",
                "folder": {
                  "accessBoost": false,
                  "isOwner": false,
                  "role": "VIEWER"
                },
                "id": "21975a9b-336e-40e3-a168-6324ee57c1a4",
                "name": "Organization",
                "type": "user"
              },
              {
                "description": "Organization - via Folder",
                "direct": {
                  "accessBoost": false,
                  "role": "VIEWER"
                },
                "id": "ORG-MEMBERSHIP",
                "name": "Nathan Kwok",
                "type": "user"
              }
            ]
          },
          "headers": {
            "date": "Tue, 30 Sep 2025 23:23:48 GMT",
            "content-type": "application/json; charset=utf-8",
            "transfer-encoding": "chunked",
            "connection": "close",
            "x-trace-id": "Root=1-68dc6683-2cf234192159f1f5187739f1",
            "cache-control": "no-cache, no-store",
            "expires": "0",
            "pragma": "no-cache",
            "document-policy": "js-profiling",
            "permissions-policy": "microphone=(), camera=(), geolocation=()",
            "referrer-policy": "strict-origin-when-cross-origin",
            "strict-transport-security": "max-age=31536000; includeSubDomains",
            "x-content-type-options": "nosniff",
            "x-xss-protection": "1; mode=block",
            "vary": "Accept-Encoding"
          },
          "statusCode": 200,
          "statusMessage": "OK"
        }
      },
      {
        "json": {
          "body": {
            "permits": [
              {
                "description": "Organization",
                "direct": {
                  "accessBoost": false,
                  "isOwner": false,
                  "role": "VIEWER"
                },
                "id": "21975a9b-336e-40e3-a168-6324ee57c1a4",
                "name": "Organization",
                "type": "user"
              },
              {
                "description": "Organization",
                "folder": {
                  "accessBoost": false,
                  "isOwner": false,
                  "role": "VIEWER"
                },
                "id": "21975a9b-336e-40e3-a168-6324ee57c1a4",
                "name": "Organization",
                "type": "user"
              },
              {
                "description": "Organization - via Folder",
                "direct": {
                  "accessBoost": false,
                  "role": "VIEWER"
                },
                "id": "ORG-MEMBERSHIP",
                "name": "Nathan Kwok",
                "type": "user"
              }
            ]
          },
          "headers": {
            "date": "Tue, 30 Sep 2025 23:23:48 GMT",
            "content-type": "application/json; charset=utf-8",
            "transfer-encoding": "chunked",
            "connection": "close",
            "x-trace-id": "Root=1-68dc6683-6452eb7e33855bb85ce799b1",
            "cache-control": "no-cache, no-store",
            "expires": "0",
            "pragma": "no-cache",
            "document-policy": "js-profiling",
            "permissions-policy": "microphone=(), camera=(), geolocation=()",
            "referrer-policy": "strict-origin-when-cross-origin",
            "strict-transport-security": "max-age=31536000; includeSubDomains",
            "x-content-type-options": "nosniff",
            "x-xss-protection": "1; mode=block",
            "vary": "Accept-Encoding"
          },
          "statusCode": 200,
          "statusMessage": "OK"
        }
      },
      {
        "json": {
          "body": {
            "permits": [
              {
                "description": "Organization",
                "direct": {
                  "accessBoost": false,
                  "isOwner": false,
                  "role": "VIEWER"
                },
                "id": "21975a9b-336e-40e3-a168-6324ee57c1a4",
                "name": "Organization",
                "type": "user"
              },
              {
                "description": "Organization",
                "folder": {
                  "accessBoost": false,
                  "isOwner": false,
                  "role": "VIEWER"
                },
                "id": "21975a9b-336e-40e3-a168-6324ee57c1a4",
                "name": "Organization",
                "type": "user"
              },
              {
                "description": "Organization - via Folder",
                "direct": {
                  "accessBoost": false,
                  "role": "VIEWER"
                },
                "id": "ORG-MEMBERSHIP",
                "name": "Nathan Kwok",
                "type": "user"
              }
            ]
          },
          "headers": {
            "date": "Tue, 30 Sep 2025 23:23:48 GMT",
            "content-type": "application/json; charset=utf-8",
            "transfer-encoding": "chunked",
            "connection": "close",
            "x-trace-id": "Root=1-68dc6683-76c6a40c006940640cda9f01",
            "cache-control": "no-cache, no-store",
            "expires": "0",
            "pragma": "no-cache",
            "document-policy": "js-profiling",
            "permissions-policy": "microphone=(), camera=(), geolocation=()",
            "referrer-policy": "strict-origin-when-cross-origin",
            "strict-transport-security": "max-age=31536000; includeSubDomains",
            "x-content-type-options": "nosniff",
            "x-xss-protection": "1; mode=block",
            "vary": "Accept-Encoding"
          },
          "statusCode": 200,
          "statusMessage": "OK"
        }
      },
      {
        "json": {
          "body": {
            "permits": [
              {
                "description": "Organization",
                "direct": {
                  "accessBoost": false,
                  "isOwner": false,
                  "role": "VIEWER"
                },
                "id": "21975a9b-336e-40e3-a168-6324ee57c1a4",
                "name": "Organization",
                "type": "user"
              },
              {
                "description": "Organization",
                "folder": {
                  "accessBoost": false,
                  "isOwner": false,
                  "role": "VIEWER"
                },
                "id": "21975a9b-336e-40e3-a168-6324ee57c1a4",
                "name": "Organization",
                "type": "user"
              },
              {
                "description": "Organization - via Folder",
                "direct": {
                  "accessBoost": false,
                  "role": "VIEWER"
                },
                "id": "ORG-MEMBERSHIP",
                "name": "Nathan Kwok",
                "type": "user"
              }
            ]
          },
          "headers": {
            "date": "Tue, 30 Sep 2025 23:23:48 GMT",
            "content-type": "application/json; charset=utf-8",
            "transfer-encoding": "chunked",
            "connection": "close",
            "x-trace-id": "Root=1-68dc6683-11aa865c0756d2283b2fc5dc",
            "cache-control": "no-cache, no-store",
            "expires": "0",
            "pragma": "no-cache",
            "document-policy": "js-profiling",
            "permissions-policy": "microphone=(), camera=(), geolocation=()",
            "referrer-policy": "strict-origin-when-cross-origin",
            "strict-transport-security": "max-age=31536000; includeSubDomains",
            "x-content-type-options": "nosniff",
            "x-xss-protection": "1; mode=block",
            "vary": "Accept-Encoding"
          },
          "statusCode": 200,
          "statusMessage": "OK"
        }
      },
      {
        "json": {
          "body": {
            "permits": [
              {
                "description": "Organization",
                "direct": {
                  "accessBoost": false,
                  "isOwner": false,
                  "role": "VIEWER"
                },
                "id": "21975a9b-336e-40e3-a168-6324ee57c1a4",
                "name": "Organization",
                "type": "user"
              },
              {
                "description": "Organization",
                "folder": {
                  "accessBoost": false,
                  "isOwner": false,
                  "role": "VIEWER"
                },
                "id": "21975a9b-336e-40e3-a168-6324ee57c1a4",
                "name": "Organization",
                "type": "user"
              },
              {
                "description": "Organization - via Folder",
                "direct": {
                  "accessBoost": false,
                  "role": "VIEWER"
                },
                "id": "ORG-MEMBERSHIP",
                "name": "Nathan Kwok",
                "type": "user"
              }
            ]
          },
          "headers": {
            "date": "Tue, 30 Sep 2025 23:23:48 GMT",
            "content-type": "application/json; charset=utf-8",
            "transfer-encoding": "chunked",
            "connection": "close",
            "x-trace-id": "Root=1-68dc6683-50df989e603174c11674e318",
            "cache-control": "no-cache, no-store",
            "expires": "0",
            "pragma": "no-cache",
            "document-policy": "js-profiling",
            "permissions-policy": "microphone=(), camera=(), geolocation=()",
            "referrer-policy": "strict-origin-when-cross-origin",
            "strict-transport-security": "max-age=31536000; includeSubDomains",
            "x-content-type-options": "nosniff",
            "x-xss-protection": "1; mode=block",
            "vary": "Accept-Encoding"
          },
          "statusCode": 200,
          "statusMessage": "OK"
        }
      },
      {
        "json": {
          "body": {
            "permits": [
              {
                "description": "Organization",
                "direct": {
                  "accessBoost": false,
                  "isOwner": false,
                  "role": "VIEWER"
                },
                "id": "21975a9b-336e-40e3-a168-6324ee57c1a4",
                "name": "Organization",
                "type": "user"
              },
              {
                "description": "Organization",
                "folder": {
                  "accessBoost": false,
                  "isOwner": false,
                  "role": "VIEWER"
                },
                "id": "21975a9b-336e-40e3-a168-6324ee57c1a4",
                "name": "Organization",
                "type": "user"
              },
              {
                "description": "Organization - via Folder",
                "direct": {
                  "accessBoost": false,
                  "role": "VIEWER"
                },
                "id": "ORG-MEMBERSHIP",
                "name": "Nathan Kwok",
                "type": "user"
              }
            ]
          },
          "headers": {
            "date": "Tue, 30 Sep 2025 23:23:48 GMT",
            "content-type": "application/json; charset=utf-8",
            "transfer-encoding": "chunked",
            "connection": "close",
            "x-trace-id": "Root=1-68dc6683-54432e5a6a9c26bb783562f8",
            "cache-control": "no-cache, no-store",
            "expires": "0",
            "pragma": "no-cache",
            "document-policy": "js-profiling",
            "permissions-policy": "microphone=(), camera=(), geolocation=()",
            "referrer-policy": "strict-origin-when-cross-origin",
            "strict-transport-security": "max-age=31536000; includeSubDomains",
            "x-content-type-options": "nosniff",
            "x-xss-protection": "1; mode=block",
            "vary": "Accept-Encoding"
          },
          "statusCode": 200,
          "statusMessage": "OK"
        }
      },
      {
        "json": {
          "body": {
            "permits": [
              {
                "description": "Organization",
                "direct": {
                  "accessBoost": false,
                  "isOwner": false,
                  "role": "VIEWER"
                },
                "id": "21975a9b-336e-40e3-a168-6324ee57c1a4",
                "name": "Organization",
                "type": "user"
              },
              {
                "description": "Organization",
                "folder": {
                  "accessBoost": false,
                  "isOwner": false,
                  "role": "VIEWER"
                },
                "id": "21975a9b-336e-40e3-a168-6324ee57c1a4",
                "name": "Organization",
                "type": "user"
              },
              {
                "description": "Organization - via Folder",
                "direct": {
                  "accessBoost": false,
                  "role": "VIEWER"
                },
                "id": "ORG-MEMBERSHIP",
                "name": "Nathan Kwok",
                "type": "user"
              }
            ]
          },
          "headers": {
            "date": "Tue, 30 Sep 2025 23:23:48 GMT",
            "content-type": "application/json; charset=utf-8",
            "transfer-encoding": "chunked",
            "connection": "close",
            "x-trace-id": "Root=1-68dc6683-5cd88b492d872a471efa29cd",
            "cache-control": "no-cache, no-store",
            "expires": "0",
            "pragma": "no-cache",
            "document-policy": "js-profiling",
            "permissions-policy": "microphone=(), camera=(), geolocation=()",
            "referrer-policy": "strict-origin-when-cross-origin",
            "strict-transport-security": "max-age=31536000; includeSubDomains",
            "x-content-type-options": "nosniff",
            "x-xss-protection": "1; mode=block",
            "vary": "Accept-Encoding"
          },
          "statusCode": 200,
          "statusMessage": "OK"
        }
      },
      {
        "json": {
          "body": {
            "permits": [
              {
                "description": "Organization",
                "direct": {
                  "accessBoost": false,
                  "isOwner": false,
                  "role": "VIEWER"
                },
                "id": "21975a9b-336e-40e3-a168-6324ee57c1a4",
                "name": "Organization",
                "type": "user"
              },
              {
                "description": "Organization",
                "folder": {
                  "accessBoost": false,
                  "isOwner": false,
                  "role": "VIEWER"
                },
                "id": "21975a9b-336e-40e3-a168-6324ee57c1a4",
                "name": "Organization",
                "type": "user"
              },
              {
                "description": "Organization - via Folder",
                "direct": {
                  "accessBoost": false,
                  "role": "VIEWER"
                },
                "id": "ORG-MEMBERSHIP",
                "name": "Nathan Kwok",
                "type": "user"
              }
            ]
          },
          "headers": {
            "date": "Tue, 30 Sep 2025 23:23:48 GMT",
            "content-type": "application/json; charset=utf-8",
            "transfer-encoding": "chunked",
            "connection": "close",
            "x-trace-id": "Root=1-68dc6683-3a4e11543350e9cb0280102f",
            "cache-control": "no-cache, no-store",
            "expires": "0",
            "pragma": "no-cache",
            "document-policy": "js-profiling",
            "permissions-policy": "microphone=(), camera=(), geolocation=()",
            "referrer-policy": "strict-origin-when-cross-origin",
            "strict-transport-security": "max-age=31536000; includeSubDomains",
            "x-content-type-options": "nosniff",
            "x-xss-protection": "1; mode=block",
            "vary": "Accept-Encoding"
          },
          "statusCode": 200,
          "statusMessage": "OK"
        }
      },
      {
        "json": {
          "body": {
            "permits": [
              {
                "description": "Organization",
                "direct": {
                  "accessBoost": false,
                  "isOwner": false,
                  "role": "VIEWER"
                },
                "id": "21975a9b-336e-40e3-a168-6324ee57c1a4",
                "name": "Organization",
                "type": "user"
              },
              {
                "description": "Organization",
                "folder": {
                  "accessBoost": false,
                  "isOwner": false,
                  "role": "VIEWER"
                },
                "id": "21975a9b-336e-40e3-a168-6324ee57c1a4",
                "name": "Organization",
                "type": "user"
              },
              {
                "description": "Organization - via Folder",
                "direct": {
                  "accessBoost": false,
                  "role": "VIEWER"
                },
                "id": "ORG-MEMBERSHIP",
                "name": "Nathan Kwok",
                "type": "user"
              }
            ]
          },
          "headers": {
            "date": "Tue, 30 Sep 2025 23:23:48 GMT",
            "content-type": "application/json; charset=utf-8",
            "transfer-encoding": "chunked",
            "connection": "close",
            "x-trace-id": "Root=1-68dc6683-7873d7fd33f0a2b316749832",
            "cache-control": "no-cache, no-store",
            "expires": "0",
            "pragma": "no-cache",
            "document-policy": "js-profiling",
            "permissions-policy": "microphone=(), camera=(), geolocation=()",
            "referrer-policy": "strict-origin-when-cross-origin",
            "strict-transport-security": "max-age=31536000; includeSubDomains",
            "x-content-type-options": "nosniff",
            "x-xss-protection": "1; mode=block",
            "vary": "Accept-Encoding"
          },
          "statusCode": 200,
          "statusMessage": "OK"
        }
      },
      {
        "json": {
          "body": {
            "permits": [
              {
                "description": "Organization",
                "direct": {
                  "accessBoost": false,
                  "isOwner": false,
                  "role": "VIEWER"
                },
                "id": "21975a9b-336e-40e3-a168-6324ee57c1a4",
                "name": "Organization",
                "type": "user"
              },
              {
                "description": "Organization",
                "folder": {
                  "accessBoost": false,
                  "isOwner": false,
                  "role": "VIEWER"
                },
                "id": "21975a9b-336e-40e3-a168-6324ee57c1a4",
                "name": "Organization",
                "type": "user"
              },
              {
                "description": "Organization - via Folder",
                "direct": {
                  "accessBoost": false,
                  "role": "VIEWER"
                },
                "id": "ORG-MEMBERSHIP",
                "name": "Nathan Kwok",
                "type": "user"
              }
            ]
          },
          "headers": {
            "date": "Tue, 30 Sep 2025 23:23:48 GMT",
            "content-type": "application/json; charset=utf-8",
            "transfer-encoding": "chunked",
            "connection": "close",
            "x-trace-id": "Root=1-68dc6683-162eba3d64da959f66c7c96f",
            "cache-control": "no-cache, no-store",
            "expires": "0",
            "pragma": "no-cache",
            "document-policy": "js-profiling",
            "permissions-policy": "microphone=(), camera=(), geolocation=()",
            "referrer-policy": "strict-origin-when-cross-origin",
            "strict-transport-security": "max-age=31536000; includeSubDomains",
            "x-content-type-options": "nosniff",
            "x-xss-protection": "1; mode=block",
            "vary": "Accept-Encoding"
          },
          "statusCode": 200,
          "statusMessage": "OK"
        }
      },
      {
        "json": {
          "body": {
            "permits": [
              {
                "description": "Organization",
                "direct": {
                  "accessBoost": false,
                  "isOwner": false,
                  "role": "VIEWER"
                },
                "id": "21975a9b-336e-40e3-a168-6324ee57c1a4",
                "name": "Organization",
                "type": "user"
              },
              {
                "description": "Organization",
                "folder": {
                  "accessBoost": false,
                  "isOwner": false,
                  "role": "VIEWER"
                },
                "id": "21975a9b-336e-40e3-a168-6324ee57c1a4",
                "name": "Organization",
                "type": "user"
              },
              {
                "description": "Organization - via Folder",
                "direct": {
                  "accessBoost": false,
                  "role": "VIEWER"
                },
                "id": "ORG-MEMBERSHIP",
                "name": "Nathan Kwok",
                "type": "user"
              }
            ]
          },
          "headers": {
            "date": "Tue, 30 Sep 2025 23:23:48 GMT",
            "content-type": "application/json; charset=utf-8",
            "transfer-encoding": "chunked",
            "connection": "close",
            "x-trace-id": "Root=1-68dc6683-0f443a6d4639bafa48da39e2",
            "cache-control": "no-cache, no-store",
            "expires": "0",
            "pragma": "no-cache",
            "document-policy": "js-profiling",
            "permissions-policy": "microphone=(), camera=(), geolocation=()",
            "referrer-policy": "strict-origin-when-cross-origin",
            "strict-transport-security": "max-age=31536000; includeSubDomains",
            "x-content-type-options": "nosniff",
            "x-xss-protection": "1; mode=block",
            "vary": "Accept-Encoding"
          },
          "statusCode": 200,
          "statusMessage": "OK"
        }
      },
      {
        "json": {
          "body": {
            "permits": [
              {
                "description": "Organization",
                "direct": {
                  "accessBoost": false,
                  "isOwner": false,
                  "role": "VIEWER"
                },
                "id": "21975a9b-336e-40e3-a168-6324ee57c1a4",
                "name": "Organization",
                "type": "user"
              },
              {
                "description": "Organization",
                "folder": {
                  "accessBoost": false,
                  "isOwner": false,
                  "role": "VIEWER"
                },
                "id": "21975a9b-336e-40e3-a168-6324ee57c1a4",
                "name": "Organization",
                "type": "user"
              },
              {
                "description": "Organization - via Folder",
                "direct": {
                  "accessBoost": false,
                  "role": "VIEWER"
                },
                "id": "ORG-MEMBERSHIP",
                "name": "Nathan Kwok",
                "type": "user"
              }
            ]
          },
          "headers": {
            "date": "Tue, 30 Sep 2025 23:23:48 GMT",
            "content-type": "application/json; charset=utf-8",
            "transfer-encoding": "chunked",
            "connection": "close",
            "x-trace-id": "Root=1-68dc6683-573b214d4d2256aa7beaa4d7",
            "cache-control": "no-cache, no-store",
            "expires": "0",
            "pragma": "no-cache",
            "document-policy": "js-profiling",
            "permissions-policy": "microphone=(), camera=(), geolocation=()",
            "referrer-policy": "strict-origin-when-cross-origin",
            "strict-transport-security": "max-age=31536000; includeSubDomains",
            "x-content-type-options": "nosniff",
            "x-xss-protection": "1; mode=block",
            "vary": "Accept-Encoding"
          },
          "statusCode": 200,
          "statusMessage": "OK"
        }
      },
      {
        "json": {
          "body": {
            "permits": [
              {
                "description": "Organization",
                "direct": {
                  "accessBoost": false,
                  "isOwner": false,
                  "role": "VIEWER"
                },
                "id": "21975a9b-336e-40e3-a168-6324ee57c1a4",
                "name": "Organization",
                "type": "user"
              },
              {
                "description": "Organization",
                "folder": {
                  "accessBoost": false,
                  "isOwner": false,
                  "role": "VIEWER"
                },
                "id": "21975a9b-336e-40e3-a168-6324ee57c1a4",
                "name": "Organization",
                "type": "user"
              },
              {
                "description": "Organization - via Folder",
                "direct": {
                  "accessBoost": false,
                  "role": "VIEWER"
                },
                "id": "ORG-MEMBERSHIP",
                "name": "Nathan Kwok",
                "type": "user"
              }
            ]
          },
          "headers": {
            "date": "Tue, 30 Sep 2025 23:23:48 GMT",
            "content-type": "application/json; charset=utf-8",
            "transfer-encoding": "chunked",
            "connection": "close",
            "x-trace-id": "Root=1-68dc6683-517857f40ec0b16965aefe6e",
            "cache-control": "no-cache, no-store",
            "expires": "0",
            "pragma": "no-cache",
            "document-policy": "js-profiling",
            "permissions-policy": "microphone=(), camera=(), geolocation=()",
            "referrer-policy": "strict-origin-when-cross-origin",
            "strict-transport-security": "max-age=31536000; includeSubDomains",
            "x-content-type-options": "nosniff",
            "x-xss-protection": "1; mode=block",
            "vary": "Accept-Encoding"
          },
          "statusCode": 200,
          "statusMessage": "OK"
        }
      },
      {
        "json": {
          "body": {
            "permits": [
              {
                "description": "Organization",
                "direct": {
                  "accessBoost": false,
                  "isOwner": false,
                  "role": "VIEWER"
                },
                "id": "21975a9b-336e-40e3-a168-6324ee57c1a4",
                "name": "Organization",
                "type": "user"
              },
              {
                "description": "Organization",
                "folder": {
                  "accessBoost": false,
                  "isOwner": false,
                  "role": "VIEWER"
                },
                "id": "21975a9b-336e-40e3-a168-6324ee57c1a4",
                "name": "Organization",
                "type": "user"
              },
              {
                "description": "Organization - via Folder",
                "direct": {
                  "accessBoost": false,
                  "role": "VIEWER"
                },
                "id": "ORG-MEMBERSHIP",
                "name": "Nathan Kwok",
                "type": "user"
              }
            ]
          },
          "headers": {
            "date": "Tue, 30 Sep 2025 23:23:48 GMT",
            "content-type": "application/json; charset=utf-8",
            "transfer-encoding": "chunked",
            "connection": "close",
            "x-trace-id": "Root=1-68dc6683-27cb19bc14e010ca6dfdf758",
            "cache-control": "no-cache, no-store",
            "expires": "0",
            "pragma": "no-cache",
            "document-policy": "js-profiling",
            "permissions-policy": "microphone=(), camera=(), geolocation=()",
            "referrer-policy": "strict-origin-when-cross-origin",
            "strict-transport-security": "max-age=31536000; includeSubDomains",
            "x-content-type-options": "nosniff",
            "x-xss-protection": "1; mode=block",
            "vary": "Accept-Encoding"
          },
          "statusCode": 200,
          "statusMessage": "OK"
        }
      },
      {
        "json": {
          "body": {
            "permits": [
              {
                "folder": {
                  "accessBoost": false,
                  "role": "MANAGER"
                },
                "id": "157e898c-5f6b-4aa2-b0a4-bda87f012ae9",
                "name": "OmniAdmin",
                "type": "userGroup"
              }
            ]
          },
          "headers": {
            "date": "Tue, 30 Sep 2025 23:23:48 GMT",
            "content-type": "application/json; charset=utf-8",
            "transfer-encoding": "chunked",
            "connection": "close",
            "x-trace-id": "Root=1-68dc6683-609e63d247b9d17a331aa7e9",
            "cache-control": "no-cache, no-store",
            "expires": "0",
            "pragma": "no-cache",
            "document-policy": "js-profiling",
            "permissions-policy": "microphone=(), camera=(), geolocation=()",
            "referrer-policy": "strict-origin-when-cross-origin",
            "strict-transport-security": "max-age=31536000; includeSubDomains",
            "x-content-type-options": "nosniff",
            "x-xss-protection": "1; mode=block",
            "vary": "Accept-Encoding"
          },
          "statusCode": 200,
          "statusMessage": "OK"
        }
      }
    ],
    "Merge Permits and Document Ids": [
      {
        "json": {
          "permits": [
            {
              "description": "Organization",
              "direct": {
                "accessBoost": false,
                "isOwner": false,
                "role": "VIEWER"
              },
              "id": "21975a9b-336e-40e3-a168-6324ee57c1a4",
              "name": "Organization",
              "type": "user"
            },
            {
              "description": "Organization",
              "folder": {
                "accessBoost": false,
                "isOwner": false,
                "role": "VIEWER"
              },
              "id": "21975a9b-336e-40e3-a168-6324ee57c1a4",
              "name": "Organization",
              "type": "user"
            },
            {
              "description": "Organization - via Folder",
              "direct": {
                "accessBoost": false,
                "role": "VIEWER"
              },
              "id": "ORG-MEMBERSHIP",
              "name": "Nathan Kwok",
              "type": "user"
            }
          ],
          "document_id": "f69718ea",
          "status_code": 200
        }
      },
      {
        "json": {
          "permits": [
            {
              "description": "Organization",
              "direct": {
                "accessBoost": false,
                "isOwner": false,
                "role": "VIEWER"
              },
              "id": "21975a9b-336e-40e3-a168-6324ee57c1a4",
              "name": "Organization",
              "type": "user"
            },
            {
              "description": "Organization",
              "folder": {
                "accessBoost": false,
                "isOwner": false,
                "role": "VIEWER"
              },
              "id": "21975a9b-336e-40e3-a168-6324ee57c1a4",
              "name": "Organization",
              "type": "user"
            },
            {
              "description": "Organization - via Folder",
              "direct": {
                "accessBoost": false,
                "role": "VIEWER"
              },
              "id": "ORG-MEMBERSHIP",
              "name": "Nathan Kwok",
              "type": "user"
            }
          ],
          "document_id": "e445af06",
          "status_code": 200
        }
      },
      {
        "json": {
          "permits": [
            {
              "description": "Organization",
              "direct": {
                "accessBoost": false,
                "isOwner": false,
                "role": "VIEWER"
              },
              "id": "21975a9b-336e-40e3-a168-6324ee57c1a4",
              "name": "Organization",
              "type": "user"
            },
            {
              "description": "Organization",
              "folder": {
                "accessBoost": false,
                "isOwner": false,
                "role": "VIEWER"
              },
              "id": "21975a9b-336e-40e3-a168-6324ee57c1a4",
              "name": "Organization",
              "type": "user"
            },
            {
              "description": "Organization - via Folder",
              "direct": {
                "accessBoost": false,
                "role": "VIEWER"
              },
              "id": "ORG-MEMBERSHIP",
              "name": "Nathan Kwok",
              "type": "user"
            }
          ],
          "document_id": "c20218dd",
          "status_code": 200
        }
      },
      {
        "json": {
          "permits": [
            {
              "description": "Organization",
              "direct": {
                "accessBoost": false,
                "isOwner": false,
                "role": "VIEWER"
              },
              "id": "21975a9b-336e-40e3-a168-6324ee57c1a4",
              "name": "Organization",
              "type": "user"
            },
            {
              "description": "Organization",
              "folder": {
                "accessBoost": false,
                "isOwner": false,
                "role": "VIEWER"
              },
              "id": "21975a9b-336e-40e3-a168-6324ee57c1a4",
              "name": "Organization",
              "type": "user"
            },
            {
              "description": "Organization - via Folder",
              "direct": {
                "accessBoost": false,
                "role": "VIEWER"
              },
              "id": "ORG-MEMBERSHIP",
              "name": "Nathan Kwok",
              "type": "user"
            }
          ],
          "document_id": "7e2736f9",
          "status_code": 200
        }
      },
      {
        "json": {
          "permits": [
            {
              "description": "Organization",
              "direct": {
                "accessBoost": false,
                "isOwner": false,
                "role": "VIEWER"
              },
              "id": "21975a9b-336e-40e3-a168-6324ee57c1a4",
              "name": "Organization",
              "type": "user"
            },
            {
              "description": "Organization",
              "folder": {
                "accessBoost": false,
                "isOwner": false,
                "role": "VIEWER"
              },
              "id": "21975a9b-336e-40e3-a168-6324ee57c1a4",
              "name": "Organization",
              "type": "user"
            },
            {
              "description": "Organization - via Folder",
              "direct": {
                "accessBoost": false,
                "role": "VIEWER"
              },
              "id": "ORG-MEMBERSHIP",
              "name": "Nathan Kwok",
              "type": "user"
            }
          ],
          "document_id": "f69718ea",
          "status_code": 200
        }
      },
      {
        "json": {
          "permits": [
            {
              "description": "Organization",
              "direct": {
                "accessBoost": false,
                "isOwner": false,
                "role": "VIEWER"
              },
              "id": "21975a9b-336e-40e3-a168-6324ee57c1a4",
              "name": "Organization",
              "type": "user"
            },
            {
              "description": "Organization",
              "folder": {
                "accessBoost": false,
                "isOwner": false,
                "role": "VIEWER"
              },
              "id": "21975a9b-336e-40e3-a168-6324ee57c1a4",
              "name": "Organization",
              "type": "user"
            },
            {
              "description": "Organization - via Folder",
              "direct": {
                "accessBoost": false,
                "role": "VIEWER"
              },
              "id": "ORG-MEMBERSHIP",
              "name": "Nathan Kwok",
              "type": "user"
            }
          ],
          "document_id": "7e2736f9",
          "status_code": 200
        }
      },
      {
        "json": {
          "permits": [
            {
              "description": "Organization",
              "direct": {
                "accessBoost": false,
                "isOwner": false,
                "role": "VIEWER"
              },
              "id": "21975a9b-336e-40e3-a168-6324ee57c1a4",
              "name": "Organization",
              "type": "user"
            },
            {
              "description": "Organization",
              "folder": {
                "accessBoost": false,
                "isOwner": false,
                "role": "VIEWER"
              },
              "id": "21975a9b-336e-40e3-a168-6324ee57c1a4",
              "name": "Organization",
              "type": "user"
            },
            {
              "description": "Organization - via Folder",
              "direct": {
                "accessBoost": false,
                "role": "VIEWER"
              },
              "id": "ORG-MEMBERSHIP",
              "name": "Nathan Kwok",
              "type": "user"
            }
          ],
          "document_id": "3bd15a19",
          "status_code": 200
        }
      },
      {
        "json": {
          "permits": [
            {
              "description": "Organization",
              "direct": {
                "accessBoost": false,
                "isOwner": false,
                "role": "VIEWER"
              },
              "id": "21975a9b-336e-40e3-a168-6324ee57c1a4",
              "name": "Organization",
              "type": "user"
            },
            {
              "description": "Organization",
              "folder": {
                "accessBoost": false,
                "isOwner": false,
                "role": "VIEWER"
              },
              "id": "21975a9b-336e-40e3-a168-6324ee57c1a4",
              "name": "Organization",
              "type": "user"
            },
            {
              "description": "Organization - via Folder",
              "direct": {
                "accessBoost": false,
                "role": "VIEWER"
              },
              "id": "ORG-MEMBERSHIP",
              "name": "Nathan Kwok",
              "type": "user"
            }
          ],
          "document_id": "2fb66a67",
          "status_code": 200
        }
      },
      {
        "json": {
          "permits": [
            {
              "description": "Organization",
              "direct": {
                "accessBoost": false,
                "isOwner": false,
                "role": "VIEWER"
              },
              "id": "21975a9b-336e-40e3-a168-6324ee57c1a4",
              "name": "Organization",
              "type": "user"
            },
            {
              "description": "Organization",
              "folder": {
                "accessBoost": false,
                "isOwner": false,
                "role": "VIEWER"
              },
              "id": "21975a9b-336e-40e3-a168-6324ee57c1a4",
              "name": "Organization",
              "type": "user"
            },
            {
              "description": "Organization - via Folder",
              "direct": {
                "accessBoost": false,
                "role": "VIEWER"
              },
              "id": "ORG-MEMBERSHIP",
              "name": "Nathan Kwok",
              "type": "user"
            }
          ],
          "document_id": "2fb66a67",
          "status_code": 200
        }
      },
      {
        "json": {
          "permits": [
            {
              "description": "Organization",
              "direct": {
                "accessBoost": false,
                "isOwner": false,
                "role": "VIEWER"
              },
              "id": "21975a9b-336e-40e3-a168-6324ee57c1a4",
              "name": "Organization",
              "type": "user"
            },
            {
              "description": "Organization",
              "folder": {
                "accessBoost": false,
                "isOwner": false,
                "role": "VIEWER"
              },
              "id": "21975a9b-336e-40e3-a168-6324ee57c1a4",
              "name": "Organization",
              "type": "user"
            },
            {
              "description": "Organization - via Folder",
              "direct": {
                "accessBoost": false,
                "role": "VIEWER"
              },
              "id": "ORG-MEMBERSHIP",
              "name": "Nathan Kwok",
              "type": "user"
            }
          ],
          "document_id": "2fb66a67",
          "status_code": 200
        }
      },
      {
        "json": {
          "permits": [
            {
              "description": "Organization",
              "direct": {
                "accessBoost": false,
                "isOwner": false,
                "role": "VIEWER"
              },
              "id": "21975a9b-336e-40e3-a168-6324ee57c1a4",
              "name": "Organization",
              "type": "user"
            },
            {
              "description": "Organization",
              "folder": {
                "accessBoost": false,
                "isOwner": false,
                "role": "VIEWER"
              },
              "id": "21975a9b-336e-40e3-a168-6324ee57c1a4",
              "name": "Organization",
              "type": "user"
            },
            {
              "description": "Organization - via Folder",
              "direct": {
                "accessBoost": false,
                "role": "VIEWER"
              },
              "id": "ORG-MEMBERSHIP",
              "name": "Nathan Kwok",
              "type": "user"
            }
          ],
          "document_id": "2fb66a67",
          "status_code": 200
        }
      },
      {
        "json": {
          "permits": [
            {
              "description": "Organization",
              "direct": {
                "accessBoost": false,
                "isOwner": false,
                "role": "VIEWER"
              },
              "id": "21975a9b-336e-40e3-a168-6324ee57c1a4",
              "name": "Organization",
              "type": "user"
            },
            {
              "description": "Organization",
              "folder": {
                "accessBoost": false,
                "isOwner": false,
                "role": "VIEWER"
              },
              "id": "21975a9b-336e-40e3-a168-6324ee57c1a4",
              "name": "Organization",
              "type": "user"
            },
            {
              "description": "Organization - via Folder",
              "direct": {
                "accessBoost": false,
                "role": "VIEWER"
              },
              "id": "ORG-MEMBERSHIP",
              "name": "Nathan Kwok",
              "type": "user"
            }
          ],
          "document_id": "47d94e3c",
          "status_code": 200
        }
      },
      {
        "json": {
          "permits": [
            {
              "description": "Organization",
              "direct": {
                "accessBoost": false,
                "isOwner": false,
                "role": "VIEWER"
              },
              "id": "21975a9b-336e-40e3-a168-6324ee57c1a4",
              "name": "Organization",
              "type": "user"
            },
            {
              "description": "Organization",
              "folder": {
                "accessBoost": false,
                "isOwner": false,
                "role": "VIEWER"
              },
              "id": "21975a9b-336e-40e3-a168-6324ee57c1a4",
              "name": "Organization",
              "type": "user"
            },
            {
              "description": "Organization - via Folder",
              "direct": {
                "accessBoost": false,
                "role": "VIEWER"
              },
              "id": "ORG-MEMBERSHIP",
              "name": "Nathan Kwok",
              "type": "user"
            }
          ],
          "document_id": "47d94e3c",
          "status_code": 200
        }
      },
      {
        "json": {
          "permits": [
            {
              "description": "Organization",
              "direct": {
                "accessBoost": false,
                "isOwner": false,
                "role": "VIEWER"
              },
              "id": "21975a9b-336e-40e3-a168-6324ee57c1a4",
              "name": "Organization",
              "type": "user"
            },
            {
              "description": "Organization",
              "folder": {
                "accessBoost": false,
                "isOwner": false,
                "role": "VIEWER"
              },
              "id": "21975a9b-336e-40e3-a168-6324ee57c1a4",
              "name": "Organization",
              "type": "user"
            },
            {
              "description": "Organization - via Folder",
              "direct": {
                "accessBoost": false,
                "role": "VIEWER"
              },
              "id": "ORG-MEMBERSHIP",
              "name": "Nathan Kwok",
              "type": "user"
            }
          ],
          "document_id": "dadcdf3e",
          "status_code": 200
        }
      },
      {
        "json": {
          "permits": [
            {
              "description": "Organization",
              "direct": {
                "accessBoost": false,
                "isOwner": false,
                "role": "VIEWER"
              },
              "id": "21975a9b-336e-40e3-a168-6324ee57c1a4",
              "name": "Organization",
              "type": "user"
            },
            {
              "description": "Organization",
              "folder": {
                "accessBoost": false,
                "isOwner": false,
                "role": "VIEWER"
              },
              "id": "21975a9b-336e-40e3-a168-6324ee57c1a4",
              "name": "Organization",
              "type": "user"
            },
            {
              "description": "Organization - via Folder",
              "direct": {
                "accessBoost": false,
                "role": "VIEWER"
              },
              "id": "ORG-MEMBERSHIP",
              "name": "Nathan Kwok",
              "type": "user"
            }
          ],
          "document_id": "dadcdf3e",
          "status_code": 200
        }
      },
      {
        "json": {
          "permits": [
            {
              "description": "Organization",
              "direct": {
                "accessBoost": false,
                "isOwner": false,
                "role": "VIEWER"
              },
              "id": "21975a9b-336e-40e3-a168-6324ee57c1a4",
              "name": "Organization",
              "type": "user"
            },
            {
              "description": "Organization",
              "folder": {
                "accessBoost": false,
                "isOwner": false,
                "role": "VIEWER"
              },
              "id": "21975a9b-336e-40e3-a168-6324ee57c1a4",
              "name": "Organization",
              "type": "user"
            },
            {
              "description": "Organization - via Folder",
              "direct": {
                "accessBoost": false,
                "role": "VIEWER"
              },
              "id": "ORG-MEMBERSHIP",
              "name": "Nathan Kwok",
              "type": "user"
            }
          ],
          "document_id": "f7e9dc87",
          "status_code": 200
        }
      },
      {
        "json": {
          "permits": [
            {
              "description": "Organization",
              "direct": {
                "accessBoost": false,
                "isOwner": false,
                "role": "VIEWER"
              },
              "id": "21975a9b-336e-40e3-a168-6324ee57c1a4",
              "name": "Organization",
              "type": "user"
            },
            {
              "description": "Organization",
              "folder": {
                "accessBoost": false,
                "isOwner": false,
                "role": "VIEWER"
              },
              "id": "21975a9b-336e-40e3-a168-6324ee57c1a4",
              "name": "Organization",
              "type": "user"
            },
            {
              "description": "Organization - via Folder",
              "direct": {
                "accessBoost": false,
                "role": "VIEWER"
              },
              "id": "ORG-MEMBERSHIP",
              "name": "Nathan Kwok",
              "type": "user"
            }
          ],
          "document_id": "de229002",
          "status_code": 200
        }
      },
      {
        "json": {
          "permits": [
            {
              "description": "Organization",
              "direct": {
                "accessBoost": false,
                "isOwner": false,
                "role": "VIEWER"
              },
              "id": "21975a9b-336e-40e3-a168-6324ee57c1a4",
              "name": "Organization",
              "type": "user"
            },
            {
              "description": "Organization",
              "folder": {
                "accessBoost": false,
                "isOwner": false,
                "role": "VIEWER"
              },
              "id": "21975a9b-336e-40e3-a168-6324ee57c1a4",
              "name": "Organization",
              "type": "user"
            },
            {
              "description": "Organization - via Folder",
              "direct": {
                "accessBoost": false,
                "role": "VIEWER"
              },
              "id": "ORG-MEMBERSHIP",
              "name": "Nathan Kwok",
              "type": "user"
            }
          ],
          "document_id": "credit-consumption",
          "status_code": 200
        }
      },
      {
        "json": {
          "permits": [
            {
              "description": "Organization",
              "direct": {
                "accessBoost": false,
                "isOwner": false,
                "role": "VIEWER"
              },
              "id": "21975a9b-336e-40e3-a168-6324ee57c1a4",
              "name": "Organization",
              "type": "user"
            },
            {
              "description": "Organization",
              "folder": {
                "accessBoost": false,
                "isOwner": false,
                "role": "VIEWER"
              },
              "id": "21975a9b-336e-40e3-a168-6324ee57c1a4",
              "name": "Organization",
              "type": "user"
            },
            {
              "description": "Organization - via Folder",
              "direct": {
                "accessBoost": false,
                "role": "VIEWER"
              },
              "id": "ORG-MEMBERSHIP",
              "name": "Nathan Kwok",
              "type": "user"
            }
          ],
          "document_id": "de229002",
          "status_code": 200
        }
      },
      {
        "json": {
          "permits": [
            {
              "description": "Organization",
              "direct": {
                "accessBoost": false,
                "isOwner": false,
                "role": "VIEWER"
              },
              "id": "21975a9b-336e-40e3-a168-6324ee57c1a4",
              "name": "Organization",
              "type": "user"
            },
            {
              "description": "Organization",
              "folder": {
                "accessBoost": false,
                "isOwner": false,
                "role": "VIEWER"
              },
              "id": "21975a9b-336e-40e3-a168-6324ee57c1a4",
              "name": "Organization",
              "type": "user"
            },
            {
              "description": "Organization - via Folder",
              "direct": {
                "accessBoost": false,
                "role": "VIEWER"
              },
              "id": "ORG-MEMBERSHIP",
              "name": "Nathan Kwok",
              "type": "user"
            }
          ],
          "document_id": "f7e9dc87",
          "status_code": 200
        }
      },
      {
        "json": {
          "permits": [
            {
              "description": "Organization",
              "direct": {
                "accessBoost": false,
                "isOwner": false,
                "role": "VIEWER"
              },
              "id": "21975a9b-336e-40e3-a168-6324ee57c1a4",
              "name": "Organization",
              "type": "user"
            },
            {
              "description": "Organization",
              "folder": {
                "accessBoost": false,
                "isOwner": false,
                "role": "VIEWER"
              },
              "id": "21975a9b-336e-40e3-a168-6324ee57c1a4",
              "name": "Organization",
              "type": "user"
            },
            {
              "description": "Organization - via Folder",
              "direct": {
                "accessBoost": false,
                "role": "VIEWER"
              },
              "id": "ORG-MEMBERSHIP",
              "name": "Nathan Kwok",
              "type": "user"
            }
          ],
          "document_id": "47d94e3c",
          "status_code": 200
        }
      },
      {
        "json": {
          "permits": [
            {
              "description": "Organization",
              "direct": {
                "accessBoost": false,
                "isOwner": false,
                "role": "VIEWER"
              },
              "id": "21975a9b-336e-40e3-a168-6324ee57c1a4",
              "name": "Organization",
              "type": "user"
            },
            {
              "description": "Organization",
              "folder": {
                "accessBoost": false,
                "isOwner": false,
                "role": "VIEWER"
              },
              "id": "21975a9b-336e-40e3-a168-6324ee57c1a4",
              "name": "Organization",
              "type": "user"
            },
            {
              "description": "Organization - via Folder",
              "direct": {
                "accessBoost": false,
                "role": "VIEWER"
              },
              "id": "ORG-MEMBERSHIP",
              "name": "Nathan Kwok",
              "type": "user"
            }
          ],
          "document_id": "credit-consumption",
          "status_code": 200
        }
      },
      {
        "json": {
          "permits": [
            {
              "description": "Organization",
              "direct": {
                "accessBoost": false,
                "isOwner": false,
                "role": "VIEWER"
              },
              "id": "21975a9b-336e-40e3-a168-6324ee57c1a4",
              "name": "Organization",
              "type": "user"
            },
            {
              "description": "Organization",
              "folder": {
                "accessBoost": false,
                "isOwner": false,
                "role": "VIEWER"
              },
              "id": "21975a9b-336e-40e3-a168-6324ee57c1a4",
              "name": "Organization",
              "type": "user"
            },
            {
              "description": "Organization - via Folder",
              "direct": {
                "accessBoost": false,
                "role": "VIEWER"
              },
              "id": "ORG-MEMBERSHIP",
              "name": "Nathan Kwok",
              "type": "user"
            }
          ],
          "document_id": "70d5b283",
          "status_code": 200
        }
      },
      {
        "json": {
          "permits": [
            {
              "folder": {
                "accessBoost": false,
                "role": "MANAGER"
              },
              "id": "157e898c-5f6b-4aa2-b0a4-bda87f012ae9",
              "name": "OmniAdmin",
              "type": "userGroup"
            }
          ],
          "document_id": "04ae7dfa",
          "status_code": 200
        }
      }
    ],
    "Filter out no permissions documents": [
      {
        "json": {
          "permits": [
            {
              "description": "Organization",
              "direct": {
                "accessBoost": false,
                "isOwner": false,
                "role": "VIEWER"
              },
              "id": "21975a9b-336e-40e3-a168-6324ee57c1a4",
              "name": "Organization",
              "type": "user"
            },
            {
              "description": "Organization",
              "folder": {
                "accessBoost": false,
                "isOwner": false,
                "role": "VIEWER"
              },
              "id": "21975a9b-336e-40e3-a168-6324ee57c1a4",
              "name": "Organization",
              "type": "user"
            },
            {
              "description": "Organization - via Folder",
              "direct": {
                "accessBoost": false,
                "role": "VIEWER"
              },
              "id": "ORG-MEMBERSHIP",
              "name": "Nathan Kwok",
              "type": "user"
            }
          ],
          "document_id": "f69718ea",
          "status_code": 200
        }
      },
      {
        "json": {
          "permits": [
            {
              "description": "Organization",
              "direct": {
                "accessBoost": false,
                "isOwner": false,
                "role": "VIEWER"
              },
              "id": "21975a9b-336e-40e3-a168-6324ee57c1a4",
              "name": "Organization",
              "type": "user"
            },
            {
              "description": "Organization",
              "folder": {
                "accessBoost": false,
                "isOwner": false,
                "role": "VIEWER"
              },
              "id": "21975a9b-336e-40e3-a168-6324ee57c1a4",
              "name": "Organization",
              "type": "user"
            },
            {
              "description": "Organization - via Folder",
              "direct": {
                "accessBoost": false,
                "role": "VIEWER"
              },
              "id": "ORG-MEMBERSHIP",
              "name": "Nathan Kwok",
              "type": "user"
            }
          ],
          "document_id": "e445af06",
          "status_code": 200
        }
      },
      {
        "json": {
          "permits": [
            {
              "description": "Organization",
              "direct": {
                "accessBoost": false,
                "isOwner": false,
                "role": "VIEWER"
              },
              "id": "21975a9b-336e-40e3-a168-6324ee57c1a4",
              "name": "Organization",
              "type": "user"
            },
            {
              "description": "Organization",
              "folder": {
                "accessBoost": false,
                "isOwner": false,
                "role": "VIEWER"
              },
              "id": "21975a9b-336e-40e3-a168-6324ee57c1a4",
              "name": "Organization",
              "type": "user"
            },
            {
              "description": "Organization - via Folder",
              "direct": {
                "accessBoost": false,
                "role": "VIEWER"
              },
              "id": "ORG-MEMBERSHIP",
              "name": "Nathan Kwok",
              "type": "user"
            }
          ],
          "document_id": "c20218dd",
          "status_code": 200
        }
      },
      {
        "json": {
          "permits": [
            {
              "description": "Organization",
              "direct": {
                "accessBoost": false,
                "isOwner": false,
                "role": "VIEWER"
              },
              "id": "21975a9b-336e-40e3-a168-6324ee57c1a4",
              "name": "Organization",
              "type": "user"
            },
            {
              "description": "Organization",
              "folder": {
                "accessBoost": false,
                "isOwner": false,
                "role": "VIEWER"
              },
              "id": "21975a9b-336e-40e3-a168-6324ee57c1a4",
              "name": "Organization",
              "type": "user"
            },
            {
              "description": "Organization - via Folder",
              "direct": {
                "accessBoost": false,
                "role": "VIEWER"
              },
              "id": "ORG-MEMBERSHIP",
              "name": "Nathan Kwok",
              "type": "user"
            }
          ],
          "document_id": "7e2736f9",
          "status_code": 200
        }
      },
      {
        "json": {
          "permits": [
            {
              "description": "Organization",
              "direct": {
                "accessBoost": false,
                "isOwner": false,
                "role": "VIEWER"
              },
              "id": "21975a9b-336e-40e3-a168-6324ee57c1a4",
              "name": "Organization",
              "type": "user"
            },
            {
              "description": "Organization",
              "folder": {
                "accessBoost": false,
                "isOwner": false,
                "role": "VIEWER"
              },
              "id": "21975a9b-336e-40e3-a168-6324ee57c1a4",
              "name": "Organization",
              "type": "user"
            },
            {
              "description": "Organization - via Folder",
              "direct": {
                "accessBoost": false,
                "role": "VIEWER"
              },
              "id": "ORG-MEMBERSHIP",
              "name": "Nathan Kwok",
              "type": "user"
            }
          ],
          "document_id": "f69718ea",
          "status_code": 200
        }
      },
      {
        "json": {
          "permits": [
            {
              "description": "Organization",
              "direct": {
                "accessBoost": false,
                "isOwner": false,
                "role": "VIEWER"
              },
              "id": "21975a9b-336e-40e3-a168-6324ee57c1a4",
              "name": "Organization",
              "type": "user"
            },
            {
              "description": "Organization",
              "folder": {
                "accessBoost": false,
                "isOwner": false,
                "role": "VIEWER"
              },
              "id": "21975a9b-336e-40e3-a168-6324ee57c1a4",
              "name": "Organization",
              "type": "user"
            },
            {
              "description": "Organization - via Folder",
              "direct": {
                "accessBoost": false,
                "role": "VIEWER"
              },
              "id": "ORG-MEMBERSHIP",
              "name": "Nathan Kwok",
              "type": "user"
            }
          ],
          "document_id": "7e2736f9",
          "status_code": 200
        }
      },
      {
        "json": {
          "permits": [
            {
              "description": "Organization",
              "direct": {
                "accessBoost": false,
                "isOwner": false,
                "role": "VIEWER"
              },
              "id": "21975a9b-336e-40e3-a168-6324ee57c1a4",
              "name": "Organization",
              "type": "user"
            },
            {
              "description": "Organization",
              "folder": {
                "accessBoost": false,
                "isOwner": false,
                "role": "VIEWER"
              },
              "id": "21975a9b-336e-40e3-a168-6324ee57c1a4",
              "name": "Organization",
              "type": "user"
            },
            {
              "description": "Organization - via Folder",
              "direct": {
                "accessBoost": false,
                "role": "VIEWER"
              },
              "id": "ORG-MEMBERSHIP",
              "name": "Nathan Kwok",
              "type": "user"
            }
          ],
          "document_id": "3bd15a19",
          "status_code": 200
        }
      },
      {
        "json": {
          "permits": [
            {
              "description": "Organization",
              "direct": {
                "accessBoost": false,
                "isOwner": false,
                "role": "VIEWER"
              },
              "id": "21975a9b-336e-40e3-a168-6324ee57c1a4",
              "name": "Organization",
              "type": "user"
            },
            {
              "description": "Organization",
              "folder": {
                "accessBoost": false,
                "isOwner": false,
                "role": "VIEWER"
              },
              "id": "21975a9b-336e-40e3-a168-6324ee57c1a4",
              "name": "Organization",
              "type": "user"
            },
            {
              "description": "Organization - via Folder",
              "direct": {
                "accessBoost": false,
                "role": "VIEWER"
              },
              "id": "ORG-MEMBERSHIP",
              "name": "Nathan Kwok",
              "type": "user"
            }
          ],
          "document_id": "2fb66a67",
          "status_code": 200
        }
      },
      {
        "json": {
          "permits": [
            {
              "description": "Organization",
              "direct": {
                "accessBoost": false,
                "isOwner": false,
                "role": "VIEWER"
              },
              "id": "21975a9b-336e-40e3-a168-6324ee57c1a4",
              "name": "Organization",
              "type": "user"
            },
            {
              "description": "Organization",
              "folder": {
                "accessBoost": false,
                "isOwner": false,
                "role": "VIEWER"
              },
              "id": "21975a9b-336e-40e3-a168-6324ee57c1a4",
              "name": "Organization",
              "type": "user"
            },
            {
              "description": "Organization - via Folder",
              "direct": {
                "accessBoost": false,
                "role": "VIEWER"
              },
              "id": "ORG-MEMBERSHIP",
              "name": "Nathan Kwok",
              "type": "user"
            }
          ],
          "document_id": "2fb66a67",
          "status_code": 200
        }
      },
      {
        "json": {
          "permits": [
            {
              "description": "Organization",
              "direct": {
                "accessBoost": false,
                "isOwner": false,
                "role": "VIEWER"
              },
              "id": "21975a9b-336e-40e3-a168-6324ee57c1a4",
              "name": "Organization",
              "type": "user"
            },
            {
              "description": "Organization",
              "folder": {
                "accessBoost": false,
                "isOwner": false,
                "role": "VIEWER"
              },
              "id": "21975a9b-336e-40e3-a168-6324ee57c1a4",
              "name": "Organization",
              "type": "user"
            },
            {
              "description": "Organization - via Folder",
              "direct": {
                "accessBoost": false,
                "role": "VIEWER"
              },
              "id": "ORG-MEMBERSHIP",
              "name": "Nathan Kwok",
              "type": "user"
            }
          ],
          "document_id": "2fb66a67",
          "status_code": 200
        }
      },
      {
        "json": {
          "permits": [
            {
              "description": "Organization",
              "direct": {
                "accessBoost": false,
                "isOwner": false,
                "role": "VIEWER"
              },
              "id": "21975a9b-336e-40e3-a168-6324ee57c1a4",
              "name": "Organization",
              "type": "user"
            },
            {
              "description": "Organization",
              "folder": {
                "accessBoost": false,
                "isOwner": false,
                "role": "VIEWER"
              },
              "id": "21975a9b-336e-40e3-a168-6324ee57c1a4",
              "name": "Organization",
              "type": "user"
            },
            {
              "description": "Organization - via Folder",
              "direct": {
                "accessBoost": false,
                "role": "VIEWER"
              },
              "id": "ORG-MEMBERSHIP",
              "name": "Nathan Kwok",
              "type": "user"
            }
          ],
          "document_id": "2fb66a67",
          "status_code": 200
        }
      },
      {
        "json": {
          "permits": [
            {
              "description": "Organization",
              "direct": {
                "accessBoost": false,
                "isOwner": false,
                "role": "VIEWER"
              },
              "id": "21975a9b-336e-40e3-a168-6324ee57c1a4",
              "name": "Organization",
              "type": "user"
            },
            {
              "description": "Organization",
              "folder": {
                "accessBoost": false,
                "isOwner": false,
                "role": "VIEWER"
              },
              "id": "21975a9b-336e-40e3-a168-6324ee57c1a4",
              "name": "Organization",
              "type": "user"
            },
            {
              "description": "Organization - via Folder",
              "direct": {
                "accessBoost": false,
                "role": "VIEWER"
              },
              "id": "ORG-MEMBERSHIP",
              "name": "Nathan Kwok",
              "type": "user"
            }
          ],
          "document_id": "47d94e3c",
          "status_code": 200
        }
      },
      {
        "json": {
          "permits": [
            {
              "description": "Organization",
              "direct": {
                "accessBoost": false,
                "isOwner": false,
                "role": "VIEWER"
              },
              "id": "21975a9b-336e-40e3-a168-6324ee57c1a4",
              "name": "Organization",
              "type": "user"
            },
            {
              "description": "Organization",
              "folder": {
                "accessBoost": false,
                "isOwner": false,
                "role": "VIEWER"
              },
              "id": "21975a9b-336e-40e3-a168-6324ee57c1a4",
              "name": "Organization",
              "type": "user"
            },
            {
              "description": "Organization - via Folder",
              "direct": {
                "accessBoost": false,
                "role": "VIEWER"
              },
              "id": "ORG-MEMBERSHIP",
              "name": "Nathan Kwok",
              "type": "user"
            }
          ],
          "document_id": "47d94e3c",
          "status_code": 200
        }
      },
      {
        "json": {
          "permits": [
            {
              "description": "Organization",
              "direct": {
                "accessBoost": false,
                "isOwner": false,
                "role": "VIEWER"
              },
              "id": "21975a9b-336e-40e3-a168-6324ee57c1a4",
              "name": "Organization",
              "type": "user"
            },
            {
              "description": "Organization",
              "folder": {
                "accessBoost": false,
                "isOwner": false,
                "role": "VIEWER"
              },
              "id": "21975a9b-336e-40e3-a168-6324ee57c1a4",
              "name": "Organization",
              "type": "user"
            },
            {
              "description": "Organization - via Folder",
              "direct": {
                "accessBoost": false,
                "role": "VIEWER"
              },
              "id": "ORG-MEMBERSHIP",
              "name": "Nathan Kwok",
              "type": "user"
            }
          ],
          "document_id": "dadcdf3e",
          "status_code": 200
        }
      },
      {
        "json": {
          "permits": [
            {
              "description": "Organization",
              "direct": {
                "accessBoost": false,
                "isOwner": false,
                "role": "VIEWER"
              },
              "id": "21975a9b-336e-40e3-a168-6324ee57c1a4",
              "name": "Organization",
              "type": "user"
            },
            {
              "description": "Organization",
              "folder": {
                "accessBoost": false,
                "isOwner": false,
                "role": "VIEWER"
              },
              "id": "21975a9b-336e-40e3-a168-6324ee57c1a4",
              "name": "Organization",
              "type": "user"
            },
            {
              "description": "Organization - via Folder",
              "direct": {
                "accessBoost": false,
                "role": "VIEWER"
              },
              "id": "ORG-MEMBERSHIP",
              "name": "Nathan Kwok",
              "type": "user"
            }
          ],
          "document_id": "dadcdf3e",
          "status_code": 200
        }
      },
      {
        "json": {
          "permits": [
            {
              "description": "Organization",
              "direct": {
                "accessBoost": false,
                "isOwner": false,
                "role": "VIEWER"
              },
              "id": "21975a9b-336e-40e3-a168-6324ee57c1a4",
              "name": "Organization",
              "type": "user"
            },
            {
              "description": "Organization",
              "folder": {
                "accessBoost": false,
                "isOwner": false,
                "role": "VIEWER"
              },
              "id": "21975a9b-336e-40e3-a168-6324ee57c1a4",
              "name": "Organization",
              "type": "user"
            },
            {
              "description": "Organization - via Folder",
              "direct": {
                "accessBoost": false,
                "role": "VIEWER"
              },
              "id": "ORG-MEMBERSHIP",
              "name": "Nathan Kwok",
              "type": "user"
            }
          ],
          "document_id": "f7e9dc87",
          "status_code": 200
        }
      },
      {
        "json": {
          "permits": [
            {
              "description": "Organization",
              "direct": {
                "accessBoost": false,
                "isOwner": false,
                "role": "VIEWER"
              },
              "id": "21975a9b-336e-40e3-a168-6324ee57c1a4",
              "name": "Organization",
              "type": "user"
            },
            {
              "description": "Organization",
              "folder": {
                "accessBoost": false,
                "isOwner": false,
                "role": "VIEWER"
              },
              "id": "21975a9b-336e-40e3-a168-6324ee57c1a4",
              "name": "Organization",
              "type": "user"
            },
            {
              "description": "Organization - via Folder",
              "direct": {
                "accessBoost": false,
                "role": "VIEWER"
              },
              "id": "ORG-MEMBERSHIP",
              "name": "Nathan Kwok",
              "type": "user"
            }
          ],
          "document_id": "de229002",
          "status_code": 200
        }
      },
      {
        "json": {
          "permits": [
            {
              "description": "Organization",
              "direct": {
                "accessBoost": false,
                "isOwner": false,
                "role": "VIEWER"
              },
              "id": "21975a9b-336e-40e3-a168-6324ee57c1a4",
              "name": "Organization",
              "type": "user"
            },
            {
              "description": "Organization",
              "folder": {
                "accessBoost": false,
                "isOwner": false,
                "role": "VIEWER"
              },
              "id": "21975a9b-336e-40e3-a168-6324ee57c1a4",
              "name": "Organization",
              "type": "user"
            },
            {
              "description": "Organization - via Folder",
              "direct": {
                "accessBoost": false,
                "role": "VIEWER"
              },
              "id": "ORG-MEMBERSHIP",
              "name": "Nathan Kwok",
              "type": "user"
            }
          ],
          "document_id": "credit-consumption",
          "status_code": 200
        }
      },
      {
        "json": {
          "permits": [
            {
              "description": "Organization",
              "direct": {
                "accessBoost": false,
                "isOwner": false,
                "role": "VIEWER"
              },
              "id": "21975a9b-336e-40e3-a168-6324ee57c1a4",
              "name": "Organization",
              "type": "user"
            },
            {
              "description": "Organization",
              "folder": {
                "accessBoost": false,
                "isOwner": false,
                "role": "VIEWER"
              },
              "id": "21975a9b-336e-40e3-a168-6324ee57c1a4",
              "name": "Organization",
              "type": "user"
            },
            {
              "description": "Organization - via Folder",
              "direct": {
                "accessBoost": false,
                "role": "VIEWER"
              },
              "id": "ORG-MEMBERSHIP",
              "name": "Nathan Kwok",
              "type": "user"
            }
          ],
          "document_id": "de229002",
          "status_code": 200
        }
      },
      {
        "json": {
          "permits": [
            {
              "description": "Organization",
              "direct": {
                "accessBoost": false,
                "isOwner": false,
                "role": "VIEWER"
              },
              "id": "21975a9b-336e-40e3-a168-6324ee57c1a4",
              "name": "Organization",
              "type": "user"
            },
            {
              "description": "Organization",
              "folder": {
                "accessBoost": false,
                "isOwner": false,
                "role": "VIEWER"
              },
              "id": "21975a9b-336e-40e3-a168-6324ee57c1a4",
              "name": "Organization",
              "type": "user"
            },
            {
              "description": "Organization - via Folder",
              "direct": {
                "accessBoost": false,
                "role": "VIEWER"
              },
              "id": "ORG-MEMBERSHIP",
              "name": "Nathan Kwok",
              "type": "user"
            }
          ],
          "document_id": "f7e9dc87",
          "status_code": 200
        }
      },
      {
        "json": {
          "permits": [
            {
              "description": "Organization",
              "direct": {
                "accessBoost": false,
                "isOwner": false,
                "role": "VIEWER"
              },
              "id": "21975a9b-336e-40e3-a168-6324ee57c1a4",
              "name": "Organization",
              "type": "user"
            },
            {
              "description": "Organization",
              "folder": {
                "accessBoost": false,
                "isOwner": false,
                "role": "VIEWER"
              },
              "id": "21975a9b-336e-40e3-a168-6324ee57c1a4",
              "name": "Organization",
              "type": "user"
            },
            {
              "description": "Organization - via Folder",
              "direct": {
                "accessBoost": false,
                "role": "VIEWER"
              },
              "id": "ORG-MEMBERSHIP",
              "name": "Nathan Kwok",
              "type": "user"
            }
          ],
          "document_id": "47d94e3c",
          "status_code": 200
        }
      },
      {
        "json": {
          "permits": [
            {
              "description": "Organization",
              "direct": {
                "accessBoost": false,
                "isOwner": false,
                "role": "VIEWER"
              },
              "id": "21975a9b-336e-40e3-a168-6324ee57c1a4",
              "name": "Organization",
              "type": "user"
            },
            {
              "description": "Organization",
              "folder": {
                "accessBoost": false,
                "isOwner": false,
                "role": "VIEWER"
              },
              "id": "21975a9b-336e-40e3-a168-6324ee57c1a4",
              "name": "Organization",
              "type": "user"
            },
            {
              "description": "Organization - via Folder",
              "direct": {
                "accessBoost": false,
                "role": "VIEWER"
              },
              "id": "ORG-MEMBERSHIP",
              "name": "Nathan Kwok",
              "type": "user"
            }
          ],
          "document_id": "credit-consumption",
          "status_code": 200
        }
      },
      {
        "json": {
          "permits": [
            {
              "description": "Organization",
              "direct": {
                "accessBoost": false,
                "isOwner": false,
                "role": "VIEWER"
              },
              "id": "21975a9b-336e-40e3-a168-6324ee57c1a4",
              "name": "Organization",
              "type": "user"
            },
            {
              "description": "Organization",
              "folder": {
                "accessBoost": false,
                "isOwner": false,
                "role": "VIEWER"
              },
              "id": "21975a9b-336e-40e3-a168-6324ee57c1a4",
              "name": "Organization",
              "type": "user"
            },
            {
              "description": "Organization - via Folder",
              "direct": {
                "accessBoost": false,
                "role": "VIEWER"
              },
              "id": "ORG-MEMBERSHIP",
              "name": "Nathan Kwok",
              "type": "user"
            }
          ],
          "document_id": "70d5b283",
          "status_code": 200
        }
      },
      {
        "json": {
          "permits": [
            {
              "folder": {
                "accessBoost": false,
                "role": "MANAGER"
              },
              "id": "157e898c-5f6b-4aa2-b0a4-bda87f012ae9",
              "name": "OmniAdmin",
              "type": "userGroup"
            }
          ],
          "document_id": "04ae7dfa",
          "status_code": 200
        }
      }
    ],
    "Aggregate Document Ids": [
      {
        "json": {
          "document_ids": [
            "f69718ea",
            "e445af06",
            "c20218dd",
            "7e2736f9",
            "f69718ea",
            "7e2736f9",
            "3bd15a19",
            "2fb66a67",
            "2fb66a67",
            "2fb66a67",
            "2fb66a67",
            "47d94e3c",
            "47d94e3c",
            "dadcdf3e",
            "dadcdf3e",
            "f7e9dc87",
            "de229002",
            "credit-consumption",
            "de229002",
            "f7e9dc87",
            "47d94e3c",
            "credit-consumption",
            "70d5b283",
            "04ae7dfa"
          ]
        }
      }
    ],
    "Aggregate Topic Names": [
      {
        "json": {
          "topic_name": [
            "cloud_orgs_and_billing",
            "cloud_orgs_and_billing",
            "cloud_orgs_and_billing"
          ]
        }
      }
    ],
    "Merge Topic Names": [
      {
        "json": {
          "topicName": "cloud_orgs_and_billing"
        }
      },
      {
        "json": {
          "topicName": "cloud_orgs_and_billing"
        }
      },
      {
        "json": {
          "topicName": "cloud_orgs_and_billing"
        }
      }
    ],
    "Cortex Search Document Query by Topic": [
      {
        "json": {
          "output": [
            {
              "query_table": "product__cloud_credits_line_items",
              "document_scope": "organization",
              "query_name": "Monthly Credit Consumption by OEM Cloud Orgs",
              "document_id": "47d94e3c",
              "query_id": "21af508c-79f5-4b1c-9a02-18d808d10c93"
            },
            {
              "query_table": "product__cloud_credits_line_items",
              "document_scope": "organization",
              "query_name": "Total Credit Consumption by OEM Cloud Orgs",
              "document_id": "47d94e3c",
              "query_id": "b226ed25-85da-416e-b008-93d732194726"
            },
            {
              "query_table": "engineering__authentication_logs",
              "document_scope": "organization",
              "query_name": "Orgs per Customer User",
              "document_id": "dadcdf3e",
              "query_id": "39d95fba-6fc5-4418-802c-713b217c3087"
            },
            {
              "query_table": "engineering__authentication_logs",
              "document_scope": "organization",
              "query_name": "Orgs per Customer Domain",
              "document_id": "dadcdf3e",
              "query_id": "f04afaab-92be-44a0-9b32-5e3eeff41dfc"
            },
            {
              "query_table": "product__cloud_orgs",
              "document_scope": "organization",
              "query_name": "Top Free Orgs",
              "document_id": "f7e9dc87",
              "query_id": "b304d49b-eaed-4826-8505-0d3737c332db"
            },
            {
              "query_table": "product__cloud_orgs",
              "document_scope": "organization",
              "query_name": "Customer Grants",
              "document_id": "de229002",
              "query_id": "8f9187a1-ff08-4372-bd45-ab56c60ab267"
            },
            {
              "query_table": "product__cloud_orgs",
              "document_scope": "organization",
              "query_name": "Consumption Summary",
              "document_id": "credit-consumption",
              "query_id": "53d1fc63-e5d1-4f3b-aa5e-e8e307a7d126"
            },
            {
              "query_table": "product__cloud_orgs",
              "document_scope": "organization",
              "query_name": "Consumption Summary",
              "document_id": "de229002",
              "query_id": "c2637d7a-c332-48df-b914-c58e343a02e7"
            },
            {
              "query_table": "product__cloud_orgs",
              "document_scope": "organization",
              "query_name": "Top Customers",
              "document_id": "f7e9dc87",
              "query_id": "fea91da7-cc6b-4561-9e41-39ad190ddaf0"
            },
            {
              "query_table": "product__cloud_orgs",
              "document_scope": "organization",
              "query_name": "OEM Orgs - Invoices w/ Balances and Over-consumption",
              "document_id": "47d94e3c",
              "query_id": "7f20fce5-b823-46ce-90d2-c1b2b9a72188"
            }
          ]
        }
      }
    ],
    "Keyword Document Query Table Search Results": [
      {
        "json": {
          "document_ids": [
            "2fb66a67",
            "2fb66a67",
            "2fb66a67",
            "2fb66a67"
          ]
        }
      }
    ],
    "Topic Document Query Search Results": [
      {
        "json": {
          "document_ids": [
            "47d94e3c",
            "47d94e3c",
            "dadcdf3e",
            "dadcdf3e",
            "f7e9dc87",
            "de229002",
            "credit-consumption",
            "de229002",
            "f7e9dc87",
            "47d94e3c"
          ]
        }
      }
    ],
    "Topic Document Search Results": [
      {
        "json": {
          "document_ids": [
            "credit-consumption",
            "70d5b283",
            "04ae7dfa"
          ]
        }
      }
    ],
    "Keyword Document Query Name Search Results": [
      {
        "json": {
          "document_ids": [
            "7e2736f9",
            "f69718ea",
            "7e2736f9",
            "3bd15a19"
          ]
        }
      }
    ],
    "Keyword Document Name Search Results": [
      {
        "json": {
          "document_ids": [
            "f69718ea",
            "e445af06",
            "c20218dd"
          ]
        }
      }
    ],
    "Keyword Document Name Search Results JSON": [
      {
        "json": {
          "output": {
            "process_name": "keyword_document_name_search_results",
            "document_ids": [
              "f69718ea",
              "e445af06",
              "c20218dd"
            ]
          }
        }
      }
    ],
    "Keyword Document Query Name Search Results JSON": [
      {
        "json": {
          "output": {
            "process_name": "keyword_document_query_name_search_results",
            "document_ids": [
              "7e2736f9",
              "f69718ea",
              "7e2736f9",
              "3bd15a19"
            ]
          }
        }
      }
    ],
    "Keyword Document Query Table Search Results JSON": [
      {
        "json": {
          "output": {
            "process_name": "keyword_document_query_table_search_results",
            "document_ids": [
              "2fb66a67",
              "2fb66a67",
              "2fb66a67",
              "2fb66a67"
            ]
          }
        }
      }
    ],
    "Topic Document Query Search Results JSON": [
      {
        "json": {
          "output": {
            "process_name": "topic_document_query_search_results",
            "document_ids": [
              "47d94e3c",
              "47d94e3c",
              "dadcdf3e",
              "dadcdf3e",
              "f7e9dc87",
              "de229002",
              "credit-consumption",
              "de229002",
              "f7e9dc87",
              "47d94e3c"
            ]
          }
        }
      }
    ],
    "Topic Document Search Results JSON": [
      {
        "json": {
          "output": {
            "process_name": "topic_document_search_results",
            "document_ids": [
              "credit-consumption",
              "70d5b283",
              "04ae7dfa"
            ]
          }
        }
      }
    ],
    "Merge": [
      {
        "json": {
          "output": {
            "process_name": "keyword_document_name_search_results",
            "document_ids": [
              "f69718ea",
              "e445af06",
              "c20218dd"
            ]
          }
        }
      },
      {
        "json": {
          "output": {
            "process_name": "keyword_document_query_name_search_results",
            "document_ids": [
              "7e2736f9",
              "f69718ea",
              "7e2736f9",
              "3bd15a19"
            ]
          }
        }
      },
      {
        "json": {
          "output": {
            "process_name": "keyword_document_query_table_search_results",
            "document_ids": [
              "2fb66a67",
              "2fb66a67",
              "2fb66a67",
              "2fb66a67"
            ]
          }
        }
      },
      {
        "json": {
          "output": {
            "process_name": "topic_document_query_search_results",
            "document_ids": [
              "47d94e3c",
              "47d94e3c",
              "dadcdf3e",
              "dadcdf3e",
              "f7e9dc87",
              "de229002",
              "credit-consumption",
              "de229002",
              "f7e9dc87",
              "47d94e3c"
            ]
          }
        }
      },
      {
        "json": {
          "output": {
            "process_name": "topic_document_search_results",
            "document_ids": [
              "credit-consumption",
              "70d5b283",
              "04ae7dfa"
            ]
          }
        }
      }
    ],
    "Aggregate": [
      {
        "json": {
          "output": [
            {
              "process_name": "keyword_document_name_search_results",
              "document_ids": [
                "f69718ea",
                "e445af06",
                "c20218dd"
              ]
            },
            {
              "process_name": "keyword_document_query_name_search_results",
              "document_ids": [
                "7e2736f9",
                "f69718ea",
                "7e2736f9",
                "3bd15a19"
              ]
            },
            {
              "process_name": "keyword_document_query_table_search_results",
              "document_ids": [
                "2fb66a67",
                "2fb66a67",
                "2fb66a67",
                "2fb66a67"
              ]
            },
            {
              "process_name": "topic_document_query_search_results",
              "document_ids": [
                "47d94e3c",
                "47d94e3c",
                "dadcdf3e",
                "dadcdf3e",
                "f7e9dc87",
                "de229002",
                "credit-consumption",
                "de229002",
                "f7e9dc87",
                "47d94e3c"
              ]
            },
            {
              "process_name": "topic_document_search_results",
              "document_ids": [
                "credit-consumption",
                "70d5b283",
                "04ae7dfa"
              ]
            }
          ]
        }
      }
    ],
    "Process Metadata": [
      {
        "json": {
          "output": {
            "extracted_keywords": [
              "free cribl cloud users",
              "associated email addresses",
              "accounts owned",
              "cloud organization data",
              "user account reporting"
            ],
            "omni_picked_topics": [
              "cloud_orgs_and_billing",
              "cloud_orgs_and_billing",
              "cloud_orgs_and_billing"
            ],
            "keyword_document_name_search_results": [
              "f69718ea",
              "e445af06",
              "c20218dd"
            ],
            "keyword_document_query_name_search_results": [
              "7e2736f9",
              "f69718ea",
              "7e2736f9",
              "3bd15a19"
            ],
            "keyword_document_query_table_search_results": [
              "2fb66a67",
              "2fb66a67",
              "2fb66a67",
              "2fb66a67"
            ],
            "topic_document_query_search_results": [
              "47d94e3c",
              "47d94e3c",
              "dadcdf3e",
              "dadcdf3e",
              "f7e9dc87",
              "de229002",
              "credit-consumption",
              "de229002",
              "f7e9dc87",
              "47d94e3c"
            ],
            "topic_document_search_results": [
              "credit-consumption",
              "70d5b283",
              "04ae7dfa"
            ]
          }
        }
      }
    ],
    "Insert recommended_document_ids with Process Results": [
      {
        "json": {
          "extracted_keywords": "[\"free cribl cloud users\",\"associated email addresses\",\"accounts owned\",\"cloud organization data\",\"user account reporting\"]",
          "omni_picked_topics": "[\"cloud_orgs_and_billing\",\"cloud_orgs_and_billing\",\"cloud_orgs_and_billing\"]",
          "keyword_document_name_search_results": "[\"f69718ea\",\"e445af06\",\"c20218dd\"]",
          "keyword_document_query_name_search_results": "[\"7e2736f9\",\"f69718ea\",\"7e2736f9\",\"3bd15a19\"]",
          "keyword_document_query_table_search_results": "[\"2fb66a67\",\"2fb66a67\",\"2fb66a67\",\"2fb66a67\"]",
          "topic_document_query_search_results": "[\"47d94e3c\",\"47d94e3c\",\"dadcdf3e\",\"dadcdf3e\",\"f7e9dc87\",\"de229002\",\"credit-consumption\",\"de229002\",\"f7e9dc87\",\"47d94e3c\"]",
          "topic_document_search_results": "[\"credit-consumption\",\"70d5b283\",\"04ae7dfa\"]",
          "recommended_document_ids": "[\"2fb66a67\",\"47d94e3c\",\"credit-consumption\"]",
          "recommendation_text": "Hey @nathan_kwok, based on your interest in free Cribl Cloud users and associated email addresses across your cloud orgs, here are some dashboards that might contain what you need:\n <https://cribl.omniapp.co/dashboards/2fb66a67|Product: Copilot Trend Metrics> in <https://cribl.omniapp.co/f/product|Product>\n <https://cribl.omniapp.co/dashboards/47d94e3c|Overview: OEM Metrics> in <https://cribl.omniapp.co/f/revenue|Revenue>\n <https://cribl.omniapp.co/dashboards/credit-consumption|Customer: Cloud Credit Consumption> in <https://cribl.omniapp.co/f/product|Product>"
        }
      }
    ],
    "Merge Recommendation Agent with Process Results": [
      {
        "json": {
          "output": {
            "message": "Hey @nathan_kwok, based on your interest in free Cribl Cloud users and associated email addresses across your cloud orgs, here are some dashboards that might contain what you need:\n <https://cribl.omniapp.co/dashboards/2fb66a67|Product: Copilot Trend Metrics> in <https://cribl.omniapp.co/f/product|Product>\n <https://cribl.omniapp.co/dashboards/47d94e3c|Overview: OEM Metrics> in <https://cribl.omniapp.co/f/revenue|Revenue>\n <https://cribl.omniapp.co/dashboards/credit-consumption|Customer: Cloud Credit Consumption> in <https://cribl.omniapp.co/f/product|Product>",
            "document_ids": [
              "2fb66a67",
              "47d94e3c",
              "credit-consumption"
            ],
            "folder_urls": [
              "https://cribl.omniapp.co/f/product",
              "https://cribl.omniapp.co/f/revenue",
              "https://cribl.omniapp.co/f/product"
            ]
          }
        }
      },
      {
        "json": {
          "output": {
            "extracted_keywords": [
              "free cribl cloud users",
              "associated email addresses",
              "accounts owned",
              "cloud organization data",
              "user account reporting"
            ],
            "omni_picked_topics": [
              "cloud_orgs_and_billing",
              "cloud_orgs_and_billing",
              "cloud_orgs_and_billing"
            ],
            "keyword_document_name_search_results": [
              "f69718ea",
              "e445af06",
              "c20218dd"
            ],
            "keyword_document_query_name_search_results": [
              "7e2736f9",
              "f69718ea",
              "7e2736f9",
              "3bd15a19"
            ],
            "keyword_document_query_table_search_results": [
              "2fb66a67",
              "2fb66a67",
              "2fb66a67",
              "2fb66a67"
            ],
            "topic_document_query_search_results": [
              "47d94e3c",
              "47d94e3c",
              "dadcdf3e",
              "dadcdf3e",
              "f7e9dc87",
              "de229002",
              "credit-consumption",
              "de229002",
              "f7e9dc87",
              "47d94e3c"
            ],
            "topic_document_search_results": [
              "credit-consumption",
              "70d5b283",
              "04ae7dfa"
            ]
          }
        }
      }
    ],
    "Aggregate to Single Object": [
      {
        "json": {
          "output": [
            {
              "message": "Hey @nathan_kwok, based on your interest in free Cribl Cloud users and associated email addresses across your cloud orgs, here are some dashboards that might contain what you need:\n <https://cribl.omniapp.co/dashboards/2fb66a67|Product: Copilot Trend Metrics> in <https://cribl.omniapp.co/f/product|Product>\n <https://cribl.omniapp.co/dashboards/47d94e3c|Overview: OEM Metrics> in <https://cribl.omniapp.co/f/revenue|Revenue>\n <https://cribl.omniapp.co/dashboards/credit-consumption|Customer: Cloud Credit Consumption> in <https://cribl.omniapp.co/f/product|Product>",
              "document_ids": [
                "2fb66a67",
                "47d94e3c",
                "credit-consumption"
              ],
              "folder_urls": [
                "https://cribl.omniapp.co/f/product",
                "https://cribl.omniapp.co/f/revenue",
                "https://cribl.omniapp.co/f/product"
              ]
            },
            {
              "extracted_keywords": [
                "free cribl cloud users",
                "associated email addresses",
                "accounts owned",
                "cloud organization data",
                "user account reporting"
              ],
              "omni_picked_topics": [
                "cloud_orgs_and_billing",
                "cloud_orgs_and_billing",
                "cloud_orgs_and_billing"
              ],
              "keyword_document_name_search_results": [
                "f69718ea",
                "e445af06",
                "c20218dd"
              ],
              "keyword_document_query_name_search_results": [
                "7e2736f9",
                "f69718ea",
                "7e2736f9",
                "3bd15a19"
              ],
              "keyword_document_query_table_search_results": [
                "2fb66a67",
                "2fb66a67",
                "2fb66a67",
                "2fb66a67"
              ],
              "topic_document_query_search_results": [
                "47d94e3c",
                "47d94e3c",
                "dadcdf3e",
                "dadcdf3e",
                "f7e9dc87",
                "de229002",
                "credit-consumption",
                "de229002",
                "f7e9dc87",
                "47d94e3c"
              ],
              "topic_document_search_results": [
                "credit-consumption",
                "70d5b283",
                "04ae7dfa"
              ]
            }
          ]
        }
      }
    ]
  },
  "versionId": "ce0036c2-f796-445d-a543-aef260c9fdf4",
  "triggerCount": 1,
  "shared": [
    {
      "createdAt": "2025-09-26T08:40:31.056Z",
      "updatedAt": "2025-09-26T08:40:31.056Z",
      "role": "workflow:owner",
      "workflowId": "4bqYeLDmprfUiEna",
      "projectId": "w7JTueqTYNrmBYZn"
    }
  ],
  "tags": []
}